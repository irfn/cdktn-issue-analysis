[
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjEzNjc4OQ==",
      "is_bot": false,
      "login": "skorfmann",
      "name": "Sebastian Korfmann"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n* Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n* Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\nRight now, the support of Terraform Modules is quite limited. Besides from only being available via the Terraform Registry, we parse the metadata only. From that metadata, the type information is derived and a Construct class for that Module interface is created. When synthesized, it ends up being treated as a classical Terraform module where Terraform will fetch the actual module source code.\r\n\r\nThere are a few drawbacks to this from my point of view:\r\n\r\n- Special handing is required when parsing output (e.g. see #113)\r\n- Resources in the module are hidden from the `constructs` tree \r\n  - No dynamic changes to these resources (e.g. thinking of tagging aspects)\r\n  - No way of accessing this in unit tests\r\n  - Supportive tooling will likely be limited (e.g. #189)\r\n\r\n#### Proposal \r\n\r\nA Terraform module could be fully transformed into a Construct and enable the use-cases described above. A prerequisite for this to happen would be:\r\n\r\n- A `hcl2cdktf` tool\r\n- Full coverage of the HCL syntax in `cdktf`",
    "comments": [
      {
        "id": "MDEyOklzc3VlQ29tbWVudDY3ODQ4MTkzMg==",
        "author": {
          "login": "thesurlydev"
        },
        "authorAssociation": "NONE",
        "body": "@skorfmann Would this enable using a module such as the following?\r\n```\r\nmodule \"api_gateway_cors_proxy\" {\r\n  source = \"github.com/kyeotic/terraform-api-gateway-cors-module.git?ref=1.1\"\r\n  resource_id = aws_api_gateway_resource.proxy.id\r\n  rest_api_id = aws_api_gateway_rest_api.rest_api.id\r\n}\r\n```\r\nI'm trying to determine which of the issues here. Thanks.\r\n",
        "createdAt": "2020-08-21T20:36:12Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/231#issuecomment-678481932",
        "viewerDidAuthor": false
      },
      {
        "id": "MDEyOklzc3VlQ29tbWVudDY3ODUyOTAzMA==",
        "author": {
          "login": "jsteinich"
        },
        "authorAssociation": "COLLABORATOR",
        "body": "@digitalsanctum I think what you're after is covered by #16.\r\nThis is going farther and converting a terraform module into a construct tree. Writing in code would look very similar to using a terraform module in hcl, but the generated terraform json would actually just contain all of the resources that would have been in the module.",
        "createdAt": "2020-08-21T21:42:07Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/231#issuecomment-678529030",
        "viewerDidAuthor": false
      },
      {
        "id": "MDEyOklzc3VlQ29tbWVudDc5MTQ5MjQxNA==",
        "author": {
          "login": "skorfmann"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "While working on #522 I stumbled upon [this](https://www.terraform.io/docs/language/modules/sources.html#modules-in-package-sub-directories) regarding submodules.\r\n\r\n>Terraform will still extract the entire package to local disk, but will read the module from the subdirectory. As a result, it is safe for a module in a sub-directory of a package to use a local path to another module as long as it is in the same package.\r\n\r\nThat's something to keep in mind here.\r\n\r\n",
        "createdAt": "2021-03-05T15:30:53Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/231#issuecomment-791492414",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5JFBvf",
        "author": {
          "login": "benkeil"
        },
        "authorAssociation": "NONE",
        "body": "Could we add in the meantime a `Testing.toHaveResourceWithProperties` method to test at least the input of a module?",
        "createdAt": "2022-08-24T17:57:23Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/231#issuecomment-1226054623",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5Jrp1l",
        "author": {
          "login": "jsteinich"
        },
        "authorAssociation": "COLLABORATOR",
        "body": "> Could we add in the meantime a `Testing.toHaveResourceWithProperties` method to test at least the input of a module?\r\n\r\nUnfortunately modules aren't compatible with how the tests work as the module contents aren't part of the cdktf output.\r\n\r\nExtracting the information from Terraform would either involve doing everything needed to implement this or some tricky workarounds with reading existing state and planned changes.",
        "createdAt": "2022-09-03T18:44:09Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/231#issuecomment-1236180325",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5Jrp5J",
        "author": {
          "login": "benkeil"
        },
        "authorAssociation": "NONE",
        "body": "But I have the input of the module in the Synth output. That‚Äôs better than nothing. ",
        "createdAt": "2022-09-03T18:45:35Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/231#issuecomment-1236180553",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5JrqME",
        "author": {
          "login": "jsteinich"
        },
        "authorAssociation": "COLLABORATOR",
        "body": "> But I have the input of the module in the Synth output. That‚Äôs better than nothing.\r\n\r\nAh, I'd probably opt for having a `Testing.toHaveModuleWithProperties` to clarify that it is checking something different than resources (could also have a `Testing.toHaveConstructWithProperties` for more general checking). Definitely possible to add something like that.",
        "createdAt": "2022-09-03T18:54:02Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/231#issuecomment-1236181764",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5JrqQr",
        "author": {
          "login": "benkeil"
        },
        "authorAssociation": "NONE",
        "body": "Sounds good. I think about to write an extension for kotest",
        "createdAt": "2022-09-03T18:56:28Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/231#issuecomment-1236182059",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2020-07-22T14:21:09Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMTg1Mzg1NTQ2",
        "name": "feature/convert",
        "description": "",
        "color": "d93f0b"
      },
      {
        "id": "LA_kwDODd1Amc7KX5aA",
        "name": "theme/construct-ecosystem",
        "description": "",
        "color": "5E568C"
      }
    ],
    "milestone": null,
    "number": 231,
    "title": "Transform Modules to Constructs",
    "updatedAt": "2023-06-01T15:22:10Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjQwMjcwNTA1",
      "is_bot": false,
      "login": "JayDoubleu",
      "name": "Jay W"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n* Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n* Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\nIt would be very useful to have an API to interact with terraform cli (not cloud) from cdk.\r\n\r\nExample below:\r\n\r\n```python\r\napp = App()\r\nMyStack(app, \"automate-everything\")\r\nsynth = app.synth()\r\nplan = app.plan(synth)\r\n\r\nif plan.changes is not None:\r\n    if len(plan.changes.module.custom.fruits) > 4:\r\n       app.apply(synth, target='module.custom.fruits')\r\n```\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\n### References\r\nhttps://github.com/hashicorp/terraform-cdk/issues/225 \r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [
      {
        "id": "MDEyOklzc3VlQ29tbWVudDY2MzE3NzYzNw==",
        "author": {
          "login": "skorfmann"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "The general idea of this is quite appealing to me. \r\n\r\nHowever, At the moment, the `cdktf cli` is almost independent from a synthesized Stack. Means, it's really just interfacing with the Terraform CLI and interacting with the generated `plan` and the `stdout` / `stderr` output from it. \r\n\r\nIn the `cdktf cli`, we do have the `plan` at hand , `synth` isn't available as it's just doing a `terraform apply` in the `cdktf.out` directory. Means, as long as it's just about analyzing a plan and dynamically changing cli arguments, this could theoretically work within the current cli concept. However, I don't think this would be part of the `app`, more like some sort of hook in the CLI. Since the cli is just available in Typescript, it'd likely be Typescript code.\r\n\r\nI think a similar concept could work for https://github.com/hashicorp/terraform-cdk/issues/219",
        "createdAt": "2020-07-23T18:59:27Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/237#issuecomment-663177637",
        "viewerDidAuthor": false
      },
      {
        "id": "MDEyOklzc3VlQ29tbWVudDg2MTg1MTUwNQ==",
        "author": {
          "login": "1mamute"
        },
        "authorAssociation": "NONE",
        "body": "Maybe we can use [terraform-exec](https://github.com/hashicorp/terraform-exec) to interact with synthesized outputs from the stack?",
        "createdAt": "2021-06-15T21:39:11Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/237#issuecomment-861851505",
        "viewerDidAuthor": false
      },
      {
        "id": "MDEyOklzc3VlQ29tbWVudDg2MzA0MDQ2NA==",
        "author": {
          "login": "skorfmann"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "> Maybe we can use [terraform-exec](https://github.com/hashicorp/terraform-exec) to interact with synthesized outputs from the stack?\r\n\r\nSince terraform-exec is a go module, it's not the best fit for this project since it's mostly written in Typescript. We sort of built something similar in Typescript.\r\n",
        "createdAt": "2021-06-17T08:26:33Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/237#issuecomment-863040464",
        "viewerDidAuthor": false
      },
      {
        "id": "MDEyOklzc3VlQ29tbWVudDg2MzEyODU0Ng==",
        "author": {
          "login": "1mamute"
        },
        "authorAssociation": "NONE",
        "body": "> > Maybe we can use [terraform-exec](https://github.com/hashicorp/terraform-exec) to interact with synthesized outputs from the stack?\r\n> \r\n> Since terraform-exec is a go module, it's not the best fit for this project since it's mostly written in Typescript. We sort of built something similar in Typescript.\r\n\r\nMind sharing the link or is it not publicly avaiable?",
        "createdAt": "2021-06-17T10:35:26Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/237#issuecomment-863128546",
        "viewerDidAuthor": false
      },
      {
        "id": "MDEyOklzc3VlQ29tbWVudDg2NDUyMzkxNA==",
        "author": {
          "login": "skorfmann"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "Was playing around with this a bit. While it requires the usage of JS / Typescript, it's sort of possible to drive synth and deploy / destroy bypassing the full `cdktf-cli` workflow. It's a bit clunky, but works. Please be aware, that this is using internal APIs of the `cdktf-cli` which might break without prior warning.\r\n\r\n### deploy \r\n\r\n```ts\r\nimport { SynthStack } from 'cdktf-cli/bin/cmds/helper/synth-stack';\r\nimport { TerraformCli } from 'cdktf-cli/bin/cmds/ui/models/terraform-cli';\r\n\r\nconst setup = async () => {\r\n  const stacks = await SynthStack.synth('node stack.js', 'cdktf.test.out');\r\n  const cli = new TerraformCli(stacks[0]);\r\n  await cli.init();\r\n  await cli.deploy('', (chunk: Buffer) => (console.log(chunk.toString('utf-8'))));\r\n}\r\n\r\n(async function() { await setup() } ());\r\n```\r\n\r\n### destroy\r\n\r\n```ts\r\nimport { SynthStack } from 'cdktf-cli/bin/cmds/helper/synth-stack';\r\nimport { TerraformCli } from 'cdktf-cli/bin/cmds/ui/models/terraform-cli';\r\n\r\nconst teardown = async () => {\r\n  const stacks = await SynthStack.synth('node stack.js', 'cdktf.test.out');\r\n  const cli = new TerraformCli(stacks[0]);\r\n  await cli.init();\r\n  await cli.destroy((chunk: Buffer) => (console.log(chunk.toString('utf-8'))));\r\n}\r\n\r\n(async function() { await teardown() } ());\r\n```\r\n\r\nI'm using this right now for driving automated test setups / teardowns. Since this skips generating the plan and is running headless, it's also a bit faster compared to using the `cdktf-cli` directly.\r\n",
        "createdAt": "2021-06-20T09:14:36Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "HEART",
            "users": {
              "totalCount": 13
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/237#issuecomment-864523914",
        "viewerDidAuthor": false
      },
      {
        "id": "MDEyOklzc3VlQ29tbWVudDg2OTIwODMxMw==",
        "author": {
          "login": "drandell"
        },
        "authorAssociation": "NONE",
        "body": "@skorfmann I think this would be a great feature, it would mirror some of the functionality available in pulumi with its API. Is there a potential python approach to your sample? ",
        "createdAt": "2021-06-27T18:45:48Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/237#issuecomment-869208313",
        "viewerDidAuthor": false
      },
      {
        "id": "MDEyOklzc3VlQ29tbWVudDg3MDM2MTU1Ng==",
        "author": {
          "login": "skorfmann"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "> Is there a potential python approach to your sample?\r\n\r\nSince the CLI is written in Typescript only, I don't think there's a similar way to do this right now - except for shelling out und using the cli directly. However, cross language support for programmatic interaction is something we'd like to address - but I can't give you an ETA on that.",
        "createdAt": "2021-06-29T07:50:59Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/237#issuecomment-870361556",
        "viewerDidAuthor": false
      },
      {
        "id": "MDEyOklzc3VlQ29tbWVudDg3NDI5MDkxMA==",
        "author": {
          "login": "drandell"
        },
        "authorAssociation": "NONE",
        "body": "> > Is there a potential python approach to your sample?\r\n> \r\n> Since the CLI is written in Typescript only, I don't think there's a similar way to do this right now - except for shelling out und using the cli directly. However, cross language support for programmatic interaction is something we'd like to address - but I can't give you an ETA on that.\r\n\r\nTook a bit of time, but I managed to play around with JSII and add the necessary files into a local cdktf package, its not clear and I've probably brutalised it somewhat but I've got the following working in python;\r\n\r\n```python\r\ndef main():\r\n    app = App()\r\n    tfStack = MyStack(app, \"python-cdk\", GCP_PROJECT_NAME)\r\n    app.synth()\r\n    stack = SynthesizedStack(**tfStack.get_stack_args())\r\n    cli = TerraformCli(stack=stack)\r\n    print(cli.version())\r\n    # print(cli.init())\r\n    # plan = cli.plan()\r\n    # print(plan)\r\n    # print(cli.deploy())\r\n    # print(cli.destroy())\r\n```\r\nAnd running that produces;\r\n![image](https://user-images.githubusercontent.com/393945/124511366-dcf4d880-ddcd-11eb-8df6-a5aa465a9480.png)\r\n",
        "createdAt": "2021-07-05T19:16:25Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "ROCKET",
            "users": {
              "totalCount": 5
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/237#issuecomment-874290910",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc48uHQ9",
        "author": {
          "login": "kc-dot-io"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "Thanks for these examples @skorfmann! This is my new favorite way to use CDKTF. I'd love to see a more formal API...\r\n\r\nA few things from my experience that would help this...\r\n1) Better error handling with remote runners using try/catch or promise\r\n2) Better API for handing / templating response to stdin/stdout\r\n3) Ideally JSON events with lifecycle hooks would be great\r\n4) API support for multi-stack delpoyments / cross stack references\r\n\r\nLooking forward to seeing this evolve. This is the most excited I've been about IaC in a while.",
        "createdAt": "2022-01-21T17:35:57Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "HEART",
            "users": {
              "totalCount": 6
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/237#issuecomment-1018721341",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc4-WIut",
        "author": {
          "login": "danielloader"
        },
        "authorAssociation": "NONE",
        "body": "Just to add to this issue, though it's not anything other than more justification:\r\nI'm looking to design a SaaS deployment project to deploy a simple Lambda Serverless stack with some auxiliary services, and for simplicity sakes was hoping I could utilise CDKTF in a Lambda function to deploy a new customer, patch/update it or delete a customer (fed off a DynamoDB table with streams for some audit log of infrastructure changes).\r\n\r\nPulumi works with the automation API but hesitant to commit to using it when both AWS CDK, and Terraform CDK are maturing and both offer advantages (already a Terraform Cloud customer at work and cloudformation state in AWS appeals in some scenarios). AWS CDK still doesn't have a programmatic interface, and the demo example from @drandell looks promising - though as cited, you'd want a formalised API before taking this into production.\r\n\r\nIdeally the interface would allow you to run a stack synth, stack deploy and then take the outputs from the resolved deployed stack to do something with (insertion into dynamo/webhooks for notification of deployment and triggering an email etc).",
        "createdAt": "2022-02-19T10:53:53Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/237#issuecomment-1045990317",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc4-WPDa",
        "author": {
          "login": "JayDoubleu"
        },
        "authorAssociation": "NONE",
        "body": "@danielloader I've since fully moved on to pulumi automation API and I couldn't be happier. Not only I can do what you described (and more) but no longer have to deal with burdens of terraform itself ( fighting with provider bugs and new *features that completely change development workflow )\r\n\r\nI took me a while to convince myself to it but now I wouldn't go back even if those features would be implemented and the reason is because I finally realised that I was completely locked in to terraform, same way as many are trying to avoid vendor lock-in's but not realising terraform discretely managed to create another term ... Tooling lock in. \r\n\r\nOne think I did tho in pulumi is making myself completely independant of their cloud APIs ( for state files) but luckily automaton API allows you to do that.",
        "createdAt": "2022-02-19T13:16:56Z",
        "includesCreatedEdit": true,
        "isMinimized": true,
        "minimizedReason": "OFF_TOPIC",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/237#issuecomment-1046016218",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc4-Wdv7",
        "author": {
          "login": "danielloader"
        },
        "authorAssociation": "NONE",
        "body": "@JayDoubleu Sounds good, using Pulumi cloud for state or S3 etc? \r\nI do wonder if it ultimately if it matters what to use, to do the work - The only selling point for CDKTF for me is we're already using Terraform Cloud for state management - and I'd be happy to continue doing so with this functionality in AWS Lambda functions - it's just not formalised into a public API so can't risk it - though I guess the whole CDKTF API isn't formalised yet.",
        "createdAt": "2022-02-19T18:18:41Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/237#issuecomment-1046076411",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc4-We7r",
        "author": {
          "login": "JayDoubleu"
        },
        "authorAssociation": "NONE",
        "body": "> using Pulumi cloud for state or S3 etc?\r\nI don't run any IaC code with third party solutions, I just don't like the idea of third parties having visibility into a state given it's sensitivity regardless of how \"strong\" they security or encryption would be. So yes, the answer is S3/Azure Blob storage.\r\n\r\nMy main selling point for pulumi is \"native\" providers. Meaning if it's out there available as API on Azure or AWS it's automatically available for you to use within automation. While terraform has a layer of providers and I find myself and other teams spending too much time \"maintaining\" and fixing bugs with providers/terraform rather than focusing on actual infrastructure. Also it's often that people are now recruiting the \"terraform\" experts with knowledge on how to fix bugs and work around terraform rather than general expert knowledge about programming/scripting language + infrastructure. With pulumi these problems do go away. In fact you can even build your own \"terraform\" like product with pulumi while you can't do it the other way around.",
        "createdAt": "2022-02-19T18:45:51Z",
        "includesCreatedEdit": true,
        "isMinimized": true,
        "minimizedReason": "OFF_TOPIC",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/237#issuecomment-1046081259",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc4-Zqpa",
        "author": {
          "login": "danielloader"
        },
        "authorAssociation": "NONE",
        "body": "As a follow up, Pulumi is agonisingly slow to resolve changes compared to CDKTF so guess I'll be hoping this \"automation API\" can be formalised soonish.\r\nGood job to Hashicorp.",
        "createdAt": "2022-02-21T14:06:08Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/237#issuecomment-1046915674",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5Vv2fr",
        "author": {
          "login": "irfanjs"
        },
        "authorAssociation": "NONE",
        "body": "Hi All,\r\nwhen can we see this feature release ? Any ETA please ? \r\nwe are seriously looking for API integration , how we can call this synth process (plan, apply and destroy) using sprintBoot ? \r\nwe are developing some JAVA API which will call terraform to deploy the EKS cluster in AWS . \r\nsomething like POST http://localhost/api/eks/create will hit the cdktf synth process and deploy the EKS cluster .\r\n\r\nplease suggest ",
        "createdAt": "2023-02-21T14:43:21Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 3
            }
          },
          {
            "content": "EYES",
            "users": {
              "totalCount": 2
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/237#issuecomment-1438607339",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5nJcsu",
        "author": {
          "login": "anamitra-saikia"
        },
        "authorAssociation": "NONE",
        "body": "Hi all,\r\nIt will be fantastic to have this API feature in Terraform cdk.  Any estimated time for the development of this feature?\r\nAlso @skorfmann the bypass for cdktf-cli you mentioned is exactly what I was looking for but it is applicable for old versions of the cli. Could you show how to achieve the same in the current version of cdktf-cli?",
        "createdAt": "2023-09-22T00:27:12Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/237#issuecomment-1730530094",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5nQDrX",
        "author": {
          "login": "irfanjs"
        },
        "authorAssociation": "NONE",
        "body": "@anamitra-saikia : No workaround yet  and havent implemented .\r\nStill waiting for this feature from Terraform-cdk ",
        "createdAt": "2023-09-23T09:14:33Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/237#issuecomment-1732262615",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2020-07-23T11:03:05Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjUx",
        "name": "size/large",
        "description": "estimated < 1 month",
        "color": "9559B0"
      },
      {
        "id": "LA_kwDODd1Amc7WpEvS",
        "name": "ux/integration",
        "description": "",
        "color": "D670CB"
      },
      {
        "id": "LA_kwDODd1Amc7q-uL1",
        "name": "feature/programmatic-api",
        "description": "",
        "color": "54AAC9"
      }
    ],
    "milestone": null,
    "number": 237,
    "title": "API to interact with terraform cli",
    "updatedAt": "2023-09-23T09:15:58Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjE1MDA5NTIy",
      "is_bot": false,
      "login": "Tirke",
      "name": "Thomas Schersach"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n* Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n* Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### cdktf & Language Versions\r\n\r\n<!--- Please make note of the version you are using for the `hashicorp/terraform-cdk` and language bindings you are using.\r\nIf you are not running the latest version, please upgrade because your issue may have already been fixed. --->\r\n\r\n```\r\ncdktf --version\r\n0.0.13-pre.2f0b966cb25b6dc5066ee1551fdb32ff47a9c0fd\r\n```\r\n\r\n### Affected Resource(s)\r\n\r\n<!--- Please list the affected resources. --->\r\n State and state locks\r\n\r\n\r\n### Expected Behavior\r\n\r\n<!--- What should have happened? --->\r\nA way to escape a leaky abstraction of Terraform, directly with cdk-tf tooling. \r\nI don't see any way to manage a local state directly with the cdktf cli.\r\n\r\n### Actual Behavior\r\n\r\n<!--- What actually happened? --->\r\nI happened to have a state lock because I hard cancelled a deploy. Next deploy failed because of the lock. Manually deleting lock files didn't really work. The CLI didn't suggest any way to resolve the issue (I think Terraform actually helps you resolve locked states because of mistakes). \r\nI'm wondering if your aiming (for the future I know that this is alpha software) only for experienced Terraform devs or if this will be a tool that can fully abstract that it's all Terraform under doing the hard work (like Pulumi does).\r\nI'm really missing state commands like the ones in Terraform.\r\n\r\n### Steps to Reproduce\r\n\r\nHard cancel a deploy (with a local state) and try to deal with the lock.",
    "comments": [
      {
        "id": "MDEyOklzc3VlQ29tbWVudDY3MDY0NTE2MA==",
        "author": {
          "login": "skorfmann"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "> I happened to have a state lock because I hard cancelled a deploy. Next deploy failed because of the lock. Manually deleting lock files didn't really work. The CLI didn't suggest any way to resolve the issue (I think Terraform actually helps you resolve locked states because of mistakes).\r\n\r\nWe're wrapping the Terraform CLI and parse / filter the output of it. Right now we don't handle this particular use case. However, it's totally possible to fallback to the Terraform CLI itself in such cases.  \r\n\r\n> I'm wondering if your aiming (for the future I know that this is alpha software) only for experienced Terraform devs or if this will be a tool that can fully abstract that it's all Terraform under doing the hard work\r\n\r\nThe long term goal is certainly to provide a good level of abstraction, so that it's not mandatory to know how all the internals are working together. For the near future, it certainly helps to have a bit more context - in particular in error scenarios like this. \r\n\r\n> I'm really missing state commands like the ones in Terraform.\r\n\r\nWhile that's not our top priority right now, it'll certainly help to cover common use-cases in this area as well. As this is more like a feature request, would you mind if I relabel it as feature?",
        "createdAt": "2020-08-07T18:14:29Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/294#issuecomment-670645160",
        "viewerDidAuthor": false
      },
      {
        "id": "MDEyOklzc3VlQ29tbWVudDcyMzY3ODk1MA==",
        "author": {
          "login": "gvasquez95"
        },
        "authorAssociation": "NONE",
        "body": "The same happened here, pressed `CTRL-C` while synthesizing and now I got a pending lock:\r\n\r\n```\r\nError: Error locking state: Error acquiring the state lock: ConditionalCheckFailedException: The conditional request failed\r\nLock Info:\r\n  ID:        df88a85e-b426-1d22-bae6-290c6a8c16de\r\n  Path:      terraform-jooycar/state/danlaw-vpc\r\n  Operation: OperationTypePlan\r\n  Who:       gonzalovasquez@ip-192-168-0-102.ec2.internal\r\n  Version:   0.13.4\r\n  Created:   2020-11-08 22:57:29.580825 +0000 UTC\r\n  Info:      \r\n\r\n\r\nTerraform acquires a state lock to protect the state from being written\r\nby multiple users at the same time. Please resolve the issue above and try\r\nagain. For most commands, you can disable locking with the \"-lock=false\"\r\nflag, but this is not recommended.\r\n```",
        "createdAt": "2020-11-08T23:01:37Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/294#issuecomment-723678950",
        "viewerDidAuthor": false
      },
      {
        "id": "MDEyOklzc3VlQ29tbWVudDgyNDgyMDQzNA==",
        "author": {
          "login": "skorfmann"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "I think we should try to gracefully cancel ongoing Terraform operations when `CTRL-C` is pressed. ",
        "createdAt": "2021-04-22T13:00:51Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/294#issuecomment-824820434",
        "viewerDidAuthor": false
      },
      {
        "id": "MDEyOklzc3VlQ29tbWVudDgyNDgzNDM1MA==",
        "author": {
          "login": "skorfmann"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "Related to https://github.com/hashicorp/terraform-cdk/issues/482",
        "createdAt": "2021-04-22T13:18:47Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/294#issuecomment-824834350",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc42vFjq",
        "author": {
          "login": "logusgraphics"
        },
        "authorAssociation": "NONE",
        "body": "I'm completely stuck on this one. Anyone got a workaround?",
        "createdAt": "2021-09-13T15:32:17Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/294#issuecomment-918313194",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc42vJes",
        "author": {
          "login": "logusgraphics"
        },
        "authorAssociation": "NONE",
        "body": "For anyone encountering this issue. I went to the DynamoDB table where the locks are stored and remove the lock manually. That helped me re-run `cdktf deploy <stack>` successfully.",
        "createdAt": "2021-09-13T15:49:35Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "CONFUSED",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/294#issuecomment-918329260",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc44efG5",
        "author": {
          "login": "akazakou-incomm"
        },
        "authorAssociation": "NONE",
        "body": "Hey. I'm using `cdktf plan` in CI and each time it locking state for all CI jobs. Can I disable locking? Seems that `-lock=false` will not work with `cdktf` ?",
        "createdAt": "2021-10-20T10:00:44Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 2
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/294#issuecomment-947515833",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc44hiwW",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "Hi @akazakou-incomm, currently that flag is not supported by the CDKTF CLI. But we're happy to take a [feature request](https://cdk.tf/feature) for that.\r\nA workaround in the meantime would be to do a `cdktf synth` in CI and then go to `cdktf.out/stacks/<your stack>` and invoke `terraform plan -lock=false` there instead.",
        "createdAt": "2021-10-21T07:03:58Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 7
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/294#issuecomment-948317206",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5f5jkK",
        "author": {
          "login": ""
        },
        "authorAssociation": "NONE",
        "body": "I'm using cdktf version 0.17.0, but since I started using GCS as a remote backend, I've been getting `Error acquiring the state lock` frequently.\r\n\r\n```txt\r\nxxx-function  Success! Terraform has updated the lock file.\r\n\r\n              Review the changes in .terraform.lock.hcl and then commit to your\r\n              version control system to retain the new checksums.\r\nxxx-network  Acquiring state lock. This may take a few moments...\r\nxxx-network  ‚ï∑\r\n             ‚îÇ Error: Error acquiring the state lock\r\n```",
        "createdAt": "2023-06-27T07:10:19Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/294#issuecomment-1608923402",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5gAfaL",
        "author": {
          "login": ""
        },
        "authorAssociation": "NONE",
        "body": "None of the methods worked, but I noticed that when deploying 3 or more stacks with the same prefix, an error occurred when retrieving the lock file.\r\n\r\nIf you think about it, if you rely on lock files for deployment integrity, I thought I was going to run into a read consistency problem with object storage, so I was able to solve it by changing the prefix for each stack.",
        "createdAt": "2023-06-28T05:05:23Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/294#issuecomment-1610741387",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc55zBsv",
        "author": {
          "login": "LozanoMatheus"
        },
        "authorAssociation": "NONE",
        "body": "Hey,\r\n\r\nI also got stuck on this and tbh, I think this should be possible to do via CDKTF as well. In my understanding, the locking is a core feature in Terraform and it doesn't make sense to me to have all my code written in whatever language (Go, Typescript, etc), but if something goes wrong and it creates a locking, I'm forced to write a small TF/HCL code just to overcome this.\r\n\r\nTo fix this, I created a file called `empty_provider.tf` (content below) and executed the command `terraform force-unlock <LOCK_ID>`. I think this should be `cdktf force-unlock <LOCK_ID>` instead.\r\n\r\nIt's also good to point out that, it didn't take me much time to get the values below, but if it's an inexperienced person, this will for sure take a lot of time or if the person/team doesn't have control (or even access) to this configuration file.\r\n\r\nFile `empty_provider.tf` content:\r\n```hcl\r\nprovider \"aws\" {\r\n  region  = var.aws_region\r\n  profile = var.aws_profile\r\n}\r\n\r\nterraform {\r\n  required_version = \"~> 1\"\r\n  required_providers {\r\n    aws = \"> 5\"\r\n  }\r\n\r\n  backend \"s3\" {\r\n    profile          = \"<AWS_PROFILE>\"\r\n    region           = \"<AWS_REGION>\"\r\n    bucket           = \"<TERRAFORM_STATE_BUCKET>\"\r\n    dynamodb_table   = \"<TERRAFORM_STATE_DYNAMODB>\"\r\n    encrypt          = true\r\n    key              = \"<TERRAFORM_PATH>/terraform.tfstate\"\r\n    force_path_style = true\r\n  }\r\n}\r\n```",
        "createdAt": "2024-04-08T18:35:06Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/294#issuecomment-2043419439",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc60jV6d",
        "author": {
          "login": "jeremysprofile"
        },
        "authorAssociation": "NONE",
        "body": "FWIW, for me it was surprisingly simple to handle in `terraform`. My error message:\n\n```\ndaily-ats  ‚ï∑\n           ‚îÇ Error: Error acquiring the state lock\n           ‚îÇ\n           ‚îÇ Error message: operation error DynamoDB: PutItem, https response error\n           ‚îÇ StatusCode: 400, RequestID:\n           ‚îÇ SSIJDJ3USP393N8PF22I7B97SRVV4KQNSO5AEMVJF66Q9ASUAAJG,\n           ‚îÇ ConditionalCheckFailedException: The conditional request failed\n           ‚îÇ Lock Info:\n           ‚îÇ   ID:        fcc18b1b-f683-1c17-33ee-01db0880808e\n           ‚îÇ   Path:      XXXXXXXXXXXXXXXXXXXXXX\n           ‚îÇ   Operation: OperationTypeApply\n           ‚îÇ   Who:       XXXXXXXXXXXXXXXXXXXXXX\n           ‚îÇ   Version:   1.6.4\n           ‚îÇ   Created:   2025-05-12 16:38:44.378253 +0000 UTC\n           ‚îÇ Error: Error acquiring the state lock\n...\n```\n\nAll I had to do was \n```\ncd cdktf.out/stacks/daily-ats && \\\n  echo \"yes\" | terraform force-unlock fcc18b1b-f683-1c17-33ee-01db0880808e\n```\n\nto unlock so that I could `cdktf apply daily-ats`\n\n",
        "createdAt": "2025-07-02T20:04:59Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/294#issuecomment-3029163677",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2020-08-07T17:12:37Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwyMjYwNjQ0NDQx",
        "name": "cdktf-cli",
        "description": "",
        "color": "82e5de"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMTM2MjkzOTA4",
        "name": "core-parity",
        "description": "Better experience in Terraform Core than CDKTF",
        "color": "1A80B6"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjEz",
        "name": "size/medium",
        "description": "estimated < 1 week",
        "color": "291E63"
      }
    ],
    "milestone": null,
    "number": 294,
    "title": "State locking and how to handle it",
    "updatedAt": "2025-07-02T20:05:20Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjEwODg2NTk3",
      "is_bot": false,
      "login": "MalloZup",
      "name": "Dario Maiocchi"
    },
    "body": "HI all,\r\n\r\nI was wondering if we have some guideline/doc and requirements for providers maintainer who want to support terraform-cdk for their provider.\r\n\r\nThank you",
    "comments": [
      {
        "id": "MDEyOklzc3VlQ29tbWVudDY3MzM0OTY5OQ==",
        "author": {
          "login": "skorfmann"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "The way the provider bindings are generated are relying on the `terraform providers schema -json` command. As long as this works somehow, it should just work for any given provider. Since we're in an alpha stage, there might occur schema related issues (e.g. #290). We'll try to fix those issues rather quickly though.\r\n\r\nHave you tried it with the [libvirt provider](https://github.com/dmacvicar/terraform-provider-libvirt) and ran into issues?",
        "createdAt": "2020-08-13T08:47:42Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/304#issuecomment-673349699",
        "viewerDidAuthor": false
      },
      {
        "id": "MDEyOklzc3VlQ29tbWVudDY3MzM2MzE5MQ==",
        "author": {
          "login": "MalloZup"
        },
        "authorAssociation": "NONE",
        "body": "@skorfmann many thanks! No I didn't tried it yet , I discovered cdk in these days and was curious to know how to integrate and see if there were any docs that I could follow for future",
        "createdAt": "2020-08-13T09:14:15Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/304#issuecomment-673363191",
        "viewerDidAuthor": false
      },
      {
        "id": "MDEyOklzc3VlQ29tbWVudDY3MzM3MTExMA==",
        "author": {
          "login": "skorfmann"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "> @skorfmann many thanks! No I didn't tried it yet , I discovered cdk in these days and was curious to know how to integrate and see if there were any docs that I could follow for future\r\n\r\nHappy to help you out there, would be awesome to have an example for this scenario.",
        "createdAt": "2020-08-13T09:29:52Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/304#issuecomment-673371110",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2020-08-13T08:01:57Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzgw",
        "name": "documentation",
        "description": "Improvements or additions to documentation",
        "color": "0075ca"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjEz",
        "name": "size/medium",
        "description": "estimated < 1 week",
        "color": "291E63"
      }
    ],
    "milestone": null,
    "number": 304,
    "title": "DOC: is there any API/DOC for providers maintainer to support terraform-cdk?",
    "updatedAt": "2023-06-28T18:29:45Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjM4Njg3NTQ=",
      "is_bot": false,
      "login": "jsteinich",
      "name": "Jon Steinich"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n* Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n* Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\nI'm starting to see two main groups of users:\r\n\r\n1. Those that see and use cdktf as a terraform configuration language generator\r\n2. Those that are looking to expose the full power of terraform through a programming language of their choice\r\n\r\nFor the 1st group, things mostly work as expected. There are a few bugs, not all hcl features are available, and there aren't yet higher level abstractions. This makes sense since cdktf quite literally generates the terraform configuration language json variant.\r\n\r\nThe 2nd group experiences quite a few issues since other than provided information, nothing is actually available at runtime. I think this is what someone without a CDK background or deeper knowledge of cdktf would expect. I also think that it is a completely reasonable expectation. That said, I would be very surprised if the terraform team actually had plans to control the terraform runtime via external languages (think replacing the jsii runtime with terraform).\r\n\r\nAssuming an actual terraform runtime is out of the question (seems like it), then I think we need to look for ways of emulating it:\r\n\r\nOne possible avenue is analyzing the syntax tree of the user code and converting to terraform json. This would basically be a very smart generator (still static configuration). A for loop could get translated into a count or a for each, etc. I have no doubt we could get a few simple cases working, but further support could be a very large and brittle project, not to mention that it would quite likely break down in more complex scenarios.\r\n\r\nHaving access to the multitude of functions built into hcl would go a long ways. These are commonly what are used in hcl to go beyond simple references and make it feel more dynamic. This is also sort of tangential to my main points, but since I brought it up, we should figure out mimicking intrinsic functions from AWS CDK is the way to go, or if having an order of magnitude more functions (+ arithmetic operations) means that a different approach is needed.\r\n\r\nOne of the most common areas that have common up is actually how to access a list (or set, or map, or complex object). We have `Tokens` which partially make that work. They are a bit buggy, so that doesn't help anything, but they are also incomplete (and in some ways never can fully handle possible goals). There's also a special case method for accessing a particular index from a list. Generating full wrapper types that track access and convert to for each loops and count index loops in terraform might get us far enough here. Admittedly, something as simple as printing a value or accessing the length in an integer for loop would still not work. Side note, there's also a bug where computed types don't even generate all of their properties.\r\n\r\nAnother possible route is building custom code to simply call various sdks during run time (synth time) to make information actually available. This really feels like building out functionality that terraform already has though. I can imagine building an intermediate layer that is made up of just data sources and ran through terraform. However, even data sources aren't always that simple. They can have dependencies on resources being built and such so that weren't starting to venture into build terraform outside of terraform in order to call terraform.\r\n\r\nI'd like to look towards AWS CDK for some guidance; however, terraform is by nature more dynamic than cloud formation, so we may need to forge our own path on a lot of this. A lot of thought and effort needs to go into solving these problems, but I'm confident the end result can be something very powerful and extremely useful.\r\n\r\nThis isn't meant to be a spec or a rant; just a brain dump that can hopefully serve as a starting point for some design conversations. I truly want this project to succeed. We just need to ask ourselves these hard questions to push the design forward.\r\n\r\n### References\r\n\r\n- https://github.com/hashicorp/terraform-cdk/issues/423\r\n- https://github.com/hashicorp/terraform-cdk/issues/430\r\n- https://github.com/hashicorp/terraform-cdk/issues/25\r\n- https://github.com/hashicorp/terraform-cdk/issues/288\r\n- https://github.com/hashicorp/terraform-cdk/issues/220\r\n- https://github.com/hashicorp/terraform-cdk/issues/172\r\n- https://github.com/hashicorp/terraform-cdk/issues/42\r\n- https://github.com/hashicorp/terraform-cdk/issues/434\r\n- https://github.com/hashicorp/terraform-cdk/issues/424\r\n- https://github.com/hashicorp/terraform-cdk/issues/374\r\n- https://github.com/hashicorp/terraform-cdk/issues/29\r\n- https://github.com/hashicorp/terraform-cdk/issues/287\r\n- https://github.com/hashicorp/terraform-cdk/issues/256\r\n- https://github.com/aws/jsii/issues/1841\r\n- https://github.com/aws/jsii/issues/1302\r\n- https://github.com/aws/jsii/issues/746\r\n- https://github.com/aws/jsii/issues/1\r\n",
    "comments": [
      {
        "id": "MDEyOklzc3VlQ29tbWVudDczMDM2MzYxNQ==",
        "author": {
          "login": "skorfmann"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "Well, first and foremost cdktf is a generator for HCL compatible JSON and relies on Terraform for applying the configuration. As you correctly stated, making it really dynamic would involve customizing the Terraform runtime. \r\n\r\nBesides from this, a few bugs and other little issues, I think there are three major limitations which we have:\r\n\r\n1. jsii limits Typescript capabilities to a commonly supported feature set across all target languages\r\n2. Synth is a synchronous operation and makes it difficult to use most SDKs for data fetching (in TS / JS at least)\r\n3. Complex operations (loops, functions, etc) aren't abstracted\r\n\r\nI believe all points can be addressed, but need thorough thinking before implementation. \r\n\r\n\r\n",
        "createdAt": "2020-11-19T13:08:24Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/435#issuecomment-730363615",
        "viewerDidAuthor": false
      },
      {
        "id": "MDEyOklzc3VlQ29tbWVudDczMjY0MDM1OQ==",
        "author": {
          "login": "cmclaughlin"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "I'm happy with cdktf as a simple Python to HCL bridge... that's a major improvement for me and I'm very thankful for this project as it is.\r\n\r\nHowever, interacting with Terraform dynamically would be amazing. When I first got started with cdktf, that is what I expected. But it didn't take me long to understand what the constraints are and how to work with them. \r\n\r\nPreviously I experimented with Pulumi, but didn't get very far with it - I couldn't get past a few bugs that I thought were serious. However, their backend design seems really good - I think they wrote some sort of RPC server written in Go that provides an interface to Terraform, so the various client programming languages (Python, Typscript, etc) can interact with Terraform directly at runtime. \r\n\r\n\r\n\r\n",
        "createdAt": "2020-11-24T04:08:12Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/435#issuecomment-732640359",
        "viewerDidAuthor": false
      },
      {
        "id": "MDEyOklzc3VlQ29tbWVudDczNTgxNzc5Nw==",
        "author": {
          "login": "skorfmann"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "> I think they wrote some sort of RPC server written in Go that provides an interface to Terraform, so the various client programming languages (Python, Typscript, etc) can interact with Terraform directly at runtime.\r\n\r\nHaven't looked at this in detail - but my understanding so far was, that they're using the Terraform providers via that [rpc protocol](https://github.com/hashicorp/terraform/tree/master/docs/plugin-protocol) and wrote their own engine. \r\n\r\n",
        "createdAt": "2020-11-30T14:26:35Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/435#issuecomment-735817797",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2020-11-19T03:40:03Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwzMDEzNzM4ODIw",
        "name": "needs-research",
        "description": "",
        "color": "709F22"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      }
    ],
    "milestone": null,
    "number": 435,
    "title": "Making cdktf dynamic",
    "updatedAt": "2021-07-02T19:24:09Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjM4Njg3NTQ=",
      "is_bot": false,
      "login": "jsteinich",
      "name": "Jon Steinich"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n* Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n* Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\nThere have been a couple tickets that have come in that ended up just being an error in upgrading cdktf. The typescript templates have some information about which commands to run, but not really an explanation of the full process. Other templates don't even have that much.\r\n\r\nI'm thinking either a dedicated page or a section within the using the cli page. Possibly linking to it with each version's changelog entry.\r\n\r\nContents to include:\r\n- Updating cdktf-cli / cdktf packages themselves\r\n- Needing to run `cdktf get`\r\n- Updating package/project files to use newer versions of the libraries for other languages\r\n\r\n### References\r\n#468\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5Vajzv",
        "author": {
          "login": "xiehan"
        },
        "authorAssociation": "MEMBER",
        "body": "@jsteinich Do our upgrade guides on https://developer.hashicorp.com/terraform/cdktf/release satisfy this need or is there more you think we should still do here?",
        "createdAt": "2023-02-16T12:38:08Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/526#issuecomment-1433025775",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5Va3Lv",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "@xiehan, I'd still see this as an opportunity to improve, as our upgrade guides usually explain the changes and how to adjust for them, but not how to upgrade `cdktf` itself in the first place in general (e.g. by changing the dependency version, running `npm install`, and optionally re-running `cdktf get`).",
        "createdAt": "2023-02-16T13:41:21Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/526#issuecomment-1433105135",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5VeP0T",
        "author": {
          "login": "jsteinich"
        },
        "authorAssociation": "COLLABORATOR",
        "body": "> @jsteinich Do our upgrade guides on https://developer.hashicorp.com/terraform/cdktf/release satisfy this need or is there more you think we should still do here?\r\n\r\nI agree with everything that @ansgarm stated. The most common issue that I've seen here is updating the cli without updating the cdktf library or vice versa. Re-running `cdktf get` has become less of an issue since there are pre-built providers and fewer breaking changes, but it does still come up.",
        "createdAt": "2023-02-17T02:04:03Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/526#issuecomment-1433992467",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc58Rm_n",
        "author": {
          "login": "zeph"
        },
        "authorAssociation": "NONE",
        "body": "@xiehan I'd really love to be more constructive on detailing what's wrong with the upgrade procedure... but it is the 3rd time in 2years that I pick up a `cdktf` project from a git repo, from colleagues, with an outdated stack. This time too, I'll simply nuke the whole setup and leave it be. I quote how my colleague tried to describe the upgrade process to me:\r\n\r\n> Basically it is try and error. You start with the offocial cli. If this does not work, you try to update manually the deps in the package.json. If this does not work, then you remove package.json, do an init, reinstall all the libs you need so that they  automatically resource their deps from scratch and Then finally you can start changing your Code\r\n> \r\n> The third method is the most sure to work, but the it is the longest too\r\n\r\nThis cannot be, it simply leads to frustration and insane amount of wasted hours of manual attempts of changes\r\n\r\nI really hope such documentation gets improved with a step by step guide for someone that stumbles on project that require nodejs 14.x and related dependencies... that's the picture of the market in my personal bubble (given the low engagement on this ticket, it is probably just my own issue)",
        "createdAt": "2024-04-30T10:56:59Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/526#issuecomment-2084990951",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2021-01-27T13:42:17Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzgw",
        "name": "documentation",
        "description": "Improvements or additions to documentation",
        "color": "0075ca"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4Mjg1",
        "name": "size/small",
        "description": "estimated < 1 day",
        "color": "4671C0"
      }
    ],
    "milestone": null,
    "number": 526,
    "title": "Improve cdktf upgrade documentation.",
    "updatedAt": "2024-04-30T11:38:03Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjEzNjc4OQ==",
      "is_bot": false,
      "login": "skorfmann",
      "name": "Sebastian Korfmann"
    },
    "body": "> Also, would you agree with the assumption that it's good enough to test the provider generation process for all providers to Typescript only? Or would you see a huge benefit in testing all providers in all languages?\r\n\r\nGiven that we have encountered bugs that are language specific (equals in Java AWS, comments in Python Google, etc), I think we need to test at least some of the providers in all languages. Maybe that is just the big 3 cloud providers (examples currently cover that), but maybe it should be the full official provider list.\r\n\r\n> Same question for Linux / Windows.\r\n\r\nI think we need to generate at least one provider in all languages on Windows. Probably doesn't need to be AWS (I imagine a smaller provider would be much quicker).\r\n\r\nI'm not sure what would make sense for module testing. Maybe ones with 500k+ downloads (currently 19).\r\n\r\n_Originally posted by @jsteinich in https://github.com/hashicorp/terraform-cdk/issues/553#issuecomment-777483808_",
    "comments": [
      {
        "id": "MDEyOklzc3VlQ29tbWVudDg0NTE0MDM3MA==",
        "author": {
          "login": "skorfmann"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "When approaching this issue, we should make sure to cleanup these tests as well https://github.com/hashicorp/terraform-cdk/pull/713#discussion_r636019727",
        "createdAt": "2021-05-20T13:49:20Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/558#issuecomment-845140370",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2021-02-11T14:51:32Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwyMjE3NjIyNTkw",
        "name": "modules",
        "description": "",
        "color": "2ffc8f"
      },
      {
        "id": "MDU6TGFiZWwyMjQ2NzM1NDk1",
        "name": "providers",
        "description": "",
        "color": "2bd8cd"
      },
      {
        "id": "MDU6TGFiZWwyNTcwMTY0OTY5",
        "name": "testing",
        "description": "",
        "color": "456cc6"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMzE3NzI2NjM4",
        "name": "tech-debt",
        "description": "",
        "color": "191658"
      }
    ],
    "milestone": null,
    "number": 558,
    "title": "Testing Modules and Providers",
    "updatedAt": "2023-06-02T10:07:16Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjEzNjc4OQ==",
      "is_bot": false,
      "login": "skorfmann",
      "name": "Sebastian Korfmann"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n* Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n* Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\nWe omit the Provider name from resource names. For Data Sources, that's not done. \r\n\r\nExample:\r\n\r\n```ts\r\nimport { SnsTopic } from './.gen/providers/aws/sns-topic';\r\nimport { DataAwsRegion } from './.gen/providers/aws'\r\n```\r\n\r\nShould become\r\n\r\n```ts\r\nimport { SnsTopic } from './.gen/providers/aws/sns-topic';\r\nimport { DataRegion } from './.gen/providers/aws'\r\n```\r\n\r\nAlternatively, we could go in a similar direction as #572 and move data source to their own namespace. Something like:\r\n\r\n```ts\r\nimport { SnsTopic } from './.gen/providers/aws/sns-topic';\r\nimport { DataSources } from './.gen/providers/aws'\r\n\r\nnew DataSources.Region() \r\n```\r\n\r\n\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [
      {
        "id": "MDEyOklzc3VlQ29tbWVudDc4MjEyNTE0OA==",
        "author": {
          "login": "vbudilov"
        },
        "authorAssociation": "NONE",
        "body": "This is great. What's the timeline for it? ",
        "createdAt": "2021-02-19T14:55:23Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/575#issuecomment-782125148",
        "viewerDidAuthor": false
      },
      {
        "id": "MDEyOklzc3VlQ29tbWVudDc4MjQyNTExMg==",
        "author": {
          "login": "jsteinich"
        },
        "authorAssociation": "COLLABORATOR",
        "body": "Definitely a breaking change, but seems like one for the better.\r\n\r\n> Alternatively, we could go in a similar direction as #572 and move data source to their own namespace. Something like:\r\n\r\nNeed to be more specific than just `DataSources` or likely to conflict between providers. #568 also conflicted for data sources within a single provider.",
        "createdAt": "2021-02-19T22:43:35Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/575#issuecomment-782425112",
        "viewerDidAuthor": false
      },
      {
        "id": "MDEyOklzc3VlQ29tbWVudDc4MjY1Nzg4Mg==",
        "author": {
          "login": "skorfmann"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "> Need to be more specific than just `DataSources` or likely to conflict between providers. #568 also conflicted for data sources within a single provider.\r\n\r\nDon't think it would be an issue across multiple providers, but it's certainly is within one provider. Would have to be on service level then. However, then it would likely be better to go with the first approach.",
        "createdAt": "2021-02-20T13:35:03Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/575#issuecomment-782657882",
        "viewerDidAuthor": false
      },
      {
        "id": "MDEyOklzc3VlQ29tbWVudDc4MjY1ODg0Ng==",
        "author": {
          "login": "skorfmann"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "> This is great. What's the timeline for it?\r\n\r\nJust wanted to start the discussion, no immediate plan to implement. ",
        "createdAt": "2021-02-20T13:38:04Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/575#issuecomment-782658846",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2021-02-19T13:40:06Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwyMjQ2NzM1NDk1",
        "name": "providers",
        "description": "",
        "color": "2bd8cd"
      },
      {
        "id": "MDU6TGFiZWwyMjYwNjQ0NDQx",
        "name": "cdktf-cli",
        "description": "",
        "color": "82e5de"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMTM2Mjc5MjMx",
        "name": "ux/configuration",
        "description": "",
        "color": "58FCA0"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjEz",
        "name": "size/medium",
        "description": "estimated < 1 week",
        "color": "291E63"
      }
    ],
    "milestone": null,
    "number": 575,
    "title": "Align Data Source Names with Resource Name Schema",
    "updatedAt": "2023-06-01T16:34:36Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjEzNjc4OQ==",
      "is_bot": false,
      "login": "skorfmann",
      "name": "Sebastian Korfmann"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n* Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n* Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\nEnable users to write custom code for fetching and processing data which gets executed within the Terraform workflow. Here's an [example](https://gist.github.com/skorfmann/e399bbd85be6e5a8a5a021adcb570dd4) which leverages the `external` Terraform provider to run a custom generated script. \r\n\r\nThis likely depends on #648 and the biggest challenge is to make this work across all supported jsii languages. \r\n\r\n\r\n### References\r\n\r\n- https://github.com/hashicorp/terraform-cdk/issues/423",
    "comments": [],
    "createdAt": "2021-04-22T13:10:16Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwyMjI4Mzg3NjY3",
        "name": "cdktf",
        "description": "",
        "color": "fccac4"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjUx",
        "name": "size/large",
        "description": "estimated < 1 month",
        "color": "9559B0"
      },
      {
        "id": "LA_kwDODd1Amc7KjeH8",
        "name": "feature/dynamic-terraform",
        "description": "",
        "color": "8D7D9C"
      },
      {
        "id": "LA_kwDODd1Amc7WpEvS",
        "name": "ux/integration",
        "description": "",
        "color": "D670CB"
      }
    ],
    "milestone": null,
    "number": 660,
    "title": "Custom Data Source",
    "updatedAt": "2022-02-10T16:44:34Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjEzNjc4OQ==",
      "is_bot": false,
      "login": "skorfmann",
      "name": "Sebastian Korfmann"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n* Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n* Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\nIt'd be fantastic to have the option to create custom, stateful resources on the fly. Essentially an `cdktf-adhoc-provider`, which acts as a [Terraform Plugin](https://www.terraform.io/docs/extend/index.html). This should be auto generated from user written code. \r\n\r\n#### Prior Art\r\n\r\nThere is the [https://github.com/lukekaalim/terraform-plugin-node-SDK](https://github.com/lukekaalim/terraform-plugin-node-SDK) project which is doing something like this for nodejs already. While it seems to be more like a proof of concept, their [readme](https://github.com/lukekaalim/terraform-plugin-node-SDK#why-create-plugins) describes the use-cases I have in mind pretty well:\r\n\r\n> Why create Plugins?\r\n> Terraform has a wealth of plugins available to it already created that allow you to manage a vast amount of resources in an interconnected graph, but it doesn't have all of them.\r\n>\r\n>When using terraform, you may wish to:\r\n>\r\n>- Create resources that talk to a proprietary or internal API\r\n>- Create resource for an API that doesn't have a provider yet\r\n>- Manage a resource for an existing provider that doesn't provide certain functionality\r\n>- Disagree with the implementation of an API and want to give yourself greater flexibility\r\n>- Model existing build scripts as declarative structures\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\nThere's also an [example](https://github.com/lukekaalim/terraform-plugin-node-SDK/blob/78d6b3074a59dbb72405aa607e9dbc4c3c909039/examples/example/plugin.js) how their implementation looks like.",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5WKC8h",
        "author": {
          "login": "RichiCoder1"
        },
        "authorAssociation": "NONE",
        "body": "While I think part of the hard part would be creating a maintained plugin framework to simplify custom resources (see below), I was also thinking about how CDKTF might bootstrap these custom \"plugins\".\r\n\r\nIn very abbreviated psudeo form, my thought process was:\r\n* CDKTF, either via `cdktf` or another cli, provides a generic entrypoint like `cdktf plugin-exec` which handles the Go Plugin Handshake as well as standing up a compatible `gRPC` server and loading the plugin implementation.\r\n* CDKTF emits a [special configuration](https://developer.hashicorp.com/terraform/cli/config/config-file#explicit-installation-method-configuration) like:\r\n```hcl\r\nprovider_installation {\r\n  filesystem_mirror {\r\n    path    = \"<output-dir>/plugin/bin/entrypoint\"\r\n    include = [\"terraform-cdk.local/*/*\"]\r\n  }\r\n  direct {\r\n    exclude = [\"terraform-cdk.local/*/*\"]\r\n  }\r\n}\r\n```\r\n* CDKTF then dynamically loads/runs the plugin implementation as defined in code like:\r\n```typescript\r\nimport { App, Stack } from \"cdktf\";\r\nimport { CustomProvider, CustomResource, Handler } from \"cdktf/custom_resource\";\r\n\r\n/* ... some code ... */\r\n\tconst provider = new CustomProvider(this, \"MyProvider\", {\r\n\t   // Gets translated into the entrypoint defined above as appropraite\r\n       handler: Handler.fromNodejs(path.join(__dirname, \"src/index.js\")),\r\n    });\r\n    new CustomResource(this, \"MyResource\", {\r\n\t   provider,\r\n       // CDKTF can probably handle auto-prefixing resoruces\"\r\n       resource: \"my_resource\",\r\n       properties: /* my properties */,\r\n    });\r\n/* ... more code ... */\r\n```\r\n\r\nThe hard part off course is after. Creating NodeJS plugins is one thing, creating plugins that will work in any of CDKTF's supported runtimes is another matter. CloudFormation and the AWS CDK supports this via Lambda's runtime support and well-defined event model but it's not so simple with local execution.\r\n\r\nA possibility is a JSII provided meta-framework that effectively duplicates https://github.com/hashicorp/terraform-plugin-framework via JSII, but you still have to solve for the communication layer between Terraform and the plugin without leaking too much to the consumer. I'm not sure there's a reasonable low effort way to support this in other language and an MVP might just be to implement Node-based custom resources and punt on JSII-based ones.",
        "createdAt": "2023-02-26T21:38:34Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/661#issuecomment-1445474081",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2021-04-22T13:59:15Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwyMjI4Mzg3NjY3",
        "name": "cdktf",
        "description": "",
        "color": "fccac4"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjUx",
        "name": "size/large",
        "description": "estimated < 1 month",
        "color": "9559B0"
      },
      {
        "id": "LA_kwDODd1Amc7KjeH8",
        "name": "feature/dynamic-terraform",
        "description": "",
        "color": "8D7D9C"
      }
    ],
    "milestone": null,
    "number": 661,
    "title": "Custom Resources",
    "updatedAt": "2023-02-26T21:38:49Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjEzNjc4OQ==",
      "is_bot": false,
      "login": "skorfmann",
      "name": "Sebastian Korfmann"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n* Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n* Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\nIt'd be great if we were able to use hooks for the various lifecycles of the `cdktf cli`. I'm thinking about something like \r\n\r\n- [before|after]Synth\r\n- [before|after]Diff\r\n- [before|after]Deploy\r\n- [before|after]Destroy\r\n\r\nI could see this becoming useful, if we'd want to build certain features in a pluggable way and at the same time enabling users to build their own hooks / plugins.\r\n\r\nOne slightly adapted example from this [issue](https://github.com/hashicorp/terraform-cdk/issues/237):\r\n\r\n```ts\r\nconst app = new App()\r\nconst stack = new MyStack(app, \"automate-everything\")\r\n\r\nstack.on('afterDiff', (plan, executor) => {\r\n  if (plan.changes && plan.changes.module.custom.fruits > 4) {\r\n    executor.addTarget('module.custom.fruits')\r\n  }\r\n})\r\n```\r\n\r\nOr when thinking about [creating](https://github.com/hashicorp/terraform-cdk/issues/670) Terraform Cloud workspaces, perhaps something like this in more global fashion could work:\r\n\r\n```ts\r\nconst allBackends(TerraformBackend): TerraformBackend[] {\r\n  const backends: TerraformBackend[] = [];\r\n\r\n  const visit = (node: IConstruct) => {\r\n    if (node instanceof TerraformBackend) {\r\n      backends.push(node)\r\n    }\r\n\r\n    for (const child of Node.of(node).children) {\r\n      visit(child);\r\n    }\r\n  }\r\n\r\n  visit(app)\r\n\r\n  return backends\r\n}\r\n\r\nexport beforeSynth = (app) => {\r\n  const backends = allBackends(app)\r\n\r\n  for (const backend of backends) {\r\n    // make sure backend exists\r\n  }\r\n}\r\n\r\n```\r\n\r\nAll of this above is pseudo code and are just rough ideas. It would only work in the context of the `cdktf cli` being used. However, I think this could be quite helpful for us and our users.\r\n\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n\r\n- https://github.com/hashicorp/terraform-cdk/issues/670\r\n- https://github.com/hashicorp/terraform-cdk/issues/237\r\n",
    "comments": [
      {
        "id": "MDEyOklzc3VlQ29tbWVudDgzMjY4Njk1NA==",
        "author": {
          "login": "jsteinich"
        },
        "authorAssociation": "COLLABORATOR",
        "body": "> It would only work in the context of the `cdktf cli` being used\r\n\r\nI understand the simplicity of routing through the cli; however, pieces that only work through the cli do add friction; particularly in languages where it is expected to just be able to run from your ide without setting up anything special.",
        "createdAt": "2021-05-05T13:27:56Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/682#issuecomment-832686954",
        "viewerDidAuthor": false
      },
      {
        "id": "MDEyOklzc3VlQ29tbWVudDgzMjcwMjI0MA==",
        "author": {
          "login": "skorfmann"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "> > It would only work in the context of the `cdktf cli` being used\r\n> \r\n> I understand the simplicity of routing through the cli; however, pieces that only work through the cli do add friction; particularly in languages where it is expected to just be able to run from your ide without setting up anything special.\r\n\r\nI don't think we can make this work as part of the Terraform CLI, so I think depending on the `cdktf cli` is likely the only option here - or do you have another idea?",
        "createdAt": "2021-05-05T13:48:31Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/682#issuecomment-832702240",
        "viewerDidAuthor": false
      },
      {
        "id": "MDEyOklzc3VlQ29tbWVudDgzMjcxMDE5NQ==",
        "author": {
          "login": "jsteinich"
        },
        "authorAssociation": "COLLABORATOR",
        "body": "> I don't think we can make this work as part of the Terraform CLI, so I think depending on the `cdktf cli` is likely the only option here - or do you have another idea?\r\n\r\nApologies. That was more of a user reaction rather than thinking it through. #408 really covers the only part that makes sense in the current context. #237 is also interesting, but that would probably exist on a layer above / side of the cli.",
        "createdAt": "2021-05-05T13:58:37Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/682#issuecomment-832710195",
        "viewerDidAuthor": false
      },
      {
        "id": "MDEyOklzc3VlQ29tbWVudDg3MDkzMjQ0Mg==",
        "author": {
          "login": "matschaffer"
        },
        "authorAssociation": "NONE",
        "body": "I think if I needed to run the hook directly I'd opt to move the operations into a library and keep the hook as just something like:\r\n\r\n```\r\nimport * as hooks from './hooks';\r\nstack.on('afterDiff', hooks.afterDiff);\r\n```\r\n\r\nThat way I could use jest or something to run/validate hook assumptions outside of the cdktf cli.",
        "createdAt": "2021-06-29T21:30:29Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/682#issuecomment-870932442",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc49Z2py",
        "author": {
          "login": "rirze"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "I'd like to bring up another benefit of this approach-- this could enable dynamic importing of Terraform resources from code. It would be similar to how Pulumi works, where you could specify a `import` parameter into the resource and the first `apply` will generate the import statements necessary. \r\n\r\nHowever, it would involve removing the import parameter from the code after one successful run. \r\n\r\nI imagine this function running `pre-deploy`. ",
        "createdAt": "2022-02-04T17:15:14Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/682#issuecomment-1030187634",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5NiISH",
        "author": {
          "login": "eahrend"
        },
        "authorAssociation": "NONE",
        "body": "Hey,\r\n\r\nSo, this would actually be super useful at the construct level. For example, we want to spin up a new K8S cluster and put a vendor's pods on said cluster. Unfortunately the vendor doesn't have a terraform provider, and we need to communicate with the API to generate a secret in order to deploy those pods, however the vendor keeps a record of this secret and we'd like to revoke that secret after we destroy said cluster and remove the vendor's pods from our cluster.\r\n\r\nFor example, I'd like to be able to do this:\r\n```GO\r\npackage main\r\n\r\n// copying from an example in the CDKTF tutorial page.\r\n\r\nimport (\r\n    kubernetes \"github.com/hashicorp/terraform-cdk/examples/go/documentation/generated/hashicorp/kubernetes/provider\"\r\n    // psuedo-code for this, not sure where this would go\r\n    helm \"github.com/hashicorp/terraform-cdk/examples/go/documentation/generated/hashicorp/kubernetes/helm\"\r\n    \"github.com/hashicorp/terraform-cdk/examples/go/documentation/myconstructs\"\r\n    \"github.com/aws/constructs-go/constructs/v10\"\r\n    \"github.com/aws/jsii-runtime-go\"\r\n    \"github.com/hashicorp/terraform-cdk-go/cdktf\"\r\n\r\n    // placeholder for library used to interact with the vendor's API\r\n    \"github.com/eahrend/vendor\"\r\n\r\n    \"os\"\r\n    \"path\"\r\n)\r\n\r\nfunc NewExampleCdktfDocumentationStack(scope constructs.Construct, name string) cdktf.TerraformStack {\r\n    stack := cdktf.NewTerraformStack(scope, &name)\r\n\r\n    cwd, _ := os.Getwd()\r\n\r\n    kubernetes.NewKubernetesProvider(stack, jsii.String(\"kind\"), &kubernetes.KubernetesProviderConfig{\r\n        ConfigPath: jsii.String(path.Join(cwd, \"kubeconfig.yaml\")),\r\n    })\r\n    // instantiating a new vendor client to get the token\r\n    vendorClient, _ := vendor.NewClient(\"some configuration options\")\r\n    vendorToken, _ := vendorClient.GetToken()\r\n    myconstructs.NewKubernetesWebAppDeployment(stack, \"deployment\", map[string]interface{}{\r\n        \"image\":       jsii.String(\"nginx:latest\"),\r\n        \"replicas\":    jsii.Number(2),\r\n        \"app\":         jsii.String(\"myapp\"),\r\n        \"component\":   jsii.String(\"frontend\"),\r\n        \"environment\": jsii.String(\"dev\"),\r\n        \"token\": jsii.String(vendorToken),\r\n    })\r\n    myconstructs.OnDelete(revokeToken(vendorToken))\r\n\r\n    return stack\r\n}\r\n\r\n\r\n// here we're revoking the token from the vendor's API\r\nfunc revokeToken(vendorToken string) error {\r\n    vendorClient, _ := vendor.NewClient(\"some configuration options\")\r\n    vendorClient.RevokeToken(vendorToken)\r\n}\r\n\r\nfunc main() {\r\n    app := cdktf.NewApp(nil)\r\n\r\n    NewExampleCdktfDocumentationStack(app, \"demo\")\r\n\r\n    app.Synth()\r\n}\r\n\r\n```",
        "createdAt": "2022-11-02T16:11:13Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 4
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/682#issuecomment-1300792455",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5XB1I8",
        "author": {
          "login": "ntrp"
        },
        "authorAssociation": "NONE",
        "body": "This would be useful also in case we need to open a tunnel to access the resources, the tunnel init code could be in the before hook and the tunnel shutdown code in the after hook.\r\n\r\nOne example: Open a SSM port forwarding to RDS before refreshing or applying postgresql resources via the postgres provider",
        "createdAt": "2023-03-08T12:42:44Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/682#issuecomment-1460097596",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2021-05-04T08:16:23Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjEz",
        "name": "size/medium",
        "description": "estimated < 1 week",
        "color": "291E63"
      },
      {
        "id": "LA_kwDODd1Amc7WpEvS",
        "name": "ux/integration",
        "description": "",
        "color": "D670CB"
      },
      {
        "id": "LA_kwDODd1Amc7q-uL1",
        "name": "feature/programmatic-api",
        "description": "",
        "color": "54AAC9"
      }
    ],
    "milestone": null,
    "number": 682,
    "title": "Lifecycle Hooks",
    "updatedAt": "2023-03-08T12:42:44Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjEzMzcwNDY=",
      "is_bot": false,
      "login": "DanielMSchmidt",
      "name": "Daniel Schmidt"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n* Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n* Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\nCurrently init defaults to a cloud backend if the user has a cloud token. You can work around by using the `--local` flag, but it was quite surprising to me that I could not select this like I could when I hadn't logged in yet. I'd prefer a `--cloud` option and a selection like as if no token is set, so that the workflow stays the same.\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [
      {
        "id": "MDEyOklzc3VlQ29tbWVudDg0MjMxMzI0Mw==",
        "author": {
          "login": "skorfmann"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "> I'd prefer a `--cloud` option and a selection like as if no token is set, so that the workflow stays the same.\r\n\r\nYou mean some sort of dialog in the init workflow which asks for `local` / `cloud` ?\r\n\r\n",
        "createdAt": "2021-05-17T13:12:43Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/694#issuecomment-842313243",
        "viewerDidAuthor": false
      },
      {
        "id": "MDEyOklzc3VlQ29tbWVudDg0MjMxNzU0OQ==",
        "author": {
          "login": "DanielMSchmidt"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "> You mean some sort of dialog in the init workflow which asks for local / cloud?\r\n\r\nExactly, there seems to be one that exists already when no terraform cloud credentials exist in the system",
        "createdAt": "2021-05-17T13:18:48Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/694#issuecomment-842317549",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2021-05-07T17:32:32Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMTM2MjgxMDY3",
        "name": "ux/cli",
        "description": "",
        "color": "40FE53"
      },
      {
        "id": "LA_kwDODd1Amc7x0kYM",
        "name": "feature/init",
        "description": "cdktf init related features",
        "color": "C1E24A"
      }
    ],
    "milestone": null,
    "number": 694,
    "title": "Init: allow users to choose between local and cloud when not setting a cloud ",
    "updatedAt": "2023-06-02T09:04:35Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjEwNDU5Nzcy",
      "is_bot": false,
      "login": "giraffesyo",
      "name": "Michael McQuade"
    },
    "body": "One of the powerful uses of TypeScript is that you can limit values to only certain values. As an example with strings you can do something like:\r\n\r\n```typescript\r\ninterface IApiGatewayV2APIOptions {\r\nprotocol_type: \"HTTP\" | \"WEBSOCKET\"\r\napi_key_selection_expression? : \"$context.authorizer.usageIdentifierKey\" | \"$request.header.x-api-key\"\r\n...\r\n}\r\n```\r\nThen when you are using that interface, you get nice autocomplete in your IDE because it knows what strings are allowed for `protocol_type` and `api_key_selection_expression`. \r\n\r\nIt looks like currently the provider schema is generated from the [golang files](https://github.com/hashicorp/terraform-provider-aws/blob/main/aws/data_source_aws_apigatewayv2_api.go) in the terraform provider project, so it might not be a very easy task However, if someone smarter than me can come up with a way to do this then I think it would be a pretty useful feature and would be willing to try to help implement it.",
    "comments": [
      {
        "id": "MDEyOklzc3VlQ29tbWVudDg0MzE0MjI5MQ==",
        "author": {
          "login": "jsteinich"
        },
        "authorAssociation": "COLLABORATOR",
        "body": "Ideally Terraform would publish this information in the provider schema. However, it looks like this is managed with a validate function which would likely be tricky to determine simple rules like this vs more complex validations. Perhaps the work being done for https://github.com/hashicorp/terraform-provider-aws/issues/14601 could make it feasible within Terraform.",
        "createdAt": "2021-05-18T12:49:15Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/707#issuecomment-843142291",
        "viewerDidAuthor": false
      },
      {
        "id": "MDEyOklzc3VlQ29tbWVudDg0NDkwMDQ2NA==",
        "author": {
          "login": "skorfmann"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "Trying to parse the provider docs might also be an option. This will likely include a few custom tweaks, though.",
        "createdAt": "2021-05-20T09:18:03Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/707#issuecomment-844900464",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2021-05-16T21:45:06Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwzMDEzNzM4ODIw",
        "name": "needs-research",
        "description": "",
        "color": "709F22"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjUx",
        "name": "size/large",
        "description": "estimated < 1 month",
        "color": "9559B0"
      }
    ],
    "milestone": null,
    "number": 707,
    "title": "Providers should know \"allowed\" values where possible",
    "updatedAt": "2021-11-30T12:24:38Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjEzMzcwNDY=",
      "is_bot": false,
      "login": "DanielMSchmidt",
      "name": "Daniel Schmidt"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n* Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n* Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\nIn #648 we introduce assets as a construct. To make the usage a little nicer and easier we could introduce a helper function for the most common usecase, using relative files:\r\n\r\n```ts\r\nclass MyStack extends TerraformStack {\r\n  constructor(scope: Construct, name: string) {\r\n    super(scope, name);\r\n\r\n    new AwsProvider(this, \"provider\", {\r\n      region: \"us-west-2\",\r\n    });\r\n\r\n    const bucket = new S3Bucket(this, \"bucket\", {\r\n      bucket: \"demo\",\r\n    });\r\n\r\n    new S3BucketObject(this, \"lambda-archive\", {\r\n      bucket: bucket.bucket,\r\n      key: \"lambda.zip\",\r\n      source: this.relativeFile(\"../lambda.zip\"),\r\n    });\r\n  }\r\n}\r\n``` \r\n\r\nAn implementation could look like\r\n\r\n```ts\r\npublic function relativeFile(p: string) {\r\n  const asset = new TerraformAsset(this, p, {\r\n    path: path.resolve(__dirname, p) \r\n  });\r\n\r\n  return asset.path;\r\n}\r\n```\r\n\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [
      {
        "id": "MDEyOklzc3VlQ29tbWVudDg0NDkwMzMxOQ==",
        "author": {
          "login": "skorfmann"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "I like this in general. Why do you think it should live in `TerraformStack` and not be an individual helper function / construct?",
        "createdAt": "2021-05-20T09:21:16Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/708#issuecomment-844903319",
        "viewerDidAuthor": false
      },
      {
        "id": "MDEyOklzc3VlQ29tbWVudDg0NDkzMzIwMA==",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "A reference to the TerraformStack is required when creating an Asset behind the scenes. So the user doesn't need to explicitly pass the stack.",
        "createdAt": "2021-05-20T09:54:09Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/708#issuecomment-844933200",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2021-05-17T11:13:29Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMTM2Mjc5MjMx",
        "name": "ux/configuration",
        "description": "",
        "color": "58FCA0"
      }
    ],
    "milestone": null,
    "number": 708,
    "title": "Helper for using local files",
    "updatedAt": "2021-11-29T15:32:44Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjExMTIwNTY=",
      "is_bot": false,
      "login": "ansgarm",
      "name": "Ansgar Mertens"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n* Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n* Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\nImports for generated providers in Go are currently nested according to their namespace.\r\nSo, for example:\r\n```\r\n\"cdk.tf/go/stack/generated/hashicorp/random\"\r\n```\r\nHowever, this only happens if the namespace is explicitly passed in `cdktf.json`:\r\n```\r\n\"terraformProviders\": [\"hashicorp/random@~> 3.1.0\"],\r\n```\r\nAs the shorthand without the prefix `hashicorp/` is also allowed for official providers, this:\r\n```\r\n\"terraformProviders\": [\"random@~> 3.1.0\"],\r\n```\r\nshould also result in the same import to work.\r\n\r\nBut, as the implementation currently does not fall back to `hashicorp` for an empty namespace, it results in generated code that needs to be imported from another directory:\r\n```\r\n\"cdk.tf/go/stack/generated/random\"\r\n```\r\nIt should always have the same import name.\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n* This is a follow-up for https://github.com/hashicorp/terraform-cdk/pull/727\r\n",
    "comments": [
      {
        "id": "MDEyOklzc3VlQ29tbWVudDg3MzE5NjI3Nw==",
        "author": {
          "login": "danieldreier"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "This is a good pragmatic approach, but we should also print a warning or informational message when we do this. There is a long-term effort across Core and the registry to move away from implicit hashicorp namespacing, so we should help nudge people in the right direction if they omit the `hashicorp` namespace.",
        "createdAt": "2021-07-02T18:49:53Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/728#issuecomment-873196277",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5LmBlV",
        "author": {
          "login": "mutahhir"
        },
        "authorAssociation": "MEMBER",
        "body": "After #2146 `hashicorp` will be `cdktf` now, but Daniel's point stands regarding informational message.",
        "createdAt": "2022-10-05T10:40:12Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/728#issuecomment-1268259157",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2021-05-26T12:44:38Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwyMjQ2NzM1NDk1",
        "name": "providers",
        "description": "",
        "color": "2bd8cd"
      },
      {
        "id": "MDU6TGFiZWwzMDMwODE1NTQy",
        "name": "language/golang",
        "description": "",
        "color": "22ED90"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMTM2MjkzOTA4",
        "name": "core-parity",
        "description": "Better experience in Terraform Core than CDKTF",
        "color": "1A80B6"
      }
    ],
    "milestone": null,
    "number": 728,
    "title": "fallback to hashicorp namespace if none is passed in go provider generation",
    "updatedAt": "2022-10-05T10:40:12Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjExMTIwNTY=",
      "is_bot": false,
      "login": "ansgarm",
      "name": "Ansgar Mertens"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n* Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n* Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\nI recently provisioned a CloudFront Distribution with a single origin which at first was a S3 bucket but than changed to a S3 bucket website endpoint. I had to `terraform taint` the resource to be able to replace it.  \r\nIt would be nice if that command would be made available via the cdktf-cli so I don't have to manually supply all the required args to the Terraform CLI like this:\r\n`terraform -state=../../../terraform.frontend-dev.tfstate taint aws_cloudfront_distribution.frontend_cf_6C82FC12`\r\n\r\nThe [docs](https://www.terraform.io/docs/cli/commands/taint.html) mention `taint` as deprecated (although it'll still be supported in all Terraform 1.x version). So maybe supporting the new (as of Terraform v0.15.2) `-replace` option would also be fine (if not both).\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [],
    "createdAt": "2021-06-11T08:42:44Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwyMjYwNjQ0NDQx",
        "name": "cdktf-cli",
        "description": "",
        "color": "82e5de"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMTM2MjkzOTA4",
        "name": "core-parity",
        "description": "Better experience in Terraform Core than CDKTF",
        "color": "1A80B6"
      }
    ],
    "milestone": null,
    "number": 775,
    "title": "Support tainting a resource (or new -replace option)",
    "updatedAt": "2021-07-02T19:02:36Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjEzNjc4OQ==",
      "is_bot": false,
      "login": "skorfmann",
      "name": "Sebastian Korfmann"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n* Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n* Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\nThere are scenarios, where a custom construct includes a few resources and one wants to define a dependency on that custom construct. E.g. when dealing with the [AWS ApiGateway](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/apigatewayv2_deployment):\r\n\r\n![Screenshot 2021-06-18 at 13 00 37](https://user-images.githubusercontent.com/136789/122551591-7a61b580-d035-11eb-86c6-37b319f3fda7.png)\r\n\r\n\r\nConstructs have the concept of dependencies. We could use this, to add explicit Terraform `depends_on`:\r\n\r\n```ts\r\n// ApiRoute contains a handful of resources\r\nconst route = new ApiRoute(this, 'route', {\r\n  api,\r\n  route: 'POST /foo/bar/{baz}',\r\n  authorizer: new NodejsFunction(this, 'auth', {\r\n    path: path.join(__dirname, 'function', 'authorizer', 'index.ts')\r\n  })\r\n})\r\n\r\nconst deployment = new aws.Apigatewayv2Deployment(this, 'deployment', {\r\n  apiId: api.id,\r\n  description: 'some deployment'\r\n})\r\n\r\nNode.of(route).addDependency(deployment)\r\n```\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [
      {
        "id": "MDEyOklzc3VlQ29tbWVudDg2NDAyNTc1OA==",
        "author": {
          "login": "jsteinich"
        },
        "authorAssociation": "COLLABORATOR",
        "body": "Would that add `depends_on` to every resource within the custom construct?",
        "createdAt": "2021-06-18T13:08:39Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/785#issuecomment-864025758",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5m1qdn",
        "author": {
          "login": "skorfmann"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "> Would that add `depends_on` to every resource within the custom construct?\r\n\r\nYes, I think that would be the desired outcome. Would be nice if that was supported without having to create an Aspect. However, saw that a similar issue (https://github.com/hashicorp/terraform-cdk/issues/2727) got closed. So, I'm wondering if that's something where contributions would be accepted? /cc @DanielMSchmidt Asking since there's a similar story in Wing which could use this :) https://github.com/winglang/wing/issues/3225\r\n\r\n",
        "createdAt": "2023-09-19T11:45:47Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/785#issuecomment-1725343591",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5m19vr",
        "author": {
          "login": "DanielMSchmidt"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "I think we would accept contributions üëç ",
        "createdAt": "2023-09-19T12:32:20Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/785#issuecomment-1725422571",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2021-06-18T11:08:48Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      }
    ],
    "milestone": null,
    "number": 785,
    "title": "Add Dependency on Custom Construct",
    "updatedAt": "2023-09-19T12:32:20Z"
  },
  {
    "assignees": [
      {
        "id": "MDQ6VXNlcjM4Njg3NTQ=",
        "login": "jsteinich",
        "name": "Jon Steinich",
        "databaseId": 0
      }
    ],
    "author": {
      "id": "MDQ6VXNlcjM4Njg3NTQ=",
      "is_bot": false,
      "login": "jsteinich",
      "name": "Jon Steinich"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n* Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n* Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\nWe should document the differences between `cdktf synth` vs running application directly and then eliminate differences where it makes sense.\r\nStarting list of differences:\r\n\r\n- Feature flags aren't applied when running app directly. This impacts the naming of resources. I don't have a good reason for the discrepancy.\r\n- Terraform Cloud automation. There's quite a bit to make using Terraform Cloud easier. Probably best to just leave alone\r\n- #682 proposes adding hooks which would be cli only\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [
      {
        "id": "MDEyOklzc3VlQ29tbWVudDg3NTU2MjI4OQ==",
        "author": {
          "login": "onitake"
        },
        "authorAssociation": "NONE",
        "body": "For the use case of writing a cdktf script that generates Terraform code, it looks like the CLI is not needed.\r\nI haven't used feature flags so far, so the output from cdktf-cli and running scripts directly has been the same for me.\r\n\r\nI'm processing the generated JSON with Terraform afterwards. cdktf still requires Terraform to do the grunt work too, so the added benefit is somewhat limited.\r\n\r\nIt's understandable that more advanced features, such as Terraform Cloud integration, wouldn't work, but I think it would make sense to support the basic use case described above as well.\r\n\r\nComparison with other IaC toolkits:\r\n* Pulumi: CLI required, plus either running agent or state storage required\r\n* AWS CDK: CLI required, plus CloudFormation as deployment infrastructure required. Although, there's a similar discussion here: https://github.com/aws/aws-cdk-rfcs/issues/300",
        "createdAt": "2021-07-07T12:29:27Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/798#issuecomment-875562289",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc40kMLU",
        "author": {
          "login": "skorfmann"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "> * Feature flags aren't applied when running app directly. This impacts the naming of resources. I don't have a good reason for the discrepancy.\r\n\r\nThis just bit me hard and essentially destroyed an entire stack with lots of stuff requiring manual fixes now. That's really something we'll have to address.",
        "createdAt": "2021-07-17T13:48:53Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/798#issuecomment-881902292",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc48C3D_",
        "author": {
          "login": "vitoravancini"
        },
        "authorAssociation": "NONE",
        "body": "> > * Feature flags aren't applied when running app directly. This impacts the naming of resources. I don't have a good reason for the discrepancy.\r\n> \r\n> This just bit me hard and essentially destroyed an entire stack with lots of stuff requiring manual fixes now. That's really something we'll have to address.\r\n\r\nIs there any workaround for this? I was developing my app using 'cdktf synth' and wrote quite a large infrasctructure with it, now i'm trying to run the app and I think i'm hitting the situation youre describing.\r\n\r\nthe modules names changed from: \r\n`module.quero2pay-dataplatform-eks-eks-cluster.module.node_groups.aws_launch_template.workers[\"main\"]`\r\nto `module.baseinfrastructurestack_quero2paydataplatformeksekscluster_F8C7987B.module.node_groups.aws_launch_template.workers[\"main\"]`\r\n\r\nNot sure it's the same situation but it looks like it.\r\n\r\nthank you!",
        "createdAt": "2022-01-07T12:50:07Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/798#issuecomment-1007382783",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc48DG1D",
        "author": {
          "login": "jsteinich"
        },
        "authorAssociation": "COLLABORATOR",
        "body": "> Is there any workaround for this? I was developing my app using 'cdktf synth' and wrote quite a large infrasctructure with it, now i'm trying to run the app and I think i'm hitting the situation youre describing.\r\n\r\nYou could try setting the `CDKTF_CONTEXT_JSON` environment variable to a json string of your `cdktf.json` file.",
        "createdAt": "2022-01-07T14:27:42Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/798#issuecomment-1007447363",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5Vouji",
        "author": {
          "login": "kemalizing"
        },
        "authorAssociation": "NONE",
        "body": "hi,\r\nI'm hit by https://github.com/hashicorp/terraform-cdk/issues/2550 issue which looks like related to this one. Any news about this issue?",
        "createdAt": "2023-02-20T10:52:04Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/798#issuecomment-1436739810",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5WgZNy",
        "author": {
          "login": "kemalizing"
        },
        "authorAssociation": "NONE",
        "body": "I saw a great work around for naming inconsistencies in another issue:\r\nhttps://github.com/hashicorp/terraform-cdk/issues/2341#issuecomment-1326760534",
        "createdAt": "2023-03-02T05:45:39Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/798#issuecomment-1451332466",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5z0lCo",
        "author": {
          "login": "shinebayar-g"
        },
        "authorAssociation": "NONE",
        "body": "Hi. What are the actual differences of running the cdktf code directly vs using the cdktf cli? _(Apart from the CLI flags ofc)_\r\nI just did a quick comparison and I can't tell the difference.\r\nBoth `yarn run cdktf synth --app 'yarn run tsx main.ts'` and `yarn run tsx main.ts` still generated the cdktf json files.\r\n",
        "createdAt": "2024-02-14T06:34:45Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/798#issuecomment-1943163048",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2021-06-24T21:40:47Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzgw",
        "name": "documentation",
        "description": "Improvements or additions to documentation",
        "color": "0075ca"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwzMDEzNzM4ODIw",
        "name": "needs-research",
        "description": "",
        "color": "709F22"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      }
    ],
    "milestone": null,
    "number": 798,
    "title": "Reduce/document differences between cdktf synth and running app directly",
    "updatedAt": "2024-02-14T06:35:27Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjExMTIwNTY=",
      "is_bot": false,
      "login": "ansgarm",
      "name": "Ansgar Mertens"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n[Internally](https://github.com/hashicorp/terraform-cdk/tree/v0.4.1/packages/cdktf-cli/bin/cmds/ui/models) the `cdktf-cli` uses the Terraform CLI and the Terraform Cloud API to provision infrastructure.  \r\nIt would be useful to extract this code into a separate package as this would allow us to use `JSII` to offer that package across the languages we support.  \r\nThis would satisfy the [requests for such an api](https://github.com/hashicorp/terraform-cdk/issues/237) and could serve as a foundation e.g. when building integrations into testing frameworks.  \r\nBesides that, it would also serve as a precursor to refactoring the `cdktf-cli` \"UI\" which makes sense to do before working on e.g. [supporting displaying individual attributes](https://github.com/hashicorp/terraform-cdk/issues/114) for a `diff`.\r\n\r\n#### Tasks\r\n- [ ] Extract code from [models directory](https://github.com/hashicorp/terraform-cdk/tree/main/packages/cdktf-cli/bin/cmds/ui/models) into a separate package\r\n- [ ] Add / Move tests for that package\r\n- [ ] Configure JSII to build and publish this package in other languages\r\n- [ ] Add Readme to package (optional: with first rough description that could serve as docs)\r\n- [ ] Research & write follow-up issue for adding CDKTF specific apis to that package (might be done as part of a later \"UI\" refactoring): E.g. for triggering a synth, listing stacks, etc. (later to be used by the `cdktf-cli` when it is refactored.\r\n- [ ] _‚Ä¶probably more‚Ä¶_\r\n\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\n### References\r\n\r\n- https://github.com/hashicorp/terraform-cdk/issues/237\r\n- https://github.com/hashicorp/terraform-cdk/issues/114\r\n- https://github.com/hashicorp/terraform-cdk/issues/152\r\n- https://github.com/aws/aws-cdk-rfcs/issues/300\r\n- https://github.com/hashicorp/terraform-cdk/issues/1377\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [],
    "createdAt": "2021-06-29T10:37:36Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwyMjYwNjQ0NDQx",
        "name": "cdktf-cli",
        "description": "",
        "color": "82e5de"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjEz",
        "name": "size/medium",
        "description": "estimated < 1 week",
        "color": "291E63"
      },
      {
        "id": "LA_kwDODd1Amc7q-uL1",
        "name": "feature/programmatic-api",
        "description": "",
        "color": "54AAC9"
      }
    ],
    "milestone": null,
    "number": 804,
    "title": "Public API for Terraform CLI / TF Cloud exec code",
    "updatedAt": "2023-06-01T16:34:37Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjEzNjc4OQ==",
      "is_bot": false,
      "login": "skorfmann",
      "name": "Sebastian Korfmann"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\nI've been repeating this pattern across several test projects:\r\n\r\n```ts\r\n    const tmpWorkDir = path.join(process.cwd(), 'tmp', 'build', 'data-sources')\r\n    fs.mkdirSync(tmpWorkDir, { recursive: true })\r\n    const filePath = path.join(tmpWorkDir, `${name}-data-source.js`)\r\n```\r\n\r\nThat's useful whenever a user wants to write generated files to disk and use it in conjunction with `TerraformAsset`.\r\n\r\nIt would be nice to have something like:\r\n\r\n```ts\r\nconst tmpFile = new TmpFile(this, 'my-file', {\r\n  content: `my file contents`\r\n})\r\n\r\nnew TerraformAsset(this, 'data-source-asset', {\r\n  path: tmpFile.path,\r\n  type: AssetType.FILE,\r\n});\r\n\r\n// or perhaps even just like this\r\n\r\nnew TmpFile(this, 'my-file', {\r\n  content: `my file contents`\r\n  distributeAs: AssetType.FILE\r\n})\r\n```\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [
      {
        "id": "MDEyOklzc3VlQ29tbWVudDg3NjQxOTE1OA==",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "Sounds interesting!\r\n\r\nJust a random idea: Why not extending TerraformAsset (or composing with it in some other way), so that the TmpFile itself would \"be the Asset\". Or is there any use case to just writing the TmpFile?\r\n\r\nHow I would imagine using it:\r\n```\r\nconst tmpFile = new TmpFile(this, 'file', {\r\n  content: `<html><body>Welcome to my empty website</body></html>`\r\n})\r\n\r\nnew S3BucketObject(this, \"index\", {\r\n      bucket: bucket.bucket,\r\n      key: 'index.html',\r\n      source: tmpFile.path,\r\n});\r\n```",
        "createdAt": "2021-07-08T13:00:49Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 2
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/824#issuecomment-876419158",
        "viewerDidAuthor": false
      },
      {
        "id": "MDEyOklzc3VlQ29tbWVudDg3NjQzMTgzNg==",
        "author": {
          "login": "skorfmann"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "> Why not extending TerraformAsset (or composing with it in some other way), so that the TmpFile itself would \"be the Asset\".\r\n\r\nI think that would make  sense indeed üëç \r\n\r\nPerhaps it's more something like `GeneratedFile` or `FileGenerator`? ",
        "createdAt": "2021-07-08T13:17:39Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/824#issuecomment-876431836",
        "viewerDidAuthor": false
      },
      {
        "id": "MDEyOklzc3VlQ29tbWVudDg3NjUwMTA2NQ==",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "`InlineFile`? üòÑ (I'm not 100% satisfied with this name though)",
        "createdAt": "2021-07-08T14:45:34Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/824#issuecomment-876501065",
        "viewerDidAuthor": false
      },
      {
        "id": "MDEyOklzc3VlQ29tbWVudDg3NjY4NDMyMg==",
        "author": {
          "login": "skorfmann"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "> `InlineFile`? üòÑ\r\n\r\nHm, not bad - I like that üëç ",
        "createdAt": "2021-07-08T19:20:07Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/824#issuecomment-876684322",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5CxMCo",
        "author": {
          "login": "aayushharwani-aidash"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "@skorfmann  @ansgarm  can you guys plz explain little bit more about this issue. I am interested in working on it.",
        "createdAt": "2022-05-07T11:17:23Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/824#issuecomment-1120190632",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2021-07-08T08:48:54Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzky",
        "name": "good first issue",
        "description": "Good for newcomers",
        "color": "7057ff"
      },
      {
        "id": "MDU6TGFiZWwyMjI4Mzg3NjY3",
        "name": "cdktf",
        "description": "",
        "color": "fccac4"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMTM2Mjc5MjMx",
        "name": "ux/configuration",
        "description": "",
        "color": "58FCA0"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4Mjg1",
        "name": "size/small",
        "description": "estimated < 1 day",
        "color": "4671C0"
      }
    ],
    "milestone": null,
    "number": 824,
    "title": "Provide Common Temporary Directory ",
    "updatedAt": "2023-02-28T17:35:55Z"
  },
  {
    "assignees": [
      {
        "id": "MDQ6VXNlcjEzMzcwNDY=",
        "login": "DanielMSchmidt",
        "name": "Daniel Schmidt",
        "databaseId": 0
      }
    ],
    "author": {
      "id": "MDQ6VXNlcjEzMzcwNDY=",
      "is_bot": false,
      "login": "DanielMSchmidt",
      "name": "Daniel Schmidt"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### cdktf & Language Versions\r\n\r\n<!--- Please make note of the version you are using for the `hashicorp/terraform-cdk` and language bindings you are using.\r\nIf you are not running the latest version, please upgrade because your issue may have already been fixed. --->\r\n\r\n### Affected Resource(s)\r\n\r\n<!--- Please list the affected resources. --->\r\n\r\n### Debug Output\r\n\r\n<!---\r\nPlease provide a link to a GitHub Gist containing the complete debug output. Please do NOT paste the debug output in the issue; just paste a link to the Gist.\r\n--->\r\n\r\n### Expected Behavior\r\n\r\n<!--- What should have happened? --->\r\n\r\nWe see telemetry related to all errors.\r\n\r\n### Actual Behavior\r\n\r\n<!--- What actually happened? --->\r\nWhen we send telemetry before the process is exited via `process.exit` the `process.exit` stops the node event loop leading to the request not being sent.\r\n\r\n### Steps to Reproduce\r\n\r\n<!--- Please list the steps required to reproduce the issue. --->\r\n\r\n### Important Factoids\r\n\r\n<!--- Are there anything atypical about your accounts that we should know? --->\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor documentation? For example:\r\n--->\r\n\r\n- #0000\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc4-c5vt",
        "author": {
          "login": "DanielMSchmidt"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "We could resolve this differently by building a small JS artifact (similar to our initial CLI without the handlers) that just sends a telemetry event passed as a command line argument and call it in a separate background process so it does not get terminated. (intentionally creating a zombie process)",
        "createdAt": "2022-02-22T12:49:37Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/841#issuecomment-1047763949",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2021-07-22T22:36:02Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwyMjYwNjQ0NDQx",
        "name": "cdktf-cli",
        "description": "",
        "color": "82e5de"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMjA1MTMzMjIz",
        "name": "feature/telemetry",
        "description": "",
        "color": "2A3D32"
      }
    ],
    "milestone": null,
    "number": 841,
    "title": "Telemetry does not get send due to process.exit",
    "updatedAt": "2022-02-22T12:49:37Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjg3NzUwODk1",
      "is_bot": false,
      "login": "prashant-eppalpalli",
      "name": ""
    },
    "body": "Hi @skorfmann \r\n\r\nWe would like to know some best practices to work with the CDKTF project.\r\n\r\nWe have multiple AWS accounts for different environments and we are using Terraform Cloud to store state files.\r\n- We would like to know the strategies around deploying the same set of cdktf code in multiple environments.\r\n\r\n- Also how can we use cdktf projects across multiple team members? How team members can contribute their changes before merging the code into actual branches. Any best practices around that ?\r\n\r\n![CDKTF-Project](https://user-images.githubusercontent.com/87750895/129932149-35d4a882-06e1-4606-ab54-e74397f6cf13.jpg)\r\n\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc41yXMP",
        "author": {
          "login": "jsteinich"
        },
        "authorAssociation": "COLLABORATOR",
        "body": "One option is to use a different stack for each environment. The configuration for each stack can point to different AWS accounts and TF workspaces for state storage. I don't believe the auto workspace creation currently supports that, but the workspaces could be created in a different project.\r\n\r\nI personally like Terraform Atlantis for managing the code changes. It doesn't quite work out of the box with cdktf though.\r\nYou could also manage pipelines directly in GitLab, but be careful with current executions.",
        "createdAt": "2021-08-20T03:04:39Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/918#issuecomment-902394639",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc41zunr",
        "author": {
          "login": "skorfmann"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "@prashant-eppalpalli If you're after a workflow like [this](https://docs.gitlab.com/ee/user/infrastructure/mr_integration.html) you could fallback to use the Terraform CLI. Here's an example Github Actions [workflow](https://github.com/hashicorp/cdktf-repository-manager/blob/main/.github/workflows/diff.yml) which produces output like [this](https://github.com/hashicorp/cdktf-repository-manager/pull/15#issuecomment-899809449). \r\n\r\nOther than that:\r\n\r\n- Are we talking about a single repository which is supposed to drive multiple workspaces / accounts? \r\n- Would they all be deployed in parallel, or are there dependencies between the workspaces? \r\n- Do you have policies and / or tests as part of your pipelines?",
        "createdAt": "2021-08-20T14:55:19Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/918#issuecomment-902752747",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc413QnN",
        "author": {
          "login": "prashant-eppalpalli"
        },
        "authorAssociation": "NONE",
        "body": "Hi @skorfmann \r\n\r\nI will go through the workflow and get back to you on that.\r\n\r\n- Are we talking about a single repository which is supposed to drive multiple workspaces / accounts?\r\n  Currently we are thinking to use single repo with single branch per environment.\r\n  Each environment have its own TF workspace which will point to its own specific branch name. \r\n  Each environment have its own AWS account.\r\n\r\n- Would they all be deployed in parallel, or are there dependencies between the workspaces?\r\nThey will be deployed parallelly. There are no dependencies, however we need to sync our develop and master branch sometimes in future.\r\n\r\n- Do you have policies and / or tests as part of your pipelines?\r\nCurrently we don't have any policies or tests, but we may include those in future.",
        "createdAt": "2021-08-23T11:23:18Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/918#issuecomment-903678413",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc42BxjV",
        "author": {
          "login": "skorfmann"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "@prashant-eppalpalli are the TF workspaces existing already, or would you want them to be created automatically as part of `cdktf deploy`?",
        "createdAt": "2021-08-26T13:53:40Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/918#issuecomment-906434773",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc42C58i",
        "author": {
          "login": "plaisted"
        },
        "authorAssociation": "NONE",
        "body": "I've recently set up something similar, would be interested to see how others did this. We do continuous delivery rather than deployment:\r\n* We manage each environment with it's own stack / backend. Each application has an interface for the environment specific config which gets passed into the stack constructor.\r\n* On pull requests all apps / environments get synth'd. TF Plans are then run and posted back to the PR.\r\n* On completion of a PR, the build synth's all of the apps / environments into the different cdk.tf.json's. We create a build artifact for each stack that includes the cdk.tf.json file, a .terraform.lock.hcl file, and some metadata (in our case what AWS account each stack is associated with, what role to assume before planning / applying). The metadata is automatically created by a custom base stack we extend for our CDK stacks.\r\n* We then release versions on demand to any environment, this uses 'normal' terraform (no CDK) which is a simple plan -> review -> apply workflow. There is some higher level release automation to track deployments from lesser environments to prod and automate things like blue / green deployments (eg. deploy prod-blue stack and validate, then flip traffic) but all infrastructure changes flow through from the CDK / terraform changes.\r\n\r\nHaven't been using very long but so far been pretty happy with it.",
        "createdAt": "2021-08-26T20:46:21Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/918#issuecomment-906731298",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc42DDsO",
        "author": {
          "login": "rrrix"
        },
        "authorAssociation": "NONE",
        "body": "I don't use the CDKTF \"stacks\" paradigm, and opted for something... different :) \r\n\r\nI  abstract out CDKTF as the \"compiler\", and choose to directly use the terraform CLI to manage my workspaces, run `plan`, `apply`, `destroy`, etc.\r\n\r\nI have 3 environment types (dev, stg, prod) running 2 unique applications (app1, app2) on a shared code base (both sharing majority of their code in a \"Common\" library), using TypeScript, Lerna (monorepo), yarn, and other related TypeScript ecosystem tooling (which is very rich, flexible, popular and well-defined). These are full-stack Production Enterprise (internal) Applications running in AWS (ALB's, AutoScaling, Docker, the works).\r\n\r\nThis model lets me use general node.js/TypeScript to program, customize and control anything related to my environment, build targets, deployment mechanisms, testing, etc. I think of the \"cdktf.tf.json\" as a \"dumb\" build artifact. The generated `cdktf.tf.json` files are disposable, as they are regenerated and replaced every time I do a build - however I do commit them to version control, so that I could always \"terraform apply\" back to a pre-existing state if I need to (except for my database obviously).    \r\n\r\nRoughly:\r\n```\r\ncdktf-project\r\n| -- packages/common/\r\n| -- packages/app1/\r\n| -- packages/app2/\r\n| -- packer/<packerfiles>\r\n\\ -- docker/{app1,app2}/<dockerfiles>\r\n```\r\n\r\nWhere `app1` and `app2` import from `common`, and both use customized golden AMI's and docker images.\r\n\r\nI have _three_ cdktf.json files, which all are identical:\r\n\r\n```json\r\n{\r\n  \"language\": \"typescript\",\r\n  \"app\": \"yarn -s compile && yarn -s run:main\",\r\n  \"terraformProviders\": [\r\n    \"hashicorp/aws@~> 3\",\r\n    \"hashicorp/random@~> 3\",\r\n    \"hashicorp/dns@~> 3\"\r\n  ],\r\n  \"codeMakerOutput\": \"../common/.gen\",\r\n  \"context\": {\r\n    \"excludeStackIdFromLogicalIds\": \"true\",\r\n    \"allowSepCharsInLogicalIds\": \"true\"\r\n  }\r\n}\r\n```\r\n\r\nNote the `\"codeMakerOutput\": \"../common/.gen\",` - they all generate to the same (shared) directory. \r\n\r\nExample relevant bits from `packages/app2/package.json/scripts`:\r\n\r\n```\r\n  \"scripts\": {\r\n    \"apply\": \"yarn synth && yarn tf:apply && yarn completed-time\",\r\n    \"build\": \"yarn build:common && yarn tsc --build && yarn synth\",\r\n    \"build:ami\": \"pushd../../packer/ && sh ./build-app2.sh && popd\",\r\n    \"build-ami\": \"pushd../../packer/ && sh ./build-app2.sh && popd\",\r\n    \"build:common\": \"pushd ../common && yarn build && popd\",\r\n    \"clean\": \"rm -rf dist *.log\",\r\n    \"clean-dist\": \"rm -rf dist\",\r\n    \"compile\": \"tsc --build --pretty\",\r\n    \"date\": \"date +'%Y/%m/%d %H:%M GMT%z'\",\r\n    \"completed-time\": \"echo üü¢ Completed at $(yarn run date)\",\r\n    \"destroy\": \"yarn -s run tf:destroy\",\r\n    \"get\": \"yarn cdktf get\",\r\n    \"plan\": \"yarn synth && yarn -s run tf:plan\",\r\n    \"run:main\": \"node -r tsconfig-paths/register dist/src/main.js\",\r\n    \"rebuild-all\": \"yarn update && yarn build && yarn plan\",\r\n    \"show-user-data\": \"bin/show-user-data.sh\",\r\n    \"show-b64-user-data\": \"bin/show-b64-user-data.sh\",\r\n    \"synth\": \"yarn cdktf synth -o cdktf.out.$(terraform workspace show)\",\r\n    \"test\": \"jest --silent\",\r\n    \"update\": \"yarn upgrade --latest cdktf@next cdktf-cli@next && cdktf get\",\r\n    \"watch\": \"tsc -w\",\r\n    \"workspace:dev\": \"terraform workspace select dev || terraform workspace new dev\",\r\n    \"workspace:stg\": \"terraform workspace select stg || terraform workspace new stg\",\r\n    \"workspace:prod\": \"terraform workspace select prod || terraform workspace new prod\",\r\n    \"workspace:show\": \"terraform workspace show\",\r\n    \"tf\": \"terraform -chdir=cdktf.out.$(terraform workspace show)/stacks/app2\",\r\n    \"tf:init\": \"yarn tf init\",\r\n    \"tf:plan\": \"yarn tf plan\",\r\n    \"tf:apply\": \"yarn tf apply -auto-approve\",\r\n    \"tf:refresh\": \"yarn tf refresh\",\r\n    \"tf:destroy\": \"yarn tf destroy\"\r\n  },\r\n```\r\n\r\nI have logic in each of my `main.ts` files which does a `terraform workspace show`, combined with \"what application am I?\" to determine which set of deployment variables to use. This lets me have a \"matrix\" of applications and environments, each with it's own unique configuration.\r\n\r\nDuring my day-to-day, I simply run `yarn workspace:stg` (to use `stg`, for example) then `yarn apply`, which wraps up:\r\n\r\n- CDKTF Stack Synth (`cdktf synth`) into `cdktf.out.<workspace>/stacks/<app>/cdktf.tf.json`\r\n- Terraform Apply `terraform -chdir=cdktf.out.<workspace>/stacks/<app> apply -auto-approve`\r\n\r\nMy team is small so it's fairly easy _not_ to step on each-others toes while doing this, but would be easy-enough to wrap into a CI/CD system to handle per-branch/per-MR deploys should that ever be necessary.\r\n\r\nI have ~5 months (on and off) time spent on this system, and am quite satisfied. I wouldn't say it's the \"right\" way to go, but it works for me. ",
        "createdAt": "2021-08-26T21:59:31Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/918#issuecomment-906771214",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc42EGIM",
        "author": {
          "login": "prashant-eppalpalli"
        },
        "authorAssociation": "NONE",
        "body": "> @prashant-eppalpalli are the TF workspaces existing already, or would you want them to be created automatically as part of `cdktf deploy`?\r\n\r\n@skorfmann \r\nCurrently TF workspace is already exist. At the moment we are not creating any TF workspace as part of cdktf deploy. We can say that TF workspaces existing already which we are creating separately. After that we are integrating cdktf with TF workspace.",
        "createdAt": "2021-08-27T08:57:04Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/918#issuecomment-907043340",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2021-08-18T16:03:42Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzgw",
        "name": "documentation",
        "description": "Improvements or additions to documentation",
        "color": "0075ca"
      },
      {
        "id": "MDU6TGFiZWwzMDEzNzM4ODIw",
        "name": "needs-research",
        "description": "",
        "color": "709F22"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      }
    ],
    "milestone": null,
    "number": 918,
    "title": "How multiple team members can use terraform CDKTF Project in a shared way",
    "updatedAt": "2023-06-28T18:26:22Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjExMTIwNTY=",
      "is_bot": false,
      "login": "ansgarm",
      "name": "Ansgar Mertens"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\nbasically [this example](https://github.com/hashicorp/terraform-cdk/issues/951#issuecomment-913523817) plus a short description.\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\n### References\r\n\r\n* https://github.com/hashicorp/terraform-cdk/issues/951\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc42iBdY",
        "author": {
          "login": "jsteinich"
        },
        "authorAssociation": "COLLABORATOR",
        "body": "#929 should make it so using the object form isn't required; however, having an example is the docs is still a good thing.",
        "createdAt": "2021-09-08T03:47:24Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 1
            }
          },
          {
            "content": "EYES",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/956#issuecomment-914888536",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5Vagpb",
        "author": {
          "login": "xiehan"
        },
        "authorAssociation": "MEMBER",
        "body": "Relates to #2072 - might make sense to tackle both at the same time.",
        "createdAt": "2023-02-16T12:27:36Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/956#issuecomment-1433012827",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2021-09-07T09:21:30Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzgw",
        "name": "documentation",
        "description": "Improvements or additions to documentation",
        "color": "0075ca"
      },
      {
        "id": "MDU6TGFiZWwyMjE3NjIyNTkw",
        "name": "modules",
        "description": "",
        "color": "2ffc8f"
      },
      {
        "id": "MDU6TGFiZWwyMjIzNTI1MzY0",
        "name": "terraform cloud",
        "description": "",
        "color": "4ed354"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMTY5NzM3NTc2",
        "name": "enterprise",
        "description": "",
        "color": "40BB81"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4Mjg1",
        "name": "size/small",
        "description": "estimated < 1 day",
        "color": "4671C0"
      }
    ],
    "milestone": null,
    "number": 956,
    "title": "Add specific example for using private Terraform modules to docs",
    "updatedAt": "2023-06-28T18:27:03Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjUwNzAyMDQ=",
      "is_bot": false,
      "login": "danieldreier",
      "name": "Daniel Dreier"
    },
    "body": "This is a research and design task to design and plan a workflow for integration testing of CDK for Terraform applications.  This ticket is a placeholder for the sake of long-term planning, and should be rewritten with more defined scope before work starts.\r\n\r\nThe scope of this issue is to propose an approach to integration testing, ideally aligned with the AWS CDK approach linked below. An internal HashiCorp RFC is needed for this issue before implementation work starts.\r\n\r\nReference Material\r\n* https://github.com/aws/aws-cdk-rfcs/pull/378",
    "comments": [
      {
        "id": "IC_kwDODd1Amc443Cah",
        "author": {
          "login": "marcus-sa"
        },
        "authorAssociation": "NONE",
        "body": "Any consideration regarding adding support for something like https://www.terraform.io/docs/language/modules/testing-experiment.html  ?",
        "createdAt": "2021-10-28T15:22:25Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1093#issuecomment-953951905",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc45iBqf",
        "author": {
          "login": "JohnCalhoun"
        },
        "authorAssociation": "NONE",
        "body": "need this feature and would love to help provider feedback or ideas",
        "createdAt": "2021-11-10T14:05:40Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1093#issuecomment-965221023",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc45iDmZ",
        "author": {
          "login": "skorfmann"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "> need this feature and would love to help provider feedback or ideas\r\n\r\nWhich use-cases do you have in mind in particular?",
        "createdAt": "2021-11-10T14:09:24Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1093#issuecomment-965228953",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc45iEhT",
        "author": {
          "login": "skorfmann"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "@marcus-sa \r\n> Any consideration regarding adding support for something like https://www.terraform.io/docs/language/modules/testing-experiment.html ?\r\n\r\nNo, not so far - but curious to learn how you'd use this in the context of cdktf\r\n\r\n",
        "createdAt": "2021-11-10T14:11:12Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1093#issuecomment-965232723",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc45iIEA",
        "author": {
          "login": "marcus-sa"
        },
        "authorAssociation": "NONE",
        "body": "> No, not so far - but curious to learn how you'd use this in the context of cdktf\r\n\r\n@skorfmann I've done something like [this](https://gist.github.com/marcus-sa/9df7cdbb1c0383e8f3bb974dc5ced55a) instead. Way easier than I initially thought.\r\n\r\nI might create a repository template for showcasing how one might structure their own project using Terraform CDK.\r\nThere are quite a few workarounds still needed, like explicitly overriding the logical id of `TerraformVariable` for it to be used.",
        "createdAt": "2021-11-10T14:18:01Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1093#issuecomment-965247232",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc45jWR8",
        "author": {
          "login": "JohnCalhoun"
        },
        "authorAssociation": "NONE",
        "body": "yeah the overriding of TerraformVariable is super needed for this. But right now I can test up and including `terraform plan` using to toPlanSuccessfully(), but want i want to do next is actualy launch the stack (from the .test.ts jest file) and then get outputs from the stack and run AWS queries against the stack (like invoke a lambda function and check its return value).\r\n\r\nI built something sort of like this at my previous job but I want to do it this time in a more community supported way, I dont want to base our whole codebase testing on a hack that the community will do better anyways. ",
        "createdAt": "2021-11-10T17:23:34Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1093#issuecomment-965567612",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc45kl0O",
        "author": {
          "login": "marcus-sa"
        },
        "authorAssociation": "NONE",
        "body": "> yeah the overriding of TerraformVariable is super needed for this. But right now I can test up and including `terraform plan` using to toPlanSuccessfully(), but want i want to do next is actualy launch the stack (from the .test.ts jest file) and then get outputs from the stack and run AWS queries against the stack (like invoke a lambda function and check its return value).\r\n> \r\n> I built something sort of like this at my previous job but I want to do it this time in a more community supported way, I dont want to base our whole codebase testing on a hack that the community will do better anyways.\r\n\r\nIf you refer to the [`terraform.ts`](https://gist.github.com/marcus-sa/9df7cdbb1c0383e8f3bb974dc5ced55a#file-terraform-ts) file in the gist I provided, then that can be used to synthesize, initialize and apply a stack, and upon finalizing it'll destroy the stack.\r\n\r\nIdk about AWS, but for GCP there's NodeJS clients for all their services that would allow you to do some end-to-end testing.\r\n\r\nI completely agree that an ideal solution would be community driven and integrated directly into Terraform CDK.\r\n\r\nI also had to do massive amounts of workarounds to be able to fetch the plan of a pull request run in Terraform Cloud.",
        "createdAt": "2021-11-11T00:49:15Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1093#issuecomment-965893390",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc6PH2wD",
        "author": {
          "login": "so0k"
        },
        "authorAssociation": "NONE",
        "body": "This CDKTF library leverages all the utility functions of terratest for its integration testing.. it does require a bridge to synth the ts into `tf.json`\r\nhttps://github.com/envtio/base/tree/v0.0.4/integ",
        "createdAt": "2024-10-09T03:34:31Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1093#issuecomment-2401201155",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2021-09-28T23:56:17Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwzMDEzNzM4ODIw",
        "name": "needs-research",
        "description": "",
        "color": "709F22"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjUx",
        "name": "size/large",
        "description": "estimated < 1 month",
        "color": "9559B0"
      },
      {
        "id": "LA_kwDODd1Amc7Kmmfc",
        "name": "feature/integration-test",
        "description": "",
        "color": "4F6FA8"
      }
    ],
    "milestone": null,
    "number": 1093,
    "title": "Design CDK for Terraform integration testing",
    "updatedAt": "2024-10-09T03:34:47Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjUwNzAyMDQ=",
      "is_bot": false,
      "login": "danieldreier",
      "name": "Daniel Dreier"
    },
    "body": "This is a capacity-planning placeholder issue for the implementation of the work planned in #1093. When that planning task is complete, please remove this issue and replace it with real implementation tickets.\r\n\r\n",
    "comments": [],
    "createdAt": "2021-09-29T00:22:32Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjUx",
        "name": "size/large",
        "description": "estimated < 1 month",
        "color": "9559B0"
      },
      {
        "id": "LA_kwDODd1Amc7Kmmfc",
        "name": "feature/integration-test",
        "description": "",
        "color": "4F6FA8"
      },
      {
        "id": "LA_kwDODd1Amc7KmqHq",
        "name": "planning/placeholder",
        "description": "capacity-planning placeholder issue",
        "color": "1D435A"
      }
    ],
    "milestone": null,
    "number": 1096,
    "title": "Placeholder: implement integration testing",
    "updatedAt": "2023-06-01T16:46:37Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjUwNzAyMDQ=",
      "is_bot": false,
      "login": "danieldreier",
      "name": "Daniel Dreier"
    },
    "body": "The ability to control CDK for Terraform directly from a programming language has been a frequent request. There are three key issues in the backlog under this scope:\r\n\r\n- https://github.com/hashicorp/terraform-cdk/issues/804\r\n- https://github.com/hashicorp/terraform-cdk/issues/798\r\n- https://github.com/hashicorp/terraform-cdk/issues/237\r\n\r\nAWS CDK also has an [RFC issue](https://github.com/aws/aws-cdk-rfcs/issues/300) open on this topic where users describe many proposed use cases.\r\n\r\nThis is a design ticket. The goal is to design a good user experience, including APIs, for being able to programmatically drive CDK for Terraform, and to plan an implementation of the resulting design in tickets in future release milestones. The scope doesn't necessarily encompass all of the linked tickets - please use judgement and work with product to design an appropriate scope.",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5RtsZC",
        "author": {
          "login": "dudany"
        },
        "authorAssociation": "NONE",
        "body": "Hi @danieldreier, There is an estimation of when it will be added to the roadmap?",
        "createdAt": "2023-01-04T13:31:02Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1104#issuecomment-1370932802",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5Rt4kN",
        "author": {
          "login": "DanielMSchmidt"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "We are currently exploring this, but it's a little early to make delivery promises. I can put you down so you'll get notified once we have a prototype and enter the feedback gathering phase :) ",
        "createdAt": "2023-01-04T14:15:01Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 2
            }
          },
          {
            "content": "LAUGH",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1104#issuecomment-1370982669",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5Rt7lv",
        "author": {
          "login": "dudany"
        },
        "authorAssociation": "NONE",
        "body": "I would be happy to get notified, appreciate it :) \r\nThank you @DanielMSchmidt ",
        "createdAt": "2023-01-04T14:25:17Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1104#issuecomment-1370995055",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2021-09-29T20:01:53Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwzMDEzNzM4ODIw",
        "name": "needs-research",
        "description": "",
        "color": "709F22"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMjA1MTIxODAz",
        "name": "enhancement/new-workflow",
        "description": "Proposed new workflow",
        "color": "4A1023"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjEz",
        "name": "size/medium",
        "description": "estimated < 1 week",
        "color": "291E63"
      },
      {
        "id": "LA_kwDODd1Amc7q-uL1",
        "name": "feature/programmatic-api",
        "description": "",
        "color": "54AAC9"
      }
    ],
    "milestone": null,
    "number": 1104,
    "title": "Design UX, APIs for procedurally driving CDKTF",
    "updatedAt": "2023-01-04T14:25:26Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjE0MjU5MTk=",
      "is_bot": false,
      "login": "nadworny",
      "name": ""
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### cdktf & Language Versions\r\ncdktf-cli@0.6.3-pre.360\r\nnode:16.10-alpine\r\nDocker version 20.10.8, build 3967b7d\r\n\r\n<!--- Please make note of the version you are using for the `hashicorp/terraform-cdk` and language bindings you are using.\r\nIf you are not running the latest version, please upgrade because your issue may have already been fixed. --->\r\n\r\n### Affected Resource(s)\r\ncdktf cli\r\n<!--- Please list the affected resources. --->\r\n\r\n### Debug Output\r\nhttps://gist.github.com/nadworny/0d0c567efbbaeeab9e1169bab51811d6\r\n<!---\r\nPlease provide a link to a GitHub Gist containing the complete debug output. Please do NOT paste the debug output in the issue; just paste a link to the Gist.\r\n--->\r\n\r\n### Expected Behavior\r\nDocker build fails\r\n<!--- What should have happened? --->\r\n\r\n### Actual Behavior\r\nDocker build runs successfully. \r\n<!--- What actually happened? --->\r\n\r\n### Steps to Reproduce\r\n1. Clone the repo and go to `examples/python/docker`\r\n2. Create a following Dockerfile:\r\n```docker\r\nFROM node:16.10-alpine\r\n\r\nRUN npm install --global cdktf-cli@0.6.3-pre.360\r\n\r\nENV DEFAULT_TERRAFORM_VERSION=1.0.7\r\n\r\n# Install Terraform\r\nRUN apk add --update --no-cache git curl docker-cli unzip python3 python3-dev && \\\r\n    ln -sf python3 /usr/bin/python && python3 -m ensurepip && \\\r\n    rm -r /usr/lib/python*/ensurepip && \\\r\n    pip3 install --upgrade pip setuptools==45 && \\\r\n    if [ ! -e /usr/bin/pip ]; then ln -s pip3 /usr/bin/pip ; fi && \\\r\n    AVAILABLE_TERRAFORM_VERSIONS=\"0.15.0 ${DEFAULT_TERRAFORM_VERSION}\" && \\\r\n    for VERSION in ${AVAILABLE_TERRAFORM_VERSIONS}; do curl -LOk https://releases.hashicorp.com/terraform/${VERSION}/terraform_${VERSION}_linux_amd64.zip && \\\r\n    mkdir -p /usr/local/bin/tf/versions/${VERSION} && \\\r\n    unzip terraform_${VERSION}_linux_amd64.zip -d /usr/local/bin/tf/versions/${VERSION} && \\\r\n    ln -s /usr/local/bin/tf/versions/${VERSION}/terraform /usr/local/bin/terraform${VERSION};rm terraform_${VERSION}_linux_amd64.zip;done && \\\r\n    ln -s /usr/local/bin/tf/versions/${DEFAULT_TERRAFORM_VERSION}/terraform /usr/local/bin/terraform\r\n\r\nWORKDIR /cdktf\r\n\r\n# Prepare tf providers\r\nCOPY cdktf.json .\r\nRUN cdktf get\r\n```\r\n3. Build image `docker build -t cdktf-test -f Dockerfile .`\r\n<!--- Please list the steps required to reproduce the issue. --->\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc43oBwh",
        "author": {
          "login": "LeonidLapshinAquaCloud"
        },
        "authorAssociation": "NONE",
        "body": "Have the same error today, last successful run was 3 days ago",
        "createdAt": "2021-10-04T08:00:47Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1115#issuecomment-933239841",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc43oSNb",
        "author": {
          "login": "DanielMSchmidt"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "I think this is a duplicate of #1113. It seems like Ink-Spinners have a broken and unpinned dependency. This is our top priority to fix, @ansgarm is already working on this",
        "createdAt": "2021-10-04T09:27:14Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1115#issuecomment-933307227",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc43oSvw",
        "author": {
          "login": "DanielMSchmidt"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "Sorry, I misread the issue, my bad üôà ",
        "createdAt": "2021-10-04T09:30:12Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1115#issuecomment-933309424",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc46goxC",
        "author": {
          "login": "DanielMSchmidt"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "I wonder if this can be solved by #841 or if this stems from another problem\r\n",
        "createdAt": "2021-11-29T13:27:09Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1115#issuecomment-981634114",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5fmhgs",
        "author": {
          "login": "DanielMSchmidt"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "This is still an issue",
        "createdAt": "2023-06-23T08:37:35Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1115#issuecomment-1603934252",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2021-10-04T07:55:35Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwyMjYwNjQ0NDQx",
        "name": "cdktf-cli",
        "description": "",
        "color": "82e5de"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjEz",
        "name": "size/medium",
        "description": "estimated < 1 week",
        "color": "291E63"
      }
    ],
    "milestone": null,
    "number": 1115,
    "title": "Error produced by cdktf get is not breaking docker build",
    "updatedAt": "2023-06-23T09:19:22Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjExMTIwNTY=",
      "is_bot": false,
      "login": "ansgarm",
      "name": "Ansgar Mertens"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\nPrint Terraform logs when the `expect(‚Ä¶).toPlanSuccessfully()` matcher fails.\r\n\r\n#### Background\r\n\r\nWhen stumbling upon #1082 I had a hard time finding out why the test failed because these logs were swallowed:\r\n```\r\n‚ï∑\r\n‚îÇ Error: Error pinging Docker server: Cannot connect to the Docker daemon at unix:///var/run/docker.sock. Is the docker daemon running?\r\n‚îÇ \r\n‚îÇ   with provider[\"registry.terraform.io/terraform-providers/docker\"],\r\n‚îÇ   on cdk.tf.json line 19, in provider.docker[0]:\r\n‚îÇ   19:       {}\r\n‚îÇ \r\n‚ïµ\r\n```\r\nThey were swallowed because `stdio` is ignored here:\r\nhttps://github.com/hashicorp/terraform-cdk/blob/a5d0380585abee49c9ffbaa7fa6454aa186d07f8/packages/cdktf/lib/testing/matchers.ts#L267-L267\r\n\r\nThis also causes `CDKTF_LOG_LEVEL` not to work, as the stdio from Terraform is ignored.\r\n\r\n### References\r\n\r\n* #1082\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [],
    "createdAt": "2021-10-05T19:29:43Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMzYxMTMzNzQ3",
        "name": "feature/snapshot-test",
        "description": "Snapshot testing + assertion related issues",
        "color": "006b75"
      }
    ],
    "milestone": null,
    "number": 1124,
    "title": "Test matchers suppress Terraform logs",
    "updatedAt": "2021-10-07T15:20:58Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjUzOTY4NTg=",
      "is_bot": false,
      "login": "fmmoret",
      "name": "fmmoret"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\nThere is no mention of `.terraform.lock.hcl` or the security/reproducibility/integrity implications of the lock file that gets auto-created for every stack.\r\n\r\nDocs should inform developers that these files are important, and the docs should guide developers on how to collaborate on  & synchronize these files.\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\n### References\r\n\r\nhttps://www.terraform.io/docs/language/dependency-lock.html\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5W4Pi2",
        "author": {
          "login": "nikowatari"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "will it be enough if the default `.gitignore` template would be updated to not ignore `.terraform.lock.hcl`?\r\n\r\ne.g. replace this line: https://github.com/hashicorp/terraform-cdk/blob/8da3c359dd0935ba530b6844004501f7ca09a813/packages/cdktf-cli/templates/python/%7B%7B%7D%7D.gitignore#L5\r\n\r\nwith:\r\n```\r\ncdktf.out/*\r\n!cdktf.out/stacks/\r\ncdktf.out/stacks/*\r\n!cdktf.out/stacks/*/\r\ncdktf.out/stacks/*/*\r\n!cdktf.out/stacks/*/.terraform.lock.hcl\r\n```",
        "createdAt": "2023-03-07T05:54:40Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1216#issuecomment-1457584310",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5c38Qo",
        "author": {
          "login": "fmmoret"
        },
        "authorAssociation": "NONE",
        "body": "I had troubles with this. You need to terraform init in the stack folder if you change machines. cdktf doesn't appear to gracefully reuse the lock files if you have a remote backend.",
        "createdAt": "2023-05-22T23:10:41Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1216#issuecomment-1558168616",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2021-10-27T01:11:52Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzgw",
        "name": "documentation",
        "description": "Improvements or additions to documentation",
        "color": "0075ca"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      }
    ],
    "milestone": null,
    "number": 1216,
    "title": "Docs need (security) guidance around `.terraform.lock.hcl`",
    "updatedAt": "2023-06-28T18:29:36Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjExMTIwNTY=",
      "is_bot": false,
      "login": "ansgarm",
      "name": "Ansgar Mertens"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\nThere are currently no docstrings on the constructs we have for Terraform backends.\r\n\r\nSee this one for example: https://github.com/hashicorp/terraform-cdk/blob/main/packages/cdktf/lib/backends/s3-backend.ts\r\n\r\nIt should at least include a link to https://www.terraform.io/docs/language/settings/backends/s3.html\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5Cprlg",
        "author": {
          "login": "aayushharwani-aidash"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "@ansgarm I am interested in working on this. Can you plz guide ?",
        "createdAt": "2022-05-05T06:39:26Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1268#issuecomment-1118222688",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5CqEEd",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "Hi @aayushharwani-aidash üëã Wow! That's great!\r\n\r\nI'll use the S3 backend as an example, but feel free to pick your favorite(s) ‚Äì you also don't have to do all at once to get a PR accepted and merged üôÇ\r\n\r\nOur backends can be found [here](https://github.com/hashicorp/terraform-cdk/tree/main/packages/cdktf/lib/backends) and the docs on them are [here](https://www.terraform.io/language/settings/backends).\r\n\r\nSo let's take the [`S3Backend`](https://github.com/hashicorp/terraform-cdk/blob/main/packages/cdktf/lib/backends/s3-backend.ts) and the [related docs](https://www.terraform.io/language/settings/backends/s3) as an example.\r\n\r\nThe backend has a `S3BackendProps` type that defines the arguments that you can set on the backend:\r\nhttps://github.com/hashicorp/terraform-cdk/blob/537c7da0ffffff0d7b31b840f31fb3c6c57ee531/packages/cdktf/lib/backends/s3-backend.ts#L40-L44\r\n\r\nThe [docs contain descriptions](https://www.terraform.io/language/settings/backends/s3#configuration) for those config keys. For example for the `region` property:\r\n> [region](https://www.terraform.io/language/settings/backends/s3#region) - (Required) AWS Region of the S3 Bucket and DynamoDB Table (if used). This can also be sourced from the AWS_DEFAULT_REGION and AWS_REGION environment variables.\r\n(...)\r\n\r\nA docstring for this property could look like this:\r\n```ts\r\nexport interface S3BackendProps {\r\n  // ...\r\n  \r\n  /**\r\n   * AWS Region of the S3 Bucket and DynamoDB Table (if used). This can also\r\n   * be sourced from the AWS_DEFAULT_REGION and AWS_REGION environment \r\n   * variables.\r\n   */\r\n  readonly region?: string;\r\n  // ...\r\n```\r\n\r\nNote: The docs state that the region is required to be set, but in our code `region` is optional (\"`?`\") because it does not need to be set via the `S3BackendProps` config, but could also be set via an environment variable.\r\n\r\nBesides adding docstrings to the properties, it is also useful to add a general docstring to the S3Backend class itself:\r\nhttps://github.com/hashicorp/terraform-cdk/blob/537c7da0ffffff0d7b31b840f31fb3c6c57ee531/packages/cdktf/lib/backends/s3-backend.ts#L9-L12\r\n\r\nThe introductory section of the backend docs seems to fit quite well. And adding a link to the docs allows the user to access more information if required.\r\n```ts\r\n/**\r\n * Stores the state as a given key in a given bucket on Amazon S3. This backend\r\n * also supports state locking and consistency checking via Dynamo DB, which\r\n * can be enabled by setting the dynamodb_table field to an existing DynamoDB\r\n * table name. A single DynamoDB table can be used to lock multiple remote\r\n * state files. Terraform generates key names that include the values of the\r\n * bucket and key variables.\r\n * \r\n * Warning! It is highly recommended that you enable Bucket Versioning on the\r\n * S3 bucket to allow for state recovery in the case of accidental deletions\r\n * and human error.\r\n * \r\n * Read more about this backend in the Terraform docs:\r\n * https://www.terraform.io/language/settings/backends/s3\r\n */\r\nexport class S3Backend extends TerraformBackend {\r\n  constructor(scope: Construct, private readonly props: S3BackendProps) {\r\n    super(scope, \"backend\", \"s3\");\r\n  }\r\n  // ...\r\n```\r\n\r\nIf there's anything left unclear, feel free to ask! I hope this explains what we had in mind here.",
        "createdAt": "2022-05-05T08:57:14Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1268#issuecomment-1118322973",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5CunrH",
        "author": {
          "login": "aayushharwani-aidash"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "Thanks @ansgarm  , I got your point.",
        "createdAt": "2022-05-06T11:27:27Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1268#issuecomment-1119517383",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2021-11-08T09:13:00Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzgw",
        "name": "documentation",
        "description": "Improvements or additions to documentation",
        "color": "0075ca"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzky",
        "name": "good first issue",
        "description": "Good for newcomers",
        "color": "7057ff"
      },
      {
        "id": "MDU6TGFiZWwyMjI4Mzg3NjY3",
        "name": "cdktf",
        "description": "",
        "color": "fccac4"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjEz",
        "name": "size/medium",
        "description": "estimated < 1 week",
        "color": "291E63"
      }
    ],
    "milestone": null,
    "number": 1268,
    "title": "API docs: Add docs to Terraform backends",
    "updatedAt": "2023-06-28T18:29:25Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjEzMzcwNDY=",
      "is_bot": false,
      "login": "DanielMSchmidt",
      "name": "Daniel Schmidt"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\nI‚Äôd like to add a `terraform validate` run after synthesise, this might help users find unexpected problems (probably bugs in our code) and might help us catch issues in the examples. It will be a flag only on synth, e.g. `cdktf synth --validate myStack` and it will execute `terraform init && terraform validate` after the synthesis is done.\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [],
    "createdAt": "2021-11-16T16:34:10Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMTM1OTU1Nzk1",
        "name": "ux/debugging",
        "description": "",
        "color": "2703FD"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4Mjg1",
        "name": "size/small",
        "description": "estimated < 1 day",
        "color": "4671C0"
      }
    ],
    "milestone": null,
    "number": 1309,
    "title": "Validate Terraform code on synth",
    "updatedAt": "2021-12-02T10:07:33Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjMwMDgzNA==",
      "is_bot": false,
      "login": "remyleone",
      "name": "R√©my L√©one"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\nI have not found tutorials or guides that explain how I can re-use existing resources and existing state.\r\nI've searched here:\r\n- https://learn.hashicorp.com/tutorials/terraform/cdktf-applications\r\n- https://www.terraform.io/docs/cdktf/index.html\r\n\r\nMaybe using https://www.terraform.io/docs/cdktf/concepts/data-sources.html could be an option but it seems to be quite verbose. Is there an easier way to import an existing resource within the state managed by the CDK?\r\nIf it is the only way, maybe adding a tutorial/guide to focus on this importing workflow could be helpful. Especially if it combines discovered aspects (tags) to apply different treatments (use tags as an input of a function that will apply other tags to the given resource).\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc46CQtS",
        "author": {
          "login": "jsteinich"
        },
        "authorAssociation": "COLLABORATOR",
        "body": "Data sources don't actually import the resource into state. They basically function as a lookup into the already provisioned infrastructure.\r\n\r\nActually importing is probably more work as it requires creating code that matches the existing infrastructure and then running `terraform import` for each resource. Definitely room for some improvements to that process.",
        "createdAt": "2021-11-19T02:30:29Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1313#issuecomment-973671250",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc46JwZL",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "(linking [Support terraform import via the cdk cli #1134](https://github.com/hashicorp/terraform-cdk/issues/1134) for reference)",
        "createdAt": "2021-11-22T15:21:36Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1313#issuecomment-975636043",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2021-11-17T15:03:10Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzgw",
        "name": "documentation",
        "description": "Improvements or additions to documentation",
        "color": "0075ca"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjEz",
        "name": "size/medium",
        "description": "estimated < 1 week",
        "color": "291E63"
      }
    ],
    "milestone": null,
    "number": 1313,
    "title": "Add more documentation about how to work with existing resources (import/alteration)",
    "updatedAt": "2023-06-28T18:27:40Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjMwMDgzNA==",
      "is_bot": false,
      "login": "remyleone",
      "name": "R√©my L√©one"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\nCould you either:\r\n\r\n- Rename the help in help.txt if you don't want to add formatting text\r\n- Rename the help in README.md and add markdown formating.\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc46DI5d",
        "author": {
          "login": "skorfmann"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "What benefit do you see to rename to `help.txt`?",
        "createdAt": "2021-11-19T09:27:03Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1315#issuecomment-973901405",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc46DJMG",
        "author": {
          "login": "remyleone"
        },
        "authorAssociation": "NONE",
        "body": "On windows, you have support natively with an editor as if you don't have a file extension you have to set it up for yourself. I would suggest to go the README.md way so that it can be directly pushed to a github/gitlab and have a basic readme setup and rendered. ",
        "createdAt": "2021-11-19T09:28:46Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1315#issuecomment-973902598",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc46JvFK",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "I personally would love to see this in a `README.md` file üëç\r\nIt currently is also used to be [printed after the project was initialized](https://github.com/hashicorp/terraform-cdk/blob/9225fb5ef569057450b7b7df0bb8148ebc3d72eb/packages/cdktf-cli/templates/typescript/.hooks.sscaff.js#L19), but we could still do that with a `README.md`.",
        "createdAt": "2021-11-22T15:16:11Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1315#issuecomment-975630666",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc48VHQ5",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "This could also have helped with #1478 if it would've included information of steps to run after cloning such a project (to install dependencies, generate provider bindings, etc.).\r\nFor example we should add something along these lines to the TypeScript template:\r\n````md\r\n# project xy\r\nThis is a CDK for Terraform project using TypeScript.\r\n\r\n## Dependencies\r\nYou need Nodejs, TODO and TBD installed.\r\n\r\n## Setup\r\nRun the following commands to install the required dependencies:\r\n```sh\r\nnpm install\r\ncdktf get\r\n```\r\n````",
        "createdAt": "2022-01-13T14:06:16Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1315#issuecomment-1012167737",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2021-11-17T15:46:19Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzky",
        "name": "good first issue",
        "description": "Good for newcomers",
        "color": "7057ff"
      },
      {
        "id": "MDU6TGFiZWwyMjYwNjQ0NDQx",
        "name": "cdktf-cli",
        "description": "",
        "color": "82e5de"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4Mjg1",
        "name": "size/small",
        "description": "estimated < 1 day",
        "color": "4671C0"
      },
      {
        "id": "LA_kwDODd1Amc7x0kYM",
        "name": "feature/init",
        "description": "cdktf init related features",
        "color": "C1E24A"
      }
    ],
    "milestone": null,
    "number": 1315,
    "title": "Rename the help file when running `cdk init` to markdown and/or have a .txt extension to the help file",
    "updatedAt": "2023-06-02T09:35:50Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjEzMzcwNDY=",
      "is_bot": false,
      "login": "DanielMSchmidt",
      "name": "Daniel Schmidt"
    },
    "body": "<!--- Please keep this note for the community --->\n\n### Community Note\n\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\n\n<!--- Thank you for keeping this note for the community --->\n\n### Description\n\n<!--- Please leave a helpful description of the feature request here. --->\n\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\n\n```ts\nimport { Construct } from \"constructs\";\nimport { App, TerraformStack } from \"cdktf\";\nimport { RandomProvider } from \"./.gen/providers/random\";\n\nclass MyStack extends TerraformStack {\n  constructor(scope: Construct, name: string) {\n    super(scope, name);\n\n    // define resources here\n    new RandomProvider(this, \"1\", {});\n    new RandomProvider(this, \"2\", {});\n  }\n}\n\nconst app = new App();\nnew MyStack(app, \"test-tf-provider-cfg\");\napp.synth();\n```\n\nResults in a successful synth, we don't warn that an alias needs to be set so users get this error on plan:\n\n```\n A default (non-aliased) provider configuration for \"random\" was already\n‚îÇ given at cdk.tf.json:18,15-16. If multiple configurations are required, set\n‚îÇ the \"alias\" argument for alternative configurations.\n```\n\n### References\n\n<!---\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\n\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\n--->\n",
    "comments": [],
    "createdAt": "2021-11-24T14:25:40Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMTM2Mjc5MjMx",
        "name": "ux/configuration",
        "description": "",
        "color": "58FCA0"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4Mjg1",
        "name": "size/small",
        "description": "estimated < 1 day",
        "color": "4671C0"
      }
    ],
    "milestone": null,
    "number": 1349,
    "title": "synth should fail if a second provider of the same type has no alias",
    "updatedAt": "2021-12-02T09:59:03Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjExMTIwNTY=",
      "is_bot": false,
      "login": "ansgarm",
      "name": "Ansgar Mertens"
    },
    "body": "### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n---\r\nAdd a testcase to the Edge Provider tests (introduced in https://github.com/hashicorp/terraform-cdk/pull/1311) that tests the behaviour of passing an entire resource into a TerraformOutput. Terraform seems to support this, so we might want to do so too.",
    "comments": [],
    "createdAt": "2021-11-26T16:49:41Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwyNTcwMTY0OTY5",
        "name": "testing",
        "description": "",
        "color": "456cc6"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4Mjg1",
        "name": "size/small",
        "description": "estimated < 1 day",
        "color": "4671C0"
      },
      {
        "id": "MDU6TGFiZWwzMzE3NzI2NjM4",
        "name": "tech-debt",
        "description": "",
        "color": "191658"
      }
    ],
    "milestone": null,
    "number": 1356,
    "title": "Edge Provider Test: Test passing an entire resource to a Terraform Output",
    "updatedAt": "2022-07-05T08:31:12Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjExMTIwNTY=",
      "is_bot": false,
      "login": "ansgarm",
      "name": "Ansgar Mertens"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\nIn regards to https://github.com/hashicorp/terraform-cdk/issues/1312 we want to make our docs more clear about why `synth` is called `synth` and not `compile`, `transpile` or similar.  \r\nIt should also be clear what happens when running `synth` (For example it _can_ involve compilation [i.e. when using Java] and executing the compilation result or may only involve executing the stack code [i.e. when using Python]).\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\n### References\r\n\r\n* https://github.com/hashicorp/terraform-cdk/issues/1312\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5VbBFA",
        "author": {
          "login": "xiehan"
        },
        "authorAssociation": "MEMBER",
        "body": "May be worth tackling at the same time as #798 and #674 (and perhaps even #2109)",
        "createdAt": "2023-02-16T14:08:55Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1406#issuecomment-1433145664",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2021-12-10T10:00:52Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzgw",
        "name": "documentation",
        "description": "Improvements or additions to documentation",
        "color": "0075ca"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4Mjg1",
        "name": "size/small",
        "description": "estimated < 1 day",
        "color": "4671C0"
      }
    ],
    "milestone": null,
    "number": 1406,
    "title": "Docs: Add note about `synth` being common term in CDK ecosystem",
    "updatedAt": "2023-06-28T18:29:15Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjEzMzcwNDY=",
      "is_bot": false,
      "login": "DanielMSchmidt",
      "name": "Daniel Schmidt"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\nOur documentation is currently spare on details how to access data from modules (HCLModules or generated ones), improving this would help the UX greatly\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n\r\n- https://github.com/hashicorp/terraform-cdk/issues/956 \r\n- https://github.com/hashicorp/terraform-cdk/issues/1340\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5VagEE",
        "author": {
          "login": "xiehan"
        },
        "authorAssociation": "MEMBER",
        "body": "Relates to #2072 - might make sense to tackle both at the same time.",
        "createdAt": "2023-02-16T12:25:37Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1443#issuecomment-1433010436",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2022-01-03T09:04:42Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzgw",
        "name": "documentation",
        "description": "Improvements or additions to documentation",
        "color": "0075ca"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4Mjg1",
        "name": "size/small",
        "description": "estimated < 1 day",
        "color": "4671C0"
      }
    ],
    "milestone": null,
    "number": 1443,
    "title": "Document data access for modules",
    "updatedAt": "2023-06-28T18:26:54Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjQxNjg0OQ==",
      "is_bot": false,
      "login": "robin-norwood",
      "name": "Robin Norwood"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### cdktf & Language Versions\r\n\r\n```\r\n$ cdktf --version\r\n0.8.6\r\n$ terraform -version\r\nTerraform v1.1.3\r\non darwin_amd64\r\n$ dotnet --version\r\n6.0.101\r\n$ dotnet --list-sdks\r\n3.1.416 [/usr/local/share/dotnet/sdk]\r\n6.0.101 [/usr/local/share/dotnet/sdk]\r\n```\r\n\r\n### Affected Resource(s)\r\n\r\nAWS resources? Maybe others.\r\n\r\n### Debug Output\r\n\r\nhttps://gist.github.com/robin-norwood/a0a64fd2aebd6d70f8911e5f91d34b01\r\n\r\n### Expected Behavior\r\n\r\nSynth runs without warning messages.\r\n\r\n### Actual Behavior\r\n\r\nAn excessive number of warnings.\r\n\r\n```\r\n$ cdktf deploy\r\nWarning NETSDK1174: The abbreviation of -p for --project is deprecated. Please use --project.\r\n\r\n/Users/rnorwood/code/learn-cdktf/.gen/aws/aws/Accessanalyzer/AccessanalyzerAnalyzer.cs(14,127): warning CS1573: Parameter 'config' has no matching param tag in the XML comment for 'AccessanalyzerAnalyzer.AccessanalyzerAnalyzer(Construct, string, IAccessanalyzerAnalyzerConfig)' (but other parameters do) [/Users/rnorwood/code/learn-cdktf/.gen/aws/aws.csproj]\r\n\r\n/Users/rnorwood/code/learn-cdktf/.gen/aws/aws/AccountAlternateContact.cs(14,114): warning CS1573: Parameter 'config' has no matching param tag in the XML comment for 'AccountAlternateContact.AccountAlternateContact(Construct, string, IAccountAlternateContactConfig)' (but other parameters do) [/Users/rnorwood/code/learn-cdktf/.gen/aws/aws.csproj]\r\n/Users/rnorwood/code/learn-cdktf/.gen/aws/aws/Acm/AcmCertificate.cs(14,101): warning CS1573: Parameter 'config' has no matching param tag in the XML comment for 'AcmCertificate.AcmCertificate(Construct, string, IAcmCertificateConfig?)' (but other parameters do) [/Users/rnorwood/code/learn-cdktf/.gen/aws/aws.csproj]\r\n```\r\n\r\n### Steps to Reproduce\r\n\r\n## Create project\r\n\r\n```sh\r\n$ mkdir learn-cdktf\r\n$ cd learn-cdktf\r\n$ cdktf init --template=\"csharp\"\r\n```\r\n\r\n## Add AWS provider\r\n\r\nEdit `cdktf.json`:\r\n\r\n```json\r\n{\r\n    \"language\": \"csharp\",\r\n    \"app\": \"dotnet run -p MyTerraformStack.csproj\",\r\n    \"projectId\": \"904ae1c4-a12f-43bc-a47e-fa6f77321d77\",\r\n    \"terraformProviders\": [\r\n      \"hashicorp/aws@~> 3.67.0\"\r\n    ],\r\n    \"terraformModules\": [],\r\n    \"context\": {\r\n        \"excludeStackIdFromLogicalIds\": \"true\",\r\n\"allowSepCharsInLogicalIds\": \"true\"\r\n    }\r\n}\r\n```\r\n\r\n```\r\n$ cdktf get\r\n$ dotnet add reference .gen/aws/aws.csproj\r\n```\r\n\r\nAny reasonable example code should reproduce, I used:\r\n\r\n```csharp\r\nusing System;\r\nusing Constructs;\r\nusing HashiCorp.Cdktf;\r\n\r\nusing aws;\r\nusing aws.Ec2;\r\n\r\nnamespace MyCompany.MyApp\r\n{\r\n    class MyApp : TerraformStack\r\n    {\r\n        public MyApp(Construct scope, string id) : base(scope, id)\r\n        {\r\n            new AwsProvider(this, \"AWS\", new AwsProviderConfig\r\n            {\r\n                Region = \"us-west-1\"\r\n            });\r\n\r\n            Instance instance = new Instance(this, \"compute\", new InstanceConfig\r\n            {\r\n                Ami = \"ami-01456a894f71116f2\",\r\n                InstanceType = \"t2.micro\",\r\n            });\r\n\r\n            new TerraformOutput(this, \"public_ip\", new TerraformOutputConfig\r\n            {\r\n                Value = instance.PublicIp\r\n            });\r\n        }\r\n\r\n        public static void Main(string[] args)\r\n        {\r\n            App app = new App();\r\n            new MyApp(app, \"aws_instance\");\r\n\r\n            app.Synth();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nDeploy:\r\n\r\n```\r\n$ cdktf deploy\r\n```\r\n\r\nThe warnings show up here, and I believe with `cdktf synth`. The deploy succeeds, and subsequent commands don't show the warning.\r\n\r\n### Important Factoids\r\n\r\nReproduced on MacOS 10.14.6. .net and other tools installed via brew.\r\n\r\n### References\r\n\r\n",
    "comments": [],
    "createdAt": "2022-01-12T23:00:40Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMTM1OTYzMTU0",
        "name": "language/c#",
        "description": "C# language issues",
        "color": "c5def5"
      }
    ],
    "milestone": null,
    "number": 1479,
    "title": "Warnings the first time synthesizing C# projects: \"Parameter 'config' has no matching param tag...\"",
    "updatedAt": "2022-02-08T13:51:48Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjM4Njg3NTQ=",
      "is_bot": false,
      "login": "jsteinich",
      "name": "Jon Steinich"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\nCurrently some more advanced data types aren't correctly handled when generating providers/modules. For example `list<list<string>>` is treated as just `list<string>` and `map<list<string>>` is treated as `list<map<string>>`.\r\n\r\nIdeally `AttributeTypeModel`, and perhaps some parts of `AttributeModel` and `AttributesEmitter`, get refactored to better support arbitrary types and to generally be easier to use. We've been talking about it for awhile now and it almost seems like a necessity to support these cases.\r\n\r\n### References\r\n\r\n#1299 \r\n",
    "comments": [],
    "createdAt": "2022-01-21T03:20:49Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwyMjI4Mzg3NjY3",
        "name": "cdktf",
        "description": "",
        "color": "fccac4"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMTM2MjAxMTE5",
        "name": "provider get / generation",
        "description": "",
        "color": "CC3938"
      }
    ],
    "milestone": null,
    "number": 1501,
    "title": "Support nested collections and other ",
    "updatedAt": "2023-06-01T16:38:36Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjEzMzcwNDY=",
      "is_bot": false,
      "login": "DanielMSchmidt",
      "name": "Daniel Schmidt"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\nWhen writing constructs that \r\n\r\n- may only be created once per scope\r\n- interact with other constructs\r\n- Aspects need to filter this type\r\n\r\nOne needs to use a bit of boilerplate to implement `MyType.isMyType(s: Construct)`, `MyType.findChildrenOfMyType(s: Construct)`, `MyType.findParentOfMyType(s: Scope)`. Exposing a common API might make this easier to write for folks who do not know this mechanism. An API could look like this:\r\n\r\n\r\n```ts\r\nimport { TypedConstruct } from \"cdktf\";\r\n\r\nconst MyConstructType = new TypedConstruct(\"an_optional_name\");\r\n\r\nclass MyConstruct from Construct {\r\n  constructor(scope: Construct, name: string) {\r\n    super(scope, name);\r\n\r\n    MyConstructType.markAsType(this);\r\n\r\n  }\r\n}\r\n\r\nconst allOfMyConstructs = MyConstructType.findAllChildren(app);\r\nconst parentOfMyConstruct = MyConstructType.findParent(someInnerConstructScope);\r\nMyConstructType.isOfType(someOtherConstruct)\r\n```\r\n\r\n\r\nAll of these examples have the same problem: identify sth as xyz, find xyz parent, findAll xyz children. I was wondering if that is sth we can solve centrally \r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n\r\n- https://github.com/hashicorp/terraform-cdk/blob/909ed779d143bbfd5cf77e1aa2cb7c6af027d1d4/packages/cdktf/lib/app.ts#L87-L109\r\n- https://github.com/hashicorp/terraform-cdk/blob/909ed779d143bbfd5cf77e1aa2cb7c6af027d1d4/packages/cdktf/lib/terraform-stack.ts#L55-L121\r\n- https://github.com/DanielMSchmidt/cdktf-multi-stack-tfe/blob/main/src/index.ts#L126-L138\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc4_VKBl",
        "author": {
          "login": "jsteinich"
        },
        "authorAssociation": "COLLABORATOR",
        "body": "I know jsii doesn't support it, but the `findAll` function in `TerraformStack` is more what I'd want to use. Having to mark a type seems very clunky given when you generally already have typed objects.",
        "createdAt": "2022-03-09T03:10:52Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1616#issuecomment-1062510693",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc4_mbFT",
        "author": {
          "login": "Chriscbr"
        },
        "authorAssociation": "NONE",
        "body": "I was thinking about some similar issues while trying to migrate another framework to constructs ([projen](https://github.com/projen/projen)), so I'm curious to see how you approach the problem. üôÇ \r\n\r\nOne challenge I had was figuring out the best way to provide the APIs you mention, like \"findAllChildren\" or \"findParent\" or \"isXxx\" (the naming is open ended), and if there's any way to keep things DRY. I encountered some friction because if I try implementing these on some class hierarchy, then static methods will start conflicting due to this JSII issue: https://github.com/aws/jsii/issues/3410\r\n\r\nOne idea I had was to code-gen some utility classes, for example:\r\n\r\n```ts\r\nimport { Construct, IConstruct } from \"constructs\";\r\nimport type { GitHub as GitHubType } from \"./github\";\r\n\r\nexport const GITHUB_SYMBOL = Symbol.for(\"projen.GitHub\");\r\n// needs to be defined as a property on the actual GitHub class as well\r\n\r\nexport namespace Types {\r\n  export class GitHub {\r\n    public static is(x: any): x is GitHubType {\r\n      return x !== null && typeof x === \"object\" && GITHUB_SYMBOL in x;\r\n    }\r\n\r\n    public static of(c: IConstruct): GitHubType {\r\n      if (this.is(c)) {\r\n        return c;\r\n      }\r\n\r\n      const parent = c.node.scope as Construct;\r\n      if (!parent) {\r\n        throw new Error(\"cannot find a parent GitHub (directly or indirectly)\");\r\n      }\r\n\r\n      return this.of(parent);\r\n    }\r\n\r\n    public static findAll(c: IConstruct): GitHubType[] {\r\n      return c.node.findAll().filter(this.is);\r\n    }\r\n  }\r\n\r\n  export class GitLab { }\r\n  export class Foo { }\r\n  ...\r\n}\r\n```\r\n\r\nI was also trying to figure out how to communicate that a particular type of construct is supposed to be a singleton, and where that logic should be enforced or validated (if at all).",
        "createdAt": "2022-03-14T16:33:27Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1616#issuecomment-1067037011",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2022-03-08T12:52:35Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwyMjk5ODU0MzY0",
        "name": "abstractions (level 2 / level 3)",
        "description": "",
        "color": "279ebc"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjEz",
        "name": "size/medium",
        "description": "estimated < 1 week",
        "color": "291E63"
      }
    ],
    "milestone": null,
    "number": 1616,
    "title": "Expose API to identify / find constructs in tree",
    "updatedAt": "2022-03-29T09:01:29Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjExMTIwNTY=",
      "is_bot": false,
      "login": "ansgarm",
      "name": "Ansgar Mertens"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\nWe currently generate empty interfaces which we could skip. See for example:\r\n\r\nhttps://github.com/hashicorp/terraform-cdk/blob/880bb91aed2034ed94cdab01a97771d10dcc83f5/packages/%40cdktf/provider-generator/lib/get/__tests__/generator/__snapshots__/complex-computed-types.test.ts.snap#L52-L62\r\n\r\nWe should skip them in generation.\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\n### References\r\n* https://github.com/hashicorp/terraform-cdk/pull/1499#discussion_r821286723\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5AITUE",
        "author": {
          "login": "jsteinich"
        },
        "authorAssociation": "COLLABORATOR",
        "body": "There are cases where an empty interface is required; basically it needs to be for an attribute that is assignable at the level above.",
        "createdAt": "2022-03-23T05:05:55Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1626#issuecomment-1075918084",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5AJW83",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "Ah, thanks for researching! Should we close this then? Or can we properly determine when this is the case and when not?",
        "createdAt": "2022-03-23T10:19:37Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1626#issuecomment-1076195127",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5AMbWl",
        "author": {
          "login": "jsteinich"
        },
        "authorAssociation": "COLLABORATOR",
        "body": "> Ah, thanks for researching! Should we close this then? Or can we properly determine when this is the case and when not?\r\n\r\nI think we should still try to fix since cutting down unused code should make things slightly faster. I think we'll just need to pass a bit more information to a struct during resource parsing.",
        "createdAt": "2022-03-24T02:19:36Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1626#issuecomment-1076999589",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2022-03-17T10:02:51Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwyMjI4Mzg3NjY3",
        "name": "cdktf",
        "description": "",
        "color": "fccac4"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMTM2MjAxMTE5",
        "name": "provider get / generation",
        "description": "",
        "color": "CC3938"
      }
    ],
    "milestone": null,
    "number": 1626,
    "title": "Skip generating empty interfaces for provider bindings",
    "updatedAt": "2023-09-29T12:53:22Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjM2NTc4MTQ2",
      "is_bot": false,
      "login": "bLuka",
      "name": "Luka"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\nTo give some context, I have some experience with Terraform, and can easily find my way out, but it is more complicated with the CDK as some details are language specific, and others are CDK specific.\r\n\r\nIt's the first time I'm playing around with Terraform modules, and I'm having a hard time understanding how it works, especially using `TerraformHclModule`. I haven't found any other documentation apart from [a short introduction](https://www.terraform.io/cdktf/concepts/modules#create-modules) which does not describe how it works, or what the parameters mean.\r\n\r\nTo make it more beginner friendly, would it make sense to enhance the docs by providing fully functional examples of Terraform modules using `TerraformHclModule` for example, and add more details over the options you should feed it?\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n\r\nI may have missed some, but exact match searches from `TerraformHclModule` gave very few web results.",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5ABhtg",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "Hi @bLuka üëã\r\n\r\nThat is a nice idea! You are right, the example in the docs you linked, assumes familiarity with the AWS VPC module ‚Äì we could definitely improve this by extending them to explain what is passed and why. And we could of course also add an example using the `TerraformHclModule` construct (and link it in the docs).\r\n\r\nDo you have further ideas / questions we might need to answer to improve our docs with?",
        "createdAt": "2022-03-21T16:44:48Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1631#issuecomment-1074142048",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5ADYzT",
        "author": {
          "login": "jsteinich"
        },
        "authorAssociation": "COLLABORATOR",
        "body": "`TerraformHclModule` isn't really meant to be used by the average user. Typically module bindings would be generated following the instructions a bit earlier on that docs page. The generated bindings have properties that match the variables and outputs of the module. `TerraformHclModule` is meant as a fallback if that generation fails for any reason. It's basically using a Terraform module directly and relying on the user to lookup the relevant pieces.",
        "createdAt": "2022-03-22T02:04:38Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1631#issuecomment-1074629843",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5AEhud",
        "author": {
          "login": "bLuka"
        },
        "authorAssociation": "NONE",
        "body": "Hello!\r\n\r\n> `TerraformHclModule` is meant as a fallback if that generation fails for any reason\r\n\r\n@jsteinich From my understanding, you highlight it's better to have language (let's say Typescript or Python) specific bindings rather than using `TerraformHclModule`. This is used to generate native Terraform modules instead of using the CDK to do so, is that right?\r\n\r\nEDIT: In fact, is `TerraformHclModule` a way to *create* new modules or a way to *consume* the modules? I first was looking for a way to create and publish modules, before thinking of consuming them.\r\n\r\n> Do you have further ideas / questions we might need to answer to improve our docs with?\r\n\r\n@ansgarm After those discussions, I realize few things are still obscure to me:\r\n- From building to publishing a new Terraform module (the documentation already covers how to consume them)\r\n- Why is the doc referring to `terraform-aws-modules/vpc/aws`? I thing AWS VPCs have native Terraform resources/data sources; what are the benefits of the VPC module compared to the Terraform resource? How is it different?",
        "createdAt": "2022-03-22T09:27:51Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1631#issuecomment-1074928541",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5AFdME",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "Ah, got it!\r\n\r\nThe `TerraformHclModule` is not creating a new module but offered to consume existing HCL modules (e.g. from the Terraform Registry). If you want to create an HCL module using CDKTF, you can use the [TFModuleStack](https://github.com/DanielMSchmidt/cdktf-tf-module-stack) construct. We might include something like this into the CDK for Terraform itself at some point in the future.\r\n\r\nHowever, if you plan to consume your modules using CDKTF, creating custom [constructs](https://www.terraform.io/cdktf/concepts/constructs) is the recommended way.\r\nWe could definitely improve the docs of `TerraformHclModule` to make that more clear.\r\n\r\nThe [`terraform-aws-modules/vpc/aws`](https://registry.terraform.io/modules/terraform-aws-modules/vpc/aws/latest) module is a reusable building block that uses e.g. an AWS VPC Terraform resource under the hood. It creates multiple resources and connects them in the right way (supplying lots of sane defaults along the way). The benefit is that you don't have to do all of that on your own as in practice there are lots of resources required to setup an AWS VPC to be ready to use.",
        "createdAt": "2022-03-22T13:20:35Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1631#issuecomment-1075172100",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5VaoM8",
        "author": {
          "login": "xiehan"
        },
        "authorAssociation": "MEMBER",
        "body": "I believe a lot of this should be addressed now by the construct authoring docs introduced in #2084 (especially [this page](https://developer.hashicorp.com/terraform/cdktf/develop-custom-constructs/publishing-and-distribution)) but from the sound of it it may still be worth adding a short paragraph below the docs for `TerraformHclModule` talking about what that is/isn't intended to be used for and then pointing to our other docs about Constructs. It may be worth tackling this at the same time as other documentation tasks related to modules, like #2072 and #956.",
        "createdAt": "2023-02-16T12:52:48Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1631#issuecomment-1433043772",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2022-03-21T00:11:23Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzgw",
        "name": "documentation",
        "description": "Improvements or additions to documentation",
        "color": "0075ca"
      },
      {
        "id": "MDU6TGFiZWwyMjE3NjIyNTkw",
        "name": "modules",
        "description": "",
        "color": "2ffc8f"
      },
      {
        "id": "MDU6TGFiZWwyMjI4Mzg3NjY3",
        "name": "cdktf",
        "description": "",
        "color": "fccac4"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      }
    ],
    "milestone": null,
    "number": 1631,
    "title": "Make TerraformHclModule more beginner friendly ‚Äî Request for docs",
    "updatedAt": "2023-06-28T18:29:06Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjEzMzcwNDY=",
      "is_bot": false,
      "login": "DanielMSchmidt",
      "name": "Daniel Schmidt"
    },
    "body": "<!--- Please keep this note for the community --->\n\n### Community Note\n\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\n\n<!--- Thank you for keeping this note for the community --->\n\n### Description\n\n<!--- Please leave a helpful description of the feature request here. --->\n\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\n\nThis insight might help us understand what usage is more common and if we can remove a flag that is not used\n\n### References\n\n<!---\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\n\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\n--->\n",
    "comments": [],
    "createdAt": "2022-03-22T15:39:14Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwyMjYwNjQ0NDQx",
        "name": "cdktf-cli",
        "description": "",
        "color": "82e5de"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMjA1MTMzMjIz",
        "name": "feature/telemetry",
        "description": "",
        "color": "2A3D32"
      }
    ],
    "milestone": null,
    "number": 1639,
    "title": "Telemetry: track CLI flags being used",
    "updatedAt": "2022-03-29T08:58:53Z"
  },
  {
    "assignees": [
      {
        "id": "MDQ6VXNlcjU3MzUzMQ==",
        "login": "mutahhir",
        "name": "Mutahhir Hayat",
        "databaseId": 0
      }
    ],
    "author": {
      "id": "MDQ6VXNlcjM4Njg3NTQ=",
      "is_bot": false,
      "login": "jsteinich",
      "name": "Jon Steinich"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### cdktf & Language Versions\r\n\r\n0.9.0. Any language.\r\n\r\n### Affected Resource(s)\r\n\r\nAttempting to use `.fqn` on any resource when appending to it or using in an array (probably other cases as well).\r\nThis mainly comes up when needing to use escape hatches.\r\n\r\n### Expected Behavior\r\n\r\nSynthesized output is valid.\r\n\r\n### Actual Behavior\r\n\r\n- `Expected the start of an expression, but found an invalid expression token`\r\n- jsii.errors.JSIIError: Expected array type, got \"<unresolved-token>\"\r\n- X is object with Y attributes\r\n\r\n### Important Factoids\r\n\r\nSupport for cross stack references caused a change in behavior. Previously `.fqn` actually return just a raw string (string token of string is the input string).\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor documentation? For example:\r\n--->\r\n\r\n- https://discuss.hashicorp.com/t/python-escape-hatching-in-0-9-x/37202\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5GMVzR",
        "author": {
          "login": "armandosorianopfs"
        },
        "authorAssociation": "NONE",
        "body": "I just reached an scenario where `.fqn` is of type string, but it actually resolves into an array of objects, making it impossible to use it as value in any other object.\r\n\r\nJust for the case, this is the scenario:\r\n```\r\nconst webappService = new Service(this, 'k8s-service-webapp', {\r\n  ...\r\n  waitForLoadBalancer: true,\r\n});\r\n\r\nnew DnsRecordSet(this, `webapp-dns-zone-record`, {\r\n  ...\r\n  rrdatas: [(webappService?.status.fqn as any)[0]?.load_balancer?.ingress?.ip], // won't be resolved properly\r\n});\r\n```",
        "createdAt": "2022-07-07T13:45:18Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1641#issuecomment-1177640145",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5GM-4A",
        "author": {
          "login": "DanielMSchmidt"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "You would need to take terraform functions in this case. It should look sth like this: `Fn.lookup(Fn.lookup(Fn.lookup(Fn.element(webappService.status.fqn, 0), \"load_balancer\"), \"ingress\"), \"ip\")`",
        "createdAt": "2022-07-07T15:37:13Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1641#issuecomment-1177808384",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5GQX77",
        "author": {
          "login": "armandosorianopfs"
        },
        "authorAssociation": "NONE",
        "body": "@DanielMSchmidt you made my day!! thanks!!\r\n\r\nIf anyone reaches this issue with similar issue note that you need to use `lookup` to resolve object properties and `element` to resolve arrays. For my case, I've reached to this:\r\n```\r\nprivate getIpFromStatusFqn(fqn: string): string {\r\n  const resolvedFqn = Fn.element(fqn as unknown as any[], 0);\r\n  const loadBalancer = Fn.lookup(resolvedFqn, 'load_balancer', []);\r\n  const loadBalancerFirstElement = Fn.element(loadBalancer, 0);\r\n  const ingress = Fn.lookup(loadBalancerFirstElement, 'ingress', []);\r\n  const ingressFirstElement = Fn.element(ingress, 0);\r\n\r\n  return Fn.lookup(ingressFirstElement, 'ip', 'no-ip');\r\n}\r\n```",
        "createdAt": "2022-07-08T08:19:04Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1641#issuecomment-1178697467",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5HsogQ",
        "author": {
          "login": "paymog"
        },
        "authorAssociation": "NONE",
        "body": "I'm running into a similar issue though using `Fn.lookup` and `Fn.element` isn't working well in all cases. Here's code that works well on version `0.8.6` (note the use of `.fqn` in the `addOverride` at the bottom)\r\n\r\n```typescript\r\n    const dataAwsAvailabilityZonesAll =\r\n      new aws.datasources.DataAwsAvailabilityZones(\r\n        this,\r\n        \"allAvailableZones\",\r\n        {}\r\n      );\r\n\r\n    const efs = new aws.efs.EfsFileSystem(this, \"efs-volume\", {\r\n      tags: {\r\n        name: name,\r\n        deployment: \"ipfs\",\r\n      },\r\n    });\r\n\r\n    const efsMountTarget = new aws.efs.EfsMountTarget(\r\n      this,\r\n      \"efs-mount-target\",\r\n      {\r\n        dependsOn: [efs],\r\n        count: 2,\r\n        fileSystemId: efs.id,\r\n        subnetId: \"${aws_subnet.priv_subnet[count.index].id}\",\r\n        securityGroups: config.vpcSecurityGroups.ids,\r\n      }\r\n    );\r\n    efsMountTarget.addOverride(\r\n      \"count\",\r\n      `\\${length(${dataAwsAvailabilityZonesAll.fqn}.names)}`\r\n    );\r\n```\r\n\r\nand here's my attempt at using `Fn.element` and `Fn.lookup` on version `0.12`\r\n\r\n```typescript\r\n    const zoneNames = Fn.lookup(dataAwsAvailabilityZonesAll.fqn, \"names\", undefined)\r\n    efsMountTarget.addOverride(\r\n      \"count\",\r\n      Fn.lengthOf(zoneNames)\r\n    );\r\n```\r\n\r\nbut I still get issues like @armandosorianopfs gets:\r\n\r\n\r\n```\r\n[2022-08-02T09:47:39.574] [ERROR] default - ‚ï∑\r\n‚îÇ Error: Invalid character\r\n‚îÇ\r\n‚îÇ   on cdk.tf.json line 271, in resource.aws_efs_mount_target.mercury-ipfs_efs-mount-target_B5A83491:\r\n‚îÇ  271:         \"count\": \"${length(${data.aws_availability_zones.mercury-ipfs_allAvailableZones_45C25C25}.names)}\",\r\n‚îÇ\r\n‚îÇ This character is not used within the language.\r\ngoldsky-infra-dev  ‚ï∑\r\n                   ‚îÇ Error: Invalid character\r\n                   ‚îÇ\r\n                   ‚îÇ   on cdk.tf.json line 271, in resource.aws_efs_mount_target.mercury-ipfs_efs-mount-target_B5A83491 (mercury-ipfs/efs-mount-target):\r\n                   ‚îÇ  271:         \"count\": \"${length(${data.aws_availability_zones.mercury-ipfs_allAvailableZones_45C25C25 (mercury-ipfs/allAvailableZones)}.names)}\",\r\n                   ‚îÇ\r\n                   ‚îÇ This character is not used within the language.\r\n                   ‚ïµ\r\n\r\n‚†á  Processing\r\n[2022-08-02T09:47:39.592] [ERROR] default - ‚ï∑\r\n‚îÇ Error: Invalid expression\r\n‚îÇ\r\n‚îÇ   on cdk.tf.json line 271, in resource.aws_efs_mount_target.mercury-ipfs_efs-mount-target_B5A83491:\r\n‚îÇ  271:         \"count\": \"${length(${data.aws_availability_zones.mercury-ipfs_allAvailableZones_45C25C25}.names)}\",\r\n‚îÇ\r\n‚îÇ Expected the start of an expression, but found an invalid expression token.\r\ngoldsky-infra-dev  ‚ï∑\r\n                   ‚îÇ Error: Invalid expression\r\n                   ‚îÇ\r\n                   ‚îÇ   on cdk.tf.json line 271, in resource.aws_efs_mount_target.mercury-ipfs_efs-mount-target_B5A83491 (mercury-ipfs/efs-mount-target):\r\n                   ‚îÇ  271:         \"count\": \"${length(${data.aws_availability_zones.mercury-ipfs_allAvailableZones_45C25C25 (mercury-ipfs/allAvailableZones)}.names)}\",\r\n                   ‚îÇ\r\n                   ‚îÇ Expected the start of an expression, but found an invalid expression token.\r\n```",
        "createdAt": "2022-08-02T15:52:39Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1641#issuecomment-1202882576",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5Koot5",
        "author": {
          "login": "mutahhir"
        },
        "authorAssociation": "MEMBER",
        "body": "@paymog I've been looking into this issue. I was hoping to get some more information, as I couldn't reproduce it exactly.\r\n\r\n### Why is the syntax error happening\r\nFrom what I understand, the root of the problem is this pattern:\r\n\r\n```tf\r\n${length(${data.foo}.names)}\r\n```\r\n\r\nOur token system assumes that we're going to be used within a string and adds interpolation syntax `${}` around the token. However, since you're already wrapping it within a `${}`, that becomes a syntax error in Terraform.\r\n\r\n### The 0.12 example doesn't work\r\n> and here's my attempt at using Fn.element and Fn.lookup on version 0.12\r\n> ```js\r\n>    const zoneNames = Fn.lookup(dataAwsAvailabilityZonesAll.fqn, \"names\", undefined)\r\n>    efsMountTarget.addOverride(\r\n>      \"count\",\r\n>      Fn.lengthOf(zoneNames)\r\n>    );\r\n> ```\r\n\r\nThis shouldn't emit the error you mentioned. I tried it out on my end, and it seems to be working fine on my end.\r\n\r\nIt outputs: \r\n\r\n```tf\r\n\"count\": \"${length(lookup(data.aws_availability_zones.allAvailableZones, \\\"names\\\", []))}\",\r\n```",
        "createdAt": "2022-09-20T10:40:05Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1641#issuecomment-1252166521",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5KrYVP",
        "author": {
          "login": "paymog"
        },
        "authorAssociation": "NONE",
        "body": "Thanks for looking into this @mutahir! I've long since resolved this issue and I don't quite remember how I did it. \r\n\r\nThough, I suspect that the reason I was seeing that error on 0.12 was because 0.12 requires running `tsc` prior to diff/deploy while 0.8 didn't. I didn't realize that until quite a few hours into debugging the upgrade.",
        "createdAt": "2022-09-20T20:38:11Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "HOORAY",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1641#issuecomment-1252885839",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5LCMlf",
        "author": {
          "login": "jsteinich"
        },
        "authorAssociation": "COLLABORATOR",
        "body": "While more functionality has been added to reduce the need for using `fqn`, it still doesn't change that `fqn` is less useable to users in the cases that it would still be ideal to use it.",
        "createdAt": "2022-09-27T02:01:28Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1641#issuecomment-1258867039",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5LFDzv",
        "author": {
          "login": "mutahhir"
        },
        "authorAssociation": "MEMBER",
        "body": "Ah, I didn't fully understand the core of the issue but went on from the last error message. My bad. Thanks for reopening @jsteinich, I'll take another look soon.\r\n\r\nTo clarify: The main issue is the inability to use `.fqn` within the interpolated section of a string. The token system's expectation that the resource fqn is being inserted into a non-interpolated terraform string is requiring users to jump through hoops to reference something that previously just required them to just do `resource.fqn`. ",
        "createdAt": "2022-09-27T14:46:47Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1641#issuecomment-1259617519",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5MYNT4",
        "author": {
          "login": "M1kep"
        },
        "authorAssociation": "NONE",
        "body": "Adding another example I'm currently running into while trying to setup a conditional expression, with variables in this case:\r\nIf there's a better way I should be doing this please let me know.\r\n\r\nGoal:\r\n```\r\nvariable \"a_var\" {\r\n    type = bool\r\n}\r\n\r\nvariable \"b_var\" {}\r\n\r\noutput \"test\" {\r\n    value = \"${var.a_var ? var.b_var : null}\"\r\n}\r\n```\r\n\r\nAttempt:\r\n```python\r\nclass MyStack(TerraformStack):\r\n    def __init__(self, scope: Construct, ns: str):\r\n        super().__init__(scope, ns)\r\n\r\n        a_var = TerraformVariable(self, \"a_var\")\r\n        b_var = TerraformVariable(self, \"b_var\")\r\n\r\n        TerraformOutput(self,\r\n                        \"test\",\r\n                        value=\"${\" + f\"{a_var.fqn} ? {b_var.fqn} : null\" + \"}\"\r\n        )\r\n```\r\n\r\nGenerates:\r\n```json\r\n...\r\n  \"output\": {\r\n    \"test\": {\r\n      \"value\": \"${${var.a_var} ? ${var.b_var} : null\"\r\n    }\r\n  },\r\n...\r\n```\r\nWorkaround I'm currently using:\r\n```python\r\n        TerraformOutput(self,\r\n                        \"test\",\r\n                        value=\"${\" + f\"var.{a_var.node.id} ? var.{b_var.node.id} : null\" + \"}\"\r\n        )\r\n```",
        "createdAt": "2022-10-17T20:03:15Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1641#issuecomment-1281414392",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2022-03-22T21:46:57Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwyMjI4Mzg3NjY3",
        "name": "cdktf",
        "description": "",
        "color": "fccac4"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMTM2Mjc5MjMx",
        "name": "ux/configuration",
        "description": "",
        "color": "58FCA0"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjUx",
        "name": "size/large",
        "description": "estimated < 1 month",
        "color": "9559B0"
      }
    ],
    "milestone": null,
    "number": 1641,
    "title": "Resource FQN tokens aren't resolved in a user friendly way",
    "updatedAt": "2023-06-01T16:17:26Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjEyMzUwMw==",
      "is_bot": false,
      "login": "coen-hyde",
      "name": "Coen Hyde"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\nWe would like the option to disable the creation of assets for local modules behavior introduced in #1476. This new way means that for a cdktf application to run in Terraform Cloud with the latest changes to a module, someone needs to execute `cdktf synth` and commit the generated changes. We were previously triggering runs on cdktf app workspaces if a module it uses changed via the VCS workflow. In addition we do not really want to commit into source an asset directory that has the same module copied dozens of times.\r\n\r\nAs I understand it, this change was made to improve compatibility with Terraform Cloud. The old way worked for us well in Terraform Cloud. Is there something we are missing? Maybe there is an alternative flow that we are not aware of?\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5AMcgv",
        "author": {
          "login": "jsteinich"
        },
        "authorAssociation": "COLLABORATOR",
        "body": "There are a couple motivations for local modules to be treated as assets:\r\n\r\n- When invoking Terraform Cloud from cdktf, any modules used need to be accessible. Packing as assets is a convenient way to ensure this is true.\r\n- Using assets centralizes the handling of relative paths (very common when using local modules) and results in a consistent experience.\r\n- Packaging everything together makes it very clear what source resulted in the synthesized output (More of an argument that the AWS CDK makes since lookups are very common in Terraform).\r\n\r\nI do have a few questions / comments about your workflow to help understand the best course of action:\r\n\r\n- Are the modules in the same repository as the cdktf app?\r\n- Is it possible to just trigger `cdktf synth` as part of the VCS workflow? Not having to run `cdktf synth` locally is a nicer flow from my experience.\r\n- What's the motivation for using a local module rather than just building into the cdktf app?",
        "createdAt": "2022-03-24T02:29:33Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1644#issuecomment-1077004335",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5APeNt",
        "author": {
          "login": "coen-hyde"
        },
        "authorAssociation": "NONE",
        "body": "Yeah I get the motivation, it makes sense for a lot of workflows, just not ours.\r\n\r\n> Are the modules in the same repository as the cdktf app?\r\n\r\nThey are. We have a mono repo for our infrastructure that includes our modules, workspaces and cdktf apps.\r\n\r\n> Is it possible to just trigger cdktf synth as part of the VCS workflow? Not having to run cdktf synth locally is a nicer flow from my experience.\r\n\r\nI guess we could. But this will still make our git history kind of gross.\r\n\r\n> What's the motivation for using a local module rather than just building into the cdktf app?\r\n\r\nMost of our infrastructure is regular Terraform. These modules are just regular terraform modules which are used in other workspaces as well as the `cdktf` apps. We would prefer not to duplicate logic. Also writing Terraform in `cdktf` has a higher barrier for entry, which means fewer people have the expertise to make changes. So for these reason we try to do what we can in Terraform before reaching for `cdktf`.",
        "createdAt": "2022-03-24T16:13:11Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1644#issuecomment-1077797741",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5AR2qr",
        "author": {
          "login": "jsteinich"
        },
        "authorAssociation": "COLLABORATOR",
        "body": "> > Is it possible to just trigger cdktf synth as part of the VCS workflow? Not having to run cdktf synth locally is a nicer flow from my experience.\r\n> \r\n> I guess we could. But this will still make our git history kind of gross.\r\n\r\nThe idea would be that the synth output (including assets) then doesn't need to be committed.\r\nIf that isn't possible, then I think an option to disable automatic options could be a good compromise.\r\n\r\n\r\n\r\n> Also writing Terraform in `cdktf` has a higher barrier for entry\r\n\r\nI'm interested to hear more about why you think this way. Ideally the barrier is actually lower (at least for developers).",
        "createdAt": "2022-03-24T21:57:55Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1644#issuecomment-1078422187",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5AcWNf",
        "author": {
          "login": "coen-hyde"
        },
        "authorAssociation": "NONE",
        "body": "> The idea would be that the synth output (including assets) then doesn't need to be committed.\r\n> If that isn't possible, then I think an option to disable automatic options could be a good compromise.\r\n\r\nI don't think this is possible with the VCS workflow in Terraform Cloud. As far as i know you can't run a pre-processing script to do something like this. \r\n\r\n> I'm interested to hear more about why you think this way. Ideally the barrier is actually lower (at least for developers).\r\n\r\n`cdktf` is a layer of abstraction on top of Terraform but it is a rather transparent layer. To write `cdktf` you need to know how Terraform functions and how to code. That is two knowledge dependencies. Where as Terraform is only one. In an environment where we are trying to encourage people to use Infrastructure as Code instead of console clicking, reducing the barrier to entry is important.",
        "createdAt": "2022-03-28T21:30:53Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1644#issuecomment-1081172831",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5znhBE",
        "author": {
          "login": "joey-squid"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "Reviving this ancient issue to comment that this would be particularly helpful for module developers. Normally when changing the internals of a module you don't need to rerun `terraform init`, but (as it stands) you do need to run `cdktf get`.",
        "createdAt": "2024-02-12T22:49:18Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1644#issuecomment-1939738692",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2022-03-23T21:05:00Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwyMjE3NjIyNTkw",
        "name": "modules",
        "description": "",
        "color": "2ffc8f"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMTM2Mjc5MjMx",
        "name": "ux/configuration",
        "description": "",
        "color": "58FCA0"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4Mjg1",
        "name": "size/small",
        "description": "estimated < 1 day",
        "color": "4671C0"
      }
    ],
    "milestone": null,
    "number": 1644,
    "title": "Option to disable creation of assets for local modules",
    "updatedAt": "2024-02-12T22:49:19Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjExMTIwNTY=",
      "is_bot": false,
      "login": "ansgarm",
      "name": "Ansgar Mertens"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\nCurrently our templates used in `cdktf init` do a string replace to inject a RemoteBackend. This is less than ideal and broke in more than one instance (see [here](https://github.com/hashicorp/terraform-cdk/pull/1732/commits/ff6d66fdc8292dfb2a48f809acaf7fa038aba957) for one fix).\r\nWe should make that more robust.\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\n### References\r\n\r\n* https://github.com/hashicorp/terraform-cdk/issues/1493\r\n* https://github.com/hashicorp/terraform-cdk/issues/1494\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [],
    "createdAt": "2022-04-20T08:25:15Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwyMjIzNTI1MzY0",
        "name": "terraform cloud",
        "description": "",
        "color": "4ed354"
      },
      {
        "id": "MDU6TGFiZWwyMjYwNjQ0NDQx",
        "name": "cdktf-cli",
        "description": "",
        "color": "82e5de"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjEz",
        "name": "size/medium",
        "description": "estimated < 1 week",
        "color": "291E63"
      },
      {
        "id": "LA_kwDODd1Amc7x0kYM",
        "name": "feature/init",
        "description": "cdktf init related features",
        "color": "C1E24A"
      }
    ],
    "milestone": null,
    "number": 1734,
    "title": "Improve init templates (get rid of string replacing)",
    "updatedAt": "2023-06-01T16:17:56Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjEzMzcwNDY=",
      "is_bot": false,
      "login": "DanielMSchmidt",
      "name": "Daniel Schmidt"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\nCurrently you can only initialise from a terraform project on TS projects, but it shouldn't be a lot of effort to extend this to all languages supported by convert\r\n\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [],
    "createdAt": "2022-05-12T13:39:38Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMTg1Mzg1NTQ2",
        "name": "feature/convert",
        "description": "",
        "color": "d93f0b"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjEz",
        "name": "size/medium",
        "description": "estimated < 1 week",
        "color": "291E63"
      },
      {
        "id": "LA_kwDODd1Amc7x0kYM",
        "name": "feature/init",
        "description": "cdktf init related features",
        "color": "C1E24A"
      }
    ],
    "milestone": null,
    "number": 1799,
    "title": "Init: Support all languages from existing terraform project",
    "updatedAt": "2023-10-13T15:28:52Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjMxMjU2MDc2",
      "is_bot": false,
      "login": "aadhikary",
      "name": ""
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### cdktf & Language Versions\r\n\r\ncdktf (0.10.4) typescript\r\n\r\n### Affected Resource(s)\r\n\r\nDependency between stacks\r\n\r\n### Debug Output\r\n\r\nWhen stack2.dependsOn(stack1) then currently the stack dependency does not seem to work. This is not an issue if you are referencing Stack resource from stack1 into stack2. In resource reference case the stack seem to follow the order.\r\n\r\n### Expected Behavior\r\n\r\nstack2 should deploy only after stack1\r\n\r\n### Actual Behavior\r\n\r\nRace condition applies which causes any of the stack to deploy in any order.\r\n\r\n### NOTE\r\nStack addDependency method can be used to get around this.\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5EC9wN",
        "author": {
          "login": "jsteinich"
        },
        "authorAssociation": "COLLABORATOR",
        "body": "`stack2.dependsOn(stack1)` just returns a `boolean` to indicate if `stack2` depends on `stack1`. `stack2.addDependency(stack1)` is the way to indicate that `stack2` should depend on `stack1`.\r\n\r\nPerhaps a different name would make this more apparent, but I think just adding documentation would suffice.",
        "createdAt": "2022-05-31T03:20:28Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1829#issuecomment-1141627917",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2022-05-30T15:07:12Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzgw",
        "name": "documentation",
        "description": "Improvements or additions to documentation",
        "color": "0075ca"
      },
      {
        "id": "MDU6TGFiZWwyMjI4Mzg3NjY3",
        "name": "cdktf",
        "description": "",
        "color": "fccac4"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4Mjg1",
        "name": "size/small",
        "description": "estimated < 1 day",
        "color": "4671C0"
      }
    ],
    "milestone": null,
    "number": 1829,
    "title": "Docs: Make clear that `Stack.dependsOn` does not create a depedency between stacks (`addDependency` does)",
    "updatedAt": "2022-08-12T07:57:06Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjgyMzUyMTI=",
      "is_bot": false,
      "login": "sebolabs",
      "name": "Sebastian Mincewicz"
    },
    "body": "### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n### cdktf & Language Versions\r\n\r\ncdktf 0.11.0 (type-script)\r\n\r\n### Affected Resource(s)\r\n\r\nUnit tests not working like I would expect. Could be me though :)\r\n\r\n### Debug Output\r\nN/A\r\n\r\n### Expected Behavior\r\n\r\nTest should pass unless I'm doing something wrong.\r\n\r\n### Actual Behavior\r\n```\r\n> portal-azure@1.0.0 test\r\n> jest\r\n\r\n FAIL  __tests__/main-test.ts (9.099 s)\r\n\r\n  ‚óè Configuration ‚Ä∫ should contain an application\r\n\r\n    Expected azuread_application with properties {} to be present in synthesised stack.\r\n    Found no azuread_application resources instead\r\n\r\n      28 |         new PortalStack(scope, 'test');\r\n      29 |       })\r\n    > 30 |     ).toHaveResource(Application);\r\n         |       ^\r\n      31 |   });\r\n\r\n      at Object.<anonymous> (__tests__/main-test.ts:30:7)\r\n\r\nTest Suites: 1 failed, 1 total\r\nTests:       1 failed, 0 todo, 0 passed, 1 total\r\nSnapshots:   0 total\r\nTime:        4.642 s\r\n```\r\n\r\n### Steps to Reproduce\r\n```\r\nimport \"cdktf/lib/testing/adapters/jest\";\r\nimport { Testing } from \"cdktf\";\r\nimport { PortalStack } from \"../main\";\r\nimport { Application } from \"@cdktf/provider-azuread\";\r\n\r\ndescribe(\"Configuration\", () => {\r\n  it(\"should contain an application\", () => {\r\n    expect(\r\n      Testing.synthScope((scope) => {\r\n        new PortalStack(scope, 'test');\r\n      })\r\n    ).toHaveResource(Application);\r\n  });\r\n});\r\n```\r\n\r\n### Important Factoids\r\n- `cdktf synth/diff/deploy` work perfectly fine\r\n- `cdk.tf.json` under `cdktf.out` contains the following:\r\n```\r\n[\r\n  [...]\r\n  \"resource\": {\r\n    \"azuread_application\": {\r\n      \"xxxauthportal_portalapp_3876DFED\": {\r\n        \"//\": {\r\n          \"metadata\": {\r\n  [...]\r\n]\r\n```\r\n\r\n### References (main.ts)\r\n```\r\nimport { Construct } from \"constructs\";\r\nimport {\r\n  App,\r\n  TerraformStack,\r\n  RemoteBackend,\r\n} from \"cdktf\";\r\nimport {\r\n  AzureadProvider,\r\n  ApplicationFeatureTags,\r\n  Application,\r\n} from \"./.gen/providers/azuread\";\r\n\r\nexport class PortalStack extends TerraformStack {\r\n  constructor(scope: Construct, name: string) {\r\n    super(scope, name);\r\n\r\n    new AzureadProvider(this, \"AzureAd\", {});\r\n\r\n    this.AzureAdApp();\r\n  }\r\n  \r\n  AzureAdApp(this: PortalStack) {\r\n\r\n    const samlIdUri = \"\";\r\n    const samlReplyUrl = \"\";\r\n    const samlLogoutUrl = \"\";\r\n\r\n    const appFeatureTags: ApplicationFeatureTags = {\r\n      enterprise: true,\r\n    };\r\n\r\n    new Application(this, \"portal_app\", {\r\n      displayName: `AuthPortal`,\r\n      featureTags: [appFeatureTags],\r\n      identifierUris: [samlIdUri],\r\n      web: {\r\n        redirectUris: [samlReplyUrl],\r\n        logoutUrl: samlLogoutUrl,\r\n      },\r\n      preventDuplicateNames: true,\r\n    });\r\n  }\r\n}\r\n\r\nconst app = new App();\r\nconst stack = new PortalStack(app, \"auth-portal\");\r\nnew RemoteBackend(stack, {\r\n  hostname: \"app.terraform.io\",\r\n  organization: \"xxx\",\r\n  workspaces: {\r\n    name: `auth-portal`,\r\n  }\r\n});\r\napp.synth();\r\n```",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5Ext6z",
        "author": {
          "login": "jsteinich"
        },
        "authorAssociation": "COLLABORATOR",
        "body": "@sebolabs Currently you can't pass a stack instance to `Testing.synthScope`. You can work around by making your class extend from `Construct` instead. Take a look [here](https://github.com/hashicorp/terraform-cdk/issues/1506#issuecomment-1025767490) for more info.",
        "createdAt": "2022-06-13T12:59:47Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "EYES",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1850#issuecomment-1153883827",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5E_v3B",
        "author": {
          "login": "DanielMSchmidt"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "While we seem to have answered the question I'd like to keep this issue open and add a proper warning / error if someone passes a stack into synthScope.",
        "createdAt": "2022-06-16T11:41:15Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1850#issuecomment-1157561793",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5FDAtk",
        "author": {
          "login": "jsteinich"
        },
        "authorAssociation": "COLLABORATOR",
        "body": "> While we seem to have answered the question I'd like to keep this issue open and add a proper warning / error if someone passes a stack into synthScope.\r\n\r\nIf not too difficult, actually just allowing a stack would be more user friendly.",
        "createdAt": "2022-06-17T02:28:01Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1850#issuecomment-1158417252",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5G7UjF",
        "author": {
          "login": "paambaati"
        },
        "authorAssociation": "NONE",
        "body": "Can you folks help understand the solution here?\r\n\r\nIf I pass in a `Construct` instead of a `Stack`, I still don't get any generated resources from `synthScope`.\r\n\r\nThis is how I've modified the above example ‚Äì\r\n\r\n```diff\r\nimport \"cdktf/lib/testing/adapters/jest\";\r\nimport { Testing } from \"cdktf\";\r\n+import { Construct } from \"constructs\";\r\nimport { PortalStack } from \"../main\";\r\nimport { Application } from \"@cdktf/provider-azuread\";\r\n\r\n+ class PortalConstruct extends Construct {\r\n+  constructor(scope: Construct, options: Record<PropertyKey, unknown>) {\r\n+   super(scope, `${options.environment}-construct`)\r\n+    new PortalStack(scope, environment)\r\n+   }\r\n+}\r\n\r\ndescribe(\"Configuration\", () => {\r\n  it(\"should contain an application\", () => {\r\n    expect(\r\n      Testing.synthScope((scope) => {\r\n+        new PortalConstruct(scope, 'test');\r\n-        new PortalStack(scope, 'test');\r\n      })\r\n    ).toHaveResource(Application);\r\n  });\r\n});\r\n```\r\n",
        "createdAt": "2022-07-20T08:01:01Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1850#issuecomment-1189955781",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5G7qRA",
        "author": {
          "login": "DanielMSchmidt"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "This is because your construct contains a stack. A stack does not synthesize into JSON like a construct would, but it writes a file to disk with it's childrens JSON in it. This hides the content from the testing marchers. You should abstract the things you do in a stack in one or more constructs and test how they work together here",
        "createdAt": "2022-07-20T09:28:07Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1850#issuecomment-1190044736",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5HezKE",
        "author": {
          "login": "pchaganti"
        },
        "authorAssociation": "NONE",
        "body": "Running into the same issue. Is there any complete example that can be posted by the team to make it easier for users who run into this issue with testing? \r\n\r\nthanks!\r\n",
        "createdAt": "2022-07-29T12:59:37Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1850#issuecomment-1199256196",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5HpOgw",
        "author": {
          "login": "jsteinich"
        },
        "authorAssociation": "COLLABORATOR",
        "body": "> Running into the same issue. Is there any complete example that can be posted by the team to make it easier for users who run into this issue with testing?\r\n> \r\n> thanks!\r\n\r\nHopefully [this](https://www.terraform.io/cdktf/test/unit-tests) helps. There are also internal tests of the testing framework now (for example: https://github.com/hashicorp/terraform-cdk/tree/main/test/python/testing-matchers)",
        "createdAt": "2022-08-02T04:03:35Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1850#issuecomment-1201989680",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5HpXFS",
        "author": {
          "login": "paambaati"
        },
        "authorAssociation": "NONE",
        "body": "@jsteinich Thanks, that does help a bit, although it could use some more clarity ‚Äì\r\n\r\n1. The inline comment in the linked example says `// Could be a class extending from Construct` but in other parts of the guide, we're always shown `TerraformStack` and not `Construct` as examples.\r\n\r\nAdditionally, not all of us use Jest, even though it is the most popular testing framework. For folks that use other frameworks, it would help if there was an example that shows how to use `Constructs`. I for one use `tap`, and I've managed to make this work with a combination of reading the original Jest plugin implementation and comments from this issue ‚Äì\r\n\r\n```typescript\r\nimport tap from 'tap'\r\nimport expect from 'expect'\r\nimport { Testing, testingMatchers } from 'cdktf'\r\nimport { MyConstruct } from '../main'\r\nimport { Record as CFDNSRecord } from '../.gen/providers/cloudflare'\r\nimport type { TerraformConstructor } from 'cdktf/lib/testing/matchers'\r\n\r\ntap.Test.prototype.addAssert(\r\n  'toHaveResource',\r\n  3,\r\n  // NOTE: has to be a regular function and not an arrow function\r\n  // for the `this` binding to work correctly.\r\n  function toHaveResource(\r\n    hcl: string,\r\n    message: string,\r\n    resource: {\r\n      ctor: TerraformConstructor\r\n      props: Record<string, string>\r\n    },\r\n  ) {\r\n    const msg = message || 'Terraform stack is missing property'\r\n    const toHaveResourceWithProperties =\r\n      testingMatchers.getToHaveResourceWithProperties(\r\n        (items: Array<string>, assertedProperties: Record<string, unknown>) => {\r\n          if (Object.entries(assertedProperties).length === 0) {\r\n            return items.length > 0\r\n          }\r\n          return expect\r\n            .arrayContaining([expect.objectContaining(assertedProperties)])\r\n            .asymmetricMatch(items)\r\n        },\r\n      )\r\n    const self = this as unknown as typeof tap\r\n    return self.ok(\r\n      toHaveResourceWithProperties(hcl, resource.ctor, resource.props).pass,\r\n      msg,\r\n      resource,\r\n    )\r\n  },\r\n)\r\n\r\nvoid tap.test('infra > should include all resources', (t) => {\r\n  t.plan(1)\r\n  const hclJson = Testing.synthScope((scope) => {\r\n    new MyConstruct(scope)\r\n  })\r\n\r\n  t.toHaveResource(hclJson, 'should have the Cloudflare DNS record', {\r\n    ctor: CFDNSRecord,\r\n    props: { type: 'CNAME' },\r\n  })\r\n  t.end()\r\n})\r\n```",
        "createdAt": "2022-08-02T05:11:55Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1850#issuecomment-1202024786",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5HuGBK",
        "author": {
          "login": "jsteinich"
        },
        "authorAssociation": "COLLABORATOR",
        "body": "> 1. The inline comment in the linked example says `// Could be a class extending from Construct` but in other parts of the guide, we're always shown `TerraformStack` and not `Construct` as examples.\r\n\r\nhttps://www.terraform.io/cdktf/concepts/constructs has some more information on constructs, including an example and a comparison to stacks.\r\n\r\n\r\n\r\n> I for one use `tap`, and I've managed to make this work\r\n\r\nThat's great. You can also use the `Testing` class directly which could possibly reduce the amount of adapter code needed.",
        "createdAt": "2022-08-02T22:13:51Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1850#issuecomment-1203265610",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5Uscph",
        "author": {
          "login": "jmccann"
        },
        "authorAssociation": "NONE",
        "body": "I just ran across this issue.  I used `cdktf init --template=typescript` to create a project.  I then started populating my generated project with resources and started populating my generated test examples with tests.\r\n\r\nThen I ran into `Found no github_issue_label resources instead` even though it was.\r\n\r\nRan into this issue from a search.  I didn't see anything from docs I came across of the need to use `Construct` if I want to do unit testing.\r\n\r\nSeems `cdktf init` generates project using `TerraformStack` which sounds like from this issue is not compatible with the unit test examples it generates for unit testing.\r\n\r\nAs a new user the docs and generated code don't seem to talk about this issue ... and would be nice if initial setup worked more out of the box.",
        "createdAt": "2023-02-07T15:12:10Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1850#issuecomment-1420937825",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5jW2mL",
        "author": {
          "login": "iot-resister"
        },
        "authorAssociation": "NONE",
        "body": "I've read all the links here and I'm still confused about what a `MyApplicationsAbstraction` looks like.  I also don't understand why my example isn't working? Thanks for the awesome library!\r\n\r\n```ts\r\nit(\"should contain a container\", () => {\r\n  const stack = new OnPremStack(Testing.app(), \"learn-cdktf-docker\");\r\n  const synthesized = Testing.synth(stack);\r\n  expect(synthesized).toHaveResource(Container);\r\n});\r\n```",
        "createdAt": "2023-08-06T18:06:50Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1850#issuecomment-1666935179",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5jkLXI",
        "author": {
          "login": "Maed223"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "Hey @iot-resister!\r\n\r\n> I've read all the links here and I'm still confused about what a `MyApplicationsAbstraction` looks like. \r\n\r\n`MyApplicationsAbstraction` is a bit ambiguous as it is written in the Typescript documentation as it at times refers to a Construct, and at other times a Stack.  What's important to note is that in your usage (i.e. `OnPremStack`) it refers to a Stack, as the instance of `OnPremStack` is being passed into `Testing.synth` directly.\r\n\r\n>I also don't understand why my example isn't working? Thanks for the awesome library!\r\n\r\nHard to say exactly what the issue is from the snippet you've provided, could you provide a bit more context on what `OnPremStack` looks like and the specific issue you're running into? One thing that comes to mind is that the `Container` \r\ninstance is within another Stack that is nested in `OnPremStack`.\r\n\r\n\r\n",
        "createdAt": "2023-08-08T23:06:12Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1850#issuecomment-1670428104",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc6HT0So",
        "author": {
          "login": "dan-developer"
        },
        "authorAssociation": "NONE",
        "body": "Same problem here:\r\n\r\n```typescript\r\nit(\"check if this can be planned\", () => {\r\n        const app: App = Testing.app();\r\n        const stack: TerraformStack = new TerraformStack(app, \"test\");\r\n        expect(Testing.fullSynth(stack)).toPlanSuccessfully();\r\n    });\r\n```\r\n\r\nThis outputs:\r\n\r\n```\r\nerror TS2339: Property 'toPlanSuccessfully' does not exist on type 'JestMatchers<string>'.\r\n\r\n    7         expect(Testing.fullSynth(stack)).toPlanSuccessfully();\r\n                                               ~~~~~~~~~~~~~~~~~~\r\n\r\n```",
        "createdAt": "2024-08-05T23:59:35Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1850#issuecomment-2270119080",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc6HUCxG",
        "author": {
          "login": "dan-developer"
        },
        "authorAssociation": "NONE",
        "body": "> Same problem here:\r\n> \r\n> ```ts\r\n> it(\"check if this can be planned\", () => {\r\n>         const app: App = Testing.app();\r\n>         const stack: TerraformStack = new TerraformStack(app, \"test\");\r\n>         expect(Testing.fullSynth(stack)).toPlanSuccessfully();\r\n>     });\r\n> ```\r\n> \r\n> This outputs:\r\n> \r\n> ```\r\n> error TS2339: Property 'toPlanSuccessfully' does not exist on type 'JestMatchers<string>'.\r\n> \r\n>     7         expect(Testing.fullSynth(stack)).toPlanSuccessfully();\r\n>                                                ~~~~~~~~~~~~~~~~~~\r\n> ```\r\n\r\nAfter change the package versions, it back working correctly. Follow the versions:\r\n\r\n```\r\n\"dependencies\": {\r\n    \"@cdktf/provider-aws\": \"19.29.0\",\r\n    \"cdktf\": \"^0.20.8\",\r\n    \"constructs\": \"^10.3.0\"\r\n  },\r\n  \"devDependencies\": {\r\n    \"@types/jest\": \"^29.5.12\",\r\n    \"@types/node\": \"^22.1.0\",\r\n    \"jest\": \"^29.7.0\",\r\n    \"ts-jest\": \"^29.2.4\",\r\n    \"ts-node\": \"^10.9.2\",\r\n    \"typescript\": \"^5.5.4\"\r\n  }\r\n```",
        "createdAt": "2024-08-06T01:12:05Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1850#issuecomment-2270178374",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2022-06-07T12:31:50Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwyNTcwMTY0OTY5",
        "name": "testing",
        "description": "",
        "color": "456cc6"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMTM1OTU1Nzk1",
        "name": "ux/debugging",
        "description": "",
        "color": "2703FD"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4Mjg1",
        "name": "size/small",
        "description": "estimated < 1 day",
        "color": "4671C0"
      },
      {
        "id": "LA_kwDODd1Amc7x0kYM",
        "name": "feature/init",
        "description": "cdktf init related features",
        "color": "C1E24A"
      }
    ],
    "milestone": null,
    "number": 1850,
    "title": "Unit testing - toHaveResource() - found no resources instead",
    "updatedAt": "2024-08-06T01:12:06Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjEzMzcwNDY=",
      "is_bot": false,
      "login": "DanielMSchmidt",
      "name": "Daniel Schmidt"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\n\r\nThis would be useful to have for integration testing workflows, we did not tackle it in #649 to limit the scope.\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [],
    "createdAt": "2022-06-14T17:12:06Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwyMjIzNTI1MzY0",
        "name": "terraform cloud",
        "description": "",
        "color": "4ed354"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjEz",
        "name": "size/medium",
        "description": "estimated < 1 week",
        "color": "291E63"
      }
    ],
    "milestone": null,
    "number": 1874,
    "title": "Create GitHub action to create / destroy terraform cloud workspaces",
    "updatedAt": "2022-08-12T07:45:56Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjEzMzcwNDY=",
      "is_bot": false,
      "login": "DanielMSchmidt",
      "name": "Daniel Schmidt"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\nCurrently we only wrap [computed maps](https://github.com/hashicorp/terraform-cdk/pull/1667) through classes, to make maps accessible in all languages as references / accessors we should support them in all use-cases, so also non-computed (writable) maps should be wrapped. This is probably a similar effort as [supporting all lists](https://github.com/hashicorp/terraform-cdk/pull/1725)\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5E-N5G",
        "author": {
          "login": "jsteinich"
        },
        "authorAssociation": "COLLABORATOR",
        "body": "@DanielMSchmidt do you have an example of a case that you'd like to change? I can see a case in code, but my previous provider snapshot didn't actually have any instances where that case hits.",
        "createdAt": "2022-06-16T02:23:33Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1875#issuecomment-1157160518",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5LGa-I",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "For the `values` map returned by the tfe_outputs datasource ([docs](https://registry.terraform.io/providers/hashicorp/tfe/latest/docs/data-sources/outputs#values)) it would be nice if the new map type would have utility functions to retrieve typed values (e.g. `.getString()`, `getList()`, etc.) so that a user does not need to wrap them in `Token.asList()` or similar.",
        "createdAt": "2022-09-27T19:48:31Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "HOORAY",
            "users": {
              "totalCount": 1
            }
          },
          {
            "content": "HEART",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1875#issuecomment-1259974536",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2022-06-14T17:35:02Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwyMjI4Mzg3NjY3",
        "name": "cdktf",
        "description": "",
        "color": "fccac4"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMTM2MjAxMTE5",
        "name": "provider get / generation",
        "description": "",
        "color": "CC3938"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjUx",
        "name": "size/large",
        "description": "estimated < 1 month",
        "color": "9559B0"
      }
    ],
    "milestone": null,
    "number": 1875,
    "title": "Represent all maps with generated classes",
    "updatedAt": "2023-06-01T16:38:18Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjYxOTYyNjA=",
      "is_bot": false,
      "login": "cveld",
      "name": "Carl in 't Veld"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\nTerraform cdk seems to be a great initiative to open up even more great infrastructure as code scenarios!\r\n\r\nOne use case I am in particular exploring currently is intellisense in vscode on adding configurations.\r\n\r\nAt the very core using a terraform file, I played with declaring an azurerm resource.\r\ne.g.\r\n```terraform\r\nresource \"azurerm_storage_account\" \"storageaccount\" {\r\n    name = \"mystorageaccount\"\r\n    location = \"westeurope\"\r\n    accountTier: \"Standard\",\r\n    accountReplicationType: \"LRS\"\r\n}\r\n```\r\nInstalled hashicorp and Microsoft terraform extensions in vscode in order to get intellisense.\r\nThe behavior is that it is not reporting the missing required properties, and it does not show the valid values on e.g. accountTier and accountReplicationType. \r\n\r\nSo I started to explore the intellisense when using terraform cdk.\r\nI created this ticket to get your feedback on my thinking and maybe it helps you to steer the direction of your product.\r\n\r\n### cdktf & Language Versions\r\n\r\nnodejs:\r\n\"cdktf\": \"0.11.2\"\r\n\"azurerm@~> 2.0.0\"\r\n\r\ndotnet:\r\n    HashiCorp.Cdktf; Version=\"0.11.2\"\r\n    HashiCorp.Cdktf.Providers.Azurerm; Version=\"0.8.2\" \r\n\r\n\r\n### Actual Behavior for TypeScript\r\n- I like that missing required properties are reported design-time. It is unfortunate that the way typescript reports this is quite user-unfriendly, i.e. it shows a big ball of text explaining a type mismatch due to some missing properties.\r\n- It is unfortunate that it does not show the valid values on e.g. accountTier and accountReplicationType. Maybe because the azurerm provider is not reporting the list of values.\r\n\r\n### Actual Behavior for c# dotnet\r\n- missing required properties are not reported. Maybe this is something that can be added with the new .NET 7 init feature?\r\n- it does not show the valid values on e.g. accountTier and accountReplicationType.\r\n\r\nI will also test this out with bicep. If intellisense is great over there, maybe you can work together with the bicep team to improve the azurerm experience in the terraform space. ",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5Fgm9a",
        "author": {
          "login": "jsteinich"
        },
        "authorAssociation": "COLLABORATOR",
        "body": "There are a couple related issues in the upstream jsii library pertaining to to the required properties:\r\n\r\n- https://github.com/aws/jsii/issues/716\r\n- https://github.com/aws/jsii/issues/715\r\n- Also similar issue seen in cdktf: https://github.com/hashicorp/terraform-cdk/issues/1860\r\n\r\nThe valid values you mention aren't available in the provider schema that is used to generate provider bindings. They are sometimes present in the provider source code or in documentation; however, that gets pretty messy to incorporate.\r\n\r\nAs much as I would like to recommend C# (I use it myself), you'll likely find TypeScript to be a smoother experience.",
        "createdAt": "2022-06-25T02:45:02Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1898#issuecomment-1166176090",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5Fia-i",
        "author": {
          "login": "cveld"
        },
        "authorAssociation": "NONE",
        "body": "Thanks for your helpful response!\n\nWhere/how is the azurerm provider schema produced?\nAnd where/how is cdk consuming this?\nAnd off topic, how is the vscode terraform language server consuming this?\nAlso there is no completion.\nIn the meanwhile I tested with Bicep and it does provide completion. Maybe\nin future Bicep metadata can be used to populate terraform metadata.\n\nIt is painful to see that the c# issues are already open for so long üò¨\n\nOp za 25 jun. 2022 04:45 schreef Jon Steinich ***@***.***>:\n\n> There are a couple related issues in the upstream jsii library pertaining\n> to to the required properties:\n>\n>    - aws/jsii#716 <https://github.com/aws/jsii/issues/716>\n>    - aws/jsii#715 <https://github.com/aws/jsii/issues/715>\n>    - Also similar issue seen in cdktf: #1860\n>    <https://github.com/hashicorp/terraform-cdk/issues/1860>\n>\n> The valid values you mention aren't available in the provider schema that\n> is used to generate provider bindings. They are sometimes present in the\n> provider source code or in documentation; however, that gets pretty messy\n> to incorporate.\n>\n> As much as I would like to recommend C# (I use it myself), you'll likely\n> find TypeScript to be a smoother experience.\n>\n> ‚Äî\n> Reply to this email directly, view it on GitHub\n> <https://github.com/hashicorp/terraform-cdk/issues/1898#issuecomment-1166176090>,\n> or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/ABPIYJHQMLSI7T2VG67WR4TVQZXDZANCNFSM5ZZB762Q>\n> .\n> You are receiving this because you authored the thread.Message ID:\n> ***@***.***>\n>\n",
        "createdAt": "2022-06-26T21:33:01Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1898#issuecomment-1166651298",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5FtO1-",
        "author": {
          "login": "jsteinich"
        },
        "authorAssociation": "COLLABORATOR",
        "body": "> Where/how is the azurerm provider schema produced?\r\n\r\nThe schema comes from a [Terraform cli command](https://www.terraform.io/cli/commands/providers/schema)\r\n\r\n\r\n\r\n> And where/how is cdk consuming this?\r\n\r\nThe resulting schema is parsed and used to generate TypeScript code. That code is then processed by jsii to generate code for other languages.\r\n\r\n\r\n\r\n\r\n> And off topic, how is the vscode terraform language server consuming this?\r\n\r\nI'm not sure, but am also curious. I have seen that the IntelliJ platform Terraform plugin also has more information in certain cases. One possibility is that it is actually reading the `go` source code of the provider.\r\n\r\n\r\n\r\n\r\n> In the meanwhile I tested with Bicep and it does provide completion. Maybe in future Bicep metadata can be used to populate terraform metadata.\r\n\r\nThat may be possible if Bicep aligns close enough with the Terraform provider.\r\n\r\n\r\n\r\n\r\n> It is painful to see that the c# issues are already open for so long\r\n\r\nI believe c# is the least used CDK language so it does tend to get less attention. Despite some limitations, it is still very powerful to work with.",
        "createdAt": "2022-06-29T03:08:36Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1898#issuecomment-1169485182",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2022-06-24T21:41:07Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwyMjQ2NzM3OTc1",
        "name": "upstream/jsii",
        "description": "Pending upstream work on JSII",
        "color": "f9a2cf"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMTM1OTU1Nzk1",
        "name": "ux/debugging",
        "description": "",
        "color": "2703FD"
      },
      {
        "id": "MDU6TGFiZWwzMTM1OTYzMTU0",
        "name": "language/c#",
        "description": "C# language issues",
        "color": "c5def5"
      },
      {
        "id": "MDU6TGFiZWwzMTM2Mjc5MjMx",
        "name": "ux/configuration",
        "description": "",
        "color": "58FCA0"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjUx",
        "name": "size/large",
        "description": "estimated < 1 month",
        "color": "9559B0"
      }
    ],
    "milestone": null,
    "number": 1898,
    "title": "Azurerm first experience with c# dotnet and typescript",
    "updatedAt": "2022-07-15T11:29:37Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjI0MDkyNzY=",
      "is_bot": false,
      "login": "harjis",
      "name": "Joonas Harjukallio"
    },
    "body": "Hi! We would like to define Terraform Modules input variables as objects like this:\r\n\r\n```tf\r\nterraform {\r\n  required_providers {\r\n    azurerm = {\r\n      source  = \"hashicorp/azurerm\"\r\n      version = \"3.2.0\"\r\n    }\r\n  }\r\n}\r\n\r\nprovider \"azurerm\" {\r\n  features {}\r\n}\r\n\r\nvariable \"storage_account\" {\r\n  description = \"Storage Account options\"\r\n  type = object({\r\n    replication_type: string,\r\n    account_tier: string\r\n  })\r\n}\r\n\r\n\r\nresource \"azurerm_storage_account\" \"storage-account\" {\r\n  account_replication_type = var.storage_account.replication_type\r\n  account_tier             = var.storage_account.account_tier\r\n  location                 = \"westeurope\"\r\n  name                     = \"st-name\"\r\n  resource_group_name      = \"rg-test\"\r\n\r\n  allow_nested_items_to_be_public = false\r\n}\r\n```\r\nThe problem we have is that when we use these Modules in CDKTF the generated Typescript types for `storage_account` is `any`:\r\n\r\n```ts\r\nexport interface StorageAccountModuleOptions {\r\n  /**\r\n   * Storage Account options\r\n   */\r\n  readonly storageAccount: any;\r\n}\r\n```\r\nDo you know if it is possible to type `storageAccount` more strongly so that the resulting types would be something like:\r\n```ts\r\ninterface StorageAccountModuleStorageAccount {\r\n  replicationType: string;\r\n  accountTier: string;\r\n}\r\nexport interface StorageAccountModuleOptions {\r\n  /**\r\n   * Storage Account options\r\n   */\r\n  readonly storageAccount: StorageAccountModuleStorageAccount;\r\n}\r\n```\r\n<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5GqI3v",
        "author": {
          "login": "DanielMSchmidt"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "Hey, great point! We have no good way of inferring the outputs (@ansgarm brought up an idea with evaluating the TF like `terraform validate` does and using that type information to get the output values, but reading this issue I noticed we have no problem with reading the inputs and parsing them into a format that we can use to generate bindings from, so it's totally possible and we should do it.",
        "createdAt": "2022-07-15T11:25:52Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1923#issuecomment-1185451503",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5GqKy0",
        "author": {
          "login": "DanielMSchmidt"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "We could use the parsing of the variable names as well for convert: #1891",
        "createdAt": "2022-07-15T11:36:53Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1923#issuecomment-1185459380",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc67Iclz",
        "author": {
          "login": "kevcube"
        },
        "authorAssociation": "NONE",
        "body": "+1'ing this because it's been 3 years, this seems like a pretty major lack of type safety for this project which is a big draw to cdktf for me.\n\nmy complex variable:\n\n```hcl\nvariable \"origin\" {\n  description = \"One or more origins for this distribution (multiples allowed).\"\n  type = map(object({\n    connection_attempts = optional(number)\n    connection_timeout  = optional(number)\n    custom_origin_config = optional(object({\n      http_port                = number\n      https_port               = number\n      origin_protocol_policy   = string\n      origin_ssl_protocols     = list(string)\n      origin_keepalive_timeout = optional(number)\n      origin_read_timeout      = optional(number)\n    }))\n    domain_name = string\n    custom_header = optional(list(object({\n      name  = string\n      value = string\n    })))\n    origin_access_control_id = optional(string)\n    origin_id                = optional(string) # If not provided, map key is used.\n    origin_path              = optional(string)\n    origin_shield = optional(object({\n      enabled              = bool\n      origin_shield_region = optional(string)\n    }))\n    s3_origin_config = optional(object({\n      origin_access_identity = string\n    }))\n    vpc_origin_config = optional(object({\n      origin_keepalive_timeout = optional(number)\n      origin_read_timeout      = optional(number)\n      vpc_origin_id            = optional(string) # If not provided, uses aws_cloudfront_vpc_origin.this[this.vpc_origin].id\n      vpc_origin               = optional(string) # Custom parameter to lookup against aws_cloudfront_vpc_origin.this\n    }))\n  }))\n  default = {}\n}\n```\n\nmy output...\n\n```ts\n  /**\n  * One or more origins for this distribution (multiples allowed).\n  */\n  readonly origin?: any;\n```",
        "createdAt": "2025-07-31T11:25:28Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1923#issuecomment-3139553651",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc67cO5t",
        "author": {
          "login": "Saaalih2g"
        },
        "authorAssociation": "NONE",
        "body": "ÿßŸÇÿ™ÿ±ÿßÿ≠ Ÿàÿ≠ŸÑ ÿßŸÑŸÖÿ¥ÿßŸÉŸÑ Ÿàÿßÿ±ÿ≥ÿßŸÑ ÿßŸÑŸÜÿ™ÿßÿ¶ÿ¨\r\n\r\nSaleh77\r\n\r\n\r\nŸÅŸä ÿÆŸÖŸäÿ≥ÿå 31 ŸäŸàŸÑŸäŸàÿå 2025 ŸÅŸä 2:25 ŸÖÿå ŸÉÿ™ÿ® Kevin ***@***.***>:\r\n\r\n> *kevcube* left a comment (hashicorp/terraform-cdk#1923)\r\n> <https://github.com/hashicorp/terraform-cdk/issues/1923#issuecomment-3139553651>\r\n>\r\n> +1'ing this because it's been 3 years, this seems like a pretty major lack\r\n> of type safety for this project which is a big draw to cdktf for me.\r\n>\r\n> my complex variable:\r\n>\r\n> variable \"origin\" {\r\n>   description = \"One or more origins for this distribution (multiples allowed).\"\r\n>   type = map(object({\r\n>     connection_attempts = optional(number)\r\n>     connection_timeout  = optional(number)\r\n>     custom_origin_config = optional(object({\r\n>       http_port                = number\r\n>       https_port               = number\r\n>       origin_protocol_policy   = string\r\n>       origin_ssl_protocols     = list(string)\r\n>       origin_keepalive_timeout = optional(number)\r\n>       origin_read_timeout      = optional(number)\r\n>     }))\r\n>     domain_name = string\r\n>     custom_header = optional(list(object({\r\n>       name  = string\r\n>       value = string\r\n>     })))\r\n>     origin_access_control_id = optional(string)\r\n>     origin_id                = optional(string) # If not provided, map key is used.\r\n>     origin_path              = optional(string)\r\n>     origin_shield = optional(object({\r\n>       enabled              = bool\r\n>       origin_shield_region = optional(string)\r\n>     }))\r\n>     s3_origin_config = optional(object({\r\n>       origin_access_identity = string\r\n>     }))\r\n>     vpc_origin_config = optional(object({\r\n>       origin_keepalive_timeout = optional(number)\r\n>       origin_read_timeout      = optional(number)\r\n>       vpc_origin_id            = optional(string) # If not provided, uses aws_cloudfront_vpc_origin.this[this.vpc_origin].id\r\n>       vpc_origin               = optional(string) # Custom parameter to lookup against aws_cloudfront_vpc_origin.this\r\n>     }))\r\n>   }))\r\n>   default = {}\r\n> }\r\n>\r\n> my output...\r\n>\r\n>   /**  * One or more origins for this distribution (multiples allowed).  */\r\n>   readonly origin?: any;\r\n>\r\n> ‚Äî\r\n> Reply to this email directly, view it on GitHub\r\n> <https://github.com/hashicorp/terraform-cdk/issues/1923#issuecomment-3139553651>,\r\n> or unsubscribe\r\n> <https://github.com/notifications/unsubscribe-auth/A5IDPXHX4FWONYVJ6U4BUFL3LH4MHAVCNFSM6AAAAACCZTXYGGVHI2DSMVQWIX3LMV43OSLTON2WKQ3PNVWWK3TUHMZTCMZZGU2TGNRVGE>\r\n> .\r\n> You are receiving this because you are subscribed to this thread.Message\r\n> ID: ***@***.***>\r\n>\r\n",
        "createdAt": "2025-08-01T14:15:02Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1923#issuecomment-3144740461",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2022-07-14T07:58:11Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwyMjE3NjIyNTkw",
        "name": "modules",
        "description": "",
        "color": "2ffc8f"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMTM2MjAxMTE5",
        "name": "provider get / generation",
        "description": "",
        "color": "CC3938"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjEz",
        "name": "size/medium",
        "description": "estimated < 1 week",
        "color": "291E63"
      }
    ],
    "milestone": null,
    "number": 1923,
    "title": "Terraform module input variables & typescript",
    "updatedAt": "2025-08-01T14:15:02Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjExMTIwNTY=",
      "is_bot": false,
      "login": "ansgarm",
      "name": "Ansgar Mertens"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\nIssue #1766 happened because Jest released a new version that was not compatible with another dependency of ours. We want to make our templates more robust against such upstream changes which can happen unexpectedly.\r\n\r\nWe can do so by e.g. narrowing the version constraints of the dependencies that we install here: https://github.com/hashicorp/terraform-cdk/blob/b776e644c3ba3ca6b70cd9d8ff7374e4cb5b6da9/packages/cdktf-cli/templates/typescript/.hooks.sscaff.js#L15\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [],
    "createdAt": "2022-08-03T15:48:55Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwyMjYwNjQ0NDQx",
        "name": "cdktf-cli",
        "description": "",
        "color": "82e5de"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4Mjg1",
        "name": "size/small",
        "description": "estimated < 1 day",
        "color": "4671C0"
      },
      {
        "id": "LA_kwDODd1Amc7x0kYM",
        "name": "feature/init",
        "description": "cdktf init related features",
        "color": "C1E24A"
      }
    ],
    "milestone": null,
    "number": 1991,
    "title": "Make our init templates more robust against upstream version changes",
    "updatedAt": "2023-06-01T16:16:55Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjMxMjU2MDc2",
      "is_bot": false,
      "login": "aadhikary",
      "name": ""
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### cdktf & Language Versions\r\n\r\ncdktf v0.12.1\r\ntypescript\r\n\r\n### Affected Resource(s)\r\n\r\nDeployed stacks cannot be easily torn down\r\n\r\n### Expected Behavior\r\n\r\nCDKTF should look into the state file and if notthing is deployed for a stack then it should gracefully get out and proceed to next stack on the dependency hierarchy list\r\n\r\n### Actual Behavior\r\n\r\nCDKTF tries to destroy stacks that do not exists and in some cases specially for Data constructs throws errors as :\r\n**data.terraform_remote_state.cross-stack-reference-input-SiteBNetworking.outputs is object with no attributes**\r\nEventhough this stack has not been deployed at all.\r\n\r\nI have seend this issue specially with Data construct for references",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5JNQRH",
        "author": {
          "login": "DanielMSchmidt"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "Yeah, that is a good idea to improve the UX this way! We currently don't track if a deploy happened or not in CDKTF and therefore treat the stack selection as the complete truth of which stacks to destroy. Checking for an existing state and filtering out stacks without an existing state would be a good idea, I agree!",
        "createdAt": "2022-08-26T08:28:43Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2031#issuecomment-1228211271",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2022-08-19T08:40:49Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMTM2MjgxMDY3",
        "name": "ux/cli",
        "description": "",
        "color": "40FE53"
      },
      {
        "id": "MDU6TGFiZWwzMTQ2NjcxNDUz",
        "name": "feature/multi-stack",
        "description": "",
        "color": "6589C9"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjEz",
        "name": "size/medium",
        "description": "estimated < 1 week",
        "color": "291E63"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjUx",
        "name": "size/large",
        "description": "estimated < 1 month",
        "color": "9559B0"
      }
    ],
    "milestone": null,
    "number": 2031,
    "title": "cdktf destroy with wildcard characters tries to destroy stacks that has not been deployed and can cause error",
    "updatedAt": "2023-06-01T15:00:29Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjEzMzcwNDY=",
      "is_bot": false,
      "login": "DanielMSchmidt",
      "name": "Daniel Schmidt"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\nThis will help users understand how to work with data sources and follow best practices, e.g. for not hard-coding AMIs\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n\r\n- Part of #2053",
    "comments": [],
    "createdAt": "2022-08-26T13:28:57Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzgw",
        "name": "documentation",
        "description": "Improvements or additions to documentation",
        "color": "0075ca"
      },
      {
        "id": "MDU6TGFiZWwyNzQzNTkyMDA3",
        "name": "examples",
        "description": "",
        "color": "4AB3A0"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4Mjg1",
        "name": "size/small",
        "description": "estimated < 1 day",
        "color": "4671C0"
      }
    ],
    "milestone": null,
    "number": 2071,
    "title": "Use DataSources in the examples where possible",
    "updatedAt": "2023-06-28T18:28:17Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjEzMzcwNDY=",
      "is_bot": false,
      "login": "DanielMSchmidt",
      "name": "Daniel Schmidt"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\nCreate an example per language on how to use Terraform modules, ideally showing both a module from the registry and a local one.\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n\r\n- Part of #2053\r\n",
    "comments": [],
    "createdAt": "2022-08-26T13:32:32Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzgw",
        "name": "documentation",
        "description": "Improvements or additions to documentation",
        "color": "0075ca"
      },
      {
        "id": "MDU6TGFiZWwyNzQzNTkyMDA3",
        "name": "examples",
        "description": "",
        "color": "4AB3A0"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjEz",
        "name": "size/medium",
        "description": "estimated < 1 week",
        "color": "291E63"
      }
    ],
    "milestone": null,
    "number": 2072,
    "title": "Create examples using modules",
    "updatedAt": "2023-06-28T18:26:45Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjEzMzcwNDY=",
      "is_bot": false,
      "login": "DanielMSchmidt",
      "name": "Daniel Schmidt"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\nTo clear up [confusions like this one](https://github.com/hashicorp/terraform-cdk/issues/1528#issuecomment-1245192917) we should add a bit of documentation to the tokens page that explains run-time vs synth-time concerns.\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [],
    "createdAt": "2022-09-13T10:49:42Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzgw",
        "name": "documentation",
        "description": "Improvements or additions to documentation",
        "color": "0075ca"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4Mjg1",
        "name": "size/small",
        "description": "estimated < 1 day",
        "color": "4671C0"
      },
      {
        "id": "MDU6TGFiZWwzMjM2NDcwNTQ1",
        "name": "feature/tokens",
        "description": "",
        "color": "58CF13"
      }
    ],
    "milestone": null,
    "number": 2109,
    "title": "Explain synth vs execution time on Tokens page",
    "updatedAt": "2023-06-28T18:26:00Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjEzMzcwNDY=",
      "is_bot": false,
      "login": "DanielMSchmidt",
      "name": "Daniel Schmidt"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\nCurrently a TerraformAsset would copy (& zip) everything in the directory it points to, but sometimes you don't need all the files but a subset. We currently advise users to clean up before running cdktf, but having a glob-syntax list of things to ignore as a configuration to an asset would be a better UX.\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n\r\n- There is a .terraformignore: https://www.terraform.io/language/settings/backends/remote#excluding-files-from-upload-with-terraformignore\r\n",
    "comments": [],
    "createdAt": "2022-09-13T15:40:11Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwyMjI4Mzg3NjY3",
        "name": "cdktf",
        "description": "",
        "color": "fccac4"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMTM2Mjc5MjMx",
        "name": "ux/configuration",
        "description": "",
        "color": "58FCA0"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjEz",
        "name": "size/medium",
        "description": "estimated < 1 week",
        "color": "291E63"
      }
    ],
    "milestone": null,
    "number": 2113,
    "title": "Allow to ignore files from TerraformAsset",
    "updatedAt": "2023-06-01T15:02:01Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjEzMzcwNDY=",
      "is_bot": false,
      "login": "DanielMSchmidt",
      "name": "Daniel Schmidt"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\nWe currently only use `variable.value` in the [documentation](https://www.terraform.io/cdktf/concepts/variables-and-outputs#define-input-variables), but value is unsuitable for non-TS languages. We should add examples that use all sorts of value types, e.g. strings, numbers, booleans, lists, maps and show how they are all used.\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [],
    "createdAt": "2022-09-13T18:00:03Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzgw",
        "name": "documentation",
        "description": "Improvements or additions to documentation",
        "color": "0075ca"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4Mjg1",
        "name": "size/small",
        "description": "estimated < 1 day",
        "color": "4671C0"
      }
    ],
    "milestone": null,
    "number": 2114,
    "title": "Improve TerraformVariable docs to mention stringValue, numberValue, etc",
    "updatedAt": "2023-06-28T18:26:11Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjE5ODY5NTA=",
      "is_bot": false,
      "login": "paymog",
      "name": "Paymahn Moghadasian"
    },
    "body": "### cdktf & Language Versions\r\n\r\ntypescript 0.12.2\r\n\r\n### Issue\r\n\r\nI just installed the cdktf-cli at version 0.12.2 and I'm seeing it has unmet peer dependencies. Is this by design? \r\n\r\n```\r\n$ yarn add cdktf@latest cdktf-cli@latest\r\n[1/5] üîç  Validating package.json...\r\n[2/5] üîç  Resolving packages...\r\n[3/5] üöö  Fetching packages...\r\n[4/5] üîó  Linking dependencies...\r\nwarning \"cdktf-cli > ink-select-input@4.2.1\" has unmet peer dependency \"ink@^3.0.5\".\r\nwarning \"cdktf-cli > ink-select-input@4.2.1\" has unmet peer dependency \"react@^16.5.2 || ^17.0.0\".\r\nwarning \"cdktf-cli > @cdktf/hcl2cdk > graphology@0.24.1\" has incorrect peer dependency \"graphology-types@>=0.24.0\".\r\n```\r\n\r\nI know I can install these dependencies myself but it seems unusual that a cli would require react. \r\n\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5MN4Ex",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "Hi @paymog üëã\r\n\r\nWe're using `ink` for the terminal UI, which is React based.\r\n\r\nRegarding the unmet peer dependencies: We [bundle](https://github.com/hashicorp/terraform-cdk/blob/9f226f0e6c48be366d7ec33c74d03f52f14eff5d/packages/cdktf-cli/build.ts#L54) the entrypoint to our CLI, which contains the peer dependencies (they are inlined). However, we still distribute the `lib` directory, so users could do e.g. `import xy from 'cdktf-cli/lib/some-internal-thing` (related to #1377) ‚Äì for which those peer dependencies make sense to specify but they aren't required for using the cli itself.\r\n\r\nThis is a bit tricky, but I feel that we might fix it by changing the peer dependencies to normal dependencies to get rid of that warning ‚Äì especially since (when importing from the package directly), users won't have to manually install all the missing dependencies by hand ü§î",
        "createdAt": "2022-10-14T09:00:19Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2143#issuecomment-1278705969",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2022-09-27T15:34:34Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwyMjYwNjQ0NDQx",
        "name": "cdktf-cli",
        "description": "",
        "color": "82e5de"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMTM2MjgxMDY3",
        "name": "ux/cli",
        "description": "",
        "color": "40FE53"
      },
      {
        "id": "MDU6TGFiZWwzMzE3NzI2NjM4",
        "name": "tech-debt",
        "description": "",
        "color": "191658"
      }
    ],
    "milestone": null,
    "number": 2143,
    "title": "Unmet peer dependencies for the cli",
    "updatedAt": "2022-10-14T09:01:36Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjI0ODE3OTQ5",
      "is_bot": false,
      "login": "natemellendorf",
      "name": "Nate Mellendorf"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### cdktf & Language Versions\r\n\r\nlanguage: python\r\ncdktf-cli: 0.12.2\r\nnode: v18.10.0\r\ncdktf: 0.12.3\r\nconstructs: 10.1.119\r\njsii: 1.69.0\r\nterraform: 1.3.0\r\narch: arm64\r\nos: linux 5.10.104-linuxkit\r\npython: Python 3.9.13\r\npip: pip 22.2.2 from /root/.local/share/virtualenvs/infra-o81V4Mez/lib/python3.9/site-packages/pip (python 3.9)\r\npipenv: pipenv, version 2022.9.24\r\n\r\n### Affected Resource(s)\r\n\r\nAny/All\r\n\r\n### Debug Output\r\n\r\nThe following is returned, when attempting to run a plan against multiple stacks:\r\n```\r\ncdktf plan '*-stack'\r\n...\r\nUsage Error: Could not find stack: *-stack\r\n```\r\n\r\n[cdktf plan first-stack](https://gist.github.com/natemellendorf/27aa0146084f69c06bad32ce5478967b)\r\n[cdktf plan second-stack](https://gist.github.com/natemellendorf/4f8235b0e5fd375b61f7ba8a73ebc6b5)\r\n\r\n### Expected Behavior\r\n\r\nSimilar to **cdktf apply**, I believe I should be able to run **cdktf plan '*-stack'** and review what would happen, should the matched stacks be applied.\r\n\r\n### Actual Behavior\r\n\r\nThe following error is returned:\r\n**Usage Error: Could not find stack: \\*-stack**\r\n\r\n### Steps to Reproduce\r\n\r\nUsing Python and the CDKTF, and [these two stacks](https://gist.github.com/natemellendorf/3ff552fc5474d478c9ed9aa880be97ba), attempt to run cdktf plan '*-stack'\r\n\r\n### Important Factoids\r\n\r\nYou can plan first-stack just fine with:\r\ncdktf plan first-stack\r\n\r\nHowever, if you try and plan the second stack (having not actually deployed first-stack), I get the following error:\r\n```bash\r\nsecond-stack  data.terraform_remote_state.cross-stack-reference-input-first-stack: Reading...\r\n\r\n‚†º  Processing\r\n[2022-10-02T19:31:38.681] [ERROR] default - ‚ï∑\r\n‚îÇ Error: Unable to find remote state\r\n‚îÇ \r\n‚îÇ   with data.terraform_remote_state.cross-stack-reference-input-first-stack,\r\n‚îÇ   on cdk.tf.json line 18, in data.terraform_remote_state.cross-stack-reference-input-first-stack:\r\n‚îÇ   18:         \"workspace\": \"${terraform.workspace}\"\r\n‚îÇ \r\n‚îÇ No stored state was found for the given workspace in the given backend.\r\nsecond-stack  ‚ï∑\r\n              ‚îÇ Error: Unable to find remote state\r\n              ‚îÇ \r\n              ‚îÇ   with data.terraform_remote_state.cross-stack-reference-input-first-stack,\r\n              ‚îÇ   on cdk.tf.json line 18, in data.terraform_remote_state.cross-stack-reference-input-first-stack:\r\n              ‚îÇ   18:         \"workspace\": \"${terraform.workspace}\"\r\n              ‚îÇ \r\n              ‚îÇ No stored state was found for the given workspace in the given backend.\r\n              ‚ïµ\r\n\r\n‚†¥  Processing\r\n```\r\n\r\nThe above behavior makes sense. Second-stack fails because it can't find a data resource that it expects from first-stack.\r\nHowever, with that behavior, I do not see a way to plan multiple stacks that have inter-stack dependencies.\r\n\r\ncdktf apply and cdktf destroy seem to work just fine.\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor documentation? For example:\r\n--->\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5LyZAk",
        "author": {
          "login": "ste-wr"
        },
        "authorAssociation": "NONE",
        "body": "Yep this is affecting me as well.  This is pretty much a blocker for multi-stack in CI using `cdktf` commands unless we fall-back to some kind of recursive `terraform plan` after a `cdktf synth`",
        "createdAt": "2022-10-07T12:00:52Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2157#issuecomment-1271500836",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5L1qJK",
        "author": {
          "login": "jsteinich"
        },
        "authorAssociation": "COLLABORATOR",
        "body": "While not impossible, supporting this in all cases would be a large departure from how `diff` currently works.\r\nCross-stack references are accomplished through the use of Terraform remote state data sources. These rely on the remote state (1st stack) existing (already deployed). When that is the case, the diff will work just fine. When that isn't the case is where it gets tricky.\r\n\r\nA rough outline of how this could work:\r\n1. Diff (plan) the 1st stack\r\n2. Resyth/fill in the 2nd stack using the results of that plan\r\n3. Diff the 2nd stack",
        "createdAt": "2022-10-08T16:53:28Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2157#issuecomment-1272357450",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5L3_QJ",
        "author": {
          "login": "ste-wr"
        },
        "authorAssociation": "NONE",
        "body": "@jsteinich That's how I assumed it would work.\r\n\r\nAre you suggesting that `diff` should work fine at the moment for multiple stacks where there's no dependency?  Because my experience (with 0.13.0 at least) is that this isn't the case.  In all cases, I get the `Could not find stack/specify a stack` error if I try to run vanilla `cdktf diff`.\r\n\r\nMaybe this is a docs improvement, because when I read that CDKTF supports multi-stack deployment, I kinda expect that the entire core command set (diff, synth, deploy, destroy) would support it.",
        "createdAt": "2022-10-10T08:36:44Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2157#issuecomment-1272968201",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5MRkfi",
        "author": {
          "login": "natemellendorf"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "I think we all understand the issue at hand, which is the way dynamic data blocks are created for stacks with dependencies. \r\n\r\nSo the CDK does this automatically. When you create two stacks, one that uses the output of another, the terraform synthesized will create the second stack with a dynamically named remote state data block.\r\n\r\nIn theory, it makes sense. In practice, it falls short. This is due to how a data block can‚Äôt be planned if the resource it represents does not exist.\r\n\r\nPer this discussion, I don‚Äôt think there‚Äôs any plan to address that behavior.\r\nhttps://github.com/hashicorp/terraform/issues/16380\r\n\r\nAt this point, I think this is in the hands of the CDKTF/TF team to solve. Either allow data blocks to return empty (so plans can succeed) or rework how CDKTF implements shared resources between two stacks.\r\n\r\nIf neither, then please communicate to the community that using CDKTF with multiple stacks is quite limited.\r\n",
        "createdAt": "2022-10-15T06:26:06Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2157#issuecomment-1279674338",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5MSJGd",
        "author": {
          "login": "jsteinich"
        },
        "authorAssociation": "COLLABORATOR",
        "body": "> Are you suggesting that `diff` should work fine at the moment for multiple stacks where there's no dependency?\r\n\r\nNo. Apologizes if I gave that impression. I simply meant that it would be a simple addition for this case.\r\n\r\n\r\n\r\n> At this point, I think this is in the hands of the CDKTF/TF team to solve. Either allow data blocks to return empty (so plans can succeed) or rework how CDKTF implements shared resources between two stacks.\r\n\r\nI wouldn't expect this to change in Terraform directly (judging by their responses).\r\nThe CDKTF team applied a label (`needs-priority`) which means they are looking for community input to determine whether or not they will work on this. Even if they decide it's a lower priority, someone from the community is always welcome to contribute towards this.",
        "createdAt": "2022-10-15T20:08:31Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2157#issuecomment-1279824285",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5uaoWk",
        "author": {
          "login": "elovelan"
        },
        "authorAssociation": "NONE",
        "body": "Will Terraform's native support for stacks help move this forward?\n\nIf so, can the community (myself included) help with implementation?",
        "createdAt": "2023-12-12T17:19:48Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 2
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2157#issuecomment-1852474788",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2022-10-02T19:54:05Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwyMjYwNjQ0NDQx",
        "name": "cdktf-cli",
        "description": "",
        "color": "82e5de"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMTM2MjgxMDY3",
        "name": "ux/cli",
        "description": "",
        "color": "40FE53"
      },
      {
        "id": "MDU6TGFiZWwzMTQ2NjcxNDUz",
        "name": "feature/multi-stack",
        "description": "",
        "color": "6589C9"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjUx",
        "name": "size/large",
        "description": "estimated < 1 month",
        "color": "9559B0"
      },
      {
        "id": "LA_kwDODd1Amc7Zo-ep",
        "name": "upstream/terraform",
        "description": "Pending upstream work on Terraform",
        "color": "844fba"
      }
    ],
    "milestone": null,
    "number": 2157,
    "title": "Unable to perform cdktf diff when using multiple stacks with inter-stack dependencies",
    "updatedAt": "2023-12-12T17:21:16Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjExMTIwNTY=",
      "is_bot": false,
      "login": "ansgarm",
      "name": "Ansgar Mertens"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\nWhen releasing `cdktf 0.13.0` in #2162 this test did fail because `cdktf@latest` pointed to `0.12.3` while the cdktf-cli used in that test uses the repo local package with `0.13.0`:\r\n\r\n> Command failed: npm install\r\n    npm ERR! code ETARGET\r\n    npm ERR! notarget No matching version found for cdktf@0.13.0.\r\n    npm ERR! notarget In most cases you or one of your dependencies are requesting\r\n    npm ERR! notarget a package version that doesn't exist.\r\n    npm ERR! notarget \r\n    npm ERR! notarget It was specified as a dependency of 'cdktf-cli'\r\n    npm ERR! notarget \r\n    \r\nAs a first try at fixing this, I tried installing `cdktf` from the local package as well, however this failed with:\r\n\r\n> .gen/providers/docker/provider/index.ts:123:11 - error TS2345: Argument of type 'import(\"/private/var/folders/19/0g2813wd0g77r4dvy2_xtmfw0000gq/T/cdktf-converted.EE1ipB/node_modules/constructs/lib/construct\").Construct' is not assignable to parameter of type 'import(\"/Users/ansgar/projects/hashicorp/terraform-cdk/node_modules/constructs/lib/construct\").Construct'.\r\n\r\nFor testing this, you can change the version to e.g. `0.14.0` and that will re-create the issue we just encountered in a PR.\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [],
    "createdAt": "2022-10-03T14:52:10Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwyNTcwMTY0OTY5",
        "name": "testing",
        "description": "",
        "color": "456cc6"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMTU1MzExNDc0",
        "name": "dev-process",
        "description": "Improvements to how CDK for Terraform is developed and built",
        "color": "F6A4ED"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4Mjg1",
        "name": "size/small",
        "description": "estimated < 1 day",
        "color": "4671C0"
      },
      {
        "id": "MDU6TGFiZWwzMzE3NzI2NjM4",
        "name": "tech-debt",
        "description": "",
        "color": "191658"
      }
    ],
    "milestone": null,
    "number": 2164,
    "title": "Re-enable `convertProject.test.ts` test",
    "updatedAt": "2023-10-13T15:28:52Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjEzMzcwNDY=",
      "is_bot": false,
      "login": "DanielMSchmidt",
      "name": "Daniel Schmidt"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\nWhen working with pre-built providers in Java it can happen that maven installs a cdktf version that not matches what is specified in the pom.xml, because of outdated peer dependencies requiring an older version. To make a user aware of this we need a check reminding folks to upgrade.\r\n\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n\r\n- https://discuss.hashicorp.com/t/cdk-not-respecting-pom-xml/45418/7\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5MVQCV",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "Some notes on other languages:\r\n\r\nFor Python (pip and pipenv) and Go, there appears to be no warning when installing an older pre-built provider (i.e. targeting an older CDKTF version) ‚Äì but at least it does not fall back to an older CDKTF version than specified like Maven does üòÖ\r\n\r\nFor NPM and Dotnet it already prints an error when trying to install without matching peer dependencies üëç",
        "createdAt": "2022-10-17T10:28:06Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2191#issuecomment-1280639125",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2022-10-14T15:00:14Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwyMjYwNjQ0NDQx",
        "name": "cdktf-cli",
        "description": "",
        "color": "82e5de"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMTM2MjgxMDY3",
        "name": "ux/cli",
        "description": "",
        "color": "40FE53"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjEz",
        "name": "size/medium",
        "description": "estimated < 1 week",
        "color": "291E63"
      },
      {
        "id": "LA_kwDODd1Amc78pgm0",
        "name": "pre-built providers",
        "description": "Issues around pre-built providers managed at https://github.com/hashicorp/cdktf-repository-manager",
        "color": "E06AA9"
      }
    ],
    "milestone": null,
    "number": 2191,
    "title": "CDKTF should check if the pre-built providers peer dependency matches the installed cdktf version",
    "updatedAt": "2023-09-29T12:53:22Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjEzMzcwNDY=",
      "is_bot": false,
      "login": "DanielMSchmidt",
      "name": "Daniel Schmidt"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\nCDKTF bindings pin provider versions in general, therefore we could generate the `.terraform.lock.hcl` file for each stack as part of our synthetization. This makes using the provider across different machines / architectures easier and improves our upgrade workflow to have one less step, see #2020. This means we trim the sources of provider versions down to just the provider bindings instead of e.g. the last run of terraform init as well.\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5Nxsr6",
        "author": {
          "login": "jsteinich"
        },
        "authorAssociation": "COLLABORATOR",
        "body": "I like this from a versioning perspective, but I worry about it from a security perspective. `.terraform.lock.hcl` functions as both version pinning and checksum matching.",
        "createdAt": "2022-11-06T19:20:17Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2200#issuecomment-1304873722",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5W4Hvh",
        "author": {
          "login": "nikowatari"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "can the alternative approach be considered?\r\n1. terraform plugins will be bundled directly into respective language packages\r\n2. extracted to some directory\r\n3. path to that directory provided to terraform as `TF_PLUGIN_CACHE_DIR`\r\n\r\nthay way terraform will always use the same provider binary as long as the same e.g. python package is used, w/o the need to touch `.terraform.lock.hcl`\r\n\r\nwhat's your opinion?",
        "createdAt": "2023-03-07T05:16:54Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2200#issuecomment-1457552353",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2022-10-18T14:03:08Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwyMjQ2NzM1NDk1",
        "name": "providers",
        "description": "",
        "color": "2bd8cd"
      },
      {
        "id": "MDU6TGFiZWwyMjYwNjQ0NDQx",
        "name": "cdktf-cli",
        "description": "",
        "color": "82e5de"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMTM2MjgxMDY3",
        "name": "ux/cli",
        "description": "",
        "color": "40FE53"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjEz",
        "name": "size/medium",
        "description": "estimated < 1 week",
        "color": "291E63"
      },
      {
        "id": "LA_kwDODd1Amc78phHg",
        "name": "cli/provider-subcommands",
        "description": "cdktf provider <verb> commands",
        "color": "4CBCB0"
      }
    ],
    "milestone": null,
    "number": 2200,
    "title": "Generate provider lock file before running terraform init",
    "updatedAt": "2023-09-29T12:53:23Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjExMTIwNTY=",
      "is_bot": false,
      "login": "ansgarm",
      "name": "Ansgar Mertens"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\nCurrently it is required to pass one or more provider names to the `cdktf provider upgrade` command. We can use the same functionality powering `cdktf provider list` (#2229) when that command is implemented to allow users to run `cdktf provider upgrade` without arguments and have it automatically figure out all installed providers and update all of them at once.\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [],
    "createdAt": "2022-10-28T16:36:42Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwyMjYwNjQ0NDQx",
        "name": "cdktf-cli",
        "description": "",
        "color": "82e5de"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "LA_kwDODd1Amc78phHg",
        "name": "cli/provider-subcommands",
        "description": "cdktf provider <verb> commands",
        "color": "4CBCB0"
      }
    ],
    "milestone": null,
    "number": 2230,
    "title": "Support upgrading all used providers at once via `cdktf provider upgrade`",
    "updatedAt": "2023-09-29T12:53:23Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjkwOTI5NjY=",
      "is_bot": false,
      "login": "daniel-laszlo",
      "name": "Daniel Laszlo"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### cdktf & Language Versions\r\n\r\n<!--- Please make note of the version you are using for the `hashicorp/terraform-cdk` and language bindings you are using.\r\nIf you are not running the latest version, please upgrade because your issue may have already been fixed. --->\r\n\r\ncdktf 0.13.2\r\n\r\n\r\n### Affected Resource(s)\r\n\r\n<!--- Please list the affected resources. --->\r\n`cdktf synth`\r\n`cdktf diff`\r\n`cdktf deploy`\r\n\r\n### Debug Output\r\n\r\n<!---\r\nPlease provide a link to a GitHub Gist containing the complete debug output. Please do NOT paste the debug output in the issue; just paste a link to the Gist.\r\n--->\r\n\r\n### Expected Behavior\r\n\r\n<!--- What should have happened? --->\r\n\r\nCan we standardize options for handling multi-stack workflows? I need to be able to run all subcommands for 1) a specific stack, 2) for all stacks.\r\n\r\n### Actual Behavior\r\n\r\n- `cdktf synth` runs for all stacks without supplying any further options, but I cannot specify to run for only one stack\r\n- `cdktf diff` requires specifying a stack, but there is no option to run for all stacks\r\n- `cdktf deploy` requires specifying a stack or `'*'` to run for all stacks\r\n\r\n### Steps to Reproduce\r\n\r\n<!--- Please list the steps required to reproduce the issue. --->\r\n\r\n### Important Factoids\r\n\r\n<!--- Are there anything atypical about your accounts that we should know? --->\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor documentation? For example:\r\n--->\r\n\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5Nrp-o",
        "author": {
          "login": "DanielMSchmidt"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "Yeah this part is a bit confusing and we don't really call the reason it explicitly in our documentation, so we should definitely add a section. \n\nSynth synthesizes all stacks because synthesizing means running the app command. The command is arbitrary, but most commonly we run ts /python/ etc to execute your cdktf program. We can't run half a program that easily, so that's why we run it entirely. \n\nWhen we built the multi-stack feature we wanted to allow to plan multiple stacks as well, but that's not really feasible right now. With cross stack references you might use a value from one stack in another. If we didn't apply yet or the changes would change that referenced value we can not make a (correct) plan. This is why we limit the plan to one stack. ",
        "createdAt": "2022-11-04T11:23:41Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 2
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2235#issuecomment-1303289768",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5Nrs5W",
        "author": {
          "login": "daniel-laszlo"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "Thank you for the explanation",
        "createdAt": "2022-11-04T11:37:47Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2235#issuecomment-1303301718",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5QQMpz",
        "author": {
          "login": "daniel-laszlo"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "@DanielMSchmidt followup question. Would I lose the ability to run plan for a stack which references a value from another stack? And then I would be restricted to only deploy in this case?",
        "createdAt": "2022-12-12T12:34:22Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2235#issuecomment-1346423411",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5QQQSo",
        "author": {
          "login": "DanielMSchmidt"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "No, you can plan the stack housing the value, apply it and the plan the stack using the value. If you plan the stack using the value first your plan might be incorrect / erroring",
        "createdAt": "2022-12-12T12:47:31Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2235#issuecomment-1346438312",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5fJY2Y",
        "author": {
          "login": "LyleDavis"
        },
        "authorAssociation": "NONE",
        "body": "@DanielMSchmidt in the scenario of running a plan on a stack where it depends on another stack that hasn't yet had the relevant changes applied, is it guaranteed that it will error or will it sometimes show an incorrect plan without erroring?\r\n\r\nI'm new to CDKTF and terraform in general, but in CI I was hoping to be able to run a diff on all stacks (if not together then one by one) and then deploy `*` on merge. Obviously that would be dangerous if there is the potential for the diff to be wrong due to stack dependencies.",
        "createdAt": "2023-06-18T22:58:01Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2235#issuecomment-1596296600",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5hcrAc",
        "author": {
          "login": "fathom-parth"
        },
        "authorAssociation": "NONE",
        "body": "@DanielMSchmidt a tiny bump if you have time to answer @LyleDavis's question! I'm setting up `cdktf` for my organization and trying to make sure our CI/CD setup is optimal.\r\n\r\nI think given this issue, the issue at https://github.com/hashicorp/terraform-cdk/issues/2157, and the [cdktf best practices](https://developer.hashicorp.com/terraform/cdktf/create-and-deploy/best-practices#separate-business-units-with-stacks) telling us to use multiple stacks over a single stack per-environment/project (we use gcp), there's no real way to run `cdktf diff` during CI?",
        "createdAt": "2023-07-13T20:55:14Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2235#issuecomment-1634906140",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5hlUDY",
        "author": {
          "login": "jsteinich"
        },
        "authorAssociation": "COLLABORATOR",
        "body": "> in the scenario of running a plan on a stack where it depends on another stack that hasn't yet had the relevant changes applied, is it guaranteed that it will error or will it sometimes show an incorrect plan without erroring?\r\n\r\nBoth situations are possible. If the value doesn't exist at all an error will occur when performing a diff; however, if the value is being changed, the existing value would be used and lead to an incorrect plan.\r\n\r\n\r\n\r\n> I think given this issue, the issue at #2157, and the [cdktf best practices](https://developer.hashicorp.com/terraform/cdktf/create-and-deploy/best-practices#separate-business-units-with-stacks) telling us to use multiple stacks over a single stack per-environment/project (we use gcp), there's no real way to run `cdktf diff` during CI?\r\n\r\nIt really depends how the stacks are being used. Separate environments that don't reference each other will diff without issue. Dependent stacks can certainly cause diff issues, but it is still possible to use with some extra coordination.",
        "createdAt": "2023-07-16T19:28:33Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2235#issuecomment-1637171416",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5hpUkh",
        "author": {
          "login": "fathom-parth"
        },
        "authorAssociation": "NONE",
        "body": "@jsteinich \r\n\r\n> It really depends how the stacks are being used. Separate environments that don't reference each other will diff without issue.\r\n\r\nSo I think the main issue is that there's no way that I can see to `cdktf diff` all the \"leaf\" stacks (i.e. the stacks with no dependencies) programmatically easily.\r\n\r\nWithout this, if a user adds a stack, they'll have to change the `diff` job explicitly to include their new stack. But our `deploy` job just runs `cdktf deploy '*'`. Ideally a user wouldn't have to worry about changing either job.\r\n\r\n> Dependent stacks can certainly cause diff issues, but it is still possible to use with some extra coordination.\r\n\r\nIn our case, the issue is that many stacks would be dependent on say the `networking` stack so that they can all use the same `network`. In this case the `networking` stack would rarely change and I still want to see the `diff` output for all the other stacks.\r\n\r\nYou mention \"it is still possible to use with some extra coordination\", could you expand a little on this?",
        "createdAt": "2023-07-17T14:06:01Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2235#issuecomment-1638222113",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5h7mB9",
        "author": {
          "login": "jsteinich"
        },
        "authorAssociation": "COLLABORATOR",
        "body": "There is a stack manifest created that includes dependency information. It's possible to write a script that reads it in and then diffs in an appropriate order. Would probably also need to be multi-step so that dependencies can be resolved (or just error if a potential issue is detected).\r\n",
        "createdAt": "2023-07-20T02:27:41Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2235#issuecomment-1643012221",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5iBFft",
        "author": {
          "login": "fathom-parth"
        },
        "authorAssociation": "NONE",
        "body": "Ah so we were looking into that but we'd still have to call `cdktf deploy` on (using the previous example again) the `networking` stack before being able to `diff` the downstream stacks?\r\n\r\nIt doesn't seem like a great practice to call `deploy` before merging the PR.",
        "createdAt": "2023-07-20T19:06:02Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2235#issuecomment-1644451821",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5iEpyV",
        "author": {
          "login": "jsteinich"
        },
        "authorAssociation": "COLLABORATOR",
        "body": "> Ah so we were looking into that but we'd still have to call `cdktf deploy` on (using the previous example again) the `networking` stack before being able to `diff` the downstream stacks?\r\n> \r\n> It doesn't seem like a great practice to call `deploy` before merging the PR.\r\n\r\nA workaround for the initial creation could be to have a conditional for creating the downstream stack(s) that is disabled for the 1st PR and a 2nd PR enables them.\r\nUpdates to the networking stack that need to ripple doesn't seem to have a great workaround.\r\n\r\n\r\nI certainly agree with all the issues here. Just looking for workarounds since a generic solution would be a complex addition to cdktf.",
        "createdAt": "2023-07-21T10:48:49Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2235#issuecomment-1645386901",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5iGZfd",
        "author": {
          "login": "fathom-parth"
        },
        "authorAssociation": "NONE",
        "body": "Ooh! I like that!\r\n\r\nIs there a way to add a resource to the cross-stack outputs without actually having that resource be used cross-stack yet?\r\n\r\nThen we could make a PR to the networking stack that exposes some new resource as a cross-stack resource without any other stack actually using that output yet. This would allow all `diff` calls to still work!\r\n\r\nThen we could make a 2nd PR to the downstream stack that wants to use the new resource in the networking stack and the `diff` will work because the remote state will already have the cross-stack reference!",
        "createdAt": "2023-07-21T16:11:15Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2235#issuecomment-1645844445",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5iH7nc",
        "author": {
          "login": "jsteinich"
        },
        "authorAssociation": "COLLABORATOR",
        "body": "> Is there a way to add a resource to the cross-stack outputs without actually having that resource be used cross-stack yet?\r\n\r\nYes, create a `TerraformOutput` containing the data you want to use.\r\nCross-stack references make use of Terraform remote state data sources. In order for something to be available as such, it must be put into an output. If you name it the same as will be generated I believe it will link up. If that fails, you can also explicitly reference as remote state.",
        "createdAt": "2023-07-21T21:15:30Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2235#issuecomment-1646246364",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5iH8zN",
        "author": {
          "login": "fathom-parth"
        },
        "authorAssociation": "NONE",
        "body": "Ideally we can name it the same so that we can pass the reference normally in the 2nd PR without having to define a `TerraformOutput` -- will test!",
        "createdAt": "2023-07-21T21:22:23Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2235#issuecomment-1646251213",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2022-10-31T15:02:31Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzgw",
        "name": "documentation",
        "description": "Improvements or additions to documentation",
        "color": "0075ca"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMTQ2NjcxNDUz",
        "name": "feature/multi-stack",
        "description": "",
        "color": "6589C9"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4Mjg1",
        "name": "size/small",
        "description": "estimated < 1 day",
        "color": "4671C0"
      }
    ],
    "milestone": null,
    "number": 2235,
    "title": "Inconsistent UX for multi-stack cdktf commands",
    "updatedAt": "2023-07-21T21:22:23Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjExMTIwNTY=",
      "is_bot": false,
      "login": "ansgarm",
      "name": "Ansgar Mertens"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\nWe should support something like this:\r\n```hcl\r\ndynamic \"origin_group\" {\r\n    for_each = var.load_balancer_origin_groups\r\n    content {\r\n      name = origin_group.key\r\n\r\n      dynamic \"origin\" {\r\n        for_each = origin_group.value.origins\r\n        content {\r\n          hostname = origin.value.hostname\r\n        }\r\n      }\r\n    }\r\n  }\r\n```\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\n### References\r\n\r\n* https://developer.hashicorp.com/terraform/language/expressions/dynamic-blocks#multi-level-nested-block-structures\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [],
    "createdAt": "2022-11-02T19:50:53Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwyMjI4Mzg3NjY3",
        "name": "cdktf",
        "description": "",
        "color": "fccac4"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMTM2MjkzOTA4",
        "name": "core-parity",
        "description": "Better experience in Terraform Core than CDKTF",
        "color": "1A80B6"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjUx",
        "name": "size/large",
        "description": "estimated < 1 month",
        "color": "9559B0"
      },
      {
        "id": "LA_kwDODd1Amc8AAAABBv4DFg",
        "name": "feature/iterators",
        "description": "",
        "color": "2911A8"
      }
    ],
    "milestone": null,
    "number": 2246,
    "title": "Support nested iteration (i.e. using `TerraformIterator.dynamic` inside `TerraformIterator.dynamic`)",
    "updatedAt": "2024-01-10T11:27:22Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjU2MzMwMQ==",
      "is_bot": false,
      "login": "mihok",
      "name": "Matthew Mihok"
    },
    "body": "### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n### Description\r\n\r\nCurrently tokens are forced into strings, and `dependsOn` or `addOverride` resolves these down to templated strings, which are not allowed. Where a block of code such as this:\r\n\r\n```typescript\r\n    const account = new ServiceAccount(scope, `${name}-account`, {\r\n      accountId: name,\r\n      description: \"Generated by Terraform\",\r\n    });\r\n\r\n    const key = new ServiceAccountKey(scope, `${name}-key`, {\r\n      serviceAccountId: account.id,\r\n      publicKeyType: \"TYPE_RAW_PUBLIC_KEY\",\r\n    });\r\n\r\n    key.dependsOn = [ account.id ];\r\n```\r\n\r\nWhich results in the following error from terraform:\r\n\r\n```\r\n‚îÇ Error: Invalid expression\r\n‚îÇ \r\n‚îÇ   on cdk.tf.json line 102, in resource.google_service_account_key.logging-robot-key.depends_on:\r\n‚îÇ  102:           \"${google_service_account.logging-robot-account.id}\",\r\n‚îÇ \r\n‚îÇ A single static variable reference is required: only attribute access and\r\n‚îÇ indexing with constant keys. No calculations, function calls, template\r\n‚îÇ expressions, etc are allowed here.\r\n```\r\n\r\nThere needs to be a simple way for people to reference the object without templated strings.\r\n\r\nIdeally, this might be as simple as having some kind of `toUntemplatedString` (ugly, not set on the name of the function/property)\r\n\r\nSo the above code would look something along the lines of:\r\n\r\n```typescript\r\n    const account = new ServiceAccount(scope, `${name}-account`, {\r\n      accountId: name,\r\n      description: \"Generated by Terraform\",\r\n    });\r\n\r\n    const key = new ServiceAccountKey(scope, `${name}-key`, {\r\n      serviceAccountId: account.id,\r\n      publicKeyType: \"TYPE_RAW_PUBLIC_KEY\",\r\n    });\r\n\r\n    key.dependsOn = [ account.idRaw ];\r\n```\r\n\r\nWhich result in a cdk.tf.json:\r\n\r\n```json\r\n \r\n \"depends_on\": [\r\n   \"google_service_account.logging-robot-account.id\"\r\n ]\r\n\r\n```\r\n\r\nHappy to do some of the implementation if it helps!\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5O9hF6",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "Hi @mihok üëã\r\n\r\nAs you're using `account.id` in the key, Terraform should be able to automatically figure out the dependency between those two resources (you don't need to specify the dependency).\r\nThat said, if you would need to define the dependency, usually you would pass the whole resource into the `dependsOn` property: `key.dependsOn = [account]` (like done in [HCL](https://developer.hashicorp.com/terraform/language/meta-arguments/depends_on))",
        "createdAt": "2022-11-23T09:13:22Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2334#issuecomment-1324749178",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5O-3KT",
        "author": {
          "login": "mihok"
        },
        "authorAssociation": "NONE",
        "body": "Thanks for looking at this @ansgarm, I reran the codebase with the instructions you have given me but Typescript suggests the value for dependsOn must be an array of strings, which is why I created this bug\r\n",
        "createdAt": "2022-11-23T13:55:21Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2334#issuecomment-1325101715",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5O_DCu",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "Ah, got it. That's something we should check then ü§î\r\nI came up with this because of this example which passes the resource construct:\r\nhttps://github.com/hashicorp/terraform-cdk/blob/217b7398fcc470d618f16f1095c3a88f69d6baeb/examples/typescript/google/main.ts#L46\r\n(we run examples in CI, so it should fail if TypeScript does not like that)",
        "createdAt": "2022-11-23T14:24:24Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2334#issuecomment-1325150382",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5O_E9I",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "Okay, there seems to be an inconsistency between dependencies passed via the initial config (like in the example I posted) and setting the property later on.\r\n\r\nThis extra bit happens if `dependsOn` is defined in the config:\r\nhttps://github.com/hashicorp/terraform-cdk/blob/217b7398fcc470d618f16f1095c3a88f69d6baeb/packages/cdktf/lib/terraform-resource.ts#L95-L99\r\n\r\nSo, the proper way in your case would be to call:\r\n```ts\r\nimport { dependable } from \"cdktf\";\r\n// ...\r\nkey.dependsOn = [dependable(account)]\r\n```\r\n\r\nBut I agree that this could use some more docs (at least inline docstrings on the `dependsOn` property; ideally some section in our [docs](https://developer.hashicorp.com/terraform/cdktf)).",
        "createdAt": "2022-11-23T14:30:37Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2334#issuecomment-1325158216",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5PJEDV",
        "author": {
          "login": "jsteinich"
        },
        "authorAssociation": "COLLABORATOR",
        "body": "Ideally setting after would also work with passing the entire object rather than needing to turn into a string. Can certainly improve documentation either way, but not requiring extra steps when late setting seems preferable.",
        "createdAt": "2022-11-25T18:33:25Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 4
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2334#issuecomment-1327775957",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc6BxfTX",
        "author": {
          "login": "edwardch-ibotta"
        },
        "authorAssociation": "NONE",
        "body": "is `dependable` something exposed in non-type script versions of the cdk?",
        "createdAt": "2024-06-18T23:10:57Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2334#issuecomment-2177234135",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2022-11-22T22:29:49Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzgw",
        "name": "documentation",
        "description": "Improvements or additions to documentation",
        "color": "0075ca"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMTM2Mjc5MjMx",
        "name": "ux/configuration",
        "description": "",
        "color": "58FCA0"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjEz",
        "name": "size/medium",
        "description": "estimated < 1 week",
        "color": "291E63"
      }
    ],
    "milestone": null,
    "number": 2334,
    "title": "Inconsistent behaviour of `dependsOn` if set via initial resource config vs. via `resource.dependsOn`",
    "updatedAt": "2024-06-18T23:10:59Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjU5NzU0OQ==",
      "is_bot": false,
      "login": "andrewbaxter",
      "name": "Andrew Baxter"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### cdktf & Language Versions\r\n\r\n```\r\n    <dependency>\r\n      <groupId>com.hashicorp</groupId>\r\n      <artifactId>cdktf</artifactId>\r\n      <version>0.14.1</version>\r\n    </dependency>\r\n```\r\n\r\nnode `v18.12.1`\r\nnpm `8.19.2`\r\n\r\nI think all other versions are in the debug output below.\r\n\r\n### Affected Resource(s)\r\n\r\nThis is `stripe_product` in `andrewbaxter/terraform-provider-stripe`\r\n\r\n### Debug Output\r\n\r\nhttps://gist.github.com/andrewbaxter/57279456f0c8eff22f44dbcd3045423c\r\n\r\n### Expected Behavior\r\n\r\nIn addition to the missing required field, I'd expect the message to include\r\n- Resource id\r\n- Resource type\r\n- Stack id\r\n\r\n### Actual Behavior\r\n\r\nError message only relays the missing field, with no other context.\r\n\r\n### Steps to Reproduce\r\n\r\n### Important Factoids\r\n\r\nThis is a provider I'm developing, so there may be issues with the provider too.\r\n\r\n### References",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5PDKTt",
        "author": {
          "login": "andrewbaxter"
        },
        "authorAssociation": "NONE",
        "body": "Looking more closely, now that I know the source `Product` does appear in the stack trace, but I'd expect spec issues to be caught and nicely formatted rather than result in a crash with 2 stack dumps.",
        "createdAt": "2022-11-24T10:08:35Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2340#issuecomment-1326228717",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2022-11-24T10:06:18Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwyNjMzNjk4NzAy",
        "name": "language/java",
        "description": "",
        "color": "E38858"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMTM1OTU1Nzk1",
        "name": "ux/debugging",
        "description": "",
        "color": "2703FD"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjUx",
        "name": "size/large",
        "description": "estimated < 1 month",
        "color": "9559B0"
      }
    ],
    "milestone": null,
    "number": 2340,
    "title": "Java, missing required field error is unclear",
    "updatedAt": "2022-12-02T09:31:43Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjM4Njg3NTQ=",
      "is_bot": false,
      "login": "jsteinich",
      "name": "Jon Steinich"
    },
    "body": "        I don't believe this actually works\r\n\r\nin my package.json I had\r\n```\r\n  \"dependencies\": {\r\n    \"@cdktf/provider-aws\": \"^9.0.0\",\r\n    \"@cdktf/provider-null\": \"^2.0\",\r\n    \"cdktf\": \"^0.12.0\",\r\n```\r\n\r\nI upgraded my cdktf-cli to 14.3. I ran `npm uninstall cdktf`(because if I don't i also run into more issues). Update my package.json to have\r\n```\r\n  \"dependencies\": {\r\n    \"@cdktf/provider-aws\": \"^9.0.0\",\r\n    \"@cdktf/provider-null\": \"^2.0\",\r\n    **\"cdktf\": \"^0.14.3\",**\r\n```\r\nRan `npm i`\r\n\r\nNow at this point I expect to be able to run `cdktf provider upgrade aws,null` and have it update my packages and my cdktf.json for me. But instead this breaks with\r\n```\r\nŒª cdktf provider upgrade null\r\n[2022-12-09T13:18:12.427] [ERROR] default - npm ERR! code ELSPROBLEMS\r\n\r\nnpm ERR! code ELSPROBLEMS\r\n[2022-12-09T13:18:12.429] [ERROR] default - npm ERR! invalid: cdktf@0.14.3 /$redacted/cdktf/aws/ec2-stack/node_modules/cdktf\r\n{\r\n  \"error\": {\r\n    \"code\": \"ELSPROBLEMS\",\r\n    \"summary\": \"invalid: cdktf@0.14.3 /$redacted/cdktf/aws/ec2-stack/node_modules/cdktf\",\r\n    \"detail\": \"\"\r\n  }\r\n}\r\n\r\nnpm ERR! A complete log of this run can be found in:\r\nnpm ERR!     /$redacted/.npm/_logs/2022-12-09T21_18_12_286Z-debug-0.log\r\n\r\nnpm ERR! invalid: cdktf@0.14.3 `$redacted/cdktf/aws/ec2-stack/node_modules/cdktf\r\n{\r\n  \"error\": {\r\n    \"code\": \"ELSPROBLEMS\",\r\n    \"summary\": \"invalid: cdktf@0.14.3 $redacted/cdktf/aws/ec2-stack/node_modules/cdktf\",\r\n    \"detail\": \"\"\r\n  }\r\n}\r\n\r\nnpm ERR! A complete log of this run can be found in:\r\nnpm ERR!     /$redacted/.npm/_logs/2022-12-09T21_18_12_286Z-debug-0.log\r\nError: External Error: Could not determine CDKTF version. Please make sure you are in a directory containing a CDKTF project and have all dependencies installed.\r\n    at Object.External (/opt/homebrew/Cellar/cdktf/0.14.3/libexec/lib/node_modules/cdktf-cli/bundle/bin/cmds/handlers.js:94:41856)\r\n    at Object.ZFr (/opt/homebrew/Cellar/cdktf/0.14.3/libexec/lib/node_modules/cdktf-cli/bundle/bin/cmds/handlers.js:492:29211)\r\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\r\n    at async qp.handleCommand (/opt/homebrew/Cellar/cdktf/0.14.3/libexec/lib/node_modules/cdktf-cli/bundle/bin/cdktf.js:54:479)\r\n    at async B.handler (/opt/homebrew/Cellar/cdktf/0.14.3/libexec/lib/node_modules/cdktf-cli/bundle/bin/cdktf.js:53:29879)\r\nCollecting Debug Information...\r\n/opt/homebrew/Cellar/cdktf/0.14.3/libexec/lib/node_modules/cdktf-cli/node_modules/yoga-layout-prebuilt/yoga-layout/build/Release/nbind.js:53\r\n        throw ex;\r\n        ^\r\n\r\nError: External Error: Could not determine CDKTF version. Please make sure you are in a directory containing a CDKTF project and have all dependencies installed.\r\n    at Object.External (/opt/homebrew/Cellar/cdktf/0.14.3/libexec/lib/node_modules/cdktf-cli/bundle/bin/cmds/handlers.js:94:41856)\r\n    at Object.ZFr (/opt/homebrew/Cellar/cdktf/0.14.3/libexec/lib/node_modules/cdktf-cli/bundle/bin/cmds/handlers.js:492:29211)\r\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\r\n    at async qp.handleCommand (/opt/homebrew/Cellar/cdktf/0.14.3/libexec/lib/node_modules/cdktf-cli/bundle/bin/cdktf.js:54:479)\r\n    at async B.handler (/opt/homebrew/Cellar/cdktf/0.14.3/libexec/lib/node_modules/cdktf-cli/bundle/bin/cdktf.js:53:29879) {\r\n  __type: 'External'\r\n}\r\n\r\nNode.js v18.12.1\r\n```\r\n\r\nThe only way to actually upgrade is to go in, npm uninstall all my providers and then run `cdktf provider add `\r\n\r\nThis is the most cumbersome way to upgrade in (there's almost 5 steps) no way streamlined at all. Am I missing something?\r\n\r\n_Originally posted by @jin-ahn in https://github.com/hashicorp/terraform-cdk/issues/2020#issuecomment-1344794127_\r\n      ",
    "comments": [],
    "createdAt": "2022-12-20T16:38:36Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwyMjYwNjQ0NDQx",
        "name": "cdktf-cli",
        "description": "",
        "color": "82e5de"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjEz",
        "name": "size/medium",
        "description": "estimated < 1 week",
        "color": "291E63"
      },
      {
        "id": "LA_kwDODd1Amc78phHg",
        "name": "cli/provider-subcommands",
        "description": "cdktf provider <verb> commands",
        "color": "4CBCB0"
      }
    ],
    "milestone": null,
    "number": 2437,
    "title": "cdktf provider upgrade issues",
    "updatedAt": "2023-09-29T12:53:23Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjEwNDAxNzk4",
      "is_bot": false,
      "login": "zmully",
      "name": "Zack Mully"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\nExisting CDKTF matchers (`.toHaveResource`, etc.) do not support testing for TerraformOutputs (I've not tried any other TerraformXXX resources).\r\n\r\nFor example, this test:\r\n```\r\n it('should create Terraform Output for key_arn', () => {\r\n    expect(\r\n      Testing.synthScope((scope) => {\r\n        const options: KmsKeyConfig = {\r\n          alias: 'test-key',\r\n          region: REGIONS.USEAST1,\r\n          accountId: ACCOUNTS['sandbox-security'],\r\n        };\r\n        new KmsKey(scope, 'KmsKeyName', options);\r\n      }),\r\n    ).toHaveResourceWithProperties(TerraformOutput, { asdf: 'test' })\r\n  });\r\n```\r\n\r\nThrows this error:\r\n```\r\nsrc/aws/kms/__tests__/index.test.ts:123:36 - error TS2345: Argument of type 'typeof TerraformOutput' is not assignable to parameter of type 'TerraformConstructor'.\r\n      Property 'tfResourceType' is missing in type 'typeof TerraformOutput' but required in type 'TerraformConstructor'.\r\n\r\n    123     ).toHaveResourceWithProperties(TerraformOutput, { asdf: 'test' })\r\n                                           ~~~~~~~~~~~~~~~\r\n\r\n      node_modules/cdktf/lib/testing/matchers.d.ts:2:14\r\n        2     readonly tfResourceType: string;\r\n                       ~~~~~~~~~~~~~~\r\n        'tfResourceType' is declared here.\r\n```\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [],
    "createdAt": "2022-12-20T17:10:28Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwyMjI4Mzg3NjY3",
        "name": "cdktf",
        "description": "",
        "color": "fccac4"
      },
      {
        "id": "MDU6TGFiZWwyNTcwMTY0OTY5",
        "name": "testing",
        "description": "",
        "color": "456cc6"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMzYxMTMzNzQ3",
        "name": "feature/snapshot-test",
        "description": "Snapshot testing + assertion related issues",
        "color": "006b75"
      }
    ],
    "milestone": null,
    "number": 2438,
    "title": "Add expect matcher for TerraformOutputs",
    "updatedAt": "2023-06-02T09:07:32Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjEzMzcwNDY=",
      "is_bot": false,
      "login": "DanielMSchmidt",
      "name": "Daniel Schmidt"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\nCurrently both finding the problem / potential errors and isolating error causes is a problem when debugging.\r\nI would suggest us thinking in the direction of a Debugging Construct, e.g. that catches the error and prints it and increases the internal log levels of synth-time logs within its scope or functions that add meta-data to certain values that improve debugability, e.g. add context that a certain value is not expected to be a token, etc.\r\n\r\n\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n\r\n- The Rust web framework [Axum](https://github.com/tokio-rs/axum) uses a macro on handler functions called [`debug_handler`](https://docs.rs/axum-macros/0.3.1/axum_macros/attr.debug_handler.html) to make errors thrown from the compiler in this section\r\n- Rust has the concepts of [marker traits](https://doc.rust-lang.org/std/marker/index.html). These are interfaces to implement on a custom type to indicate certain behaviour \r\n",
    "comments": [],
    "createdAt": "2023-01-10T13:49:48Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwyMjI4Mzg3NjY3",
        "name": "cdktf",
        "description": "",
        "color": "fccac4"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMTM1OTU1Nzk1",
        "name": "ux/debugging",
        "description": "",
        "color": "2703FD"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjEz",
        "name": "size/medium",
        "description": "estimated < 1 week",
        "color": "291E63"
      }
    ],
    "milestone": null,
    "number": 2470,
    "title": "Improve debugging by special debugging constructs / functions",
    "updatedAt": "2023-01-10T13:49:48Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjUwNDM3ODA=",
      "is_bot": false,
      "login": "blairham",
      "name": "Blair Hamilton"
    },
    "body": "### cdktf & Language Versions\r\n```\r\nlanguage: typescript\r\ncdktf-cli: 0.14.3\r\nnode: v16.15.1\r\ncdktf: 0.14.3\r\nconstructs: 10.1.215\r\nterraform: 1.1.7\r\n```\r\n\r\n### Affected Resource(s)\r\n* CDKTF Typescript\r\n\r\n```\r\n    const tags = new TerraformVariable(this, \"default_tags\", {\r\n      type: \"map\",\r\n      default: {\r\n        BusinessOwner: \"Magoo\",\r\n        Environment: \"sbx\",\r\n        Deployment: \"Terraform\",\r\n      },\r\n    });\r\n```\r\n\r\n### Expected Behavior\r\nWhen creating a `map` TerraformVariable, it should not modify the keys as the module expects specific case-sensitive values.\r\n\r\nIn `cdktf.json` ,\r\n```\r\n  \"variable\": {\r\n    \"default_tags\": {\r\n      \"default\": {\r\n        \"BusinessOwner\": \"Magoo\",\r\n        \"Deployment\": \"Terraform\",\r\n        \"Environment\": \"sbx\",\r\n      },\r\n      \"type\": \"map\"\r\n    }\r\n```\r\n\r\n### Actual Behavior\r\nWhen creating a `map` TerraformVariable, I the keys are changed to snake case.\r\n```\r\n  \"variable\": {\r\n    \"default_tags\": {\r\n      \"default\": {\r\n        \"business_owner\": \"Magoo\",\r\n        \"deployment\": \"Terraform\",\r\n        \"environment\": \"sbx\",\r\n      },\r\n      \"type\": \"map\"\r\n    }\r\n```\r\n\r\n### Steps to Reproduce\r\n* run Synth\r\n* look at cdktf.json output",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5TZ2aO",
        "author": {
          "login": "jsteinich"
        },
        "authorAssociation": "COLLABORATOR",
        "body": "This sort of thing was briefly mentioned in https://github.com/hashicorp/terraform-cdk/pull/2446#pullrequestreview-1227833208.\r\nShould probably just remove the `keysToSnakeCase` function and explicitly set in the few places where it is still needed.",
        "createdAt": "2023-01-21T16:39:49Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2473#issuecomment-1399285390",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc57Bflj",
        "author": {
          "login": "marcel-tomate"
        },
        "authorAssociation": "NONE",
        "body": "Also running into this problem with my custom provider, which is using `schema.MapAttribute`  and it will transform my keys from kebab-case to snake_case, which will break things. \r\nFor now I can workaround with this:\r\n```\r\nconst ipamProvider = new provider.IpamProvider(\r\n      this,\r\n      \"ipamProvider\"\r\n      // {\r\n      //   // will result in wrong keys:\r\n      //   staticAssignments: data.staticAssignments,\r\n      // }\r\n    );\r\n\r\n    // Hotfix https://github.com/hashicorp/terraform-cdk/pull/395#issuecomment-822786292\r\n    ipamProvider.addOverride(\"static_assignments\", data.staticAssignments);\r\n```",
        "createdAt": "2024-04-18T14:18:39Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2473#issuecomment-2063989091",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2023-01-10T21:45:44Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwyMjI4Mzg3NjY3",
        "name": "cdktf",
        "description": "",
        "color": "fccac4"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMTM2Mjc5MjMx",
        "name": "ux/configuration",
        "description": "",
        "color": "58FCA0"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjEz",
        "name": "size/medium",
        "description": "estimated < 1 week",
        "color": "291E63"
      }
    ],
    "milestone": null,
    "number": 2473,
    "title": "Synth changing TerraformVariable map keys to snake case",
    "updatedAt": "2024-04-18T14:18:40Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjI2NzQ1MTUw",
      "is_bot": false,
      "login": "acdoussan",
      "name": ""
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\nCurrently, [the docs](https://developer.hashicorp.com/terraform/tutorials/cdktf/cdktf-install) (and default project template after running `cdktf init`) require `cdktf-cli` to be installed globally. This defeats the purpose of npm's package management, where every project contains all its dependencies and can be repeatably built in different environments.\r\n\r\nCurrently, if there is a breaking change to the way `cdktf-cli` works, and I create a new template, but also have to work with an existing template, I would have to uninstall / reinstall `cdktf-cli` each time I want to switch which package I am working on, or manually add `cdktf-cli` as a dependency for each project, and uninstall it globally.\r\n\r\nI am proposing two changes:\r\n- Update the docs to use `npx` rather than instructing users to install `cdktf-cli` globally\r\n  - See references for what it takes to make this work, but this should look something like `npx create-react-app` but for cdktf. So, for example, `npx cdktf-init`\r\n- Update the project template from `cdktf init` to depend on `cdktf-cli` directly in its dependencies.\r\n\r\nThis should be pretty straightforward, but requires a new repository / published npm package that y'all should create.\r\n\r\n### References\r\n\r\nhttps://blog.deepgram.com/npx-script/",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5Sbjiv",
        "author": {
          "login": "acdoussan"
        },
        "authorAssociation": "NONE",
        "body": "This would also probably require updating [other documentation](https://developer.hashicorp.com/terraform/tutorials/cdktf/cdktf-install#deploy-container) as well as these run the global cli. Best path would likely be to add a `\"cdktf\": \"cdktf\"` script to the template, and then update the documentation to be `npm run cdktf -- deploy` or equivalent.",
        "createdAt": "2023-01-14T22:56:51Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2488#issuecomment-1382955183",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5ScsC6",
        "author": {
          "login": "acdoussan"
        },
        "authorAssociation": "NONE",
        "body": "also might be good to expose the whole cdktf cli instead of just the init functionality (basically `npx cdktf` instead of `npx cdktf-init`)",
        "createdAt": "2023-01-15T21:02:59Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2488#issuecomment-1383252154",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5SeW2z",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "Hi @acdoussan üëã\r\nThank you for proposing this! This would be very helpful for folks switching between different projects regularly.\r\n\r\nThat said, it is already possible to install the `cdktf-cli` as a dependency in the `package.json`, actually our `typescript` init template already does this and adds e.g. the `npm run synth` command ([source](https://github.com/hashicorp/terraform-cdk/blob/main/packages/cdktf-cli/templates/typescript/package.json#L11)) that will invoke that dependency.\r\n\r\nHowever, as we're supporting multiple other languages and adding a `package.json` to a Python project would not feel natural to Python users, that path forward does not really work outside of TypeScript.\r\n\r\nI still think we should find an answer to simplify working with multiple different CDKTF versions. However, I'm not sure whether `npx` would be the right way forward (at least as a recommendation; it already works today, try e.g. `npx cdktf-cli@0.14.0 --version`).\r\n\r\nAn alternative approach could be to change the `cdktf-cli` into a thin wrapper that determines a projects CDKTF version and uses the right `cli` package for that version.",
        "createdAt": "2023-01-16T08:57:39Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2488#issuecomment-1383689651",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5SgzJ7",
        "author": {
          "login": "acdoussan"
        },
        "authorAssociation": "NONE",
        "body": "Heya!\r\n\r\nYeah, was mostly focusing on the typescript implementation. You're right there is a script for it, but `cdktf-cli` is not added to [the dependencies](https://github.com/hashicorp/terraform-cdk/blob/main/packages/cdktf-cli/templates/typescript/.hooks.sscaff.js#L15), so it still requires the cli to be installed globally to work.\r\n\r\nDef agree it would be weird to have a package.json for other projects. Maybe the default for those is a bash script, or something language specific, that runs a determined cli version using `npx`? It looks like y'all already assume most people will install it via npm, so shouldn't be much different, other than not having to install it globally.",
        "createdAt": "2023-01-16T17:01:51Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2488#issuecomment-1384329851",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5Sg4CE",
        "author": {
          "login": "acdoussan"
        },
        "authorAssociation": "NONE",
        "body": "Also, you can run it with npx like that, but it still requires the package to be installed. Usually `npx` scripts don't require things to be installed to run.\r\n\r\nExample output I get:\r\n```\r\n$ npx cdktf-cli@0.14.0 --version\r\nNeed to install the following packages:\r\n  cdktf-cli@0.14.0\r\nOk to proceed? (y) \r\n```",
        "createdAt": "2023-01-16T17:16:26Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2488#issuecomment-1384349828",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2023-01-14T22:05:56Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwyMjYwNjQ0NDQx",
        "name": "cdktf-cli",
        "description": "",
        "color": "82e5de"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4Mjg1",
        "name": "size/small",
        "description": "estimated < 1 day",
        "color": "4671C0"
      }
    ],
    "milestone": null,
    "number": 2488,
    "title": "Install cdktf-cli as part of TS template instead of relying on global installation",
    "updatedAt": "2023-01-19T16:12:34Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjI2NzQ1MTUw",
      "is_bot": false,
      "login": "acdoussan",
      "name": ""
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\n- Please update the default template to output the built .js / .d.ts files from typescript to a `build` folder (aka set outDir to `build`), rather than dumping them next to the code. These files clutter up the folder and I don't want to see them.\r\n- Support absolute paths by default. Ref: https://discuss.hashicorp.com/t/cdktf-tsconfig-paths-not-working-for-local-imports/46163/6?u=acdoussan\r\n- It would be nice if the initial project setup was slightly more sophisticated, rather than having everything in a single file. I propose creating a src directory, which contains an `app.ts` file and a `exampleStack.ts` file. `main.ts` instantiates the app from `app.ts`, app.ts instantiates the stack from `exampleStack.ts`, `exampleStack.ts` can stay empty as it is in the current template. Example on what this would look like can be seen in [this issue](https://github.com/hashicorp/terraform-cdk/issues/2489).\r\n\r\n### References\r\n\r\nhttps://www.typescriptlang.org/tsconfig#outDir",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5SlJyF",
        "author": {
          "login": "xiehan"
        },
        "authorAssociation": "MEMBER",
        "body": "Hi @acdoussan, thanks for the detailed issue writeup! For the first two bullet points, I'll let the engineers weigh in since they can say more about whether there are any consequences to making these changes or not.\r\n\r\nAs for your third bullet point, I get where you're coming from, but unfortunately we're not likely to incorporate this proposed change at this time. The reason being is that since we're a relatively new project and lots of folks are still learning to use CDKTF for the first time, it's very important for us to be consistent between the library itself and our documentation and tutorials located at e.g. https://developer.hashicorp.com/terraform/tutorials/cdktf/cdktf-install and https://developer.hashicorp.com/terraform/cdktf/examples-and-guides/refactoring. These docs make heavy use of this \"all of your config in a single file\" pattern because it's much easier to convey the documentation that way even though it's not a desirable pattern for more complex, production-grade projects.\r\n\r\nDown the line, the team is talking about refactoring the entire template system to make it more robust, and I wonder if that time might be an opportunity for us to look into maintaining our current simple \"quickstart\" template but also add more advanced templates that might be more suitable for production projects. For now, however, it is more important for us to keep CDKTF accessible for beginners, and rely on our more experienced users to figure out for themselves how to refactor the default template to better suit complex use cases.",
        "createdAt": "2023-01-17T14:01:43Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2490#issuecomment-1385471109",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc6ejMx9",
        "author": {
          "login": "fbartho"
        },
        "authorAssociation": "NONE",
        "body": "@xiehan I understand the desire to simplify the learning curve a few years ago when this project started.\n\nThat's said, this is 2025 now, and the points that @acdoussan raised initially are friction points that I have to bypass when advocating for this tool with my team.\n\nCan we revisit this decision in light of the age of the project now?",
        "createdAt": "2025-02-14T18:41:45Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2490#issuecomment-2660027517",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc6ejQ7R",
        "author": {
          "login": "fbartho"
        },
        "authorAssociation": "NONE",
        "body": "Filed a related quality of life issue: https://github.com/hashicorp/terraform-cdk/issues/3827",
        "createdAt": "2025-02-14T18:50:53Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2490#issuecomment-2660044497",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2023-01-14T22:39:04Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwyMjg5OTEzOTMx",
        "name": "build",
        "description": "",
        "color": "f7bbc8"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMTM2Mjc5MjMx",
        "name": "ux/configuration",
        "description": "",
        "color": "58FCA0"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjEz",
        "name": "size/medium",
        "description": "estimated < 1 week",
        "color": "291E63"
      }
    ],
    "milestone": null,
    "number": 2490,
    "title": "cdktf-init typescript template general QOL improvements",
    "updatedAt": "2025-02-14T18:50:55Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjEzMzcwNDY=",
      "is_bot": false,
      "login": "DanielMSchmidt",
      "name": "Daniel Schmidt"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\nhttps://developer.hashicorp.com/terraform/cdktf/concepts/resources#escape-hatch was not helpful in finding the syntax for overriding something with a list\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [],
    "createdAt": "2023-01-18T14:44:02Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzgw",
        "name": "documentation",
        "description": "Improvements or additions to documentation",
        "color": "0075ca"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4Mjg1",
        "name": "size/small",
        "description": "estimated < 1 day",
        "color": "4671C0"
      }
    ],
    "milestone": null,
    "number": 2511,
    "title": "Document how to use escape hatch with lists",
    "updatedAt": "2023-06-28T18:28:27Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjExMTIwNTY=",
      "is_bot": false,
      "login": "ansgarm",
      "name": "Ansgar Mertens"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\n`terraform plan` supports passing a `-destroy` flag ([docs](https://developer.hashicorp.com/terraform/cli/commands/plan#planning-modes)).\r\n`cdktf diff` / `cdktf plan` currently doesn't support this flag.\r\nWe should support it.\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [],
    "createdAt": "2023-01-18T14:52:43Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwyMjYwNjQ0NDQx",
        "name": "cdktf-cli",
        "description": "",
        "color": "82e5de"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMTM2MjkzOTA4",
        "name": "core-parity",
        "description": "Better experience in Terraform Core than CDKTF",
        "color": "1A80B6"
      }
    ],
    "milestone": null,
    "number": 2513,
    "title": "Support planning a destroy via `cdktf-cli`",
    "updatedAt": "2023-02-16T13:55:36Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjU4MjYxNg==",
      "is_bot": false,
      "login": "cosminnicula",
      "name": "Cosmin Nicula"
    },
    "body": "Don't know if this is the right place to open this type of issue, so please let me know if I should open it in another place.\r\n\r\nWhen instantiating a Vpc module, I can't specify the provider, just as I would normally specify with Terraform HCL.\r\nFor example the following HCL snippet of code does not have an equivalent in CDKTF:\r\n```\r\nresource \"aws_vpc\" \"vpc-eu-west-1\" {\r\n  ...\r\n  provider = aws.aws-eu-west-1\r\n  ...\r\n}\r\n```\r\nwhere ```aws.aws-eu-west-1``` references a provider block like the following:\r\n```\r\nprovider \"aws\" {\r\n  ...\r\n  alias = \"aws-eu-west-1\"\r\n  ...\r\n}\r\n```\r\n\r\nIs this going to be supported in the future?",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5Sr6G2",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "Hi @cosminnicula üëã\r\n\r\nSorry for the late reply, it seems that this issue indeed is rather related to the [CDK for Terraform](https://github.com/hashicorp/terraform-cdk) itself. This repository is about a layer that allows using AWS CDK constructs in the CDKTF ‚Äì using Terraform modules in CDKTF is a core functionality of CDKTF.\r\n\r\nLet my try to get this issue moved..",
        "createdAt": "2023-01-18T15:18:38Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2515#issuecomment-1387241910",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5Sr9Ui",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "Hi again, @cosminnicula üëã\r\n\r\nAfter re-reading your issue, it seems that our docs are missing the explanation for how to pass a provider alias to a resource.\r\n\r\nIn CDKTF you can pass the instance of a provider construct you instantiate to a resource.\r\nTypeScript example:\r\n```ts\r\nconst provider = new LocalProvider(this, \"local\");\r\nnew File(this, \"dummy\", { provider: provider, filename: \"dummy.txt\" });\r\n```\r\n\r\nWe should definitely extend our docs to include an example of passing a provider to a resource.",
        "createdAt": "2023-01-18T15:28:14Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2515#issuecomment-1387255074",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2022-12-29T14:46:10Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzgw",
        "name": "documentation",
        "description": "Improvements or additions to documentation",
        "color": "0075ca"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMTM2Mjc5MjMx",
        "name": "ux/configuration",
        "description": "",
        "color": "58FCA0"
      }
    ],
    "milestone": null,
    "number": 2515,
    "title": "Document how to pass a `provider` to a resource",
    "updatedAt": "2023-02-15T16:35:48Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjEzMzcwNDY=",
      "is_bot": false,
      "login": "DanielMSchmidt",
      "name": "Daniel Schmidt"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\nWe could expose a matcher that asserts if a module is present and configured in a certain way\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n\r\n\r\n- https://stackoverflow.com/questions/75008472/how-can-i-test-my-terrafrom-modules-using-cdktf/75181665#75181665\r\n",
    "comments": [],
    "createdAt": "2023-01-20T08:53:05Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwyNTcwMTY0OTY5",
        "name": "testing",
        "description": "",
        "color": "456cc6"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjEz",
        "name": "size/medium",
        "description": "estimated < 1 week",
        "color": "291E63"
      }
    ],
    "milestone": null,
    "number": 2518,
    "title": "Testing: Assert modules being present",
    "updatedAt": "2023-01-20T08:53:05Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjEzMzcwNDY=",
      "is_bot": false,
      "login": "DanielMSchmidt",
      "name": "Daniel Schmidt"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\n`Found an encoded list token string in a scalar string context. Use 'Fn.element(list, 0)' (not 'list[0]') to extract elements from token lists` does not seem to help people. Maybe we should link to a documentation article to clarify\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5Zsk4Q",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "I'd propose to close this as a duplicate of #2254 ‚Äì what do you think, @DanielMSchmidt?",
        "createdAt": "2023-04-12T08:16:33Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2548#issuecomment-1504857616",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5ZsmYT",
        "author": {
          "login": "DanielMSchmidt"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "I don't think they cover quite the same topic although it's about the same error message. This issue proposes rephrasing the error message as well as linking to a documentation page that helps, the one you linked talks about hinting towards iterators. We can combine them, but I don't think they are the same",
        "createdAt": "2023-04-12T08:21:33Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2548#issuecomment-1504863763",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2023-01-27T14:55:12Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzgw",
        "name": "documentation",
        "description": "Improvements or additions to documentation",
        "color": "0075ca"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMTM1OTU1Nzk1",
        "name": "ux/debugging",
        "description": "",
        "color": "2703FD"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjEz",
        "name": "size/medium",
        "description": "estimated < 1 week",
        "color": "291E63"
      }
    ],
    "milestone": null,
    "number": 2548,
    "title": "Improve list token access error message",
    "updatedAt": "2023-06-28T18:28:42Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjExMTIwNTY=",
      "is_bot": false,
      "login": "ansgarm",
      "name": "Ansgar Mertens"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\nWe just came across this use-case for Java in the CDK Dev Slack:\r\n```java\r\n        new Instance(this, \"bastionHost\", InstanceConfig.builder()\r\n                .ami(\"ami-06c39ed6b42908a36\")\r\n                .instanceType(\"t3.nano\")\r\n                .subnetId(Token.asString(Fn.element(Token.asAny(vpc.getPrivateSubnetsOutput()), 0)))\r\n                .iamInstanceProfile(Token.asString(bastionHostIamRole.getIamInstanceProfileArnOutput()))\r\n                .rootBlockDevice(new InstanceRootBlockDevice.Builder()\r\n                        .encrypted(true)\r\n                        .kmsKeyId(Token.asString(ebsKmsKey.getKeyArnOutput()))\r\n                        .build())\r\n                .tags(Map.of(\r\n                        \"Name\", \"BastionHost\"\r\n                ))\r\n                .build());\r\n\r\n```\r\n(which works)\r\n\r\nwith the interesting line being:\r\n`.subnetId(Token.asString(Fn.element(Token.asAny(vpc.getPrivateSubnetsOutput()), 0)))`\r\n\r\nIt took us quite a bit to figure out the inner `Token.asAny()` wrapping.\r\n\r\nSo, we should document an example like this in [this section](https://developer.hashicorp.com/terraform/cdktf/concepts/modules#work-with-module-outputs) and mention it on the [functions page](https://developer.hashicorp.com/terraform/cdktf/concepts/functions).\r\n\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5VS9US",
        "author": {
          "login": "mutahhir"
        },
        "authorAssociation": "MEMBER",
        "body": "Related to #1891 ",
        "createdAt": "2023-02-15T09:47:34Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2613#issuecomment-1431033106",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2023-02-08T10:53:36Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzgw",
        "name": "documentation",
        "description": "Improvements or additions to documentation",
        "color": "0075ca"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      }
    ],
    "milestone": null,
    "number": 2613,
    "title": "Documentation: Module outputs may require \"Token typecasting\" when passed e.g. into Terraform functions",
    "updatedAt": "2023-06-28T18:26:35Z"
  },
  {
    "assignees": [
      {
        "id": "MDQ6VXNlcjEzMzcwNDY=",
        "login": "DanielMSchmidt",
        "name": "Daniel Schmidt",
        "databaseId": 0
      }
    ],
    "author": {
      "id": "MDQ6VXNlcjU3MzUzMQ==",
      "is_bot": false,
      "login": "mutahhir",
      "name": "Mutahhir Hayat"
    },
    "body": "\n```py\n        aws_rds_cluster_changeme_aws_aurora_cluster_instance =\n        aws.rds_cluster.RdsCluster(self, \"changeme_aws_aurora_cluster_instance\",\n            master_password=changeme_aws_aurora_cluster_password.value,\n            master_username=changeme_aws_aurora_cluster_username.value,\n            skip_final_snapshot=True\n        )\n```\n\n### Error\n\n```\nCommand output on stderr:\n\n    Traceback (most recent call last):\n      File \"/Users/mutahhir/src/scratchpad/terraform-convert-examples/converted-langs/python/aws/main.py\", line 6, in <module>\n        from aws_db_instance.restore_db_from_snapshot.main import MyStack as aws_db_instance_restore_db_from_snapshot\n      File \"/Users/mutahhir/src/scratchpad/terraform-convert-examples/converted-langs/python/aws/aws_db_instance/restore_db_from_snapshot/main.py\", line 43\n        data_aws_db_snapshot_changeme_latest_prod_snapshot =\n                                                            ^\n    SyntaxError: invalid syntax\n```",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5VUDL7",
        "author": {
          "login": "mutahhir"
        },
        "authorAssociation": "MEMBER",
        "body": "JSII Issue: https://github.com/aws/jsii/issues/3968",
        "createdAt": "2023-02-15T12:50:52Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2641#issuecomment-1431319291",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5XDPSp",
        "author": {
          "login": "rirze"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "This is invalid Python syntax? The proper way to achieve this in python is\r\n```python3\r\n        aws_rds_cluster_changeme_aws_aurora_cluster_instance = \\\r\n\t        aws.rds_cluster.RdsCluster(self, \"changeme_aws_aurora_cluster_instance\",\r\n\t            master_password=changeme_aws_aurora_cluster_password.value,\r\n\t            master_username=changeme_aws_aurora_cluster_username.value,\r\n\t            skip_final_snapshot=True\r\n\t        )\r\n```",
        "createdAt": "2023-03-08T16:34:02Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2641#issuecomment-1460466857",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2023-02-14T08:57:35Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwyMTEzNjU3MzA2",
        "name": "language/python",
        "description": "",
        "color": "5c2596"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMTg1Mzg1NTQ2",
        "name": "feature/convert",
        "description": "",
        "color": "d93f0b"
      }
    ],
    "milestone": null,
    "number": 2641,
    "title": "Convert breaking long lines into multiple causes compilation issues in python",
    "updatedAt": "2023-10-13T15:28:53Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjEzMTU0MTY2",
      "is_bot": false,
      "login": "sabinayakc",
      "name": "Sabinaya KC"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### cdktf & Language Versions\r\n\r\nlanguage: typescript\r\ncdktf-cli: 0.15.4\r\nnode: v16.17.0\r\ncdktf: 0.15.4\r\nconstructs: 10.1.162\r\njsii: null\r\nterraform: 1.3.7\r\narch: x64\r\nos: linux 5.10.102.1-microsoft-standard-WSL2\r\n\r\n### Affected Resource(s)\r\n\r\n`cdktf plan`\r\n`cdtkf apply`\r\n\r\n### Expected Behavior\r\nShould be able to use module outputs from one stack to another. \r\n\r\n### Actual Behavior\r\n\r\nPlan errors out with the following error,\r\n```\r\n‚îÇ Error: Unsupported attribute\r\n                       ‚îÇ \r\n                       ‚îÇ   on cdk.tf.json line 51, in provider.helm[0].kubernetes:\r\n                       ‚îÇ   51:           \"cluster_ca_certificate\": \"${base64decode(data.terraform_remote_state.cross-stack-reference-input-test-service.outputs.cross-stack-output-moduletest-service-clustercluster_certificate_authority_data)}\",\r\n                       ‚îÇ     ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\r\n                       ‚îÇ     ‚îÇ data.terraform_remote_state.cross-stack-reference-input-test-service.outputs is object with 3 attributes\r\n```\r\n\r\n### Steps to Reproduce\r\n\r\n```\r\n  const eksStack = new EKSStack(app, \"test-service\");\r\n  new CloudBackend(eksStack, {\r\n    hostname: \"app.terraform.io\",\r\n    organization: \"XXXX\",\r\n    workspaces: new NamedCloudWorkspace(\"test-service\"),\r\n  });\r\n\r\n  const toolsStack = new MyToolsStack(app, \"test-tools\", {\r\n    eks: eksStack.eks,\r\n  });\r\n  \r\n  new CloudBackend(toolsStack, {\r\n    hostname: \"app.terraform.io\",\r\n    organization: \"XXX\",\r\n    workspaces: new NamedCloudWorkspace(\"my-tools\"),\r\n  });\r\n```\r\n\r\nIn my EKSStack, I have used the `terraform-eks-module`\r\n```\r\nexport class EKSStack extends TerraformStack {\r\n  public eks: EksModule;   \r\n```\r\nAnd in my tools stack,\r\n```\r\n    const data = new DataAwsEksClusterAuth(\r\n      this,\r\n      `cluster-auth`,\r\n      {\r\n        name:  eks.clusterNameOutput,\r\n      }\r\n    );\r\n```\r\n\r\n\r\n### Important Factoids\r\n\r\n- I am using the `terraform-eks-module` to create EKS\r\n- EKS is created \r\n- But when I want to reuse the EKS outputs in a different stack I can't.\r\n\r\nDo I need to add outputs for each attribute I want to export to the other stack?",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5VgfST",
        "author": {
          "login": "DanielMSchmidt"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "Cross stack references auto-add the outputs needed to the source stack (the one creating the EKS cluster in this case). It seems like this is happening, I'm not sure why this error happens, the remote state reference looks okay. Could you show us the generated output in the `cdk.tf.json` file of your EKs cluster stack?",
        "createdAt": "2023-02-17T12:34:41Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2662#issuecomment-1434580115",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5Vjx35",
        "author": {
          "login": "sabinayakc"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "@DanielMSchmidt Here it is. I have redacted some stuff.\r\n\r\n```\r\n{\r\n  \"//\": {\r\n    \"metadata\": {\r\n      \"backend\": \"cloud\",\r\n      \"cloud\": \"tfc\",\r\n      \"stackName\": \"test-shared-service\",\r\n      \"version\": \"0.15.3\"\r\n    },\r\n    \"outputs\": {\r\n      \"test-shared-service\": {\r\n        \"test-shared-service-cluster-arn\": \"test-shared-service-cluster-arn\",\r\n        \"test-shared-service-cluster-endpoint\": \"test-shared-service-cluster-endpoint\",\r\n        \"test-shared-service-cluster-oidc\": \"test-shared-service-cluster-oidc\"\r\n      }\r\n    }\r\n  },\r\n  \"module\": {\r\n    \"test-shared-service-alb-irsa\": {\r\n      \"//\": {\r\n        \"metadata\": {\r\n          \"path\": \"test-shared-service/test-shared-service-alb-irsa\",\r\n          \"uniqueId\": \"test-shared-service-alb-irsa\"\r\n        }\r\n      },\r\n      \"attach_load_balancer_controller_policy\": true,\r\n      \"oidc_providers\": {\r\n        \"main\": {\r\n          \"namespace_service_accounts\": [\r\n            \"kube-system:alb-sa\"\r\n          ],\r\n          \"provider_arn\": \"${module.test-shared-service-cluster.oidc_provider_arn}\"\r\n        }\r\n      },\r\n      \"role_name\": \"test-shared-service-alb-role\",\r\n      \"source\": \"terraform-aws-modules/iam/aws//modules/iam-role-for-service-accounts-eks\"\r\n    },\r\n    \"test-shared-service-autoscaler-irsa\": {\r\n      \"//\": {\r\n        \"metadata\": {\r\n          \"path\": \"test-shared-service/test-shared-service-autoscaler-irsa\",\r\n          \"uniqueId\": \"test-shared-service-autoscaler-irsa\"\r\n        }\r\n      },\r\n      \"attach_cluster_autoscaler_policy\": true,\r\n      \"cluster_autoscaler_cluster_ids\": [\r\n        \"${module.test-shared-service-cluster.cluster_name}\"\r\n      ],\r\n      \"oidc_providers\": {\r\n        \"main\": {\r\n          \"namespace_service_accounts\": [\r\n            \"kube-system:${local.auto-scaler-name}-sa\"\r\n          ],\r\n          \"provider_arn\": \"${module.test-shared-service-cluster.oidc_provider_arn}\"\r\n        }\r\n      },\r\n      \"role_name\": \"test-shared-service-autoscaler-role\",\r\n      \"source\": \"terraform-aws-modules/iam/aws//modules/iam-role-for-service-accounts-eks\"\r\n    },\r\n    \"test-shared-service-cluster\": {\r\n      \"//\": {\r\n        \"metadata\": {\r\n          \"path\": \"test-shared-service/test-shared-service-cluster\",\r\n          \"uniqueId\": \"test-shared-service-cluster\"\r\n        }\r\n      },\r\n      \"aws_auth_roles\": [\r\n        {\r\n          \"groups\": [\r\n            \"system:masters\"\r\n          ],\r\n          \"rolearn\": \"arn:aws:iam::732461071035:role/InfrastructureAccountAccessRole\",\r\n          \"username\": \"NonProdRole\"\r\n        }\r\n      ],\r\n      \"cluster_addons\": {\r\n        \"aws-ebs-csi-driver\": {\r\n          \"most_recent\": true\r\n        },\r\n        \"coredns\": {\r\n          \"most_recent\": true\r\n        },\r\n        \"kube-proxy\": {\r\n          \"most_recent\": true\r\n        }\r\n      },\r\n      \"cluster_endpoint_public_access\": true,\r\n      \"cluster_ip_family\": \"ipv4\",\r\n      \"cluster_name\": \"test-shared-service-cluster\",\r\n      \"cluster_version\": \"1.24\",\r\n      \"control_plane_subnet_ids\": \"${local.control-plane-subnets}\",\r\n      \"create_cloudwatch_log_group\": false,\r\n      \"eks_managed_node_group_defaults\": {\r\n        \"iam_role_additional_policies\": {\r\n          \"AmazonEBSCSIDriverPolicy\": \"arn:aws:iam::aws:policy/service-role/AmazonEBSCSIDriverPolicy\"\r\n        }\r\n      },\r\n      \"eks_managed_node_groups\": \"${var.node-group-config}\",\r\n      \"iam_role_name\": \"test-shared-service\",\r\n      \"source\": \"terraform-aws-modules/eks/aws\",\r\n      \"subnet_ids\": \"${local.eks-subnets}\",\r\n      \"version\": \"19.7.0\",\r\n      \"vpc_id\": \"${data.terraform_remote_state.test-core-shared-state.outputs.test-shared-vpc-id}\"\r\n    }\r\n  },\r\n  \"output\": {\r\n    \"test-shared-service-cluster-arn\": {\r\n      \"value\": \"${module.test-shared-service-cluster.cluster_arn}\"\r\n    },\r\n    \"test-shared-service-cluster-endpoint\": {\r\n      \"value\": \"${module.test-shared-service-cluster.cluster_endpoint}\"\r\n    },\r\n    \"test-shared-service-cluster-oidc\": {\r\n      \"value\": \"${module.test-shared-service-cluster.oidc_provider}\"\r\n    }\r\n  },\r\n  \"provider\": {\r\n    \"aws\": [\r\n      {\r\n        \"assume_role\": [\r\n          {\r\n            \"role_arn\": \"arn:aws:iam::XXXXXX\"\r\n          }\r\n        ],\r\n        \"region\": \"us-east-2\"\r\n      },\r\n      {\r\n        \"alias\": \"infra\",\r\n        \"region\": \"us-east-2\"\r\n      }\r\n    ],\r\n    \"external\": [\r\n      {\r\n      }\r\n    ]\r\n  },\r\n  \"terraform\": {\r\n    \"cloud\": {\r\n      \"hostname\": \"app.terraform.io\",\r\n      \"organization\": \"test\",\r\n      \"workspaces\": {\r\n        \"name\": \"test-shared-service\"\r\n      }\r\n    },\r\n    \"required_providers\": {\r\n      \"aws\": {\r\n        \"source\": \"aws\",\r\n        \"version\": \"4.52.0\"\r\n      },\r\n      \"external\": {\r\n        \"source\": \"external\",\r\n        \"version\": \"2.2.3\"\r\n      },\r\n      \"helm\": {\r\n        \"source\": \"helm\",\r\n        \"version\": \"2.8.0\"\r\n      },\r\n      \"kubectl\": {\r\n        \"source\": \"gavinbunney/kubectl\",\r\n        \"version\": \"1.14.0\"\r\n      }\r\n    }\r\n  },\r\n  \"variable\": {\r\n    \"node-group-config\": {\r\n      \"default\": {\r\n        \"service_ng_1\": {\r\n          \"desired_size\": 1,\r\n          \"instance_types\": [\r\n            \"t3.xlarge\"\r\n          ],\r\n          \"max_size\": 10,\r\n          \"min_size\": 1,\r\n          \"node_group_name\": \"service-ng-1\"\r\n        }\r\n      },\r\n      \"nullable\": false,\r\n      \"type\": \"map(object({instance_types=list(string), node_group_name=string, min_size=number, desired_size=number, max_size=number}))\"\r\n    }\r\n  }\r\n}\r\n```",
        "createdAt": "2023-02-18T01:33:18Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2662#issuecomment-1435442681",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2023-02-17T00:22:56Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwyMjI4Mzg3NjY3",
        "name": "cdktf",
        "description": "",
        "color": "fccac4"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzMxMzA4",
        "name": "confirmed",
        "description": "independently reproduced by an engineer on the team",
        "color": "4B830E"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMTQ2NjcxNDUz",
        "name": "feature/multi-stack",
        "description": "",
        "color": "6589C9"
      }
    ],
    "milestone": null,
    "number": 2662,
    "title": "Cross Stack Reference Not Working with Modules",
    "updatedAt": "2023-06-01T17:46:54Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjEzMzcwNDY=",
      "is_bot": false,
      "login": "DanielMSchmidt",
      "name": "Daniel Schmidt"
    },
    "body": "### Description\r\n\r\nShifting the problem from e.g. OPA  towards having constructs that inform / warn you about governance issues\r\n\r\n### Links\r\n\r\nNone\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n",
    "comments": [],
    "createdAt": "2023-03-09T16:47:19Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzgw",
        "name": "documentation",
        "description": "Improvements or additions to documentation",
        "color": "0075ca"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "LA_kwDODd1Amc7KX5aA",
        "name": "theme/construct-ecosystem",
        "description": "",
        "color": "5E568C"
      }
    ],
    "milestone": null,
    "number": 2710,
    "title": "Guide: How to use custom constructs to solve governance problems while writing configuration",
    "updatedAt": "2023-03-10T11:01:37Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjcyNTI3MDQ0",
      "is_bot": false,
      "login": "Maed223",
      "name": "Mark DeCrane"
    },
    "body": "### Description\n\nNew cached asset lacks any documentation in the Assets page\n\n### Links\n\nhttps://developer.hashicorp.com/terraform/cdktf/concepts/assets\n\n### Help Wanted\n\n- [ ] I'm interested in contributing a fix myself\n\n### Community Note\n\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n",
    "comments": [],
    "createdAt": "2023-03-09T17:06:11Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzgw",
        "name": "documentation",
        "description": "Improvements or additions to documentation",
        "color": "0075ca"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4Mjg1",
        "name": "size/small",
        "description": "estimated < 1 day",
        "color": "4671C0"
      }
    ],
    "milestone": null,
    "number": 2711,
    "title": "Assets: Add documentation around TerraformCachedAsset",
    "updatedAt": "2023-03-10T11:03:14Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjI3MzQ1NA==",
      "is_bot": false,
      "login": "jantman",
      "name": "Jason Antman"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\nUsing Python, there doesn't seem to be a way to introspect the version of cdktf that's being run. It would be very helpful if the cdktf package could expose a ``VERSION`` or ``__version__`` global, so that cdktf projects can ensure they're being executed with a compatible version.\r\n\r\n### References\r\n\r\n* https://packaging.python.org/en/latest/guides/single-sourcing-package-version/\r\n",
    "comments": [],
    "createdAt": "2023-03-29T13:01:03Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwyMjI4Mzg3NjY3",
        "name": "cdktf",
        "description": "",
        "color": "fccac4"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMTM2Mjc5MjMx",
        "name": "ux/configuration",
        "description": "",
        "color": "58FCA0"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4Mjg1",
        "name": "size/small",
        "description": "estimated < 1 day",
        "color": "4671C0"
      }
    ],
    "milestone": null,
    "number": 2746,
    "title": "cdktf Python - Expose version via Python API",
    "updatedAt": "2023-03-31T07:45:15Z"
  },
  {
    "assignees": [
      {
        "id": "MDQ6VXNlcjEzMzcwNDY=",
        "login": "DanielMSchmidt",
        "name": "Daniel Schmidt",
        "databaseId": 0
      }
    ],
    "author": {
      "id": "MDQ6VXNlcjExMTIwNTY=",
      "is_bot": false,
      "login": "ansgarm",
      "name": "Ansgar Mertens"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Expected Behavior\r\n\r\nconvert should return:\r\n```python\r\naws.s3_bucket.S3Bucket(self, \"bucket\",\r\n    logging=aws.s3_bucket.S3BucketLogging(\r\n        target_bucket=\"target\"\r\n    )\r\n)\r\n```\r\n\r\n### Actual Behavior\r\n\r\nconvert returns no proper access for `S3BucketLogging`\r\n```python\r\naws.s3_bucket.S3Bucket(self, \"bucket\",\r\n    logging=S3BucketLogging(\r\n        target_bucket=\"target\"\r\n    )\r\n)\r\n```\r\n\r\n<!--- What actually happened? --->\r\n\r\n### Steps to Reproduce\r\n\r\nConvert the following snippet to e.g. Python\r\n```tf\r\nresource \"aws_s3_bucket\" \"bucket\" {\r\n  logging {\r\n    target_bucket = \"target\"\r\n  }\r\n}\r\n```\r\n\r\n### Important Factoids\r\n\r\nMore details (e.g. for other languages) can be found in the upstream issue linked below\r\n\r\n<!--- Are there anything atypical about your accounts that we should know? --->\r\n\r\n### References\r\n\r\n* https://github.com/aws/jsii/pull/4056\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor documentation? For example:\r\n--->\r\n\r\n- #0000\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5euOIT",
        "author": {
          "login": "mutahhir"
        },
        "authorAssociation": "MEMBER",
        "body": "This might also be fixable by doing granular imports rather than star imports",
        "createdAt": "2023-06-13T12:07:12Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2800#issuecomment-1589174803",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5jtVVM",
        "author": {
          "login": "mutahhir"
        },
        "authorAssociation": "MEMBER",
        "body": "Granular imports were implemented, but they don't help in this specific case. \n\nWhen we generate TypeScript, we don't import types as they're implicitly handled. When JSII/Rosetta converts the code to the destination language, it doesn't add import statements to the newly added types. \n\nThere are two ways of doing this. One is to fix this on the JSII side (recommended), and the other is to make the convert code know about this issue and have it add type imports (possibly faster to implement / easier).",
        "createdAt": "2023-08-10T08:56:10Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2800#issuecomment-1672828236",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2023-04-13T12:25:59Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwyMTEzNjU3MzA2",
        "name": "language/python",
        "description": "",
        "color": "5c2596"
      },
      {
        "id": "MDU6TGFiZWwyMjQ2NzM3OTc1",
        "name": "upstream/jsii",
        "description": "Pending upstream work on JSII",
        "color": "f9a2cf"
      },
      {
        "id": "MDU6TGFiZWwzMDMwODE1NTQy",
        "name": "language/golang",
        "description": "",
        "color": "22ED90"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMTM1OTYzMTU0",
        "name": "language/c#",
        "description": "C# language issues",
        "color": "c5def5"
      },
      {
        "id": "MDU6TGFiZWwzMTg1Mzg1NTQ2",
        "name": "feature/convert",
        "description": "",
        "color": "d93f0b"
      }
    ],
    "milestone": null,
    "number": 2800,
    "title": "Convert: Nested named structs are not properly addressed (JSII upstream issue)",
    "updatedAt": "2023-10-13T15:28:53Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjU3MzUzMQ==",
      "is_bot": false,
      "login": "mutahhir",
      "name": "Mutahhir Hayat"
    },
    "body": "https://github.com/hashicorp/terraform-cdk/pull/2632#discussion_r1115403914",
    "comments": [],
    "createdAt": "2023-04-19T14:47:31Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMTg1Mzg1NTQ2",
        "name": "feature/convert",
        "description": "",
        "color": "d93f0b"
      }
    ],
    "milestone": null,
    "number": 2820,
    "title": "Convert: Type Coercion adds extra cast due to race condition (variables not being pre-populated)",
    "updatedAt": "2023-10-13T15:28:53Z"
  },
  {
    "assignees": [
      {
        "id": "MDQ6VXNlcjEzMzcwNDY=",
        "login": "DanielMSchmidt",
        "name": "Daniel Schmidt",
        "databaseId": 0
      }
    ],
    "author": {
      "id": "MDQ6VXNlcjU3MzUzMQ==",
      "is_bot": false,
      "login": "mutahhir",
      "name": "Mutahhir Hayat"
    },
    "body": "```tf\nresource \"aws_instance\" \"server\" {\n  ami           = \"ami-a1b2c3d4\"\n  instance_type = \"t2.micro\"\n}\n```\n\n# actual\n```go\nimport constructs \"github.com/aws/constructs-go/constructs\"\n/*Provider bindings are generated by running cdktf get.\nSee https://cdk.tf/provider-generation for more details.*/\nimport \"github.com/aws-samples/dummy/gen/providers/aws/instance\"\ntype myConvertedCode struct {\n\tconstruct\n}\n\nfunc newMyConvertedCode(scope construct, name *string) *myConvertedCode {\n\tthis := &myConvertedCode{}\n\tconstructs.NewConstruct_Override(this, scope, name)\n\tinstance.NewInstance(this, jsii.String(\"server\"), &instanceConfig{\n\t\tami: jsii.String(\"ami-a1b2c3d4\"),\n\t\tinstanceType: jsii.String(\"t2.micro\"),\n\t})\n\treturn this\n}\n```\n\n# expected\n```go\nimport constructs \"github.com/aws/constructs-go/constructs\"\n/*Provider bindings are generated by running cdktf get.\nSee https://cdk.tf/provider-generation for more details.*/\nimport \"github.com/aws-samples/dummy/gen/providers/aws/instance\"\ntype myConvertedCode struct {\n\tconstruct\n}\n\nfunc newMyConvertedCode(scope construct, name *string) *myConvertedCode {\n\tthis := &myConvertedCode{}\n\tconstructs.NewConstruct_Override(this, scope, name)\n\tinstance.NewInstance(this, jsii.String(\"server\"), &InstanceConfig{ // <- needs to be upper-case\n\t\tAmi: jsii.String(\"ami-a1b2c3d4\"), // <- needs to be upper-case\n\t\tInstanceType: jsii.String(\"t2.micro\"), // <- needs to be upper-case\n\t})\n\treturn this\n}\n```",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5jgqkK",
        "author": {
          "login": "DanielMSchmidt"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "Possible fix: https://github.com/aws/jsii-rosetta/pull/222/files",
        "createdAt": "2023-08-08T12:20:17Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2824#issuecomment-1669507338",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2023-04-19T14:51:44Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMTg1Mzg1NTQ2",
        "name": "feature/convert",
        "description": "",
        "color": "d93f0b"
      }
    ],
    "milestone": null,
    "number": 2824,
    "title": "Convert: Golang has wrong casing (lower case letters for attributes)",
    "updatedAt": "2023-10-13T15:28:54Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjE2ODQxOTc4",
      "is_bot": false,
      "login": "suvhotta",
      "name": "Subhankar Hotta"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### cdktf & Language Versions\r\ncdktf: 0.15.5\r\naws_provider: hashicorp/aws@~>3.0\r\n\r\n<!--- Please make note of the version you are using for the `hashicorp/terraform-cdk` and language bindings you are using.\r\nIf you are not running the latest version, please upgrade because your issue may have already been fixed. --->\r\n\r\n### Affected Resource(s)\r\n\r\n<!--- Please list the affected resources. --->\r\nI'm trying to create a common base class for all my stacks using AWS provider as follows:\r\nbase.py:\r\n<code>\r\n|class AWSBaseStack(TerraformStack):\r\n|    def __init__(self, scope: Construct, ns: str, region):\r\n|        super().__init__(scope, ns)\r\n|        AwsProvider(self, \"AWS\", region=region)\r\n</code>\r\n\r\nMy stack looks like this:\r\n<code>\r\n|class EC2Stack(AWSBaseStack):\r\n|    def __init__(self, scope: Construct, ns: str, name: str, ami: str, ssh_sg_id: str, region):\r\n|        super().__init__(scope, ns, region)\r\n|        instance = Instance(self, name,\r\n|                            ami=ami,\r\n|                            instance_type=\"t2.micro\",\r\n|                            key_name=\"test-dev-ew1\",\r\n|                            associate_public_ip_address=True,\r\n|                            subnet_id=\"subnet-123x439a17r3567l0\",\r\n|                            security_groups=[f\"{ssh_sg_id}\"]\r\n|                            )\r\n\r\n|        TerraformOutput(self, \"ec2-arn\", value=instance.arn)\r\n\r\n</code>\r\n### Actual Behavior\r\nIt is throwing the following error:\r\n\r\n                        ‚îÇ Error: Required plugins are not installed\r\n                        ‚îÇ \r\n                        ‚îÇ The installed provider plugins are not consistent with the packages selected\r\n                        ‚îÇ in the dependency lock file:\r\n                        ‚îÇ   - registry.terraform.io/hashicorp/aws: the cached package for registry.terraform.io/hashicorp/aws 3.76.1 (in .terraform/providers) does not match any of the checksums recorded in the dependency lock file\r\n                        ‚îÇ \r\n                        ‚îÇ Terraform uses external plugins to integrate with a variety of different\r\n                        ‚îÇ infrastructure services. To download the plugins required for this\r\n                        ‚îÇ configuration, run:\r\n                        ‚îÇ   terraform init\r\n                        ‚ïµ\r\n\r\nThis error disappears when I use the provider normally inside the __init__ method of the stack.\r\n\r\nAm I doing anything wrong here? Is this the right way to re-use the aws providers or is there any better way to do the same?\r\n<!--- What actually happened? --->\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc6gPWAZ",
        "author": {
          "login": "djakielski"
        },
        "authorAssociation": "NONE",
        "body": "I got the same issue with sentry provider\n\n```\ninfrastructure/inside postinstall: [2025-02-27T16:42:01.423] [ERROR] default - ‚ï∑\ninfrastructure/inside postinstall: ‚îÇ Error: Required plugins are not installed\ninfrastructure/inside postinstall: ‚îÇ \ninfrastructure/inside postinstall: ‚îÇ The installed provider plugins are not consistent with the packages\ninfrastructure/inside postinstall: ‚îÇ selected in the dependency lock file:\ninfrastructure/inside postinstall: ‚îÇ   - registry.terraform.io/jianyuan/sentry: the cached package for registry.terraform.io/jianyuan/sentry 0.14.3 (in .terraform/providers) does not match any of the checksums recorded in the dependency lock file\ninfrastructure/inside postinstall: ‚îÇ \ninfrastructure/inside postinstall: ‚îÇ Terraform uses external plugins to integrate with a variety of different\ninfrastructure/inside postinstall: ‚îÇ infrastructure services. To download the plugins required for this\ninfrastructure/inside postinstall: ‚îÇ configuration, run:\ninfrastructure/inside postinstall: ‚îÇ   terraform init\n```",
        "createdAt": "2025-02-27T15:52:28Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2855#issuecomment-2688376857",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2023-05-02T16:39:27Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwyMjYwNjQ0NDQx",
        "name": "cdktf-cli",
        "description": "",
        "color": "82e5de"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzMxMzA4",
        "name": "confirmed",
        "description": "independently reproduced by an engineer on the team",
        "color": "4B830E"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      }
    ],
    "milestone": null,
    "number": 2855,
    "title": "Error when trying to create a common base class for AWS Provider",
    "updatedAt": "2025-02-27T15:52:29Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjIyODc1MTY2",
      "is_bot": false,
      "login": "gmeligio",
      "name": "Eligio Mari√±o"
    },
    "body": "### Description\n\nI had an issue in the following snippet with mathematical expressions using values from a data source. The snippet already contains the solution using `cdktf.Op`.\r\n\r\nI tried different ways to get `defaultVcpus` and using `cdktf.Token` but those didn't work and I was getting in `totalCpu`  a big negative value, which is the internal Token representation . Then searching and reading  a few issues to see if there were a similar one to mine, I found in #2557 that there is a `cdktf.Op` and that solved it.\r\n\r\nIt would be nice to have a documentation page about what Operators are, when to use them, and how they interact with Tokens.\r\n\r\n```typescript\r\nconst dataInstance = new aws.dataAwsEc2InstanceType.DataAwsEc2InstanceType(this, 'dataInstance', {\r\n    instanceType: 't3a.medium',\r\n  });\r\n\r\nconst totalCpu = cdktf.Op.mul(0.8, dataInstance.defaultVcpus);\r\nconst containerCpu = cdktf.Op.mul(0.45, totalCpu);\r\n\r\nconst threadCount = cdktf.Fn.ceil(cdktf.Token.asNumber(containerCpu));\r\n```\n\n### Links\n\nhttps://developer.hashicorp.com/terraform/cdktf\n\n### Help Wanted\n\n- [ ] I'm interested in contributing a fix myself\n\n### Community Note\n\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5dyIqy",
        "author": {
          "login": "xiehan"
        },
        "authorAssociation": "MEMBER",
        "body": "Note that we do already have https://developer.hashicorp.com/terraform/cdktf/concepts/functions#operators but I agree it's worth expanding with at least a few more examples.",
        "createdAt": "2023-06-02T09:20:30Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2867#issuecomment-1573423794",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5eTKsK",
        "author": {
          "login": "gmeligio"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "Thank you @xiehan. I was looking for an independent page like in the [HCL docs](https://developer.hashicorp.com/terraform/language/expressions/operators) and didn't find it on the Functions page.\r\n\r\nIt's OK where it is today in the link you shared.\r\n\r\nIf possible, I would like the new examples to showcase when Operators are the easiest or the only way to accomplish something, like their interaction with Token, instead of only showing the API syntax. Maybe something along the lines of my first comment could be used.\r\n\r\nAs it is right now, I read it like it covers an HCL feature but doesn't explain the difference with Typescript operators. An example of what I'm asking is this section that I read a lot when starting with Iterators https://developer.hashicorp.com/terraform/cdktf/concepts/iterators#when-to-use-iterators\r\n\r\n",
        "createdAt": "2023-06-08T07:56:00Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2867#issuecomment-1582082826",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2023-05-09T10:44:22Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzgw",
        "name": "documentation",
        "description": "Improvements or additions to documentation",
        "color": "0075ca"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "LA_kwDODd1Amc7nQOIC",
        "name": "feature/terraform-functions",
        "description": "",
        "color": "A1C1CD"
      }
    ],
    "milestone": null,
    "number": 2867,
    "title": "(Concepts): new page to document Operators usage",
    "updatedAt": "2023-06-08T07:56:00Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjc0NjA5MzQ=",
      "is_bot": false,
      "login": "mpicard",
      "name": "Martin Picard"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### cdktf & Language Versions\r\n\r\nPython 3.11\r\ncdktf                        0.16.1  Cloud Development Kit for Terraform\r\ncdktf-cdktf-provider-azuread 7.0.2   Prebuilt azuread Provider for Terrafor...\r\ncdktf-cdktf-provider-azurerm 7.0.3 \r\n\r\n### Affected Resource(s)\r\n\r\n<!--- Please list the affected resources. --->\r\n\r\n### Debug Output\r\n\r\n<!---\r\nPlease provide a link to a GitHub Gist containing the complete debug output. Please do NOT paste the debug output in the issue; just paste a link to the Gist.\r\n--->\r\n\r\n### Expected Behavior\r\n\r\nWhen I compare to the Typescript version:\r\n\r\n```typescript\r\n  describe('MyConstruct', () => {\r\n    let myconstruct: MyConstruct;\r\n    const stack = Testing.synthScope(scope => {\r\n      myconstruct = new MyConstruct(scope, \"myconstruct\");\r\n    })\r\n})\r\n```\r\n\r\nIt works, so I expect in Python that it would also work\r\n\r\n\r\n### Actual Behavior\r\n\r\n\r\n```\r\n    stack = Testing.synth_scope(lambda scope: MyConstruct(scope, \"myconstruct\"))\r\n.venv/lib/python3.11/site-packages/cdktf/__init__.py:13787: in synth_scope\r\n    return typing.cast(builtins.str, jsii.sinvoke(cls, \"synthScope\", [fn]))\r\n.venv/lib/python3.11/site-packages/jsii/_kernel/__init__.py:149: in wrapped\r\n    return _recursize_dereference(kernel, fn(kernel, *args, **kwargs))\r\n.venv/lib/python3.11/site-packages/jsii/_kernel/__init__.py:422: in sinvoke\r\n    args=_make_reference_for_native(self, args),\r\n.venv/lib/python3.11/site-packages/jsii/_kernel/__init__.py:165: in _make_reference_for_native\r\n    return [_make_reference_for_native(kernel, i) for i in d]\r\n.venv/lib/python3.11/site-packages/jsii/_kernel/__init__.py:165: in <listcomp>\r\n    return [_make_reference_for_native(kernel, i) for i in d]\r\n.venv/lib/python3.11/site-packages/jsii/_kernel/__init__.py:199: in _make_reference_for_native\r\n    raise JSIIError(\r\nE   jsii.errors.JSIIError: Cannot pass function as argument here (did you mean to call this function?): <function TestingMyConstruct.<lambda> at 0x1027a04a0>\r\n```\r\n\r\n### Steps to Reproduce\r\n\r\n```python\r\nclass MyConstruct(Construct):\r\n    def __init__(self, scope: Construct, id: str):\r\n        super().__init__(scope, id)\r\n\r\nstack = Testing.synth_scope(lambda scope: MyConstruct(scope, \"myconstruct\"))\r\n```\r\n\r\n### Important Factoids\r\n\r\n<!--- Are there anything atypical about your accounts that we should know? --->\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor documentation? For example:\r\n--->\r\n\r\n- #0000\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5ecMLX",
        "author": {
          "login": "DanielMSchmidt"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "`Testing.synthScope` does not work in any other language than Typescript. Please use Testing.synth instead, e.g.\r\n\r\n```python\r\nstack = TerraformStack(Testing.app(), \"stack\")\r\napp_abstraction = MyApplicationsAbstraction(stack, \"app-abstraction\")\r\nsynthesized = Testing.synth(stack)\r\nassert Testing.to_have_resource(synthesized, Container.TF_RESOURCE_TYPE)\r\n```\r\n\r\n\r\nLeaving this open to clarify our documentation / code hints",
        "createdAt": "2023-06-09T11:47:26Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2871#issuecomment-1584448215",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2023-05-11T11:56:28Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzgw",
        "name": "documentation",
        "description": "Improvements or additions to documentation",
        "color": "0075ca"
      },
      {
        "id": "MDU6TGFiZWwyNTcwMTY0OTY5",
        "name": "testing",
        "description": "",
        "color": "456cc6"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      }
    ],
    "milestone": null,
    "number": 2871,
    "title": "[Python] Testing.synth_scope is broken",
    "updatedAt": "2023-06-09T11:48:28Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjE5MjgxMjM=",
      "is_bot": false,
      "login": "g00ntar",
      "name": "Gontar"
    },
    "body": "### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n### cdktf & Language Versions\r\ncdktf version: 0.16.1\r\nterraform version: 1.4.2\r\n\r\n<!--- Please make note of the version you are using for the `hashicorp/terraform-cdk` and language bindings you are using.\r\nIf you are not running the latest version, please upgrade because your issue may have already been fixed. --->\r\n\r\n### Affected Resource(s)\r\n\r\n<!--- Please list the affected resources. --->\r\n\r\n### Debug Output\r\nCode v1:\r\n```ts\r\nclass CoreStack extends TerraformStack {\r\n  constructor(scope: Construct, id: string) {\r\n    super(scope, id);\r\n    new TerraformOutput(this, 'test', {\r\n      value: new TerraformVariable(this, 'AWS_ACCESS_KEY', {}).value\r\n    })\r\n  }\r\n}\r\n```\r\n\r\nCode v2:\r\n```ts\r\nclass CoreStack extends TerraformStack {\r\n  constructor(scope: Construct, id: string) {\r\n    super(scope, id);\r\n    new TerraformOutput(this, 'test', {\r\n      value: new TerraformVariable(this, 'AWS-ACCESS-KEY', {}).value // please note dashes instead of underscores\r\n    })\r\n  }\r\n}\r\n```\r\n\r\n### Expected Behavior\r\n\r\nEqual treatment of variables independent from variable name or entry in docs about this behaviour.\r\n\r\n### Actual Behavior\r\nCode v1 `cdktf diff` output\r\n```bash\r\n      core  Missing variable: 'AWS_ACCESS_KEY'. You can provide it using the 'TF_VAR_AWS_ACCESS_KEY' environment variable.\r\n      core  Operation failed: failed running terraform plan (exit 1)\r\n```\r\n\r\nCode v2 `cdktf diff` output\r\n```bash\r\n      ‚ï∑\r\n      ‚îÇ Error: Output refers to sensitive values\r\n      ‚îÇ \r\n      ‚îÇ   on cdk.tf.json line 16, in output:\r\n      ‚îÇ   16:     \"test\": {\r\n      ‚îÇ \r\n      ‚îÇ To reduce the risk of accidentally exporting sensitive data that was\r\n      ‚îÇ intended to be only internal, Terraform requires that any root module\r\n      ‚îÇ output containing sensitive data be explicitly marked as sensitive, to\r\n      ‚îÇ confirm your intent.\r\n      ‚îÇ \r\n      ‚îÇ If you do intend to export this data, annotate the output value as\r\n      ‚îÇ sensitive by adding the following argument:\r\n      ‚îÇ     sensitive = true\r\n```\r\n\r\n### Steps to Reproduce\r\n\r\nCreate variables with names `AWS_ACCESS_KEY` `AWS-ACCESS-KEY` on terraform cloud and run the code.\r\n\r\n",
    "comments": [],
    "createdAt": "2023-05-17T12:48:59Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwyMjIzNTI1MzY0",
        "name": "terraform cloud",
        "description": "",
        "color": "4ed354"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "LA_kwDODd1Amc7WpEvS",
        "name": "ux/integration",
        "description": "",
        "color": "D670CB"
      }
    ],
    "milestone": null,
    "number": 2877,
    "title": "Inconsistent behaviour with variables from Terraform Cloud",
    "updatedAt": "2023-06-23T10:44:48Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjY4MTE5MzM=",
      "is_bot": false,
      "login": "yuriy-yarosh",
      "name": "Yuriy Yarosh"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\nIt would save too much time and effort if CDKTF adopters could skip unused resources imports for the existing providers, with a respective resource whitelist in the `cdktf.json` config file.\r\n\r\n```json\r\n{\r\n  \"language\": \"golang\",\r\n  \"app\": \"echo CDKTF breaks too often and eats too much RAM, JSII should've been written in Rust\",\r\n  \"terraformProviders\": [{\r\n    \"name\": \"aws\" ,\r\n    \"version\": \"~> 5.0.1\", # both 5.0.1 and 4.67.0 are broken now because of the following resources\r\n    \"include\": [],\r\n    \"exclude\": [\"aws_quicksight_template\", \"aws_appsync_domain_name\"]\r\n  }]\r\n}\r\n```\r\n\r\n```ts\r\nexport interface TerraformDependencyConstraint {\r\n  readonly name: string; // name of the module / provider\r\n  readonly source?: string; // path / url / registry identifier for the module / provider\r\n  readonly version?: string; // version constraint\r\n  readonly include?: string[]; // get and import only the specified resources, import everything if empty or unspecified\r\n  readonly exclude?: string[]; // ignore any buggy or too complex resources, that are breaking builds, or take too much time\r\ntype RequirementDefinition = string | TerraformDependencyConstraint;\r\n```\r\n\r\n### References\r\n\r\nIt's pointless and cumbersome to regenerate and re-import everything from scratch, over and over, without any incremental builds (as per [#2116](https://github.com/hashicorp/terraform-cdk/issues/2116) ).\r\n\r\nExisting generated modules are bloated with JSII bundles, about 1.5Gb (as per [#2829](https://github.com/hashicorp/terraform-cdk/issues/2829) ).\r\n\r\nAnd existing providers are conflicting from time to time with JSII naming conventions (as per AWS Provider [#31615](https://github.com/hashicorp/terraform-provider-aws/issues/31615) and [#2879](https://github.com/hashicorp/terraform-cdk/issues/2879)).\r\n\r\nCDK8S has it's escape hatches, and patching yaml's during import is a common practice there, due to various compatibility issues (as per CDK8S [#1323](https://github.com/cdk8s-team/cdk8s/issues/1323) and [#970](https://github.com/cdk8s-team/cdk8s-cli/issues/970) sometimes the whole codgen is very inconsistent [#1326](https://github.com/cdk8s-team/cdk8s/issues/1326)).\r\n\r\nIt's possible to workaround cdk8s import issues with some manual yaml patching.\r\nBut the respective CDKTF escape hatches are rather undocumented and would be fairly inconvenient.\r\nIt would be really weird to make a `git subtree` out of tf provider, with the respective patched release, just to workaround some broken codegen.",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5dWjN_",
        "author": {
          "login": "yuriy-yarosh"
        },
        "authorAssociation": "NONE",
        "body": "![right now](https://github.com/hashicorp/terraform-cdk/assets/6811933/96d8c3d5-9dfe-49c0-ba44-96619f43f084)\r\n\r\nIt's literally taking around 90 min right now, OOM's on 4 threads Archlinux box with 32Gb of RAM.",
        "createdAt": "2023-05-28T16:29:18Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2892#issuecomment-1566192511",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2023-05-28T02:40:40Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMjA1MTIxODAz",
        "name": "enhancement/new-workflow",
        "description": "Proposed new workflow",
        "color": "4A1023"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjUx",
        "name": "size/large",
        "description": "estimated < 1 month",
        "color": "9559B0"
      },
      {
        "id": "LA_kwDODd1Amc7WpEvS",
        "name": "ux/integration",
        "description": "",
        "color": "D670CB"
      },
      {
        "id": "LA_kwDODd1Amc8AAAABEqTcrA",
        "name": "performance",
        "description": "Gotta go fast",
        "color": "890D75"
      }
    ],
    "milestone": null,
    "number": 2892,
    "title": "Allow skipping bugged resources, or allowlist used resources for the imported provider.",
    "updatedAt": "2023-06-23T09:15:41Z"
  },
  {
    "assignees": [
      {
        "id": "MDQ6VXNlcjExMTIwNTY=",
        "login": "ansgarm",
        "name": "Ansgar Mertens",
        "databaseId": 0
      }
    ],
    "author": {
      "is_bot": true,
      "login": "app/sentry"
    },
    "body": "Sentry Issue: [CDKTF-REGISTRY-DOCS-7P](https://hashicorp.sentry.io/issues/4220236457/?referrer=github_integration)\n\n```\nError: getExpressionAst errors on input string '\"^myami-\\d{3}\"': main.tf:0,8-10: Invalid escape sequence; The symbol \"d\" is not a valid escape sequence selector. \n  File \"/__t/node/18.16.0/x64/lib/node_modules/cdktf-registry-docs/node_modules/@cdktf/hcl2json/lib/bridge.js\", line 81, in cb\n    err ? reject(new Error(err)) : resolve(...msg);\n  File \"/__t/node/18.16.0/x64/lib/node_modules/cdktf-registry-docs/node_modules/@cdktf/hcl2json/wasm/wasm_exec.js\", line 366, in syscall/js.valueInvoke\n    const result = Reflect.apply(v, undefined, args);\n  File \"wasm://wasm/018549f2:wasm-function[1489]\", in <anonymous>\n  File \"wasm://wasm/018549f2:wasm-function[1473]\", in <anonymous>\n  File \"wasm://wasm/018549f2:wasm-function[3125]\", in <anonymous>\n...\n(5 additional frame(s) were not displayed)\n```",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5euIIt",
        "author": {
          "login": "mutahhir"
        },
        "authorAssociation": "MEMBER",
        "body": "This might be invalid HCL. We need to confirm, and then either cut a ticket to the original provider docs if so.",
        "createdAt": "2023-06-13T11:52:08Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2910#issuecomment-1589150253",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2023-06-01T13:54:41Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMTg1Mzg1NTQ2",
        "name": "feature/convert",
        "description": "",
        "color": "d93f0b"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjEz",
        "name": "size/medium",
        "description": "estimated < 1 week",
        "color": "291E63"
      }
    ],
    "milestone": null,
    "number": 2910,
    "title": "hcl2cdk: getExpressionAst fails with regex strings due to escaping",
    "updatedAt": "2023-10-13T15:28:54Z"
  },
  {
    "assignees": [
      {
        "id": "MDQ6VXNlcjExMTIwNTY=",
        "login": "ansgarm",
        "name": "Ansgar Mertens",
        "databaseId": 0
      }
    ],
    "author": {
      "is_bot": true,
      "login": "app/sentry"
    },
    "body": "Sentry Issue: [CDKTF-REGISTRY-DOCS-1A0](https://hashicorp.sentry.io/issues/4220363717/?referrer=github_integration)\n\n```\nSyntaxError: Unexpected token, expected \",\" (45:32)\n  43 |       \"destination\": \"s3\",\n  44 |       \"lifecycle\": {\n> 45 |         \"ignoreChanges\": [tags_\"logDeliveryEnabled\"]\n     |                                ^\n  46 |       },\n  47 |       \"name\": \"terraform-k...\n  File \"/__t/node/18.16.0/x64/lib/node_modules/cdktf-registry-docs/node_modules/prettier/parser-babel.js\", line 22, in p\n    '{snip} eate-error.js\"(l,h){\"use strict\";U();function p(d,x){let P=new SyntaxError(d+\" (\"+x.start.line+\":\"+x.start.column+\")\");return P.loc=x,P}h.ex {snip}\n  File \"/__t/node/18.16.0/x64/lib/node_modules/cdktf-registry-docs/node_modules/prettier/parser-babel.js\", line 22, in d\n    '{snip} U();var p=lr();function d(x){let{message:P,loc:m}=x;return p(P.replace(/ \\(.*\\)/,\"\"),{start:{line:m?m.line:0,column:m?m.column+1:0}})}h.expo {snip}\n  File \"/__t/node/18.16.0/x64/lib/node_modules/cdktf-registry-docs/node_modules/prettier/parser-babel.js\", line 29, in Object.parse\n    '{snip} sult:k,error:F}=Yf(...v.map(w=>()=>od(l,x,w)));if(!k)throw ed(F);return m.originalText=x,td(k,m)}}var ld=$e(\"parse\",he([\"jsx\",\"flow\"])),Lo=$ {snip}\n  File \"/__t/node/18.16.0/x64/lib/node_modules/cdktf-registry-docs/node_modules/prettier/index.js\", line 7515, in Object.parse\n    ast: parser.parse(text, parsersForCustomParserApi, opts)\n  File \"/__t/node/18.16.0/x64/lib/node_modules/cdktf-registry-docs/node_modules/prettier/index.js\", line 8829, in coreFormat\n    } = parser.parse(originalText, opts);\n...\n(5 additional frame(s) were not displayed)\n```",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5dtJQv",
        "author": {
          "login": "sentry"
        },
        "authorAssociation": "NONE",
        "body": "Sentry issue: [CDKTF-REGISTRY-DOCS-108](https://hashicorp.sentry.io/issues/4220329767/?referrer=github_integration)",
        "createdAt": "2023-06-01T14:01:47Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2912#issuecomment-1572115503",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5dtJv-",
        "author": {
          "login": "sentry"
        },
        "authorAssociation": "NONE",
        "body": "Sentry issue: [CDKTF-REGISTRY-DOCS-10B](https://hashicorp.sentry.io/issues/4220330151/?referrer=github_integration)",
        "createdAt": "2023-06-01T14:02:54Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2912#issuecomment-1572117502",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5euI8M",
        "author": {
          "login": "mutahhir"
        },
        "authorAssociation": "MEMBER",
        "body": "Source: \n\n```hcl\n\n  lifecycle {\n    ignore_changes = [\n      tags[\"LogDeliveryEnabled\"],\n    ]\n  }\n```\n\nSeems like we can't deal with this kind of syntax right now.",
        "createdAt": "2023-06-13T11:54:53Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2912#issuecomment-1589153548",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2023-06-01T14:00:12Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMTg1Mzg1NTQ2",
        "name": "feature/convert",
        "description": "",
        "color": "d93f0b"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjEz",
        "name": "size/medium",
        "description": "estimated < 1 week",
        "color": "291E63"
      }
    ],
    "milestone": null,
    "number": 2912,
    "title": "hcl2cdk: produces incorrect typescript with mix of quoted and unquoted values",
    "updatedAt": "2023-10-13T15:28:55Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjExMzYzNDY2",
      "is_bot": false,
      "login": "sarthak",
      "name": "Sarthak Agrawal"
    },
    "body": "### Expected Behavior\n\nFor 2 stacks, A & B. If stack B depends on A, and _only_ stack B has a `TerraformVariable`  `xyz` defined, then running `cdktf deploy A B --var xyz=abc` should work as expected so that stack A is deployed first, and then stack B with the var xyz assuming value abc.\n\n### Actual Behavior\n\nRunning `cdktf deploy A B --var xyz=abc` fails deploying stack A:\r\n```\r\nError: Value for undeclared variable\r\n\r\n        ‚îÇ A variable named \"xyz\" was assigned on the command line, but the\r\n        ‚îÇ root module does not declare a variable of that name. To use this value, add\r\n        ‚îÇ a \"variable\" block to the configuration.\r\n```\r\n\r\nJust running `cdktf deploy B --var xyz=abc` instead fails wit (expectedly):\r\n```\r\nError: Usage Error: The following dependencies are not included in the stacks to run [...]\r\n```\n\n### Steps to Reproduce\n\nDefine a cdktf `App` with 2 stacks A & B such that stack B depends on stack A via inter-stack dependencies supported in CDKTF. Add a `TerraformVariable` construct to stack B, then attempt deployment of both the stacks together.\n\n### Versions\n\nlanguage: null\r\ncdktf-cli: 0.16.1\r\nnode: v18.13.0\r\nterraform: 1.3.6\r\narch: x64\r\nos: linux 5.15.0-1034-aws\n\n### Providers\n\n_No response_\n\n### Gist\n\n_No response_\n\n### Possible Solutions\n\n_No response_\n\n### Workarounds\n\nOne workaround at the moment is to not use `--var` cli flag, and instead pass variables via the `TF_VAR_*` environment variables so that stacks not having those variables do not complain.\n\n### Anything Else?\n\n_No response_\n\n### References\n\n_No response_\n\n### Help Wanted\n\n- [ ] I'm interested in contributing a fix myself\n\n### Community Note\n\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n",
    "comments": [],
    "createdAt": "2023-06-05T07:08:30Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMTM2MjgxMDY3",
        "name": "ux/cli",
        "description": "",
        "color": "40FE53"
      },
      {
        "id": "MDU6TGFiZWwzMTQ2NjcxNDUz",
        "name": "feature/multi-stack",
        "description": "",
        "color": "6589C9"
      }
    ],
    "milestone": null,
    "number": 2919,
    "title": "cdktf-cli: terraform variables passed through --var flag and inter-stack dependencies don't interface nicely",
    "updatedAt": "2023-06-09T11:51:12Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjQwOTczOTIx",
      "is_bot": false,
      "login": "ahitchin",
      "name": "Adam"
    },
    "body": "### Expected Behavior\n\n# Overview\r\nWhen deploying a multi-stack application whose stacks are created within a surrounding construct, you should be able to share cross-stack references. \r\n\r\n# Pseudo-Code\r\n```typescript\r\n/** ./main.ts */\r\n\r\nimport { App } from 'cdktf';\r\n\r\nimport { MultiStackApp } from './multi-stack-app';\r\n\r\n/** Entry point for the terraform application. */\r\nfunction main(): void {\r\n    // Create a cdk app to encapsulate the project\r\n    const app: App = new App();\r\n\r\n    // Create a multi-stack service\r\n    new MultiStackApp(app, 'MultiStackApp');\r\n\r\n    return app.synth();\r\n}\r\n```\r\n\r\n---\r\n\r\n```typescript\r\n/** ./multi-stack-app.ts */\r\n\r\nimport { App, TerraformStack } from 'cdktf';\r\nimport { Construct } from 'constructs';\r\n\r\n/** Creates multiple stacks a part of a single service. */\r\nexport class MultiStackApp extends Construct {\r\n    /** Stacks created by this construct. */\r\n    public readonly stackOne: TerraformStack;\r\n    public readonly stackTwo: TerraformStack;\r\n\r\n    /**\r\n     * Constructor.\r\n     *\r\n     * @param scope - Parent app construct.\r\n     * @param id - Construct identifier.\r\n     */\r\n    public constructor(app: App, id: string) {\r\n        // Inherit from the base construct\r\n        super(app, id);\r\n\r\n        // Create the dependency stack\r\n        this.stackOne = TerraformStack(this, 'StackOne');\r\n\r\n        // Create the dependent stack\r\n        this.stackTwo = TerraformStack(this, 'StackTwo', {\r\n            crossStackValue: this.stackOne.resource.id,\r\n        });\r\n\r\n        return;\r\n    }\r\n}\r\n```\r\n\r\n# Manifest File (`cdktf.out/manifest.json`)\r\n```json\r\n{\r\n   \"version\":\"0.17.0\",\r\n   \"stacks\":{\r\n      \"StackOne\":{\r\n         \"name\":\"StackOne\",\r\n         \"constructPath\":\"MultiStackApp/StackOne\",\r\n         \"workingDirectory\":\"stacks/StackOne\",\r\n         \"synthesizedStackPath\":\"stacks/StackOne/cdk.tf.json\",\r\n         \"annotations\":[\r\n            \r\n         ],\r\n         \"dependencies\":[\r\n            \r\n         ]\r\n      },\r\n      \"StackTwo\":{\r\n         \"name\":\"StackTwo\",\r\n         \"constructPath\":\"MultiStackApp/StackTwo\",\r\n         \"workingDirectory\":\"stacks/StackTwo\",\r\n         \"synthesizedStackPath\":\"stacks/StackTwo/cdk.tf.json\",\r\n         \"annotations\":[\r\n            \r\n         ],\r\n         \"dependencies\":[\r\n            \"StackOne\"\r\n         ]\r\n      }\r\n   }\r\n}\r\n```\n\n### Actual Behavior\n\n# Overview\r\nThe CDKTF deployment fails, since it can not find its cross-stack dependency in the `cdktf.out/manifest.json` file. This is because a manifest's name points to `stack.node.id`, whereas the dependencies point to `dependencyStack.node.path`. This results in the dependency stack's manifest name being `StackId`, and the dependent stack's dependency reference being `ParentConstructId/StackId`.\r\n\r\n# Error Example\r\n```\r\n0 Stacks deploying     0 Stacks done     0 Stacks waiting\r\nError: Usage Error: The following dependencies are not included in the stacks to run: MultiStackApp/StackOne. Either add them or add the --ignore-missing-stack-dependencies flag.\r\n```\r\n# Manifest File (`cdktf.out/manifest.json`)\r\n```json\r\n{\r\n   \"version\":\"0.17.0\",\r\n   \"stacks\":{\r\n      \"StackOne\":{\r\n         \"name\":\"StackOne\",\r\n         \"constructPath\":\"MultiStackApp/StackOne\",\r\n         \"workingDirectory\":\"stacks/StackOne\",\r\n         \"synthesizedStackPath\":\"stacks/StackOne/cdk.tf.json\",\r\n         \"annotations\":[\r\n            \r\n         ],\r\n         \"dependencies\":[\r\n            \r\n         ]\r\n      },\r\n      \"StackTwo\":{\r\n         \"name\":\"StackTwo\",\r\n         \"constructPath\":\"MultiStackApp/StackTwo\",\r\n         \"workingDirectory\":\"stacks/StackTwo\",\r\n         \"synthesizedStackPath\":\"stacks/StackTwo/cdk.tf.json\",\r\n         \"annotations\":[\r\n            \r\n         ],\r\n         \"dependencies\":[\r\n            \"MultiStackApp/StackOne\"\r\n         ]\r\n      }\r\n   }\r\n}\r\n```\n\n### Steps to Reproduce\n\n1. Create a CDKTF package.\r\n2. Create a construct that contains your deployment stacks.\r\n3. Create two or more stacks.\r\n4. Introduce cross-stack dependencies.\r\n5. Deploy your scaffolding stack.\r\n6. Deploy the stacks that depend on the initial scaffolding stack.\r\n7. Encounter error.\n\n### Versions\n\nlanguage: typescript\r\ncdktf-cli: 0.15.5\r\nnode: v18.16.0\r\ncdktf: 0.17.0\r\nconstructs: 10.2.61\r\njsii: null\r\nterraform: 1.4.5\r\narch: x64\r\nos: linux 5.10.16.3-microsoft-standard-WSL2\n\n### Providers\n\n```\r\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\r\n‚îÇ Provider Name ‚îÇ Provider Version ‚îÇ CDKTF   ‚îÇ Constraint ‚îÇ Package Name            ‚îÇ Package Version ‚îÇ\r\n‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\r\n‚îÇ archive       ‚îÇ 2.4.0            ‚îÇ ^0.17.0 ‚îÇ            ‚îÇ @cdktf/provider-archive ‚îÇ 7.0.0           ‚îÇ\r\n‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\r\n‚îÇ aws           ‚îÇ 4.67.0           ‚îÇ ^0.17.0 ‚îÇ            ‚îÇ @cdktf/provider-aws     ‚îÇ 15.0.0          ‚îÇ\r\n‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\r\n‚îÇ local         ‚îÇ 2.4.0            ‚îÇ ^0.17.0 ‚îÇ            ‚îÇ @cdktf/provider-local   ‚îÇ 7.0.0           ‚îÇ\r\n‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\r\n‚îÇ null          ‚îÇ 3.2.1            ‚îÇ ^0.17.0 ‚îÇ            ‚îÇ @cdktf/provider-null    ‚îÇ 7.0.0           ‚îÇ\r\n‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\r\n‚îÇ random        ‚îÇ 3.5.1            ‚îÇ ^0.17.0 ‚îÇ            ‚îÇ @cdktf/provider-random  ‚îÇ 8.0.0           ‚îÇ\r\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\r\n```\n\n### Gist\n\n_No response_\n\n### Possible Solutions\n\n# Overview\r\nUpdate the `Manifest` class so `StackManifest` names are equal to `stack.node.path`, or so that dependencies are equal to `stack.node.id`\r\n\r\n**Relevant Code:**\r\nhttps://github.com/hashicorp/terraform-cdk/blob/main/packages/cdktf/lib/manifest.ts#L41-L64\r\n\r\n# Possible Code Solution\r\n```typescript\r\nexport class Manifest implements IManifest {\r\n    public forStack(stack: TerraformStack): StackManifest {\r\n        const node = stack.node;\r\n        const name = node.path;  // <-------\r\n\r\n        if (this.stacks[name]) {\r\n            return this.stacks[name];\r\n        }\r\n\r\n        const manifest: StackManifest = {\r\n            name,\r\n            constructPath: node.path,\r\n            workingDirectory: path.join(Manifest.stacksFolder, node.id),\r\n            synthesizedStackPath: path.join(\r\n                Manifest.stacksFolder,\r\n                node.id,\r\n                Manifest.stackFileName\r\n            ),\r\n            annotations: [], // will be replaced later when processed in App\r\n            dependencies: stack.dependencies.map((item) => item.node.path),\r\n        };\r\n        this.stacks[name] = manifest;\r\n\r\n    return manifest;\r\n}\r\n```\n\n### Workarounds\n\n# Overview\r\nCurrently, I am using a custom synthesis function to create the manifest, then using a type modifier to create a mutable copy. After this, I override the `dependencies` attribute.\r\n\r\n# Example Code\r\n```typescript\r\nimport { ISynthesisSession, StackManifest, TerraformStack } from 'cdktf';\r\nimport { addCustomSynthesis } from 'cdktf/lib/synthesize/synthesizer';\r\nimport { Construct } from 'constructs';\r\n\r\n/** Custom synthesis manifest override example stack. */\r\nexport class ExampleStack extends TerraformStack {\r\n    /**\r\n     * Constructor.\r\n     *\r\n     * @param scope - Parent construct.\r\n     * @param id - Construct identifier.\r\n     * @param props - Properties needed to create this construct.\r\n     */\r\n    public constructor(scope: Construct, id: string) {\r\n        // Inherit from the base terraform stack\r\n        super(scope, id);\r\n\r\n        // Inject a custom synthesis function\r\n        addCustomSynthesis(this, {\r\n            onSynthesize: this.customSynthesis.bind(this),\r\n        });\r\n\r\n        return;\r\n    }\r\n\r\n    /**\r\n     * Overrides the stack manifest's dependencies attribute.\r\n     *\r\n     * @param session - Single session of synthesis.\r\n     */\r\n    private customSynthesis(session: ISynthesisSession): void {\r\n        // Create a type modifier and make the stack manifest mutable\r\n        type MutableStackManifest = {\r\n            -readonly [K in keyof StackManifest]: StackManifest[K]\r\n        }\r\n\r\n        // Get the manifest and make a mutable shallow copy\r\n        const manifestImmutable: StackManifest = session.manifest.forStack(this);\r\n        const manifestMutable: MutableStackManifest = manifestImmutable;\r\n\r\n        // Override the manifest's dependency references\r\n        manifestMutable.dependencies = this.dependencies.map((item) => item.node.id)\r\n\r\n        return;\r\n    }\r\n}\r\n```\n\n### Anything Else?\n\n_No response_\n\n### References\n\n_No response_\n\n### Help Wanted\n\n- [X] I'm interested in contributing a fix myself\n\n### Community Note\n\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5kVrN6",
        "author": {
          "login": "Mejato"
        },
        "authorAssociation": "NONE",
        "body": "Yes, would be great to have the issue fixed.\r\n\r\n@ahitchin, great write up of the issue!",
        "createdAt": "2023-08-18T06:12:04Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 3
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2976#issuecomment-1683403642",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5teF0W",
        "author": {
          "login": "asmith432"
        },
        "authorAssociation": "NONE",
        "body": "Will this be fixed in the next release? I am running into this issue as well.",
        "createdAt": "2023-12-01T18:43:24Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 4
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2976#issuecomment-1836604694",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc6eF5Ep",
        "author": {
          "login": "guywilsonjr"
        },
        "authorAssociation": "NONE",
        "body": "At a minimum it should get documented that you can't nest a stack in another construct, until the beautiful day when that feature is added",
        "createdAt": "2025-02-12T00:15:46Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2976#issuecomment-2652344617",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2023-07-01T11:13:05Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwyMjI4Mzg3NjY3",
        "name": "cdktf",
        "description": "",
        "color": "fccac4"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzMxMzA4",
        "name": "confirmed",
        "description": "independently reproduced by an engineer on the team",
        "color": "4B830E"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMTQ2NjcxNDUz",
        "name": "feature/multi-stack",
        "description": "",
        "color": "6589C9"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjEz",
        "name": "size/medium",
        "description": "estimated < 1 week",
        "color": "291E63"
      }
    ],
    "milestone": null,
    "number": 2976,
    "title": "CDKTF: Cross stack dependencies fail if placed within a wrapper construct.",
    "updatedAt": "2025-02-12T00:15:47Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjEzMzcwNDY=",
      "is_bot": false,
      "login": "DanielMSchmidt",
      "name": "Daniel Schmidt"
    },
    "body": "### Description\n\n`export type TerraformResourceBlock = unknown;` leads to uncertainty within converts code base, we should improve the type. \n\n### References\n\n_No response_\n\n### Help Wanted\n\n- [ ] I'm interested in contributing a fix myself\n\n### Community Note\n\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n",
    "comments": [],
    "createdAt": "2023-07-05T07:49:07Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMzE3NzI2NjM4",
        "name": "tech-debt",
        "description": "",
        "color": "191658"
      }
    ],
    "milestone": null,
    "number": 2985,
    "title": "Convert: Some types are typed as `unknown` internally",
    "updatedAt": "2023-07-14T13:28:09Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjEzMzcwNDY=",
      "is_bot": false,
      "login": "DanielMSchmidt",
      "name": "Daniel Schmidt"
    },
    "body": "### Description\n\nIn languages like Python where there are no strong types users with invalid configuration (e.g. camel cased vs snake cased attribute keys) might not spot their mistake if they are new to CDKTF and perceive the behaviour as a bug.\r\n\r\nWe can (potentially) look out for some common mistakes like wrong casing, passing an array instead of an item of the list, etc and throw more helpful errors. This might need to be done in JSII\n\n### References\n\n_No response_\n\n### Help Wanted\n\n- [ ] I'm interested in contributing a fix myself\n\n### Community Note\n\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5jvpAQ",
        "author": {
          "login": "DanielMSchmidt"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "See also #1898",
        "createdAt": "2023-08-10T15:18:56Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/3061#issuecomment-1673433104",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2023-08-10T12:10:31Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwyMTEzNjU3MzA2",
        "name": "language/python",
        "description": "",
        "color": "5c2596"
      },
      {
        "id": "MDU6TGFiZWwyMjQ2NzM3OTc1",
        "name": "upstream/jsii",
        "description": "Pending upstream work on JSII",
        "color": "f9a2cf"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMTM1OTU1Nzk1",
        "name": "ux/debugging",
        "description": "",
        "color": "2703FD"
      }
    ],
    "milestone": null,
    "number": 3061,
    "title": "Library: improve debugging for untyped languages and incorrect naming",
    "updatedAt": "2023-08-10T15:18:57Z"
  },
  {
    "assignees": [
      {
        "id": "MDQ6VXNlcjQxNjg0OQ==",
        "login": "robin-norwood",
        "name": "Robin Norwood",
        "databaseId": 0
      }
    ],
    "author": {
      "id": "U_kgDOBfirOw",
      "is_bot": false,
      "login": "nikpivkin",
      "name": "Nikita Pivkin"
    },
    "body": "### Description\n\nIn the first example of this [section](https://developer.hashicorp.com/terraform/tutorials/cdktf/cdktf-build?variants=cdk-language%3Atypescript#define-your-cdk-for-terraform-application), the `RemoteBackend` class is used, but there is no import of it:\r\n\r\n```ts\r\nimport { App, TerraformStack, TerraformOutput } from \"cdktf\";\r\n```\r\n\r\nHow it should be:\r\n```ts\r\nimport { App, TerraformStack, TerraformOutput, RemoteBackend } from \"cdktf\";\r\n```\r\n\r\nI tried to find the source code of the documentation of this section to open the PR, but I didn't find it.\n\n### Links\n\n- https://developer.hashicorp.com/terraform/tutorials/cdktf/cdktf-build?variants=cdk-language%3Atypescript#define-your-cdk-for-terraform-application\n\n### Help Wanted\n\n- [X] I'm interested in contributing a fix myself\n\n### Community Note\n\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n",
    "comments": [],
    "createdAt": "2023-08-13T11:11:27Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzgw",
        "name": "documentation",
        "description": "Improvements or additions to documentation",
        "color": "0075ca"
      },
      {
        "id": "MDU6TGFiZWwyOTY3ODY2NzMy",
        "name": "documentation/learn-tutorials",
        "description": "",
        "color": "29D75B"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      }
    ],
    "milestone": null,
    "number": 3071,
    "title": "Missing import in the example of using `cdktf` for `typescript`",
    "updatedAt": "2023-10-12T15:20:28Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjE3MjAyMDk=",
      "is_bot": false,
      "login": "kination",
      "name": "K.I. (Dennis) Jung"
    },
    "body": "### Expected Behavior\n\nWhen generator creates code based on template, if parameter is array, guide in code should show parameter as array.\n\n### Actual Behavior\n\nArray parameter in code is just showing raw value, without any square bracket.\n\n### Steps to Reproduce\n\nIt is related with following comment:\r\nhttps://github.com/hashicorp/terraform-cdk/pull/2964#issuecomment-1630767380\n\n### Versions\n\nlanguage: null\r\ncdktf-cli: 0.0.0\r\nnode: v16.14.2\r\nterraform: 1.4.2\r\narch: arm64\r\nos: darwin 22.5.0\r\n\n\n### Providers\n\n_No response_\n\n### Gist\n\n_No response_\n\n### Possible Solutions\n\n_No response_\n\n### Workarounds\n\n_No response_\n\n### Anything Else?\n\n_No response_\n\n### References\n\n_No response_\n\n### Help Wanted\n\n- [X] I'm interested in contributing a fix myself\n\n### Community Note\n\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n",
    "comments": [],
    "createdAt": "2023-08-18T03:24:45Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzgw",
        "name": "documentation",
        "description": "Improvements or additions to documentation",
        "color": "0075ca"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMTM2MjAxMTE5",
        "name": "provider get / generation",
        "description": "",
        "color": "CC3938"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4Mjg1",
        "name": "size/small",
        "description": "estimated < 1 day",
        "color": "4671C0"
      }
    ],
    "milestone": null,
    "number": 3095,
    "title": "Display correct data format inside document",
    "updatedAt": "2023-08-18T09:04:18Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjM4Njg3NTQ=",
      "is_bot": false,
      "login": "jsteinich",
      "name": "Jon Steinich"
    },
    "body": "### Description\n\nThe generated module bindings for boolean variables currently only accept `boolean`. This causes issues when trying to pass other values or use functions.\r\nAll of the generated provider code uses `boolean | IResolvable`, so it makes sense to match that behavior (granted it isn't well supported in some languages).\n\n### References\n\n- https://discuss.hashicorp.com/t/token-asboolean/57589\n\n### Help Wanted\n\n- [ ] I'm interested in contributing a fix myself\n\n### Community Note\n\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n",
    "comments": [],
    "createdAt": "2023-09-14T01:31:02Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      }
    ],
    "milestone": null,
    "number": 3130,
    "title": "Module generation for boolean variable should also accept `IResolvable`",
    "updatedAt": "2023-09-14T10:40:49Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjg1NTExNQ==",
      "is_bot": false,
      "login": "xiehan",
      "name": "Nara Kasbergen Kwon"
    },
    "body": "### Description\n\n> Thinking about this: It would be really cool, if `cdktf provider add` had a flag like `--force-remote` that would make the command fail, if e.g. there's no pre-built provider for Github for the new CDKTF version yet ü§î Would be simple to implement as well üòÑ            \n\n### References\n\n_Originally posted by @ansgarm in https://github.com/cdktf/cdktf-repository-manager/pull/222#discussion_r1345826299_\r\n\n\n### Help Wanted\n\n- [ ] I'm interested in contributing a fix myself\n\n### Community Note\n\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n",
    "comments": [],
    "createdAt": "2023-10-04T15:16:21Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "LA_kwDODd1Amc78pgm0",
        "name": "pre-built providers",
        "description": "Issues around pre-built providers managed at https://github.com/hashicorp/cdktf-repository-manager",
        "color": "E06AA9"
      },
      {
        "id": "LA_kwDODd1Amc78phHg",
        "name": "cli/provider-subcommands",
        "description": "cdktf provider <verb> commands",
        "color": "4CBCB0"
      }
    ],
    "milestone": null,
    "number": 3168,
    "title": "cdktf provider add --force-remote",
    "updatedAt": "2023-10-04T15:16:21Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "U_kgDOCC1AiQ",
      "is_bot": false,
      "login": "wayneslabs",
      "name": "Wayne"
    },
    "body": "### Expected Behavior\n\nWhen a value is provided for lifecycle.replaceTriggeredBy, it should not use string interpolation in the final terraform code. \r\n\r\nFor example:\r\n```\r\n\"lifecycle\": {\r\n    \"replace_triggered_by\": [\r\n      \"google_firebaserules_ruleset.MainRuleSet\"\r\n    ]\r\n  }\r\n```\n\n### Actual Behavior\n\nCurrently, it creates a string interpolation\r\n\r\nFor example:\r\n```\r\n\"lifecycle\": {\r\n    \"replace_triggered_by\": [\r\n      \"${google_firebaserules_ruleset.MainRuleSet}\"\r\n    ]\r\n  }\r\n```\r\n\r\nThis throws an error:\r\n```\r\n‚ï∑\r\n‚îÇ Error: Invalid character\r\n‚îÇ\r\n‚îÇ   on  line 33:\r\n‚îÇ   (source code not available)\r\n‚îÇ\r\n‚îÇ This character is not used within the language.\r\n‚ïµ\r\n\r\n‚ï∑\r\n‚îÇ Error: Invalid expression\r\n‚îÇ\r\n‚îÇ   on  line 33:\r\n‚îÇ   (source code not available)\r\n‚îÇ\r\n‚îÇ Expected the start of an expression, but found an invalid expression token.\r\n```\n\n### Steps to Reproduce\n\nCreate a resource with replaceTriggeredBy\r\n```\r\nlifecycle: { replaceTriggeredBy: [mainRuleSet] }\r\n```\r\n\r\nI got the error while following the steps for creating firebase rules, which requires replaceTriggeredBy: [docs](https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/firebaserules_release)\n\n### Versions\n\nlanguage: typescript\r\ncdktf-cli: 0.20.4\r\nnode: v20.10.0\r\ncdktf: 0.20.4\r\nconstructs: 10.3.0\r\njsii: null\r\nterraform: 1.7.4\r\narch: x64\r\nos: MacOS Monterey\n\n### Providers\n\n_No response_\n\n### Gist\n\n_No response_\n\n### Possible Solutions\n\n_No response_\n\n### Workarounds\n\nCurrently, it can be solved by manually constructing it, as noted at: [issue comment](https://github.com/hashicorp/terraform-cdk/issues/3196#issuecomment-1812986423)\r\n\r\n```\r\nrelease.addOverride(\"lifecycle.replace_triggered_by\", [\r\n  mainRuleSet.terraformResourceType +\r\n    \".\" +\r\n    mainRuleSet.friendlyUniqueId,\r\n]);\r\n```\n\n### Anything Else?\n\n_No response_\n\n### References\n\n- #3196\r\n- #2082\r\n- https://github.com/hashicorp/terraform-cdk/pull/3322\n\n### Help Wanted\n\n- [ ] I'm interested in contributing a fix myself\n\n### Community Note\n\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc6Cmran",
        "author": {
          "login": "DJAlPee"
        },
        "authorAssociation": "NONE",
        "body": "`replaceTriggeredBy` should behave the same way like `dependsOn`:\r\nhttps://github.com/hashicorp/terraform-cdk/blob/4fd0a65ae698e999d3ba2590257fd770793dcf36/packages/cdktf/lib/terraform-resource.ts#L160-L164\r\n\r\nvs.\r\nhttps://github.com/hashicorp/terraform-cdk/blob/4fd0a65ae698e999d3ba2590257fd770793dcf36/packages/cdktf/lib/terraform-resource.ts#L78-L88\r\n\r\nSo would changing from `return x.fqdn;` to `return dependable(x);` fix the issue?\r\nAs a workaround, I'm doing it like this in my code:\r\n```typescript\r\nimport { TerraformResource, dependable } from 'cdktf';\r\n\r\nconst monitoredResources: TerraformResource = [];\r\n\r\n// Add relevant resources to array\r\n\r\nnew ApiGatewayDeployment(this, 'service_api_deployment', {\r\n  restApiId: apiGateway.id,\r\n  lifecycle: {\r\n    replaceTriggeredBy: monitoredResources.map(dependable),\r\n  },\r\n});\r\n```",
        "createdAt": "2024-06-26T08:58:11Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/3532#issuecomment-2191177383",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc6Fw8te",
        "author": {
          "login": "wayneslabs"
        },
        "authorAssociation": "NONE",
        "body": "I've confirmed that using `dependable` does work. It's also cleaner than the previous workaround I mentioned in the description above.",
        "createdAt": "2024-07-23T03:56:04Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/3532#issuecomment-2244201310",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc6OZ0Xi",
        "author": {
          "login": "kharigardner"
        },
        "authorAssociation": "NONE",
        "body": "With Python, i've used `Token.as_any(<my_resource_instance>)` -- is this intended as the drop in since `dependable` is not available in python from what I can tell?",
        "createdAt": "2024-10-02T16:44:04Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "EYES",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/3532#issuecomment-2389132770",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc6cSolk",
        "author": {
          "login": "benkeil"
        },
        "authorAssociation": "NONE",
        "body": "Can we fix that? Lost 30 min of my life",
        "createdAt": "2025-01-29T16:30:17Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 4
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/3532#issuecomment-2622130532",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc6hGXIl",
        "author": {
          "login": "jnawk"
        },
        "authorAssociation": "NONE",
        "body": "Speaking about python, note that Token.as_any returns IResolvable, not ITerraformDependable (nor str), so one who cares about type checking would need a cast.\n",
        "createdAt": "2025-03-06T04:51:09Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/3532#issuecomment-2702799397",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2024-03-03T16:34:56Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwyMjI4Mzg3NjY3",
        "name": "cdktf",
        "description": "",
        "color": "fccac4"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "LA_kwDODd1Amc8AAAABH924aQ",
        "name": "bug/has-workaround",
        "description": "A bug with a workaround (may not be elegant)",
        "color": "9e202d"
      }
    ],
    "milestone": null,
    "number": 3532,
    "title": "lifecycle: replaceTriggeredBy should not be a string interpolation",
    "updatedAt": "2025-03-06T04:51:09Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjE0OTk3ODA=",
      "is_bot": false,
      "login": "Hi-Fi",
      "name": "Juho Saarinen"
    },
    "body": "### Expected Behavior\r\n\r\nWhen stack generated has incoming stack references, I would expect those to be correct even stack is generated with `fullSynth` (to be utilized with `toBeValidTerraform`)\r\n\r\n### Actual Behavior\r\n\r\nError:\r\n``` \r\n\"severity\": \"error\",\r\n\"summary\": \"Reference to undeclared resource\",\r\n\"detail\": \"A managed resource \\\"azurerm_container_registry\\\" \\\"acr_containerRegistry_94E5FAA8\\\" has not been declared in the root module.\",\r\n```\r\n\r\n### Steps to Reproduce\r\n\r\n1. Create 2 stacks with cross-stack reference\r\n2. Generate `testStack` that uses the value from other stack\r\n3. Create tests with `expect(fullSynth(testStack)).toBeValidTerraform();`\r\n\r\n### Versions\r\n\r\nlanguage: typescript\r\ncdktf-cli: 0.20.3\r\nnode: v18.17.1\r\ncdktf: 0.20.3\r\nconstructs: 10.3.0\r\njsii: null\r\nterraform: 1.7.4\r\narch: x64\r\nos: win32 10.0.19044\r\n\r\n### Providers\r\n\r\n``` \r\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\r\n‚îÇ Provider Name ‚îÇ Provider Version ‚îÇ CDKTF   ‚îÇ Constraint ‚îÇ Package Name            ‚îÇ Package Version ‚îÇ\r\n‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\r\n‚îÇ azure/azapi   ‚îÇ 1.12.1           ‚îÇ         ‚îÇ ~> 1.12    ‚îÇ                         ‚îÇ                 ‚îÇ\r\n‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\r\n‚îÇ azurerm       ‚îÇ 3.92.0           ‚îÇ ^0.20.0 ‚îÇ            ‚îÇ @cdktf/provider-azurerm ‚îÇ 12.6.0          ‚îÇ\r\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\r\n```\r\n\r\n### Gist\r\n\r\n_No response_\r\n\r\n### Possible Solutions\r\n\r\nSynth should somehow be able to generate references from the code, as I at least expect fullSynth to be ~same than with CLI synth.\r\n\r\nIt could allow also multiple stacks to be done on one go, and that way to understand that there are references\r\n\r\n### Workarounds\r\n\r\nMake full synth and check those from file system:\r\n```\r\nconst app = Testing.app();\r\nconst stack = generateStack(app);\r\napp.synth();\r\nexpect(app.outdir).toBeValidTerraform();\r\n```\r\n\r\n### Anything Else?\r\n\r\nIn tests `fullSynth` currently generates \"empty\" manifest:\r\n```\r\n{\r\n  \"version\": \"stubbed\",\r\n  \"stacks\": {\r\n    \"aca\": {\r\n      \"name\": \"aca\",\r\n      \"constructPath\": \"aca\",\r\n      \"workingDirectory\": \"stacks\\\\aca\",\r\n      \"synthesizedStackPath\": \"stacks\\\\aca\\\\cdk.tf.json\",\r\n      \"stackMetadataPath\": \"stacks\\\\aca\\\\metadata.json\",\r\n      \"annotations\": [],\r\n      \"dependencies\": []\r\n    }\r\n  }\r\n}\r\n```\r\nAnd refers to that specific value like:\r\n```\r\n        \"scope\": \"${azurerm_container_registry.acr_containerRegistry_94E5FAA8.id}\"\r\n```\r\n\r\nCompared to normal `synth`, manifest has 2 stacks\r\n```\r\n{\r\n  \"version\": \"0.20.3\",\r\n  \"stacks\": {\r\n    \"acr\": {\r\n      \"name\": \"acr\",\r\n      \"constructPath\": \"acr\",\r\n      \"workingDirectory\": \"stacks\\\\acr\",\r\n      \"synthesizedStackPath\": \"stacks\\\\acr\\\\cdk.tf.json\",\r\n      \"stackMetadataPath\": \"stacks\\\\acr\\\\metadata.json\",\r\n      \"annotations\": [],\r\n      \"dependencies\": []\r\n    },\r\n    \"aca\": {\r\n      \"name\": \"aca\",\r\n      \"constructPath\": \"aca\",\r\n      \"workingDirectory\": \"stacks\\\\aca\",\r\n      \"synthesizedStackPath\": \"stacks\\\\aca\\\\cdk.tf.json\",\r\n      \"stackMetadataPath\": \"stacks\\\\aca\\\\metadata.json\",\r\n      \"annotations\": [],\r\n      \"dependencies\": [\r\n        \"acr\"\r\n      ]\r\n    }\r\n  }\r\n} \r\n```\r\nAnd reference to other stack value looks like:\r\n```\r\n\"scope\": \"${data.terraform_remote_state.cross-stack-reference-input-acr.outputs.cross-stack-output-azurerm_container_registryacr_containerRegistry_94E5FAA8id}\"\r\n\r\n```\r\n\r\n### References\r\n\r\n_No response_\r\n\r\n### Help Wanted\r\n\r\n- [ ] I'm interested in contributing a fix myself\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n",
    "comments": [],
    "createdAt": "2024-03-06T10:13:33Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwyNTcwMTY0OTY5",
        "name": "testing",
        "description": "",
        "color": "456cc6"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "LA_kwDODd1Amc8AAAABH924aQ",
        "name": "bug/has-workaround",
        "description": "A bug with a workaround (may not be elegant)",
        "color": "9e202d"
      }
    ],
    "milestone": null,
    "number": 3538,
    "title": "Testing: fullSynth generated incorrect stack is having incoming cross-stack references",
    "updatedAt": "2024-03-11T06:37:10Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjMwNTk2MTY1",
      "is_bot": false,
      "login": "eahrend",
      "name": "Erik Ahrend"
    },
    "body": "### Expected Behavior\r\n\r\nI should be able to create a replaceTriggeredBy lifecycle rule by specifying the FQN of the resource that I want to cause a replacement trigger for, like:\r\n\r\n\r\n```GO\r\n\ttriggersMap := map[string]*string{\r\n\t\t\"databases\": jsii.String(strings.Join(dbNames, \",\")), // trigger on database changes\r\n\t}\r\n\tresourceId := jsii.Sprintf(\"cloud-sql-user-%s-%s-%s-trigger\", h.ProjectName, h.Struct.Name, userName)\r\n\tuserReplacementTrigger := nr.NewResource(h.Stack, resourceId, &nr.ResourceConfig{Triggers: &triggersMap})\r\n\tlifecycle := cdktf.TerraformResourceLifecycle{\r\n\t\tReplaceTriggeredBy: &[]interface{}{\r\n\t\t\tuserReplacementTrigger.Fqn(),\r\n\t\t},\r\n\t}\r\n```\t\r\n\r\n### Actual Behavior\r\n\r\nI get an invalid expression. The cdktf.json file shows:\r\n\r\n```JSON\r\n    \"google_sql_user\": {\r\n        ###REDACTED###\r\n        \"lifecycle\": {\r\n          \"replace_triggered_by\": [\r\n            \"${null_resource.cloud-sql-user-my-instance-default-user-trigger}\"\r\n          ]\r\n        },\r\n        ###REDACTED###\r\n      },\r\n  ```\r\n\r\n### Steps to Reproduce\r\n\r\nApply the stack with the relevant code.\r\n\r\n### Versions\r\n\r\nCouldn't get the info from cdktf debug\r\n\r\nnpm list -g\r\n/Users/erik/.local/lib\r\n‚îú‚îÄ‚îÄ cdktf-cli@0.20.1\r\n‚îî‚îÄ‚îÄ cdktf@0.20.1\r\ngo version\r\ngo version go1.21.6 darwin/arm64\r\nterraform version\r\nTerraform v1.7.0\r\non darwin_arm64\r\nNode.js v20.11.0\r\n\r\nRunning this command fails with this error:\r\n```\r\nError: Pre-built provider information not found\r\n    at Bnr (/Users/erik/.local/lib/node_modules/cdktf-cli/bundle/bin/cmds/handlers.js:171:2225)\r\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\r\n    at async zU (/Users/erik/.local/lib/node_modules/cdktf-cli/bundle/bin/cmds/handlers.js:171:1716)\r\n    at async lde (/Users/erik/.local/lib/node_modules/cdktf-cli/bundle/bin/cmds/handlers.js:171:4004)\r\n    at async /Users/erik/.local/lib/node_modules/cdktf-cli/bundle/bin/cmds/handlers.js:176:3945\r\n    at async Promise.all (index 2)\r\n    at async Kk.allProviders (/Users/erik/.local/lib/node_modules/cdktf-cli/bundle/bin/cmds/handlers.js:176:3854)\r\n    at async Object.L8r (/Users/erik/.local/lib/node_modules/cdktf-cli/bundle/bin/cmds/handlers.js:551:1832)\r\n    at async JZ.handleCommand (/Users/erik/.local/lib/node_modules/cdktf-cli/bundle/bin/cdktf.js:85:887)\r\n    at async Object.handler (/Users/erik/.local/lib/node_modules/cdktf-cli/bundle/bin/cdktf.js:84:15344)\r\n```\r\n\r\n### Providers\r\n\r\nRunning this command fails with this error:\r\n```\r\nError: Pre-built provider information not found\r\n    at Bnr (/Users/erik/.local/lib/node_modules/cdktf-cli/bundle/bin/cmds/handlers.js:171:2225)\r\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\r\n    at async zU (/Users/erik/.local/lib/node_modules/cdktf-cli/bundle/bin/cmds/handlers.js:171:1716)\r\n    at async lde (/Users/erik/.local/lib/node_modules/cdktf-cli/bundle/bin/cmds/handlers.js:171:4004)\r\n    at async /Users/erik/.local/lib/node_modules/cdktf-cli/bundle/bin/cmds/handlers.js:176:3945\r\n    at async Promise.all (index 2)\r\n    at async Kk.allProviders (/Users/erik/.local/lib/node_modules/cdktf-cli/bundle/bin/cmds/handlers.js:176:3854)\r\n    at async Object.L8r (/Users/erik/.local/lib/node_modules/cdktf-cli/bundle/bin/cmds/handlers.js:551:1832)\r\n    at async JZ.handleCommand (/Users/erik/.local/lib/node_modules/cdktf-cli/bundle/bin/cdktf.js:85:887)\r\n    at async Object.handler (/Users/erik/.local/lib/node_modules/cdktf-cli/bundle/bin/cdktf.js:84:15344)\r\n```\r\n\r\n### Gist\r\n\r\n_No response_\r\n\r\n### Possible Solutions\r\n\r\n_No response_\r\n\r\n### Workarounds\r\n\r\nWorkaround is to write it like this:\r\n```GO\r\n\tlifecycle := cdktf.TerraformResourceLifecycle{\r\n\t\tReplaceTriggeredBy: &[]interface{}{\r\n\t\t\t// Workaround for https://github.com/hashicorp/terraform-cdk/issues/3196\r\n\t\t\tfmt.Sprintf(\"%s.%s\", *userReplacementTrigger.TerraformResourceType(), *userReplacementTrigger.FriendlyUniqueId()),\r\n\t\t},\r\n\t}\r\n```\r\n\r\n### Anything Else?\r\n\r\n_No response_\r\n\r\n### References\r\n\r\nhttps://github.com/hashicorp/terraform-cdk/issues/3196\r\nhttps://github.com/hashicorp/terraform-cdk/issues/1866#issuecomment-1155160808\r\n\r\n### Help Wanted\r\n\r\n- [ ] I'm interested in contributing a fix myself\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc52lJEt",
        "author": {
          "login": "TylerJGabb"
        },
        "authorAssociation": "NONE",
        "body": "I am interested in working on this issue.",
        "createdAt": "2024-03-11T21:08:31Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/3546#issuecomment-1989447981",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc533tt5",
        "author": {
          "login": "MWS-TAI"
        },
        "authorAssociation": "NONE",
        "body": "I am also experiencing this issue with Python, have tried providing just the resource variable and using .fqn as [3322](https://github.com/hashicorp/terraform-cdk/pull/3322) code changes suggest. \r\n\r\nThe workaround by @eahrend seems to work \r\n```python\r\nlifecycle=TerraformResourceLifecycle(\r\n    replace_triggered_by=[\r\n        f\"{self.__redshift_namespace.terraform_resource_type}.{self.__redshift_namespace.friendly_unique_id}\",\r\n    ]\r\n)\r\n```\r\n```json\r\n\"lifecycle\": {\r\n      \"replace_triggered_by\": [\r\n          \"aws_redshiftserverless_namespace.redshift__redshift_namespace\"\r\n      ]\r\n    },\r\n```\r\n\r\nI believe the underlying issue is that the fqn property includes the hcl templating syntax as shown below in the cdktf.json when I use fqn:\r\n```python\r\nlifecycle=TerraformResourceLifecycle(\r\n    replace_triggered_by=[\r\n        f\"{self.__redshift_namespace.fqn}\",\r\n    ]\r\n)\r\n```\r\n```json\r\n\"lifecycle\": {\r\n      \"replace_triggered_by\": [\r\n          \"${aws_redshiftserverless_namespace.redshift__redshift_namespace}\"\r\n      ]\r\n    },\r\n```\r\n\r\nI am not sure if fqn including the syntax is by design, but that seems to be the underlying issue.",
        "createdAt": "2024-03-21T02:52:04Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/3546#issuecomment-2011093881",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc6DAqjn",
        "author": {
          "login": "benkeil"
        },
        "authorAssociation": "NONE",
        "body": "any progress on this?",
        "createdAt": "2024-06-29T05:27:47Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/3546#issuecomment-2197989607",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2024-03-11T20:54:40Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwzMDMwODE1NTQy",
        "name": "language/golang",
        "description": "",
        "color": "22ED90"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "LA_kwDODd1Amc8AAAABH924aQ",
        "name": "bug/has-workaround",
        "description": "A bug with a workaround (may not be elegant)",
        "color": "9e202d"
      }
    ],
    "milestone": null,
    "number": 3546,
    "title": "ReplaceTriggeredBy: Still not working in Golang",
    "updatedAt": "2024-06-29T05:27:48Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjIyODc1MTY2",
      "is_bot": false,
      "login": "gmeligio",
      "name": "Eligio Mari√±o"
    },
    "body": "### Expected Behavior\n\nI expected cdktf to follow the  [cloud block documentation](https://developer.hashicorp.com/terraform/cli/cloud/settings#tf_cloud_organization) \r\n\r\n> [TF_CLOUD_ORGANIZATION](https://developer.hashicorp.com/terraform/cli/cloud/settings#tf_cloud_organization) - The name of the organization. Terraform reads this variable when organization omitted from the cloud block`. If both are specified, the configuration takes precedence.\r\n\r\nHopefully the other environment variables mentioned in those docs can be supported as well. The current list is:\r\n- [TF_CLOUD_ORGANIZATION](https://developer.hashicorp.com/terraform/cli/cloud/settings#tf_cloud_organization)\r\n- [TF_CLOUD_HOSTNAME](https://developer.hashicorp.com/terraform/cli/cloud/settings#tf_cloud_hostname)\r\n- [TF_CLOUD_PROJECT](https://developer.hashicorp.com/terraform/cli/cloud/settings#tf_cloud_project)\r\n- [TF_WORKSPACE](https://developer.hashicorp.com/terraform/cli/cloud/settings#tf_workspace)\n\n### Actual Behavior\n\nIt turns out that `organization` is a required prop for `CloudBackend`.  \r\n\r\n```log\r\nProperty 'organization' is missing in type '{ workspaces: NamedCloudWorkspace; }' but required in type 'CloudBackendConfig'.ts(2345)\r\n```\r\n\n\n### Steps to Reproduce\n\n1. Create a CloudBackend.\r\n2. Don't declare the prop `organization`.\n\n### Versions\n\ncdktf debug\r\nlanguage: typescript\r\ncdktf-cli: 0.20.6\r\nnode: v20.10.0\r\ncdktf: 0.20.6\r\nconstructs: 10.3.0\r\njsii: null\r\nterraform: 1.8.0\r\narch: x64\r\nos: linux 6.5.0-27-generic\r\nproviders\r\n@cdktf/provider-tfe (PREBUILT)\r\n        terraform provider version: 0.53.0 \r\n        prebuilt provider version: 11.2.0\r\n        cdktf version: ^0.20.0\n\n### Providers\n\n‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\r\n‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ      ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ       ‚îÄ‚îÄ‚îÄ   ‚îÄ‚îÄ‚îÄ‚îÄ     ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ        ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\r\n Provider ‚îÇ Provider   ‚îÇ CDKTF Constra‚îÇ Package Name ‚îÇ Package   ‚îÇ\r\nName       Version            int                     Version \r\n‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\r\n‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ      ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ       ‚îÄ‚îÄ‚îÄ   ‚îÄ‚îÄ‚îÄ‚îÄ     ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ        ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\r\n tfe      ‚îÇ 0.53.0     ‚îÇ ^0.20        ‚îÇ @cdktf/provid‚îÇ 11.2.0    ‚îÇ\r\n                        .0             er-tfe\r\n‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\r\n‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ      ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ       ‚îÄ‚îÄ‚îÄ   ‚îÄ‚îÄ‚îÄ‚îÄ     ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ        ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n\n### Gist\n\n_No response_\n\n### Possible Solutions\n\n1. Set fields that are supported to be passed as environment variables to optional in the TypeScript declaration.\n\n### Workarounds\n\n1. Set organization to \"hardcoded-name-of-organization\".\n\n### Anything Else?\n\n_No response_\n\n### References\n\n- https://developer.hashicorp.com/terraform/cli/cloud/settings\n\n### Help Wanted\n\n- [X] I'm interested in contributing a fix myself\n\n### Community Note\n\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc56i3_a",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "Hi @gmeligio üëã\r\n\r\nThis probably stems from the times when the CDKTF CLI would create workspaces for you and thus required these to be set.\r\n\r\nIn the meantime you can use an override to empty the cloud block:\r\n```ts\r\nconst stack = new MyStack(app, \"test\");\r\nnew CloudBackend(stack, {organization: \"dummy\", workspaces: new NamedCloudWorkspace(\"dummy\")});\r\nstack.addOverride(\"terraform.cloud\", {organization: undefined, workspaces: undefined});\r\n```\r\nwill result in:\r\n```jsonc\r\n// ...\r\n\"terraform\": {\r\n    \"cloud\": {\r\n    }\r\n  }\r\n// ...\r\n```",
        "createdAt": "2024-04-15T07:48:23Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "HEART",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/3586#issuecomment-2055962586",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc56jSMZ",
        "author": {
          "login": "gmeligio"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "Hi @ansgarm . Thank you so much for providing a workaround! I'll use it. ",
        "createdAt": "2024-04-15T08:09:06Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/3586#issuecomment-2056069913",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2024-04-14T18:03:17Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwyMjIzNTI1MzY0",
        "name": "terraform cloud",
        "description": "",
        "color": "4ed354"
      },
      {
        "id": "MDU6TGFiZWwyMjI4Mzg3NjY3",
        "name": "cdktf",
        "description": "",
        "color": "fccac4"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "LA_kwDODd1Amc8AAAABH924aQ",
        "name": "bug/has-workaround",
        "description": "A bug with a workaround (may not be elegant)",
        "color": "9e202d"
      }
    ],
    "milestone": null,
    "number": 3586,
    "title": "CloudBackend: support environment variables like TF_CLOUD_ORGANIZATION",
    "updatedAt": "2024-04-15T08:09:07Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjQwNDUyNTU5",
      "is_bot": false,
      "login": "mimozell",
      "name": ""
    },
    "body": "### Description\n\nTrying to understand how to work with cdktf when using a newer version of terraform. My current experience is that when doing the TF upgrade and running a cdktf deploy, I get this error:\r\n\r\n              ‚îÇ Error: Backend configuration changed\r\n              ‚îÇ \r\n              ‚îÇ A change in the backend configuration has been detected, which may require\r\n              ‚îÇ migrating existing state.\r\n              ‚îÇ \r\n              ‚îÇ If you wish to attempt automatic migration of the state, use \"terraform init\r\n              ‚îÇ -migrate-state\".\r\n              ‚îÇ If you wish to store the current configuration with no changes to the state,\r\n              ‚îÇ use \"terraform init -reconfigure\".\r\nIs there some way to handle this without going to each cdktf.out folder and running terraform? That is very cumbersome to do and should be handled at the cdktf stack level. In the documentation I don't see any information related to this.\n\n### Links\n\nDocs don't exist\n\n### Help Wanted\n\n- [ ] I'm interested in contributing a fix myself\n\n### Community Note\n\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc6CTxgo",
        "author": {
          "login": "starbuggx"
        },
        "authorAssociation": "NONE",
        "body": "I ran this command, and the migration didn't work, instead, so many resources were created.\r\ncdktf deploy --migrate-state",
        "createdAt": "2024-06-24T10:30:36Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/3615#issuecomment-2186221608",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2024-05-06T08:39:29Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzgw",
        "name": "documentation",
        "description": "Improvements or additions to documentation",
        "color": "0075ca"
      },
      {
        "id": "MDU6TGFiZWwyMjYwNjQ0NDQx",
        "name": "cdktf-cli",
        "description": "",
        "color": "82e5de"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMTM2MjkzOTA4",
        "name": "core-parity",
        "description": "Better experience in Terraform Core than CDKTF",
        "color": "1A80B6"
      }
    ],
    "milestone": null,
    "number": 3615,
    "title": "COMPONENT: Running terraform --reconfigure --upgrade through cdktf",
    "updatedAt": "2024-06-24T10:30:37Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjM2MjI0NzM3",
      "is_bot": false,
      "login": "Rom888",
      "name": ""
    },
    "body": "### Expected Behavior\n\nNo error\n\n### Actual Behavior\n\npnpm add --global cdktf-cli@0.20.7\r\n```\r\n‚ÄâWARN‚Äâ 6 deprecated subdependencies found: coffee-script@1.12.7, har-validator@5.1.5, request@2.88.2, sourcemap-codec@1.4.8, uuid@3.4.0, xlsjs@0.7.6\r\nPackages: +260\r\n++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\r\nProgress: resolved 1069, reused 1068, downloaded 0, added 0, done\r\n.pnpm/@cdktf+node-pty-prebuilt-multiarch@0.10.1-pre.11/node_modules/@cdktf/node-.pnpm/@cdktf+node-pty-prebuilt-multiarch@0.10.1-pre.11/node_modules/@cdktf/node-pty-prebuilt-multiarch: Running install script, failed in 554ms\r\n.../@cdktf/node-pty-prebuilt-multiarch install$ node scripts/check-prebuild.j‚Ä¶\r\n‚îÇ Prebuild binary missing for platform linux\r\n‚îÇ prebuild-install warn install No prebuilt binaries found (target=22.2.0 run‚Ä¶\r\n‚îÇ node:events:498\r\n‚îÇ       throw er; // Unhandled 'error' event\r\n‚îÇ       ^\r\n‚îÇ Error: spawn node-gyp ENOENT\r\n‚îÇ     at ChildProcess._handle.onexit (node:internal/child_process:286:19)\r\n‚îÇ     at onErrorNT (node:internal/child_process:484:16)\r\n‚îÇ     at process.processTicksAndRejections (node:internal/process/task_queues‚Ä¶\r\n‚îÇ Emitted 'error' event on ChildProcess instance at:\r\n‚îÇ     at ChildProcess._handle.onexit (node:internal/child_process:292:12)\r\n‚îÇ     at onErrorNT (node:internal/child_process:484:16)\r\n‚îÇ     at process.processTicksAndRejections (node:internal/process/task_queues‚Ä¶\r\n‚îÇ   errno: -2,\r\n‚îÇ   code: 'ENOENT',\r\n‚îÇ   syscall: 'spawn node-gyp',\r\n‚îÇ   path: 'node-gyp',\r\n‚îÇ   spawnargs: [ 'rebuild' ]\r\n‚îÇ }\r\n‚îÇ Node.js v22.2.0\r\n‚îî‚îÄ Failed in 554ms at /home/rom/.local/share/pnpm/global/5/.pnpm/@cdktf+node-pty-prebuilt-multiarch@0.10.1-pre.11/node_modules/@cdktf/node-pty-prebuilt-multiarch\r\n‚ÄâELIFECYCLE‚Äâ Command failed with exit code 1.\r\n```\n\n### Steps to Reproduce\n\npnpm add --global cdktf-cli@0.20.7\n\n### Versions\n\nlanguage: typescript\r\ncdktf-cli: 0.20.7\r\nnode: 22.2.0\r\nterraform: 1.8.4\r\narch: amd64\r\nos: ubuntu 23.10\r\n\n\n### Providers\n\n_No response_\n\n### Gist\n\n_No response_\n\n### Possible Solutions\n\n_No response_\n\n### Workarounds\n\n_No response_\n\n### Anything Else?\n\n_No response_\n\n### References\n\n_No response_\n\n### Help Wanted\n\n- [ ] I'm interested in contributing a fix myself\n\n### Community Note\n\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc6AnFUE",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "Hi @Rom888 üëã\r\n\r\nThank you for raising this. It seems like you are using Node.js v22, for which we don't have prebuild bindings at this time at all in the [cdktf/node-pty-prebuilt-multiarch](https://github.com/cdktf/node-pty-prebuilt-multiarch) library. The simplest fix would be to use Node.js v20 for the CDKTF CLI.\r\n\r\nThat said, the package should build the binaries during post-install as a fallback but it seems like pnpm didn't run the postinstall script? We don't officially support pnpm at this time, so you might need to adjust some settings for it or use npm to install the CDKTF CLI.",
        "createdAt": "2024-06-10T08:43:34Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "CONFUSED",
            "users": {
              "totalCount": 3
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/3641#issuecomment-2157729028",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc6U4J80",
        "author": {
          "login": "surecloud-meason"
        },
        "authorAssociation": "NONE",
        "body": "Prebuild has now been upgraded to node 22: https://github.com/homebridge/node-pty-prebuilt-multiarch/releases/tag/v0.11.14 please can we get an upgraded fork.\r\n\r\nThanks",
        "createdAt": "2024-11-25T11:27:29Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 5
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/3641#issuecomment-2497748788",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc6Y0Kj8",
        "author": {
          "login": "sbkg0002"
        },
        "authorAssociation": "NONE",
        "body": "Any update on this @ansgarm ?",
        "createdAt": "2024-12-27T15:38:59Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "EYES",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/3641#issuecomment-2563811580",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc6c0v4P",
        "author": {
          "login": "tweltner"
        },
        "authorAssociation": "NONE",
        "body": "I created a pull-request to add support for node 22 to fork with `node-pty-prebuilt`'s for cdktf.",
        "createdAt": "2025-02-03T13:55:02Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/3641#issuecomment-2631073295",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc6fzv7e",
        "author": {
          "login": "cybmonali"
        },
        "authorAssociation": "NONE",
        "body": "> I created a pull-request to add support for node 22 to fork with `node-pty-prebuilt`'s for cdktf.\n\nIs node 22 support available now in cdktf?",
        "createdAt": "2025-02-25T08:39:41Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/3641#issuecomment-2681143006",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc6oeSxz",
        "author": {
          "login": "tweltner"
        },
        "authorAssociation": "NONE",
        "body": "With *v.0.20.12* is node 21 and 22 supported. See release information: https://github.com/hashicorp/terraform-cdk/releases/tag/v0.20.12",
        "createdAt": "2025-04-24T06:25:10Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "HOORAY",
            "users": {
              "totalCount": 2
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/3641#issuecomment-2826513523",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc6o4fiW",
        "author": {
          "login": "Saaalih2g"
        },
        "authorAssociation": "NONE",
        "body": "ŸÖŸÖŸÉŸÜ ÿ™Ÿàÿ∂Ÿäÿ≠ ÿßŸÑŸÖŸàÿ∂Ÿàÿπ ŸàÿßŸÑŸÜÿ™Ÿäÿ¨Ÿá ŸàÿßŸÑÿ≠ÿßŸÑŸá ÿ®ÿßŸÑÿπÿ±ÿ®Ÿä\r\n\r\nSa77\r\n\r\n\r\nŸÅŸä ÿÆŸÖŸäÿ≥ÿå 24 ÿ£ÿ®ÿ±ŸäŸÑÿå 2025 ŸÅŸä 9:25 ÿµÿå ŸÉÿ™ÿ® Thomas Weltner <\r\n***@***.***>:\r\n\r\n> *tweltner* left a comment (hashicorp/terraform-cdk#3641)\r\n> <https://github.com/hashicorp/terraform-cdk/issues/3641#issuecomment-2826513523>\r\n>\r\n> With *v.0.20.12* is node 21 and 22 supported. See release information:\r\n> https://github.com/hashicorp/terraform-cdk/releases/tag/v0.20.12\r\n>\r\n> ‚Äî\r\n> Reply to this email directly, view it on GitHub\r\n> <https://github.com/hashicorp/terraform-cdk/issues/3641#issuecomment-2826513523>,\r\n> or unsubscribe\r\n> <https://github.com/notifications/unsubscribe-auth/A5IDPXHUC75X5UIKQS3SOWD23B7WHAVCNFSM6AAAAABIYOFYVCVHI2DSMVQWIX3LMV43OSLTON2WKQ3PNVWWK3TUHMZDQMRWGUYTGNJSGM>\r\n> .\r\n> You are receiving this because you are subscribed to this thread.Message\r\n> ID: ***@***.***>\r\n>\r\n",
        "createdAt": "2025-04-27T10:43:52Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/3641#issuecomment-2833381526",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2024-06-04T12:44:40Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwyMjYwNjQ0NDQx",
        "name": "cdktf-cli",
        "description": "",
        "color": "82e5de"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      }
    ],
    "milestone": null,
    "number": 3641,
    "title": "Prebuild binary missing for platform linux",
    "updatedAt": "2025-04-27T10:43:53Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "U_kgDOBjqmvA",
      "is_bot": false,
      "login": "josh-thisisbud",
      "name": ""
    },
    "body": "### Expected Behavior\r\n\r\nWhen writing code in Python for Terraform CDK, I would expect to be able to use the issensitive function from terraform to enable conditional logic at run/plan time.\r\n\r\n### Actual Behavior\r\n\r\nThe issensitive function is not available on `cdktf.Fn`\r\n\r\n### Steps to Reproduce\r\n\r\n```python\r\nfrom cdktf import Fn\r\nbool = Fn.issensitive(\"\")\r\n```\r\n\r\n### Versions\r\n\r\ncdktf debug\r\nlanguage: python\r\ncdktf-cli: 0.20.7\r\nnode: v22.3.0\r\ncdktf: 0.20.7\r\nconstructs: 10.3.0\r\njsii: 1.100.0\r\nterraform: 1.5.7\r\narch: arm64\r\nos: darwin 23.5.0\r\npython: Python 3.12.4\r\npip: pip 24.0 from /Users/joshharwood/.local/share/virtualenvs/platform-infra-definition-TF3Q1r-C/lib/python3.12/site-packages/pip (python 3.12)\r\npipenv: pipenv, version 2024.0.1\r\nproviders\r\ndatastax/astra@~> 2.3 (LOCAL)\r\n        terraform provider version: 2.3.4\r\nAckers-BUD/http2b64@~> 1.0.2 (LOCAL)\r\n        terraform provider version: 1.0.3\r\nAckers-BUD/zip2b64@~> 1.0.2 (LOCAL)\r\n        terraform provider version: 1.0.3\r\ncastai/castai@~> 6.2.5 (LOCAL)\r\n        terraform provider version: 6.2.7\r\nthisisbud/sql@~> 1.0.0 (LOCAL)\r\n        terraform provider version: 1.0.0\r\ngrafana/grafana@~> 1.36.1 (LOCAL)\r\n        terraform provider version: 1.36.1\r\n1Password/onepassword@~> 1.1.4 (LOCAL)\r\n        terraform provider version: 1.1.4\r\ncyrilgdn/postgresql@~> 1.22.0 (LOCAL)\r\n        terraform provider version: 1.22.0\r\nMastercard/restapi@~> 1.19.1 (LOCAL)\r\n        terraform provider version: 1.19.1\r\ncdktf-cdktf-provider-cloudflare (PREBUILT)\r\n        terraform provider version: 4.33.0 \r\n        prebuilt provider version: 11.11.0\r\n        cdktf version: ^0.20.0\r\ncdktf-cdktf-provider-google (PREBUILT)\r\n        terraform provider version: 5.29.1 \r\n        prebuilt provider version: 13.18.1\r\n        cdktf version: ^0.20.0\r\ncdktf-cdktf-provider-helm (PREBUILT)\r\n        terraform provider version: 2.13.2 \r\n        prebuilt provider version: 10.1.2\r\n        cdktf version: ^0.20.0\r\ncdktf-cdktf-provider-http (PREBUILT)\r\n        terraform provider version: 3.4.3 \r\n        prebuilt provider version: 9.0.2\r\n        cdktf version: ^0.20.0\r\ncdktf-cdktf-provider-kubernetes (PREBUILT)\r\n        terraform provider version: 2.30.0 \r\n        prebuilt provider version: 11.5.0\r\n        cdktf version: ^0.20.0\r\ncdktf-cdktf-provider-local (PREBUILT)\r\n        terraform provider version: 2.5.1 \r\n        prebuilt provider version: 10.1.0\r\n        cdktf version: ^0.20.0\r\ncdktf-cdktf-provider-null (PREBUILT)\r\n        terraform provider version: 3.2.2 \r\n        prebuilt provider version: 10.0.0\r\n        cdktf version: ^0.20.0\r\ncdktf-cdktf-provider-random (PREBUILT)\r\n        terraform provider version: 3.6.2 \r\n        prebuilt provider version: 11.0.2\r\n        cdktf version: ^0.20.0\r\ncdktf-cdktf-provider-template (PREBUILT)\r\n        terraform provider version: 2.2.0 \r\n        prebuilt provider version: 10.0.1\r\n        cdktf version: ^0.20.0\r\ncdktf-cdktf-provider-time (PREBUILT)\r\n        terraform provider version: 0.11.2 \r\n        prebuilt provider version: 10.1.1\r\n        cdktf version: ^0.20.0\r\ncdktf-cdktf-provider-tls (PREBUILT)\r\n        terraform provider version: 4.0.5 \r\n        prebuilt provider version: 10.0.0\r\n        cdktf version: ^0.20.0\r\n\r\n### Providers\r\n\r\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\r\n‚îÇ Provider Name         ‚îÇ Provider Version ‚îÇ CDKTF   ‚îÇ Constraint ‚îÇ Package Name                    ‚îÇ Package Version ‚îÇ\r\n‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\r\n‚îÇ datastax/astra        ‚îÇ 2.3.4            ‚îÇ         ‚îÇ ~> 2.3     ‚îÇ                                 ‚îÇ                 ‚îÇ\r\n‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\r\n‚îÇ Ackers-BUD/http2b64   ‚îÇ 1.0.3            ‚îÇ         ‚îÇ ~> 1.0.2   ‚îÇ                                 ‚îÇ                 ‚îÇ\r\n‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\r\n‚îÇ Ackers-BUD/zip2b64    ‚îÇ 1.0.3            ‚îÇ         ‚îÇ ~> 1.0.2   ‚îÇ                                 ‚îÇ                 ‚îÇ\r\n‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\r\n‚îÇ castai/castai         ‚îÇ 6.2.7            ‚îÇ         ‚îÇ ~> 6.2.5   ‚îÇ                                 ‚îÇ                 ‚îÇ\r\n‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\r\n‚îÇ thisisbud/sql         ‚îÇ 1.0.0            ‚îÇ         ‚îÇ ~> 1.0.0   ‚îÇ                                 ‚îÇ                 ‚îÇ\r\n‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\r\n‚îÇ grafana/grafana       ‚îÇ 1.36.1           ‚îÇ         ‚îÇ ~> 1.36.1  ‚îÇ                                 ‚îÇ                 ‚îÇ\r\n‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\r\n‚îÇ 1Password/onepassword ‚îÇ 1.1.4            ‚îÇ         ‚îÇ ~> 1.1.4   ‚îÇ                                 ‚îÇ                 ‚îÇ\r\n‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\r\n‚îÇ cyrilgdn/postgresql   ‚îÇ 1.22.0           ‚îÇ         ‚îÇ ~> 1.22.0  ‚îÇ                                 ‚îÇ                 ‚îÇ\r\n‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\r\n‚îÇ Mastercard/restapi    ‚îÇ 1.19.1           ‚îÇ         ‚îÇ ~> 1.19.1  ‚îÇ                                 ‚îÇ                 ‚îÇ\r\n‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\r\n‚îÇ cloudflare/cloudflare ‚îÇ 4.33.0           ‚îÇ ^0.20.0 ‚îÇ            ‚îÇ cdktf-cdktf-provider-cloudflare ‚îÇ 11.11.0         ‚îÇ\r\n‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\r\n‚îÇ google                ‚îÇ 5.29.1           ‚îÇ ^0.20.0 ‚îÇ            ‚îÇ cdktf-cdktf-provider-google     ‚îÇ 13.18.1         ‚îÇ\r\n‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\r\n‚îÇ helm                  ‚îÇ 2.13.2           ‚îÇ ^0.20.0 ‚îÇ            ‚îÇ cdktf-cdktf-provider-helm       ‚îÇ 10.1.2          ‚îÇ\r\n‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\r\n‚îÇ http                  ‚îÇ 3.4.3            ‚îÇ ^0.20.0 ‚îÇ            ‚îÇ cdktf-cdktf-provider-http       ‚îÇ 9.0.2           ‚îÇ\r\n‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\r\n‚îÇ kubernetes            ‚îÇ 2.30.0           ‚îÇ ^0.20.0 ‚îÇ            ‚îÇ cdktf-cdktf-provider-kubernetes ‚îÇ 11.5.0          ‚îÇ\r\n‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\r\n‚îÇ local                 ‚îÇ 2.5.1            ‚îÇ ^0.20.0 ‚îÇ            ‚îÇ cdktf-cdktf-provider-local      ‚îÇ 10.1.0          ‚îÇ\r\n‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\r\n‚îÇ null                  ‚îÇ 3.2.2            ‚îÇ ^0.20.0 ‚îÇ            ‚îÇ cdktf-cdktf-provider-null       ‚îÇ 10.0.0          ‚îÇ\r\n‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\r\n‚îÇ random                ‚îÇ 3.6.2            ‚îÇ ^0.20.0 ‚îÇ            ‚îÇ cdktf-cdktf-provider-random     ‚îÇ 11.0.2          ‚îÇ\r\n‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\r\n‚îÇ template              ‚îÇ 2.2.0            ‚îÇ ^0.20.0 ‚îÇ            ‚îÇ cdktf-cdktf-provider-template   ‚îÇ 10.0.1          ‚îÇ\r\n‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\r\n‚îÇ time                  ‚îÇ 0.11.2           ‚îÇ ^0.20.0 ‚îÇ            ‚îÇ cdktf-cdktf-provider-time       ‚îÇ 10.1.1          ‚îÇ\r\n‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\r\n‚îÇ tls                   ‚îÇ 4.0.5            ‚îÇ ^0.20.0 ‚îÇ            ‚îÇ cdktf-cdktf-provider-tls        ‚îÇ 10.0.0          ‚îÇ\r\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\r\n\r\n### Gist\r\n\r\n_No response_\r\n\r\n### Possible Solutions\r\n\r\n_No response_\r\n\r\n### Workarounds\r\n\r\n_No response_\r\n\r\n### Anything Else?\r\n\r\n_No response_\r\n\r\n### References\r\n\r\n_No response_\r\n\r\n### Help Wanted\r\n\r\n- [ ] I'm interested in contributing a fix myself\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc6Ezo7f",
        "author": {
          "login": "mutahhir"
        },
        "authorAssociation": "MEMBER",
        "body": "This function was introduced in Terraform 1.8 and is currently not supported. https://developer.hashicorp.com/terraform/language/functions/issensitive  ",
        "createdAt": "2024-07-15T10:01:46Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/3660#issuecomment-2228129503",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc6FFQ7B",
        "author": {
          "login": "josh-thisisbud"
        },
        "authorAssociation": "NONE",
        "body": "I may have missed this, but if you're not targeting the current TF language version, where would I find the one you are targeting?",
        "createdAt": "2024-07-17T08:35:55Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/3660#issuecomment-2232749761",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc6Qekst",
        "author": {
          "login": "so0k"
        },
        "authorAssociation": "NONE",
        "body": "There's a lot of functions missing, you can clone locally and run \r\n\r\nhttps://github.com/hashicorp/terraform-cdk/blob/0642f23ad210c4c2fe740dbbccd4eeafb6a24478/tools/generate-function-bindings/scripts/fetch-metadata.ts#L16\r\n\r\nupdating `functions.json`",
        "createdAt": "2024-10-19T14:51:49Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/3660#issuecomment-2423933741",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2024-06-27T10:50:32Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "LA_kwDODd1Amc7nQOIC",
        "name": "feature/terraform-functions",
        "description": "",
        "color": "A1C1CD"
      }
    ],
    "milestone": null,
    "number": 3660,
    "title": "Terraform Functions: issensitive function appears to be missing",
    "updatedAt": "2024-10-19T14:51:50Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjM4NjAwMQ==",
      "is_bot": false,
      "login": "giseburt",
      "name": "Rob Giseburt"
    },
    "body": "### Expected Behavior\r\n\r\nWith this code:\r\n```terraform\r\nlocals {\r\n  baz_var  = \"baz_value\"\r\n  blah_var = \"blah_value\"\r\n  url_var = \"https://github.com/${local.baz_var}/example/${local.blah_var}${local.baz_var}/\"\r\n}\r\n\r\noutput \"terraform\" {\r\n  value = local.url_var\r\n}\r\n```\r\n\r\n`pbpaste | npx cdktf convert` **should** yield:\r\n\r\n```ts\r\nimport { Construct } from \"constructs\";\r\nimport { TerraformOutput } from \"cdktf\";\r\nclass MyConvertedCode extends Construct {\r\n  constructor(scope: Construct, name: string) {\r\n    super(scope, name);\r\n    const bazVar = \"baz_value\";\r\n    const blahVar = \"blah_value\";\r\n    // wrong\r\n    // const urlVar = \"https://github.com/${\" + bazVar + \"}/example/${\" + blahVar + \"${\" + bazVar + \"}/\";\r\n    // right\r\n    const urlVar = \"https://github.com/\" + bazVar + \"/example/\" + blahVar + \"\" + bazVar + \"/\";\r\n    // right (2) - remove redundant + \"\" + \r\n    // const urlVar = \"https://github.com/\" + bazVar + \"/example/\" + blahVar + bazVar + \"/\";\r\n    // right (3) - typescript only - note backticks\r\n    // const urlVar = `https://github.com/${bazVar}/example/${blahVar}${bazVar}/`;\r\n    new TerraformOutput(this, \"terraform\", {\r\n      value: urlVar,\r\n    });\r\n  }\r\n}\r\n```\r\n\r\nWhere `urlValue` would have a generated result equivalent to:\r\n\r\n```ts\r\n// ‚úÖ\r\nconst urlVar = \"https://github.com/baz_value/example/blah_valuebaz_value/\";\r\n```\r\n\r\n### Actual Behavior\r\n\r\nWhat we get now:\r\n\r\n```ts\r\nimport { Construct } from \"constructs\";\r\nimport { TerraformOutput } from \"cdktf\";\r\nclass MyConvertedCode extends Construct {\r\n  constructor(scope: Construct, name: string) {\r\n    super(scope, name);\r\n    const bazVar = \"baz_value\";\r\n    const blahVar = \"blah_value\";\r\n    const urlVar =\r\n      \"https://github.com/${\" +\r\n      bazVar +\r\n      \"}/example/${\" +\r\n      blahVar +\r\n      \"${\" +\r\n      bazVar +\r\n      \"}/\";\r\n    new TerraformOutput(this, \"terraform\", {\r\n      value: urlVar,\r\n    });\r\n  }\r\n}\r\n```\r\n\r\nIf I remove the extra line endings on the problem line, we get:\r\n\r\n```ts\r\n// ‚ùå\r\nconst urlVar = \"https://github.com/${\" + bazVar + \"}/example/${\" + blahVar + \"${\" + bazVar + \"}/\";\r\n```\r\n\r\nWhich means the generated result would be the equivalent of:\r\n\r\n```ts\r\n// ‚ö†Ô∏è\r\nconst urlVar = \"https://github.com/${baz_value}/example/${blah_value${baz_value}/\";\r\n//                                 ^^         ^         ^^          ^^         ^\r\n//                                 ||         |         ||          ||         |\r\n```\r\n\r\nErrors highlighted:\r\n- `${` and `}` surrounding the intended **value** - not a token - these should not be here\r\n  - If those values where Tokens, then they would put in their own `${` and `}` on output\r\n- In the `${blah_value${baz_value}` case there's a missing `}` (which we don't want anyway)\r\n\r\n\r\n\r\n### Steps to Reproduce\r\n\r\nSee Expected Behavior üëÜüèª\r\n\r\n### Versions\r\n\r\nlanguage: typescript\r\ncdktf-cli: 0.20.8\r\nnode: v20.13.1\r\nterraform: 1.7.5\r\narch: arm64\r\nos: darwin 23.5.0\r\n\r\n\r\n### Providers\r\n\r\nirrelevant in this case\r\n\r\n### Gist\r\n\r\nhttps://gist.github.com/giseburt/7d414af1fc583b844a5eb5f0052c7859\r\n\r\n### Possible Solutions\r\n\r\nAdjust how strings are converted to typescript (possibly other languages) - if the value is a token, then the `${`...`}` will be put in by the token interpolation on output, they should NOT be in the input.\r\n\r\n### Workarounds\r\n\r\n*none* - post-processing of the converted output, complicated by the fact that the `}` is occasionally lost\r\n\r\n### Anything Else?\r\n\r\nThis might be Typescript only, I have not tested to be sure\r\n\r\n### References\r\n\r\n_No response_\r\n\r\n### Help Wanted\r\n\r\n- [X] I'm interested in contributing a fix myself\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n",
    "comments": [],
    "createdAt": "2024-07-19T16:31:54Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgzNDMx",
        "name": "priority/important-longterm",
        "description": "Medium priority, to be worked on within the following 1-2 business quarters.",
        "color": "5CC9C1"
      },
      {
        "id": "MDU6TGFiZWwzMTg1Mzg1NTQ2",
        "name": "feature/convert",
        "description": "",
        "color": "d93f0b"
      }
    ],
    "milestone": null,
    "number": 3674,
    "title": "`cdktf convert` mangles string interpolation",
    "updatedAt": "2024-07-29T07:54:12Z"
  }
]
