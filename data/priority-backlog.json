[
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjEzNjc4OQ==",
      "is_bot": false,
      "login": "skorfmann",
      "name": "Sebastian Korfmann"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n* Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n* Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### cdktf & Language Versions\r\n\r\n- ALL\r\n\r\n### Affected Resource(s)\r\n\r\n- Modules\r\n\r\n### Debug Output\r\n\r\nE.g the AWS VPC Module:\r\n\r\n```ts\r\npublic get publicSubnetsOutput(): string {\r\n    return this.interpolationForOutput('public_subnets')\r\n  }\r\n```\r\n\r\n### Expected Behavior\r\n\r\nThis should be treated as list of strings\r\n\r\n### Actual Behavior\r\n\r\nIt's treated as simple string\r\n\r\n### Steps to Reproduce\r\n\r\nImport VPC module and reference the output\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc43Zucw",
        "author": {
          "login": "orendain"
        },
        "authorAssociation": "NONE",
        "body": "In the meantime, are there workarounds that are expected to work?\r\n\r\n@jsteinich wrote in #606:\r\n> You could try using `Token.asList` on the module output to workaround.\r\n\r\nIn my case, I have an output that should be recognized as an object w/ a couple of attributes.  I'm struggling to have it recognized as such.   Using `Token().as_any` will still result in `AttributeError: '<class 'cdktf._IResolvableProxy'>' object has no attribute 'my_attribute'` when synthesizing.",
        "createdAt": "2021-09-28T17:54:12Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/287#issuecomment-929490736",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc43a5sd",
        "author": {
          "login": "jsteinich"
        },
        "authorAssociation": "COLLABORATOR",
        "body": "> In my case, I have an output that should be recognized as an object w/ a couple of attributes. I'm struggling to have it recognized as such. Using `Token().as_any` will still result in `AttributeError: '<class 'cdktf._IResolvableProxy'>' object has no attribute 'my_attribute'` when synthesizing.\r\n\r\nYou could manually construct hcl and use escape hatches, but probably easier to try to use `Fn.lookup`. Should just be able to pass the output directly, the name of the attribute, and a default value to the function.",
        "createdAt": "2021-09-29T03:30:50Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/287#issuecomment-929798941",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5RiMnm",
        "author": {
          "login": "c0deaddict"
        },
        "authorAssociation": "NONE",
        "body": "I also encounter this bug using Python with the CDKTF and the VPC module. Is there any known workaround for Python? I tried `typing.cast(list[str], self.vpc.private_subnet_outputs)` but that doesn't change anything.\r\n\r\n*Update* Found it! `Token.as_list(self.vpc.private_subnet_outputs)` seems to work",
        "createdAt": "2022-12-30T13:24:45Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/287#issuecomment-1367919078",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5fbExY",
        "author": {
          "login": "josh-thisisbud"
        },
        "authorAssociation": "NONE",
        "body": "This sort of thing needs to be documented.",
        "createdAt": "2023-06-21T14:22:04Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 4
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/287#issuecomment-1600932952",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc6CTzz0",
        "author": {
          "login": "starbuggx"
        },
        "authorAssociation": "NONE",
        "body": "Token.as_list is working with a list from _output, but when I tried to get a target group arn from target_groups_output, the original output is string, but after I tried Token.as_list, Token.as_string_map(dict), I still cannot get the arn.",
        "createdAt": "2024-06-24T10:34:35Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/287#issuecomment-2186231028",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2020-08-06T13:21:39Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzk3",
        "name": "help wanted",
        "description": "Community contributions welcome as the core team is unlikely to work on this soon",
        "color": "008672"
      },
      {
        "id": "MDU6TGFiZWwyMjE3NjIyNTkw",
        "name": "modules",
        "description": "",
        "color": "2ffc8f"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "LA_kwDODd1Amc8AAAABH924aQ",
        "name": "bug/has-workaround",
        "description": "A bug with a workaround (may not be elegant)",
        "color": "9e202d"
      }
    ],
    "milestone": null,
    "number": 287,
    "title": "All Module Outputs Typed as String",
    "updatedAt": "2024-06-24T10:34:36Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjEzNjc4OQ==",
      "is_bot": false,
      "login": "skorfmann",
      "name": "Sebastian Korfmann"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n* Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n* Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\nFor some constructs / resources allowing custom type coercions could be very useful to enable an idiomatic usage.\r\n\r\nFor `TerraformLocals` I think it would make sense to add the following to the Typescript classes.\r\n\r\n```ts\r\n    public toString(): string {\r\n        return this.asString\r\n    }\r\n```\r\n\r\nThis would allow to use it like `my-first-table-${local}` rather than `my-first-table-${local.asString}`.\r\n\r\nThe issue is, that this would only work for Typescript, but none of the other target languages. Python would look like this: `\"my-first-sns-topic-<cdktf.TerraformLocal object at 0x10cd45190>\"`\r\n\r\nIt doesn't look like, that Jsii is handling this automatically if there's `toString()` function defined. Defining the required method for Python in the Typescript class manually only works as `@internal` and therefore wouldn't be compiled via jsii. \r\n\r\n```ts\r\n /** @internal */\r\n    public __str__(): string {\r\n        return this.asString\r\n    }\r\n```\r\n\r\nI think there are more cases where this becomes relevant. In the best case this would be addressed in Jsii directly.\r\n\r\n### References\r\n\r\n- https://github.com/aws/jsii/issues/380\r\n- https://github.com/hashicorp/terraform-cdk/pull/357#pullrequestreview-483129573",
    "comments": [],
    "createdAt": "2020-09-07T08:25:47Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwyMjI4Mzg3NjY3",
        "name": "cdktf",
        "description": "",
        "color": "fccac4"
      },
      {
        "id": "MDU6TGFiZWwyMjQ2NzM3OTc1",
        "name": "upstream/jsii",
        "description": "Pending upstream work on JSII",
        "color": "f9a2cf"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      }
    ],
    "milestone": null,
    "number": 361,
    "title": "Allow Custom String Representation of Constructs",
    "updatedAt": "2023-01-10T15:44:21Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjEzMjEyNzY=",
      "is_bot": false,
      "login": "damienpontifex",
      "name": "Damien Pontifex"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n* Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n* Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\nSearching around and I couldn't find an equivalent for [Current Workspace Interpolation](https://www.terraform.io/docs/state/workspaces.html#current-workspace-interpolation) in terraform-cdk. Currently we use this in terraform for environment suffixes and would be nice to transfer that capability across to our usage with cdktf\r\n",
    "comments": [
      {
        "id": "MDEyOklzc3VlQ29tbWVudDY5NDk1NjQ1Ng==",
        "author": {
          "login": "cmclaughlin"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "I was chatting with @jsteinich about this yesterday... I was going to open an issue this morning, but you beat me to it :)\r\n\r\nNot sure if you're seeing the exact same thing as me, but there are situations where the cdktf-cli hangs when Terraform prompts about workspaces. Here's an example:\r\n\r\n```\r\n$ CDKTF_LOG_LEVEL=DEBUG TF_WORKSPACE=qa cdktf deploy\r\n[2020-09-17T15:40:32.112] [DEBUG] default - Terraform v0.12.29\r\n\r\n[2020-09-17T15:40:32.578] [DEBUG] default - + provider.aws v2.70.0\r\n\r\n[2020-09-17T15:40:32.579] [DEBUG] default -\r\nYour version of Terraform is out of date! The latest version\r\nis 0.13.2. You can update by downloading from https://www.terraform.io/downloads.html\r\n\r\n‚†º synthesizing¬†...\r\n[2020-09-17T15:40:34.689] [DEBUG] default - REGION is not set. Defaulting to \"us-east-1\".\r\n\r\n‚†π initializing¬†my-stack-qa-us-east-1...\r\n[2020-09-17T15:40:35.369] [DEBUG] default - 2020/09/17 15:40:35 [DEBUG] Using modified User-Agent: Terraform/0.12.29 cdktf/0.0.17 (+https://github.com/hashicorp/terraform-cdk)\r\n\r\n2020/09/17 15:40:35 [DEBUG] Using modified User-Agent: Terraform/0.12.29 cdktf/0.0.17 (+https://github.com/hashicorp/te‚†∏ initializing¬†my-stack-qa-us-east-1...\r\n[2020-09-17T15:40:35.389] [DEBUG] default -\r\n\r\n[2020-09-17T15:40:35.389] [DEBUG] default - Initializing the backend...\r\n‚†∏ initializing¬†my-stack-qa-us-east-1...\r\n[2020-09-17T15:40:37.103] [DEBUG] default -\r\n\r\n[2020-09-17T15:40:37.103] [DEBUG] default - The currently selected workspace (qa) does not exist.\r\n  This is expected behavior when the selected workspace did not have an\r\n\r\n[2020-09-17T15:40:37.103] [DEBUG] default -   existing non-empty state. Please enter a number to select a workspace:\r\n\r\n  1. default\r\n\r\n[2020-09-17T15:40:37.103] [DEBUG] default -\r\n‚†¥ initializing¬†my-stack-qa-us-east-1...\r\n# This hangs...\r\n```\r\n\r\nSorry to conflate these, but I think this is generally related to another problem I've seen initializing state with `cdktf deploy` - if there are changes to the state, Terraform prompts and cdktf-cli hangs on this too:\r\n\r\n\r\n```\r\n[2020-09-17T15:39:22.236] [DEBUG] default - Do you want to copy existing state to the new backend?\r\n\r\n[2020-09-17T15:39:22.236] [DEBUG] default -   Pre-existing state was found while migrating the previous \"s3\" backend to the\r\n\r\n[2020-09-17T15:39:22.236] [DEBUG] default -   newly configured \"s3\" backend. No existing state was found in the newly\r\n\r\n[2020-09-17T15:39:22.236] [DEBUG] default -   configured \"s3\" backend. Do you want to copy this state to the new \"s3\"\r\n\r\n[2020-09-17T15:39:22.236] [DEBUG] default -   backend? Enter \"yes\" to copy and \"no\" to start with an empty state.\r\n# This hangs\r\n```\r\n",
        "createdAt": "2020-09-18T16:11:57Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/376#issuecomment-694956456",
        "viewerDidAuthor": false
      },
      {
        "id": "MDEyOklzc3VlQ29tbWVudDY5NTA1NDQ3MQ==",
        "author": {
          "login": "skorfmann"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "@cmclaughlin \r\n\r\n> Sorry to conflate these, but I think this is generally related to another problem I've seen initializing state with `cdktf deploy` - if there are changes to the state, Terraform prompts and cdktf-cli hangs on this too:\r\n\r\nHm, I thought `-input=false` should have fixed these kind of issues (see here https://github.com/hashicorp/terraform-cdk/pull/343)\r\n\r\nWhich version are you running? ",
        "createdAt": "2020-09-18T19:49:29Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/376#issuecomment-695054471",
        "viewerDidAuthor": false
      },
      {
        "id": "MDEyOklzc3VlQ29tbWVudDY5NTA1NTgxMg==",
        "author": {
          "login": "skorfmann"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "@damienpontifex \r\n\r\n> Searching around and I couldn't find an equivalent for [Current Workspace Interpolation](https://www.terraform.io/docs/state/workspaces.html#current-workspace-interpolation) in terraform-cdk. Currently we use this in terraform for environment suffixes and would be nice to transfer that capability across to our usage with cdktf\r\n\r\nThe interpolation itself should just work:\r\n\r\n```ts\r\nnew Instance(this, 'aws instance', {\r\n  name:  \"web - ${terraform.workspace}\"\r\n})\r\n```\r\n\r\nCould you elaborate on the use-case you're trying to solve?",
        "createdAt": "2020-09-18T19:52:58Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/376#issuecomment-695055812",
        "viewerDidAuthor": false
      },
      {
        "id": "MDEyOklzc3VlQ29tbWVudDY5NTA1NjA0MQ==",
        "author": {
          "login": "cmclaughlin"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "Debug output shows I was using:\r\n\r\n```\r\n[DEBUG] Using modified User-Agent: Terraform/0.12.29 cdktf/0.0.17\r\n```\r\n\r\n",
        "createdAt": "2020-09-18T19:53:28Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/376#issuecomment-695056041",
        "viewerDidAuthor": false
      },
      {
        "id": "MDEyOklzc3VlQ29tbWVudDY5NTA2NTU4Mg==",
        "author": {
          "login": "skorfmann"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "> Debug output shows I was using:\r\n> \r\n> ```\r\n> [DEBUG] Using modified User-Agent: Terraform/0.12.29 cdktf/0.0.17\r\n> ```\r\n\r\nHm, interesting. Well, that's something to investigate then, but it's probably a separate issue?",
        "createdAt": "2020-09-18T20:16:09Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/376#issuecomment-695065582",
        "viewerDidAuthor": false
      },
      {
        "id": "MDEyOklzc3VlQ29tbWVudDY5NTc1Mjk2Mg==",
        "author": {
          "login": "damienpontifex"
        },
        "authorAssociation": "NONE",
        "body": "@skorfmann I understand the interpolation - maybe it's just that I couldn't find the `terraform` variable/global as appropriate to access this property as `${terraform.workspace}`.\r\n\r\nMy workaround was that I was setting up the `RemoteBackend` as below and if custom workspace needing run it as `WORKSPACE=ponti-dev cdktf deploy`\r\n\r\n```typescript\r\nconst workspaceName = process.env.WORKSPACE || 'dev'\r\nnew Instance(this, 'aws instance', {\r\n  name:  \"web - ${workspaceName}\"\r\n})\r\nnew RemoteBackend(stack, {\r\n  organization: 'pontifex',\r\n  workspaces: {\r\n    name: workspaceName\r\n  },\r\n});\r\n```\r\n\r\nThen I can reuse the `workspaceName` local. This works fine for our use cases. Probably I was looking to how some of our existing code would translate.\r\n\r\nJust seeing if this was the current recommended? Or similar to how we would do `terraform workspace select ponti-dev && terraform apply` is there an equivalent with `cdktf`",
        "createdAt": "2020-09-20T06:53:14Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/376#issuecomment-695752962",
        "viewerDidAuthor": false
      },
      {
        "id": "MDEyOklzc3VlQ29tbWVudDY5NTc5NTQ2OQ==",
        "author": {
          "login": "jsteinich"
        },
        "authorAssociation": "COLLABORATOR",
        "body": "@damienpontifex `TF_WORKSPACE` is supported by Terraform, but as @cmclaughlin noted, there are currently some issues with it.",
        "createdAt": "2020-09-20T14:46:24Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/376#issuecomment-695795469",
        "viewerDidAuthor": false
      },
      {
        "id": "MDEyOklzc3VlQ29tbWVudDcwMzYwNDc5OQ==",
        "author": {
          "login": "skorfmann"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "@damienpontifex what you're looking for is 1st class support Terraform workspaces in `cdktf`?",
        "createdAt": "2020-10-05T12:39:55Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 2
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/376#issuecomment-703604799",
        "viewerDidAuthor": false
      },
      {
        "id": "MDEyOklzc3VlQ29tbWVudDcwNDYxNjEyNQ==",
        "author": {
          "login": "damienpontifex"
        },
        "authorAssociation": "NONE",
        "body": "Something like that @skorfmann. \r\nWe use workspace naming to differentiate developer environments from UAT and prod etc so use the naming for unique suffixes across resources. So we could adapt the `terraform.workspace` variable that's available in HCL terraform to something different here, just looking to see what was the recommended approach in Typescript. It might be that we do something like `const workspaceName = process.env.TF_WORKSPACE` if that's the recommended approach with `cdktf`",
        "createdAt": "2020-10-07T00:05:51Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/376#issuecomment-704616125",
        "viewerDidAuthor": false
      },
      {
        "id": "MDEyOklzc3VlQ29tbWVudDg0NjQwMDM1MQ==",
        "author": {
          "login": "nick0lay"
        },
        "authorAssociation": "NONE",
        "body": "We are using the following approach to access workspace in the code:\r\n```\r\nconst workspace = Token.asString(\"${terraform.workspace}\");\r\nnew Instance(this, `${workspace}-app-instance`, {\r\n  name:  \"Application instance\"\r\n})\r\n```",
        "createdAt": "2021-05-22T12:19:03Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 8
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/376#issuecomment-846400351",
        "viewerDidAuthor": false
      },
      {
        "id": "MDEyOklzc3VlQ29tbWVudDg0NzQ4NjQzMg==",
        "author": {
          "login": "jsteinich"
        },
        "authorAssociation": "COLLABORATOR",
        "body": "This would be pretty simple to add after #525 is completed.",
        "createdAt": "2021-05-25T02:39:13Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/376#issuecomment-847486432",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc42jRDg",
        "author": {
          "login": "javier-caylent"
        },
        "authorAssociation": "NONE",
        "body": "> We are using the following approach to access workspace in the code:\r\n> \r\n> ```\r\n> const workspace = Token.asString(\"${terraform.workspace}\");\r\n> new Instance(this, `${workspace}-app-instance`, {\r\n>   name:  \"Application instance\"\r\n> })\r\n> ```\r\n\r\nHi, on which folder are you executing the cdk synth command?, I mean in the cdktf.out folder or if you have an example about the folder structure to have this approach, I tried but the workspace that I'm getting is default",
        "createdAt": "2021-09-08T12:56:19Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/376#issuecomment-915214560",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc42lNlR",
        "author": {
          "login": "jsteinich"
        },
        "authorAssociation": "COLLABORATOR",
        "body": "> Hi, on which folder are you executing the cdk synth command?, I mean in the cdktf.out folder or if you have an example about the folder structure to have this approach, I tried but the workspace that I'm getting is default\r\n\r\n`cdktf synth` won't actually know the workspace. It will just generate access to the interpolation. `cdktf diff/deploy` will be able to access it (assuming the workspace already exists), but it can be a bit tricky to setup. The simplest approach is probably using the `TF_WORKSPACE` environment variable (if workspace exists from elsewhere), or running Terraform commands directly if the workspace doesn't exist. Note that when running Terraform commands directly, you'll need to navigate to the specific stack directory.\r\n\r\nI think this is something that would be good to have better built in support for, but I'm not aware of any planned work as of yet.\r\n@javier-caylent how are you hoping to use workspaces?",
        "createdAt": "2021-09-09T03:08:14Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/376#issuecomment-915724625",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc42l2Vb",
        "author": {
          "login": "nick0lay"
        },
        "authorAssociation": "NONE",
        "body": "> > We are using the following approach to access workspace in the code:\r\n> > ```\r\n> > const workspace = Token.asString(\"${terraform.workspace}\");\r\n> > new Instance(this, `${workspace}-app-instance`, {\r\n> >   name:  \"Application instance\"\r\n> > })\r\n> > ```\r\n> \r\n> Hi, on which folder are you executing the cdk synth command?, I mean in the cdktf.out folder or if you have an example about the folder structure to have this approach, I tried but the workspace that I'm getting is default\r\n\r\nHi @javier-caylent! Since CDKTF generate stack to run it with terraform it's important in which folder to run command to switch workspace, for example `terraform workspace new my_workspace`. Terraform put generated stacks in `cdktf.out/stacks`. For example if you have stack `my_stack` you can find generated assets in `cdktf.out/stacks/my_stack`, hence if you want to change workspace for `my_stack` you should navigate to `cdktf.out/stacks/my_stack` and switch to required workspace in this folder. After changing workspace you should see `cdktf.out/stacks/my_stack/.terraform/environment` following file created.\r\n\r\nThe full flow:\r\n1. `cdktf synth` - generate stack\r\n2. `cd cdktf.out/stacks/my_stack` - navigate to stack folder\r\n3. `terraform workspace new my_workspace` - switch to required workspace\r\n4. `cdktf deploy my_stack`\r\n\r\n",
        "createdAt": "2021-09-09T08:51:14Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "HEART",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/376#issuecomment-915891547",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc42mtoR",
        "author": {
          "login": "javier-caylent"
        },
        "authorAssociation": "NONE",
        "body": "Awesome, You help me a lot with this information. Thank you very much!!! @nick0lay. ",
        "createdAt": "2021-09-09T13:52:18Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/376#issuecomment-916118033",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc42o95z",
        "author": {
          "login": "nick0lay"
        },
        "authorAssociation": "NONE",
        "body": "> Awesome, You help me a lot with this information. Thank you very much!!! @nick0lay.\r\n\r\nWelcome!\r\n\r\nThere is one more thing which you might be aware of. Even though that you have access to workspace in `cdktf`, workspaces works differently in `terraform` and `cdktf` in terms of state isolation.\r\n\r\n**Terrafrom**\r\nIf you switch workspace to `my_workspace` terraform will save state to `terraform.tfstate.d/my_workspace/terraform.tfstate` it you switch workspace to  `my_new_workspace` hence new state will be saved to `project_root/terraform.tfstate.d/my_new_workspace/terraform.tfstate`\r\n\r\n**CDKTF**\r\nFor this case workspaces works a bit differently. If you switch workspace you will be able to see folder `project_root/cdktf.out/stacks/cdktf_example/terraform.tfstate.d/my_workspace` but `terraform.tfstate` won't be there. Instead `cdktf` create it in the following place `project_root/terraform.cdktf_example.tfstate` where `cdktf_example` is stack name.\r\n\r\n```\r\nconst app = new App();\r\nnew MyStack(app, \"cdktf_example\");\r\napp.synth();\r\n```\r\n\r\nHence when you use `cdktf` it's better separate states by creating different stacks rather than use workspaces. For example:\r\n\r\n```\r\nconst app = new App();\r\nnew MyStack(app, \"cdktf_example_stack\");\r\nnew MyStack(app, \"cdktf_example_test_stack\");\r\napp.synth();\r\n```\r\n\r\nBut switching workspace still might be useful if you use `cdktf` with `terraform` modules which rely on workspace variable `${terraform.workspace}` inside it.",
        "createdAt": "2021-09-10T07:56:10Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/376#issuecomment-916708979",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc42pskH",
        "author": {
          "login": "javier-caylent"
        },
        "authorAssociation": "NONE",
        "body": "Hi @nick0lay\r\n\r\nhmm, got it, I think that we can \"emulate\" the ${terraform.workspace}, sending the environment for each stack and get the variables values in the same way.\r\n\r\nI'll test it and see, how works this approach and the s3 remote state (S3Backend) and where will be store the tfstate file for each stack.\r\n\r\n```\r\nfrom imports.my_compute_module import MyComputeModule\r\nfrom variables import Variables\r\n\r\nclass MyStackConfig(object):\r\n    def __init__(self, environment: str, region: str):\r\n        self.environment = environment\r\n        self.region = region \r\n\r\nclass MyStack(TerraformStack):\r\n    def __init__(self, scope: Construct, ns: str, config: MyStackConfig):\r\n        myec2 = MyComputeModule(self,\r\n            'my-ec2', \r\n            ami = Variables.get(\"ami\").get(config.environment),\r\n            instance_type = Variables.get(\"instance_type\").get(config.environment),\r\n            vpc_security_group_ids = Variables.get(\"vpc_security_group_ids\").get(config.environment),\r\n            subnet_id = Variables.get(\"vpc\").get(\"public_subnets_ids\").get(config.environment),\r\n            key_name = Variables.get(\"key_name\").get(config.environment),\r\n            additional_tags = { \"Name\": f\"python-{config.environment}\" }\r\n        )\r\n\r\napp = App();\r\nMyStack(app, \"cdktf_example_dev\", {\"environment\": \"dev\", \"region\": \"us-east-1\"});\r\nMyStack(app, \"cdktf_example_stg\", {\"environment\": \"stg\", \"region\": \"us-east-1\"});\r\napp.synth();\r\n\r\n```",
        "createdAt": "2021-09-10T13:21:17Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/376#issuecomment-916900103",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2020-09-18T10:10:40Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMTM2MjkzOTA4",
        "name": "core-parity",
        "description": "Better experience in Terraform Core than CDKTF",
        "color": "1A80B6"
      },
      {
        "id": "MDU6TGFiZWwzMjM2NDcwNTQ1",
        "name": "feature/tokens",
        "description": "",
        "color": "58CF13"
      }
    ],
    "milestone": null,
    "number": 376,
    "title": "`terraform.workspace` equivalent",
    "updatedAt": "2023-01-10T15:46:39Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjIwODU0ODA1",
      "is_bot": false,
      "login": "cesarpball",
      "name": "C√©sar Prieto Ballester"
    },
    "body": "\r\n### Community Note\r\n\r\n* Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n* Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n\r\n### Description\r\n\r\nWould be nice if more examples are added to show the real potential of using CDK with Terraform like Python Inheritance \r\n\r\n\r\n\r\n### References\r\n\r\nNo references\r\n",
    "comments": [
      {
        "id": "MDEyOklzc3VlQ29tbWVudDcyOTcxMzEyMQ==",
        "author": {
          "login": "skorfmann"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "Do you have a specific case in mind?",
        "createdAt": "2020-11-18T14:25:57Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/432#issuecomment-729713121",
        "viewerDidAuthor": false
      },
      {
        "id": "MDEyOklzc3VlQ29tbWVudDcyOTkwNzg2Ng==",
        "author": {
          "login": "cmclaughlin"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "I have a base class that extends `TerraformStack` where I setup Terraform state on S3 with DynamoDB locking - that way I don't have to do it in every stack. The bucket/table name is company-specific, but I suppose that's the sort of thing that you'd like in an example?  ",
        "createdAt": "2020-11-18T19:36:32Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/432#issuecomment-729907866",
        "viewerDidAuthor": false
      },
      {
        "id": "MDEyOklzc3VlQ29tbWVudDczMDIxMjI0MQ==",
        "author": {
          "login": "cesarpball"
        },
        "authorAssociation": "NONE",
        "body": "> Do you have a specific case in mind?\r\n\r\nFor example, have the following structure:\r\n\r\n`Jenkinsfile  \r\nPipfile.lock \r\ncdktf.out    \r\nimports      \r\ntemplates\r\n  eks.py\r\n  iam.py\r\nPipfile     \r\ncdktf.json   \r\nhelp         \r\nmain.py`\r\n  \r\nThen in main.py\r\n\r\n`class MyStack (TerraformStack, EKSClass, IAMClass):`\r\n\r\nAnd use those class in the main one",
        "createdAt": "2020-11-19T08:27:12Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/432#issuecomment-730212241",
        "viewerDidAuthor": false
      },
      {
        "id": "MDEyOklzc3VlQ29tbWVudDczMDIxMjM4Ng==",
        "author": {
          "login": "cesarpball"
        },
        "authorAssociation": "NONE",
        "body": "> I have a base class that extends `TerraformStack` where I setup Terraform state on S3 with DynamoDB locking - that way I don't have to do it in every stack. The bucket/table name is company-specific, but I suppose that's the sort of thing that you'd like in an example?\r\n\r\nThat would be a great way to point on the Documentation!",
        "createdAt": "2020-11-19T08:27:29Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/432#issuecomment-730212386",
        "viewerDidAuthor": false
      },
      {
        "id": "MDEyOklzc3VlQ29tbWVudDc1MzAwNTU1MA==",
        "author": {
          "login": "bafonso"
        },
        "authorAssociation": "NONE",
        "body": "> I have a base class that extends `TerraformStack` where I setup Terraform state on S3 with DynamoDB locking - that way I don't have to do it in every stack. The bucket/table name is company-specific, but I suppose that's the sort of thing that you'd like in an example?\r\n\r\n@cmclaughlin  I'd love to use this.. as of now I am still struggling with doing this the normal way :-D",
        "createdAt": "2020-12-31T16:57:41Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/432#issuecomment-753005550",
        "viewerDidAuthor": false
      },
      {
        "id": "MDEyOklzc3VlQ29tbWVudDc1NDUyOTg4MQ==",
        "author": {
          "login": "teamdts"
        },
        "authorAssociation": "NONE",
        "body": "expected below two example\r\n1. create Iam User , role , policy ,group, download iam user access key , credential\r\n2. create Ec2 instance , assign role,policy ,upload ssh key/generate ssh key , download key\r\n",
        "createdAt": "2021-01-05T09:51:17Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/432#issuecomment-754529881",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc41UuuL",
        "author": {
          "login": "1oglop1"
        },
        "authorAssociation": "NONE",
        "body": "I've been also looking for examples with IAM because the AWS CDK IAM API is the main selling point for me. Especially when compared to what terraform/cloudformation offers right now.\r\nI was wondering if I could use libs from CDK that implement https://docs.aws.amazon.com/cdk/api/latest/docs/@aws-cdk_aws-iam.IGrantable.html instead of terraform specific libraries.",
        "createdAt": "2021-08-07T08:51:30Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/432#issuecomment-894626699",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc41btL1",
        "author": {
          "login": "jsteinich"
        },
        "authorAssociation": "COLLABORATOR",
        "body": "> I've been also looking for examples with IAM because the AWS CDK IAM API is the main selling point for me. Especially when compared to what terraform/cloudformation offers right now.\r\n> I was wondering if I could use libs from CDK that implement https://docs.aws.amazon.com/cdk/api/latest/docs/@aws-cdk_aws-iam.IGrantable.html instead of terraform specific libraries.\r\n\r\nNot at this time. It is possible to use [iam floyd](https://iam-floyd.readthedocs.io/en/v0.225.0/index.html) by adding a small wrapper to your code.",
        "createdAt": "2021-08-11T02:40:31Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/432#issuecomment-896455413",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc41imTA",
        "author": {
          "login": "1oglop1"
        },
        "authorAssociation": "NONE",
        "body": "> > I've been also looking for examples with IAM because the AWS CDK IAM API is the main selling point for me. Especially when compared to what terraform/cloudformation offers right now.\r\n> > I was wondering if I could use libs from CDK that implement https://docs.aws.amazon.com/cdk/api/latest/docs/@aws-cdk_aws-iam.IGrantable.html instead of terraform specific libraries.\r\n> \r\n> Not at this time. It is possible to use [iam floyd](https://iam-floyd.readthedocs.io/en/v0.225.0/index.html) by adding a small wrapper to your code.\r\n\r\nWow thank you, this is what I needed! I was hacking my own version with Pydantic but having someone who can dedicate the time developing this is great! ",
        "createdAt": "2021-08-13T07:51:53Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/432#issuecomment-898262208",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2020-11-18T11:51:37Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzgw",
        "name": "documentation",
        "description": "Improvements or additions to documentation",
        "color": "0075ca"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzky",
        "name": "good first issue",
        "description": "Good for newcomers",
        "color": "7057ff"
      },
      {
        "id": "MDU6TGFiZWwyMTEzNjU3MzA2",
        "name": "language/python",
        "description": "",
        "color": "5c2596"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4Mjg1",
        "name": "size/small",
        "description": "estimated < 1 day",
        "color": "4671C0"
      }
    ],
    "milestone": null,
    "number": 432,
    "title": "More examples using inheritance in Python for CDKTF",
    "updatedAt": "2023-01-10T15:50:00Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjQ2MDEyNTI0",
      "is_bot": false,
      "login": "neilkuan",
      "name": "Neil Kuan"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\nStart to build L2 library like `@cdktf/aws` `@cdktf/azure` `@cdktf/gcloud`  ??\r\n\r\n### Description\r\n\r\nI think is time to build L2 library let `cdktf` more powerful.\r\n\r\n### References\r\n---\r\n## This is  üöÄ Feature Request\r\n",
    "comments": [
      {
        "id": "MDEyOklzc3VlQ29tbWVudDc1NTE1MDg5MQ==",
        "author": {
          "login": "pahud"
        },
        "authorAssociation": "NONE",
        "body": "What about L2s like:\r\n\r\n- @cdktf/aws-ec2\r\n- @cdktf/aws-eks\r\n- @cdktf/aws-ecs\r\n\r\nAnd then we have L2s for cdktf out-of-the-box. Any plans about this?\r\n",
        "createdAt": "2021-01-06T08:08:54Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "ROCKET",
            "users": {
              "totalCount": 4
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/474#issuecomment-755150891",
        "viewerDidAuthor": false
      },
      {
        "id": "MDEyOklzc3VlQ29tbWVudDc1Njc0NzYxMA==",
        "author": {
          "login": "skorfmann"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "L2 / L3 constructs are certainly something which is on our radar. In the context of AWS, I still would love to somehow leverage what has been built for the AWS CDK already. There are a few ideas floating around how to make this happen, but none of them is really straightforward. There's another issue for AWS CDK compatibility as well - see https://github.com/hashicorp/terraform-cdk/issues/244\r\n\r\nThere are no immediate plans to start tackling this. However, generally speaking I think this is the topic which will have the biggest impact. \r\n\r\n@guan840912 / @pahud Out of curiosity: how would you approach this?",
        "createdAt": "2021-01-08T13:09:36Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/474#issuecomment-756747610",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc464lAy",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "Note for everyone stumbling on this issue: Alongside CDKTF 0.7 we released a first technical preview of the `AwsTerraformAdapter` ([docs](https://www.terraform.io/docs/cdktf/create-and-deploy/aws-adapter.html), [repo](https://github.com/hashicorp/cdktf-aws-cdk)) which enables you to use AWS CDK constructs with the CDK for Terraform. It is currently TypeScript only ([issue](https://github.com/hashicorp/cdktf-aws-cdk/issues/151)) and comes with [limitations](https://www.terraform.io/docs/cdktf/create-and-deploy/aws-adapter.html#known-limitations). Have a look at the [examples](https://github.com/hashicorp/cdktf-aws-cdk/tree/main/examples) or [docs](https://www.terraform.io/docs/cdktf/create-and-deploy/aws-adapter.html) if you're interested üëÄ",
        "createdAt": "2021-12-07T13:08:23Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/474#issuecomment-987910194",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc7CLU98",
        "author": {
          "login": "vincenthsh"
        },
        "authorAssociation": "NONE",
        "body": "This is late, but check out https://terraconstructs.dev",
        "createdAt": "2025-09-05T09:47:50Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "ROCKET",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/474#issuecomment-3257749372",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2021-01-06T08:05:32Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzk3",
        "name": "help wanted",
        "description": "Community contributions welcome as the core team is unlikely to work on this soon",
        "color": "008672"
      },
      {
        "id": "MDU6TGFiZWwyMjk5ODU0MzY0",
        "name": "abstractions (level 2 / level 3)",
        "description": "",
        "color": "279ebc"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjUx",
        "name": "size/large",
        "description": "estimated < 1 month",
        "color": "9559B0"
      }
    ],
    "milestone": null,
    "number": 474,
    "title": "Start to build L2 library like @cdktf/aws @cdktf/azure @cdktf/gcloud  ??",
    "updatedAt": "2025-09-05T09:47:50Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjEzNjc4OQ==",
      "is_bot": false,
      "login": "skorfmann",
      "name": "Sebastian Korfmann"
    },
    "body": "It would be good to have common types for Terraform related resources, so we can use them within `cdktf`, `cdktf-cli` and the `terraform-cloud` client.\r\n\r\nThings which are coming to mind:\r\n\r\n- Terraform JSON output format (the stack)\r\n- Terraform Plan JSON\r\n- Provider Schema (the input for provider generation)\r\n\r\n\r\n_Originally mentioned by @jsteinich in https://github.com/hashicorp/terraform-cdk/pull/449#r556523773_",
    "comments": [],
    "createdAt": "2021-01-13T20:51:20Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwyMjI4Mzg3NjY3",
        "name": "cdktf",
        "description": "",
        "color": "fccac4"
      },
      {
        "id": "MDU6TGFiZWwyMjYwNjQ0NDQx",
        "name": "cdktf-cli",
        "description": "",
        "color": "82e5de"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjEz",
        "name": "size/medium",
        "description": "estimated < 1 week",
        "color": "291E63"
      },
      {
        "id": "MDU6TGFiZWwzMzE3NzI2NjM4",
        "name": "tech-debt",
        "description": "",
        "color": "191658"
      }
    ],
    "milestone": null,
    "number": 492,
    "title": "Extract common Terraform JSON types",
    "updatedAt": "2022-04-04T12:58:05Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjE1NTc4ODc=",
      "is_bot": false,
      "login": "mikeparker",
      "name": "Mike Parker"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n* Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n* Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### cdktf & Language Versions\r\n\r\n\r\n0.1.0 (2 days old)\r\n\r\n### Affected Resource(s)\r\n\r\n<!--- Please list the affected resources. --->\r\n\r\n### Debug Output\r\n\r\nhttps://gist.github.com/mikeparker/be19bd259f059c24cc2c6616d41d06fb\r\nSpecifically `Error: Cannot find module 'C:\\Users\\Mike'`, note the truncated directory name due to whitespace\r\n\r\n### Expected Behavior\r\n\r\nIt completes successfully\r\n\r\n### Actual Behavior\r\n\r\nIt errored\r\n\r\n### Steps to Reproduce\r\n\r\nRun `cdktf synth` on windows where node modules are in a directory with whitespace in directory name (e.g. inside windows user directory)\r\n",
    "comments": [
      {
        "id": "MDEyOklzc3VlQ29tbWVudDc2MTY2Mzc5Ng==",
        "author": {
          "login": "jsteinich"
        },
        "authorAssociation": "COLLABORATOR",
        "body": "This seems likely to be caused by https://github.com/aws/jsii/issues/1296",
        "createdAt": "2021-01-16T21:16:02Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/502#issuecomment-761663796",
        "viewerDidAuthor": false
      },
      {
        "id": "MDEyOklzc3VlQ29tbWVudDc2MjQ1OTg3MQ==",
        "author": {
          "login": "skorfmann"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "Would the suggested workaround apply here as well? https://github.com/aws/jsii/issues/1296#issuecomment-591663558\r\n\r\n```\r\nPS C:\\> $env:TMP = \"C:\\tmp\"\r\n```",
        "createdAt": "2021-01-18T20:35:51Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/502#issuecomment-762459871",
        "viewerDidAuthor": false
      },
      {
        "id": "MDEyOklzc3VlQ29tbWVudDc2MjU0OTIxNg==",
        "author": {
          "login": "mikeparker"
        },
        "authorAssociation": "NONE",
        "body": "Yes, the workaround works :) ",
        "createdAt": "2021-01-19T01:48:26Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/502#issuecomment-762549216",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2021-01-16T14:13:28Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzk3",
        "name": "help wanted",
        "description": "Community contributions welcome as the core team is unlikely to work on this soon",
        "color": "008672"
      },
      {
        "id": "MDU6TGFiZWwyMjE4NTU2NzE0",
        "name": "windows",
        "description": "",
        "color": "839ad1"
      },
      {
        "id": "MDU6TGFiZWwyMjQ2NzM3OTc1",
        "name": "upstream/jsii",
        "description": "Pending upstream work on JSII",
        "color": "f9a2cf"
      },
      {
        "id": "MDU6TGFiZWwyMjYwNjQ0NDQx",
        "name": "cdktf-cli",
        "description": "",
        "color": "82e5de"
      },
      {
        "id": "MDU6TGFiZWwyMjk5ODAzNDMw",
        "name": "waiting-for-3rd-party-fix",
        "description": "",
        "color": "cc62ef"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "LA_kwDODd1Amc8AAAABH924aQ",
        "name": "bug/has-workaround",
        "description": "A bug with a workaround (may not be elegant)",
        "color": "9e202d"
      }
    ],
    "milestone": null,
    "number": 502,
    "title": "cdktf synth fails on windows when directory has whitespace in the name",
    "updatedAt": "2023-06-01T14:33:03Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjMxNTExNQ==",
      "is_bot": false,
      "login": "ducva",
      "name": "Vu Anh Duc"
    },
    "body": "As you known, Chalice support package in terraform format, ref: https://aws.github.io/chalice/topics/tf.html\r\n\r\nDo we have any way to import the `chalice.tf.json` file, and use terraform cdk to create resources and the lambda functions? ",
    "comments": [
      {
        "id": "MDEyOklzc3VlQ29tbWVudDc2NjczMDI3Ng==",
        "author": {
          "login": "skorfmann"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "That's an interesting suggestion, I wasn't aware that Chalice can generate Terraform config as well.\r\n\r\n> Do we have any way to import the `chalice.tf.json` file, and use terraform cdk to create resources and the lambda functions?\r\n\r\nBy importing you mean, being able to reference the resources generated by Chalice via the JSON output? So, essentially generating Typescript constructs out of the JSON?\r\n\r\n",
        "createdAt": "2021-01-25T10:52:36Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/516#issuecomment-766730276",
        "viewerDidAuthor": false
      },
      {
        "id": "MDEyOklzc3VlQ29tbWVudDc2NzIyMzIwNg==",
        "author": {
          "login": "ducva"
        },
        "authorAssociation": "NONE",
        "body": "> By importing you mean, being able to reference the resources generated by Chalice via the JSON output? So, essentially generating Typescript constructs out of the JSON?\r\n\r\nIn my imagination: I can parse the `chalice.tf.json` and manipulate these resources. \r\n\r\nIs there any way to create a resource from JSON format? I know Terraform also support JSON format, so support parsing JSON to resources may not only useful for `chalice` but also other cases too. \r\n\r\n",
        "createdAt": "2021-01-26T01:31:26Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/516#issuecomment-767223206",
        "viewerDidAuthor": false
      },
      {
        "id": "MDEyOklzc3VlQ29tbWVudDc2NzQzODAxMA==",
        "author": {
          "login": "skorfmann"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "> > By importing you mean, being able to reference the resources generated by Chalice via the JSON output? So, essentially generating Typescript constructs out of the JSON?\r\n> \r\n> In my imagination: I can parse the `chalice.tf.json` and manipulate these resources.\r\n> \r\n> Is there any way to create a resource from JSON format? I know Terraform also support JSON format, so support parsing JSON to resources may not only useful for `chalice` but also other cases too.\r\n\r\nThere's no way to do this at the moment. However, that's certainly an interesting use-case which I could see to be quite valuable. That's something which would be needed for https://github.com/hashicorp/terraform-cdk/issues/231 as well.",
        "createdAt": "2021-01-26T10:05:49Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/516#issuecomment-767438010",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2021-01-25T07:16:44Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzk3",
        "name": "help wanted",
        "description": "Community contributions welcome as the core team is unlikely to work on this soon",
        "color": "008672"
      },
      {
        "id": "MDU6TGFiZWwyMjYwNjQ0NDQx",
        "name": "cdktf-cli",
        "description": "",
        "color": "82e5de"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjUx",
        "name": "size/large",
        "description": "estimated < 1 month",
        "color": "9559B0"
      },
      {
        "id": "LA_kwDODd1Amc7WpEvS",
        "name": "ux/integration",
        "description": "",
        "color": "D670CB"
      }
    ],
    "milestone": null,
    "number": 516,
    "title": "Support Chalice",
    "updatedAt": "2023-06-02T14:15:16Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjExMTIwNTY=",
      "is_bot": false,
      "login": "ansgarm",
      "name": "Ansgar Mertens"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n* Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n* Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\nI think it would be good to support file URI as well, so something like `file:///foo/bar/archive.zip`\r\n\r\n_Originally posted by @skorfmann in https://github.com/hashicorp/terraform-cdk/pull/645#discussion_r616661630_\r\n\r\n### References\r\n\r\n#645 \r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [],
    "createdAt": "2021-04-20T22:00:46Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwyMjYwNjQ0NDQx",
        "name": "cdktf-cli",
        "description": "",
        "color": "82e5de"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4Mjg1",
        "name": "size/small",
        "description": "estimated < 1 day",
        "color": "4671C0"
      }
    ],
    "milestone": null,
    "number": 653,
    "title": "Support remote templates from file:// uris",
    "updatedAt": "2021-11-30T13:28:37Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjEzNjc4OQ==",
      "is_bot": false,
      "login": "skorfmann",
      "name": "Sebastian Korfmann"
    },
    "body": "> I skimmed through your documentation and am looking at the codebase, but it's a bit hard for me to understand how things go from a construct to HCL to JSON.\r\n\r\nLooks like we could improve the docs about the synthesizing process. \r\n\r\nBesides from what @jsteinich wrote, is there anything else we could provide you context on?\r\n\r\n_Originally posted by @skorfmann in https://github.com/hashicorp/terraform-cdk/issues/667#issuecomment-831085795_",
    "comments": [],
    "createdAt": "2021-05-03T07:44:53Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzgw",
        "name": "documentation",
        "description": "Improvements or additions to documentation",
        "color": "0075ca"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjEz",
        "name": "size/medium",
        "description": "estimated < 1 week",
        "color": "291E63"
      }
    ],
    "milestone": null,
    "number": 674,
    "title": "Document Synth Process",
    "updatedAt": "2023-06-01T13:29:10Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjEzMzcwNDY=",
      "is_bot": false,
      "login": "DanielMSchmidt",
      "name": "Daniel Schmidt"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n* Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n* Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### cdktf & Language Versions\r\n\r\n<!--- Please make note of the version you are using for the `hashicorp/terraform-cdk` and language bindings you are using.\r\nIf you are not running the latest version, please upgrade because your issue may have already been fixed. --->\r\n\r\n### Affected Resource(s)\r\n\r\n<!--- Please list the affected resources. --->\r\n\r\n- RegistryImage in the kreuzwerker/docker provider\r\n\r\n### Debug Output\r\n\r\n<!---\r\nPlease provide a link to a GitHub Gist containing the complete debug output. Please do NOT paste the debug output in the issue; just paste a link to the Gist.\r\n--->\r\n\r\ncdktf.log outputs this line:\r\n\r\n```\r\n[2021-06-02T13:20:52.443] [DEBUG] default - ‚ï∑\r\n‚îÇ Error: Error building docker image: 0: When using ADD with more than one source file, the destination must be a directory and end with a /\r\n‚îÇ\r\n‚îÇ   with docker_registry_image.backend-image,\r\n‚îÇ   on cdk.tf.json line 87, in resource.docker_registry_image.backend-image:\r\n‚îÇ   87:       }\r\n‚îÇ\r\n‚ïµ\r\n```\r\n\r\n### Expected Behavior\r\n\r\n<!--- What should have happened? --->\r\n\r\nI would want to see something similar to `Error building docker image: 0: When using ADD with more than one source file, the destination must be a directory and end with a /` as part of the cdktf output\r\n\r\n### Actual Behavior\r\n\r\n<!--- What actually happened? --->\r\n\r\nThis output is printed (note the double output, the missing error message, and the missing debug output)\r\n\r\n```\r\n‚†¥ Deploying Stack: aws\r\nResources\r\n ‚úî¬†AWS_ECR_REPOSITORY   backend-ecr         aws_ecr_repository.backend-ecr\r\n ‚†ß¬†DOCKER_REGISTRY_IMAG backend-image       docker_registry_image.backend-image\r\n   E\r\n\r\nSummary: 1 created, 0 updated, 0 destroyed.\r\n‚ï∑\r\n‚†¥ Deploying Stack: aws\r\nResources\r\n ‚úî¬†AWS_ECR_REPOSITORY   backend-ecr         aws_ecr_repository.backend-ecr\r\n ‚†á¬†DOCKER_REGISTRY_IMAG backend-image       docker_registry_image.backend-image\r\n   E\r\n\r\nSummary: 1 created, 0 updated, 0 destroyed.\r\nnon-zero exit code 1\r\n```\r\n\r\n### Steps to Reproduce\r\n\r\n<!--- Please list the steps required to reproduce the issue. --->\r\n\r\nUse TerraformAsset + RegistryImage to build an invalid docker image\r\n\r\n\r\n### Workaround\r\n\r\nEnabling the debug logs with `CDKTF_DISABLE_LOGGING=false` helped me debug this, I find this flag pretty hidden, maybe we could add a verbose/log entry in the cdktf.json so that people stumble upon it earlier\r\n\r\n### Important Factoids\r\n\r\n<!--- Are there anything atypical about your accounts that we should know? --->\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor documentation? For example:\r\n--->\r\n\r\n* #0000\r\n",
    "comments": [
      {
        "id": "MDEyOklzc3VlQ29tbWVudDg1MzY3OTQ5OA==",
        "author": {
          "login": "skorfmann"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "This seems to be related to https://github.com/hashicorp/terraform-cdk/issues/218",
        "createdAt": "2021-06-03T08:16:04Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/755#issuecomment-853679498",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2021-06-02T11:27:09Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMTM1OTU1Nzk1",
        "name": "ux/debugging",
        "description": "",
        "color": "2703FD"
      }
    ],
    "milestone": null,
    "number": 755,
    "title": "Docker provider build error not surfaced",
    "updatedAt": "2023-08-10T15:42:25Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjExMTIwNTY=",
      "is_bot": false,
      "login": "ansgarm",
      "name": "Ansgar Mertens"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n* Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n* Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n* If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\nWe had a [user report](https://cdk-dev.slack.com/archives/C017XMM5L7N/p1621507578007600) on an issue with the `excludeStackIdFromLogicalIds` flag in the `cdktf.json` via the CDK Dev Slack. The flag had been set to `\"false\"` (string) instead of `false` (boolean). As TypeScript treats `\"false\"` as a truthy value the setting was interpreted as if `true` would have been passed.  \r\n\r\nBy validating the `cdktf.json` against a schema, we could catch such errors without having to do much work.  \r\n\r\nFurthermore, it would be possible to use somehow publish e.g. a [json schema](https://json-schema.org/) which then can be picked up by editors and offer intellisense when editing the `cdktf.json` config. For this versioning (e.g. feature flags that change) might be a concern that could make this more complicated.\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc6BtriV",
        "author": {
          "login": "anden-akkio"
        },
        "authorAssociation": "NONE",
        "body": "Here's an at least mostly correct one, translated from the spec on [this page](https://developer.hashicorp.com/terraform/cdktf/create-and-deploy/configuration-file):\r\n\r\n```json\r\n{\r\n  \"$schema\": \"https://json-schema.org/draft/2020-12/schema\",\r\n  \"$id\": \"cdktf.schema.json\",\r\n  \"type\": \"object\",\r\n  \"properties\": {\r\n    \"app\": {\r\n      \"type\": \"string\",\r\n      \"description\": \"The command to run in order to synthesize the code to Terraform compatible JSON\"\r\n    },\r\n    \"language\": {\r\n      \"type\": \"string\",\r\n      \"enum\": [\"typescript\", \"python\", \"csharp\", \"java\", \"go\"],\r\n      \"description\": \"Target language for building provider or module bindings. Currently supported: `typescript`, `python`, `java`, `csharp`, and `go`\"\r\n    },\r\n    \"output\": {\r\n      \"type\": \"string\",\r\n      \"default\": \"cdktf.out\",\r\n      \"description\": \"Default: 'cdktf.out'. Where the synthesized JSON should go. Also will be the working directory for Terraform operations\"\r\n    },\r\n    \"codeMakerOutput\": {\r\n      \"type\": \"string\",\r\n      \"default\": \".gen\",\r\n      \"description\": \"Default: '.gen'. Path where generated provider bindings will be rendered to.\"\r\n    },\r\n    \"projectId\": {\r\n      \"type\": \"string\",\r\n      \"description\": \"Default: generated UUID. Unique identifier for the project used to differentiate projects\"\r\n    },\r\n    \"sendCrashReports\": {\r\n      \"type\": \"boolean\",\r\n      \"default\": false,\r\n      \"description\": \"Default: false. Whether to send crash reports to the CDKTF team\"\r\n    },\r\n    \"terraformProviders\": {\r\n      \"type\": \"array\",\r\n      \"items\": {\r\n        \"anyOf\": [\r\n          { \"type\": \"string\" },\r\n          {\r\n            \"type\": \"object\",\r\n            \"properties\": {\r\n              \"name\": { \"type\": \"string\" },\r\n              \"source\": { \"type\": \"string\" },\r\n              \"version\": { \"type\": \"string\" }\r\n            },\r\n            \"required\": [\"name\"]\r\n          }\r\n        ]\r\n      },\r\n      \"description\": \"Terraform Providers to build\"\r\n    },\r\n    \"terraformModules\": {\r\n      \"type\": \"array\",\r\n      \"items\": {\r\n        \"anyOf\": [\r\n          { \"type\": \"string\" },\r\n          {\r\n            \"type\": \"object\",\r\n            \"properties\": {\r\n              \"name\": { \"type\": \"string\" },\r\n              \"source\": { \"type\": \"string\" },\r\n              \"version\": { \"type\": \"string\" }\r\n            },\r\n            \"required\": [\"name\"]\r\n          }\r\n        ]\r\n      },\r\n      \"description\": \"Terraform Modules to build\"\r\n    }\r\n  },\r\n  \"required\": [\"app\", \"language\", \"terraformProviders\", \"terraformModules\"]\r\n}\r\n```\r\n\r\nYou can tell your editor to validate against it by adding a line to your `cdktf.json` file pointing it towards the schema file (which I have directly adjacent to my `cdktf.json`):\r\n\r\n```json\r\n{\r\n\t\"$schema\": \"./cdktf.schema.json\",\r\n}\r\n```\r\n\r\nWould of course be great to get an \"official\" one maintained by Hashicorp, as I doubt I'll update the above if any changes are made.",
        "createdAt": "2024-06-18T14:24:01Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "HEART",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/782#issuecomment-2176235669",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc6UN3ZQ",
        "author": {
          "login": "icholy"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "We have some custom properties in our `cdktf.json` file which are used by internal tooling. If validation was added, would it be possible to either:\r\n\r\n1. Add a dedicated property which can contain arbitrary configuration (a `metadata` property).\r\n2. Add a prefix (similar to `x-` properties in swagger) to be used for custom properties. https://swagger.io/docs/specification/v3_0/openapi-extensions/\r\n3. Guarantee that the json schema won't have `additionalProperties: false` enable. ",
        "createdAt": "2024-11-19T20:15:45Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/782#issuecomment-2486662736",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2021-06-15T08:17:09Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMTM2Mjc5MjMx",
        "name": "ux/configuration",
        "description": "",
        "color": "58FCA0"
      }
    ],
    "milestone": null,
    "number": 782,
    "title": "Validate cdktf.json to catch simple configuration errors",
    "updatedAt": "2024-11-19T20:15:47Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjM4Njg3NTQ=",
      "is_bot": false,
      "login": "jsteinich",
      "name": "Jon Steinich"
    },
    "body": "> > The contents were different between `cdktf get` runs on Windows and Linux machines.\r\n> \r\n> Are there more differences than just line endings? Likely something that could be improved if so.\r\n\r\nAs a matter of fact, there is:\r\n\r\n```\r\n[Container] 2021/06/23 09:58:56 Running command cdktf synth\r\ncdktf encountered an error while synthesizing\r\n\r\nSynth command: pipenv run python main.py\r\nError:         non-zero exit code 1\r\n\r\nCommand output on stderr:\r\n\r\n    jsii.errors.JavaScriptError: \r\n      internal/modules/cjs/loader.js:303\r\n            throw err;\r\n            ^\r\n  \r\n      Error: Cannot find module '/tmp/jsii-kernel-7PD2Kw/node_modules/hashicorp_aws/providers\\aws\\index.js'. Please verify that the package.json has a valid \"main\" entry\r\n          at tryPackage (internal/modules/cjs/loader.js:295:19)\r\n          at Function.Module._findPath (internal/modules/cjs/loader.js:508:18)\r\n          at Function.Module._resolveFilename (internal/modules/cjs/loader.js:802:27)\r\n          at Module._load (internal/modules/cjs/loader.js:667:27)\r\n          at nodeRequire (/tmp/tmplj38tl2q/lib/program.js:7809:42)\r\n          at /tmp/jsii-kernel-7PD2Kw/node_modules/hashicorp_aws:1:1\r\n          at Script.runInContext (vm.js:130:18)\r\n          at Kernel._execute (/tmp/tmplj38tl2q/lib/program.js:8588:31)\r\n          at Kernel.load (/tmp/tmplj38tl2q/lib/program.js:7856:38)\r\n          at KernelHost.processRequest (/tmp/tmplj38tl2q/lib/program.js:9479:36)\r\n```\r\n\r\nThe `imports` were created on a Windows machine, and the `synth` command was executed on AWS CodeBuild in a Ubuntu build container. Looks like the generated code contains some Windows path separators that don't work on Linux...\r\n\r\n_Originally posted by @onitake in https://github.com/hashicorp/terraform-cdk/issues/791#issuecomment-866843698_",
    "comments": [
      {
        "id": "IC_kwDODd1Amc4_WIUL",
        "author": {
          "login": "surajgawas110"
        },
        "authorAssociation": "NONE",
        "body": " Even i m facing same issue. :(\r\nCDKTF Java - working on windows, failing to synth via docker nodejs container.\r\n\r\n![image](https://user-images.githubusercontent.com/48012652/157421384-0a1b006e-3de8-41d0-a87f-dae29eb2db35.png)\r\n",
        "createdAt": "2022-03-09T10:17:19Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/794#issuecomment-1062765835",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc4_XLhl",
        "author": {
          "login": "surajgawas110"
        },
        "authorAssociation": "NONE",
        "body": "Found one workaround while doing R&D, **if we create cdktf new project in linux env and then move it to windows it works on both os.** But if you create project on windows you will face this issue.  \r\n\r\nSo if you are facing above issue just create new project copy all changes that you made to the template and then try cdktf synth on linux just to confirm its working on linux, then you can compress tha code and move it windows.\r\n",
        "createdAt": "2022-03-09T15:28:20Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/794#issuecomment-1063041125",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2021-06-23T14:34:42Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzk3",
        "name": "help wanted",
        "description": "Community contributions welcome as the core team is unlikely to work on this soon",
        "color": "008672"
      },
      {
        "id": "MDU6TGFiZWwyMjE4NTU2NzE0",
        "name": "windows",
        "description": "",
        "color": "839ad1"
      },
      {
        "id": "MDU6TGFiZWwyMjQ2NzM1NDk1",
        "name": "providers",
        "description": "",
        "color": "2bd8cd"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMTM2MjAxMTE5",
        "name": "provider get / generation",
        "description": "",
        "color": "CC3938"
      },
      {
        "id": "LA_kwDODd1Amc8AAAABH924aQ",
        "name": "bug/has-workaround",
        "description": "A bug with a workaround (may not be elegant)",
        "color": "9e202d"
      }
    ],
    "milestone": null,
    "number": 794,
    "title": "Providers generated on Windows don't work on Linux",
    "updatedAt": "2023-06-01T14:32:35Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjM4Njg3NTQ=",
      "is_bot": false,
      "login": "jsteinich",
      "name": "Jon Steinich"
    },
    "body": "Hmm, that doesn't seem to be enough for cdktf:\r\n```\r\n[Container] 2021/06/23 14:35:58 Running command cdktf synth\r\nERROR: synthesis failed, run \"cdktf get\" to generate providers in imports\r\n```\r\n\r\nIf I execute the Python script directly instead:\r\n```\r\n[Container] 2021/06/23 14:41:42 Running command pipenv run ./main.py\r\nTraceback (most recent call last):\r\n  File \"/...../main.py\", line 4, in <module>\r\n    from imports.aws import AwsProvider\r\nModuleNotFoundError: No module named 'imports'\r\n```\r\n\r\nThis happens because the Python script references the generated imports folder.\r\nI can address this by replacing `from imports.aws import AwsProvider, ...` with `from cdktf_cdktf_provider_aws import AwsProvider, ...`  - looks a bit awkward, but I suppose it's intended that way?\r\n\r\n_Originally posted by @onitake in https://github.com/hashicorp/terraform-cdk/issues/791#issuecomment-866930714_",
    "comments": [
      {
        "id": "MDEyOklzc3VlQ29tbWVudDg3OTA2NDc2OQ==",
        "author": {
          "login": "onitake"
        },
        "authorAssociation": "NONE",
        "body": "@jsteinich Did you intend to create a new issue from this comment?\r\nIf yes, I'll cross-post some more context here.\r\nI can also open a new issue.",
        "createdAt": "2021-07-13T12:58:26Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/831#issuecomment-879064769",
        "viewerDidAuthor": false
      },
      {
        "id": "MDEyOklzc3VlQ29tbWVudDg3OTA3MDg0OA==",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "As Jon added labels I think it was on purpose üòÑ\r\nIf the context is related to improving the documentation (as tagged) it would be useful here ‚Äì if there are things to fix instead, I'd say file a new bug üëç\r\n\r\nFor either way: Thank you for contributing!",
        "createdAt": "2021-07-13T13:06:04Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/831#issuecomment-879070848",
        "viewerDidAuthor": false
      },
      {
        "id": "MDEyOklzc3VlQ29tbWVudDg3OTA5MDU1Ng==",
        "author": {
          "login": "jsteinich"
        },
        "authorAssociation": "COLLABORATOR",
        "body": "Yep, definitely intentional. I think improving `cdktf get` performance is a standalone issue and anything else that has come up while working around it should be separate.\r\n@onitake as I understood the issues you ran into where windows/linux path problems and needing to update imports when switching to pre-built. If there were other problems, please file as separate issues.",
        "createdAt": "2021-07-13T13:31:16Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/831#issuecomment-879090556",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2021-07-13T02:05:52Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzgw",
        "name": "documentation",
        "description": "Improvements or additions to documentation",
        "color": "0075ca"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      }
    ],
    "milestone": null,
    "number": 831,
    "title": "Document transition between generated and pre-built providers",
    "updatedAt": "2021-07-13T13:31:16Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjM0Mzk3MTA=",
      "is_bot": false,
      "login": "warlockdn",
      "name": "warlockD"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\nWorking with CDK has been very helpful recently. But I have come across a use case and need to understand how would you approach it. \r\n\r\nI have a simple configuration application which in-turn uses CDK to generate Terraform File works perfectly. \r\nBut here are some limitations I am not able to understand. \r\n\r\nLet's suppose I have multiple Infra configuration for multiple projects. Now I have a simple config which I pass on to the CDK as parameters and based on the passed config params I would generate a stack with a unique-name. Then run deploy and the infra would provision and my rest of the things work out. \r\n\r\nEvery time there is a new project I would need to generate stack with a unique-name and provision new infra based on the config params using the underlying module that used CDK. \r\n\r\nBut the issue is every-time I would run **synth** all the stacks would delete the generated stack (not the actual infra) and run again. \r\n\r\nWhat would be your ideal workflow here. How do I keep using the same module (CDK) to keep generating stacks based on incoming config params. And also make sure if there are any changes in the already generated stack it can take care of the diff and do the provisioning or deletion.\r\n\r\nWould really like to know your opinions.\r\n\r\n### References\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc40pvQ5",
        "author": {
          "login": "jsteinich"
        },
        "authorAssociation": "COLLABORATOR",
        "body": "Are you using local state backend or a remote backend? If you are using local state and the terraform state file for the previous stack is being deleted that sounds like it may be a bug.\r\n\r\nIf just the synthesized json is being deleted, that sounds like a potential improvement area. The trade off with not deleting would be potentially having old stacks (that a user potentially wanted to remove/rename) pile up.\r\n\r\nI think multiple stack support was added assuming stacks would be more static, but I'm not thinking of any strong reason why they couldn't be dynamically created.\r\n\r\nIn order to update existing stacks, you'll need to make sure to pass configuration that will generate the same stack name. If you are using a remote state backend, then it doesn't matter if any local files are present. The diff and deploy will still be possible.",
        "createdAt": "2021-07-20T12:34:33Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/838#issuecomment-883356729",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc40p18P",
        "author": {
          "login": "warlockdn"
        },
        "authorAssociation": "NONE",
        "body": "> Are you using local state backend or a remote backend?\r\n\r\nLocal for now. But I want to move to Terraform Cloud once I am able to run this POC\r\n\r\nI am not sure what's the issue here. Whenever I do synth old generated stack gets deleted. \r\n\r\nHow can I stop this from happening. stacks and manifest.json is completely replaced every time I run synth. \r\n\r\nHow should I go about this. My idea is to generate json for multiple projects with multiple environments. And only source of truth needs to be the one where I am using the CDK. ",
        "createdAt": "2021-07-20T13:15:36Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/838#issuecomment-883384079",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc40q1Md",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "Hi @warlockdn!\r\nThis is happening by design, we treat the source code (e.g. in TypeScript) as the single source of truth. If you want the `cdk.tf.json` file to be the source of truth, you could e.g. commit it to your Git repository to keep a history of changes to that file.\r\n\r\nHowever for your use case I'd suggest an alternative. You could create multiple instances of the same stack for your different projects. Like in this example:\r\nhttps://github.com/hashicorp/terraform-cdk/blob/f43270e3ceb633e53725d73fb314db29b831a0e3/examples/typescript/aws-multiple-stacks/main.ts#L31-L33\r\n(You can also do this for different projects ‚Äì not just for different environments)",
        "createdAt": "2021-07-20T19:34:48Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/838#issuecomment-883643165",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc40r4ZC",
        "author": {
          "login": "warlockdn"
        },
        "authorAssociation": "NONE",
        "body": "@ansgarm \r\n\r\nThe scenario that you are suggesting is by creating and running things at once. But my use case is where configuration don't come to different projects at once. Configurations can be generated at any given time for any project. \r\n\r\nSo for eg: \r\nProject1 comes in and sends params: 1gb ram, 2 core cpu and source code\r\nProject2 comes in at a separate time with: 2gb ram, 2 core and source code\r\n\r\nNow by design cdktf would delete the last generated terraform. Now since all this would be a part of an automated process it becomes difficult to maintain git commits and run back and get the json and stuff. Hope you get my point. \r\n\r\nCan this be taken as a use case and can be used to alter the cli to accomodate the change may be using some config change. May be a change in cdktf.json using **deleteonsynth: boolean** or something may be. ",
        "createdAt": "2021-07-21T06:08:14Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/838#issuecomment-883918402",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc40sDaf",
        "author": {
          "login": "warlockdn"
        },
        "authorAssociation": "NONE",
        "body": "The idea behind using a CDK would be for many I suppose would to manage multiple infrastructure requirements. Now this way anyone can be truly an infrastructure as code (since we are generating infra based on received parameters). Now involving multiple infra would enable generating and maintaining much more complex and very exhaustive configuration detailing.\r\n\r\nSo instead of thinking other directories already generated as orphaned we could look at them as multiple projects. This way states and other things can be part of that single directory where the plan would take place. And that and only that directory becomes the source of truth for that particular project. (This is only while thinking things are local)",
        "createdAt": "2021-07-21T07:37:11Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/838#issuecomment-883963551",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc40sKyI",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "Ah, sounds more like you want to build some kind of self-service that offers an API where projects can request infrastructure, is that right?\r\n\r\nI'm very hesitant with something like `deleteonsynth: boolean` because that could leave old artifacts inside the `cdktf.out` directory if you e.g. rename a stack or remove an `Asset`.\r\n\r\nBut that doesn't make your underlying use case invalid, so maybe we can find another way for the CDK for Terraform to support that (which might need some additional design work and deeper thoughts first before we incorporate it into the CLI itself).\r\n\r\nSo, to better understand your problem first, I'd like to dig a bit deeper (if that's okay with you).\r\n\r\nYou mentioned an example:\r\n> Project1 comes in and sends params: 1gb ram, 2 core cpu and source code\r\n> Project2 comes in at a separate time with: 2gb ram, 2 core and source code\r\n\r\nHow does the project send those params? And are they stored somewhere or just sent one-off?\r\nHow does the CDKTF itself run when it receives them? How is it invoked? Or is Terraform invoked directly instead?\r\n\r\nEven if the use case is not supported natively by the CDKTF at the moment, I'm pretty sure that it could be achieved with a bit of scripting inside a CI that might run all of this. There are users of the CDKTF which synthesize the Terraform config without the `cdktf-cli` but by invoking the program defined in `cdktf.json > app` directly. You could do a similar thing where you take control of the `cdk.tf.json` output file and move it into a specific directory based on the project it was generated for and deploy from there using Terraform or Terraform Cloud.",
        "createdAt": "2021-07-21T08:24:00Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/838#issuecomment-883993736",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc40seI7",
        "author": {
          "login": "warlockdn"
        },
        "authorAssociation": "NONE",
        "body": "@ansgarm you got my use case right. \r\n\r\nSo since cdk supports typescript I have build the whole thing as a submodule inside my main app which would takes in a config params containing the necessary stuff to generate a infra around it. \r\n\r\n```\r\ninterface AppConfig {\r\n  domain: string;\r\n  type: 'backend' | 'ui';\r\n  appName: string; // unique app name\r\n}\r\n```\r\n\r\nNow this is passed to the appropriate app which looks like \r\n\r\n```\r\nconstructor(scope: Construct, name: string, config: AppConfig) {\r\n    super(scope, name);\r\n}\r\n```\r\n\r\nNow by using exec or zx I am able to run synth I am able to create a stack\r\n\r\n```\r\nnew AppStack(app, appName, config);\r\napp.synth();\r\n```\r\n\r\nJust a very straight forward thing I am doing here. Now since this is a cdk it would generally allow a developer writing business logic and other validations to allow this thing to be deployed to any cloud provider right. That's pretty much my idea. \r\n\r\n\r\n> You could do a similar thing where you take control of the cdk.tf.json output file and move it into a specific directory based on the project it was generated for and deploy from there using Terraform or Terraform Cloud\r\n\r\nYes right I can go ahead and do that as well. I can depend on cdktf to do synth and move the stack to my own user directory or terraform cloud. Right now its a straight forward deal (For my POC) -> synth -> deploy\r\n\r\nI understand your concern as well it could delete the old stack if the same name is passed again but same should or can even throw and error if in case the directory and the stack name exists already in the manifest.json right ?\r\n\r\nWhat according to you I can try to make this work even more easier to achieve. I see a solution you are suggesting\r\n\r\n1. synth a new stack \r\n2. transfer the stack to a new directory all together\r\n3. let terraform cli handle plan and deploy\r\n\r\nAnything else should I be doing ? ",
        "createdAt": "2021-07-21T10:17:59Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/838#issuecomment-884073019",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc40ssj0",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "Thank you for explaining your use case in more detail üëç That helped a lot!\r\n\r\nTo me your proposed approach (using Terraform CLI to deploy) is reasonable for now. While we have thought about this use case / workflow before, we have not yet gathered sufficient data on it, so we cannot recommend a \"single best way\" to solve this, yet. But after gathering some more data on this workflow I'm pretty sure that we'll at some point be able to make a recommendation for how to best handle this.\r\n\r\nOn a related note: We plan to offer an API which exposes the underlying invocation of Terraform: https://github.com/hashicorp/terraform-cdk/issues/804\r\nHowever, that won't be shipped shortly, so I'd recommend to invoke the Terraform CLI yourself for now.\r\n\r\nPlease feel free to post more feedback to this issue as you go along with your POC! That would be very valuable to us ‚ù§Ô∏è ",
        "createdAt": "2021-07-21T11:56:20Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/838#issuecomment-884132084",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc40tV2o",
        "author": {
          "login": "warlockdn"
        },
        "authorAssociation": "NONE",
        "body": "@ansgarm thank you for the validation on this. \r\n\r\nI have one case that I would like to mention. The current use case seems to be working when the infra is generated once. What happens when we modify the same config to update the infra with latest changes. No my plan is to use terraform cloud for remote state. How all this would pan out when using terraform cloud. \r\n\r\nI will try and post small poc on this. But what are your views on this. Do you think the use case can be taken as an initial idea and be discussed with core team and check if it means any sense to be taken for further dev.\r\n\r\nThanks. ",
        "createdAt": "2021-07-21T15:56:35Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/838#issuecomment-884301224",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc40v6FS",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "> Do you think the use case can be taken as an initial idea and be discussed with core team and check if it means any sense to be taken for further dev.\r\n\r\nDefinitely, this workflow will be something we will think about üëç ",
        "createdAt": "2021-07-22T14:48:56Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/838#issuecomment-884973906",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc40wRgm",
        "author": {
          "login": "warlockdn"
        },
        "authorAssociation": "NONE",
        "body": "I would definitely be looking forward for this. Thank you",
        "createdAt": "2021-07-22T17:02:51Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "HEART",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/838#issuecomment-885069862",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc40zoj0",
        "author": {
          "login": "jsteinich"
        },
        "authorAssociation": "COLLABORATOR",
        "body": "> What happens when we modify the same config to update the infra with latest changes. No my plan is to use terraform cloud for remote state. How all this would pan out when using terraform cloud.\r\n\r\nUntil you ran again with parameters that match the original stack name, nothing would happen. Once that stack is known to be needed, it will update it.",
        "createdAt": "2021-07-23T22:50:46Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/838#issuecomment-885950708",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc41YBL7",
        "author": {
          "login": "skorfmann"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "> > What happens when we modify the same config to update the infra with latest changes. No my plan is to use terraform cloud for remote state. How all this would pan out when using terraform cloud.\r\n> \r\n> Until you ran again with parameters that match the original stack name, nothing would happen. Once that stack is known to be needed, it will update it.\r\n\r\nYes, as long the input config stays the same, the output will be identical for the given input. So, in theory your described use-case should be working already. You'd essentially generate one stack at a time, with changed configurations. \r\n\r\nRegarding the TF Cloud backend,  I‚Äôd try to use an API client for TF cloud (e.g. https://github.com/mijailr/terraform-cloud) to make sure a workspace exists and pass this as config into the stack. Generally, that‚Äôs something which is one of the use-cases we have in mind for #682",
        "createdAt": "2021-08-09T19:39:12Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/838#issuecomment-895488763",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2021-07-20T07:27:39Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzgw",
        "name": "documentation",
        "description": "Improvements or additions to documentation",
        "color": "0075ca"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwzMDEzNzM4ODIw",
        "name": "needs-research",
        "description": "",
        "color": "709F22"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMjA1MTIxODAz",
        "name": "enhancement/new-workflow",
        "description": "Proposed new workflow",
        "color": "4A1023"
      }
    ],
    "milestone": null,
    "number": 838,
    "title": "Using CDK to manage multiple Stacks generated separately ? ",
    "updatedAt": "2021-08-09T19:39:12Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjExMTIwNTY=",
      "is_bot": false,
      "login": "ansgarm",
      "name": "Ansgar Mertens"
    },
    "body": "When source files of an `Asset` construct are located outside of the project directory, `cdktf watch` won't detect changes to them because it only watches the project directory.\r\nBy making a note (maybe to the manifest, tbd) while synthesizing, we can make a list of those directories and have `watch` read and use them to adjust its file watcher for synthezising.",
    "comments": [],
    "createdAt": "2021-07-30T07:13:52Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMjEzNDkxMzEy",
        "name": "feature/watch",
        "description": "",
        "color": "3068EA"
      }
    ],
    "milestone": null,
    "number": 869,
    "title": "Watch: Detect changes for Assets source files located outside of project directory",
    "updatedAt": "2021-09-02T15:44:55Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjExMTIwNTY=",
      "is_bot": false,
      "login": "ansgarm",
      "name": "Ansgar Mertens"
    },
    "body": "Currently `cdktf watch` always deploys automatically. While this is the main intended workflow, for some use cases it might make sense to be able to confirm those changes first.\r\n\r\nWhen invoking `cdktf watch` without the --auto-approve flag the user would have to\r\nconfirm applying the changes by e.g. pressing the enter key.",
    "comments": [],
    "createdAt": "2021-07-30T07:16:45Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMjEzNDkxMzEy",
        "name": "feature/watch",
        "description": "",
        "color": "3068EA"
      }
    ],
    "milestone": null,
    "number": 870,
    "title": "Watch: Support manual approval",
    "updatedAt": "2021-09-02T15:43:35Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjExMTIwNTY=",
      "is_bot": false,
      "login": "ansgarm",
      "name": "Ansgar Mertens"
    },
    "body": "Currently `cdktf watch` invokes the `app` command of the `cdktf.json` config.\r\n\r\nHowever, most of the target languages of the CDKTF have tooling for watching the source\r\nfiles and incrementally compiling the resulting binary (e.g. `tsc --watch`,\r\n`gradle --watch-fs` [Maven does not seem to support watching], `gomon`). We\r\ncould make use of this to speed up the build and synth part of the `cdktf watch`\r\ncommand. We could e.g. add a `watch` option to the `cdktf.json` config which\r\ncontains a command that is spawned by the `cdktf watch` command.\r\nInstead of running a file watcher for synthesizing, watch would then spawn a child process for the command passed. Watch would also need to pipe output from that command to allow the user to notice compilation errors that might surface.",
    "comments": [
      {
        "id": "IC_kwDODd1Amc41CmuT",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "I just played around with this a bit by running `tsc --watch` in a separate terminal and changing the app command to just run the program (`node main.js`).\r\nWe need this! This is sooooo fast üöÄ\r\n![watch_tsc](https://user-images.githubusercontent.com/1112056/127656053-185e6c67-71b8-4180-8388-6a63a0041ff6.gif)\r\n\r\n(And this could even be optimized some more, because `watch` will currently do an unnecessary synth because it also detects my change to `main.ts` üòÅ)",
        "createdAt": "2021-07-30T12:58:19Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/871#issuecomment-889875347",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2021-07-30T07:20:24Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMjEzNDkxMzEy",
        "name": "feature/watch",
        "description": "",
        "color": "3068EA"
      }
    ],
    "milestone": null,
    "number": 871,
    "title": "Watch: Make use of target language tooling for recompiling",
    "updatedAt": "2021-09-02T15:42:57Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjcyNzQ4ODU4",
      "is_bot": false,
      "login": "bondsb",
      "name": ""
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\nThe return type for `addProvider()` within `TerraformModule` is `void`:\r\nhttps://github.com/hashicorp/terraform-cdk/blob/2baf75f53b99e68cf53061a73ad6bd5aa69f02be/packages/cdktf/lib/terraform-module.ts#L62\r\n\r\nThis request is to return `this`, with type `this`:\r\n\r\n```ts\r\n  public addProvider(provider: TerraformProvider | TerraformModuleProvider) : this {\r\n    if (!this._providers) {\r\n      this._providers = [];\r\n    }\r\n    this._providers.push(provider);\r\n    return this;\r\n  }\r\n```\r\n\r\nin order to allow for convenient method chaining:\r\n\r\n```ts\r\nvar myModule = new MyModule(this, \"my_module\", {\r\n   someValue: \"abcd\",\r\n}).addProvider(myProvider);\r\n```\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc41btWP",
        "author": {
          "login": "jsteinich"
        },
        "authorAssociation": "COLLABORATOR",
        "body": "I think the team would be happy to accept a PR to add this.",
        "createdAt": "2021-08-11T02:42:37Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/900#issuecomment-896456079",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2021-08-09T23:03:02Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzky",
        "name": "good first issue",
        "description": "Good for newcomers",
        "color": "7057ff"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzk3",
        "name": "help wanted",
        "description": "Community contributions welcome as the core team is unlikely to work on this soon",
        "color": "008672"
      },
      {
        "id": "MDU6TGFiZWwyMjE3NjIyNTkw",
        "name": "modules",
        "description": "",
        "color": "2ffc8f"
      },
      {
        "id": "MDU6TGFiZWwyMjI4Mzg3NjY3",
        "name": "cdktf",
        "description": "",
        "color": "fccac4"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4Mjg1",
        "name": "size/small",
        "description": "estimated < 1 day",
        "color": "4671C0"
      }
    ],
    "milestone": null,
    "number": 900,
    "title": "Method chaining with addProvider()",
    "updatedAt": "2023-06-02T09:42:35Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjUwNzAyMDQ=",
      "is_bot": false,
      "login": "danieldreier",
      "name": "Daniel Dreier"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\nThe unit testing flow currently relies on Jest's watcher, which means someone wanting to use a watch workflow needs to run `cdktf watch` and also `jest watch`, and `cdktf watch` will do deployments even if tests fail.\r\n\r\nIt's unclear whether this is a problem, so I'm creating this issue as a prompt to remind us to re-evaluate after there is more real-world experience with both workflows. I suspect we want a singular watch workflow, but this may prove otherwise or be prohibitive to implement.\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [],
    "createdAt": "2021-09-10T21:41:50Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMjEzNDkxMzEy",
        "name": "feature/watch",
        "description": "",
        "color": "3068EA"
      }
    ],
    "milestone": null,
    "number": 1003,
    "title": "Evaluate integrating watch and unit testing",
    "updatedAt": "2021-11-30T16:48:04Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjExMTIwNTY=",
      "is_bot": false,
      "login": "ansgarm",
      "name": "Ansgar Mertens"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\nThe [setup-terraform](https://github.com/hashicorp/setup-terraform/) Github Action by default wraps the Terraform CLI in a wrapper which alters its output. This produces different errors, e.g. [get fails](https://github.com/hashicorp/terraform-cdk/issues/1013) and planning / deploying might also fail (haven't checked yet, but as of TF 1.0 we also parse some JSON there).\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\n### References\r\n\r\n* https://github.com/hashicorp/terraform-cdk/issues/1013\r\n* https://github.com/hashicorp/setup-terraform\r\n\r\n### Workaround (until this is closed)\r\n\r\nDisable the wrapper:\r\n\r\n```yaml\r\n- uses: hashicorp/setup-terraform@v1\r\n  with:\r\n    terraform_version: 0.14\r\n    terraform_wrapper: false # <--\r\n```\r\n\r\n### Related code locations\r\nThe following locations might need to be touched to support the prefixes to the Terraform output on stdout.\r\nFor fixing the `get` command:\r\nhttps://github.com/hashicorp/terraform-cdk/blob/6ff70ce09be46f7354a8bbeb732e7b928a3b158d/packages/cdktf-cli/lib/get/generator/provider-schema.ts#L244-L248\r\nFor parsing the plan:\r\nhttps://github.com/hashicorp/terraform-cdk/blob/6ff70ce09be46f7354a8bbeb732e7b928a3b158d/packages/cdktf-cli/bin/cmds/ui/models/terraform-cli.ts#L56-L61\r\nFor parsing the outputs:\r\nhttps://github.com/hashicorp/terraform-cdk/blob/6ff70ce09be46f7354a8bbeb732e7b928a3b158d/packages/cdktf-cli/bin/cmds/ui/models/terraform-cli.ts#L111-L116\r\n\r\nThe progress updates while deploying / destroying are interpreted line by line. Wrapping this would probably be the easiest way to hook in and remove the prefix from each line:\r\nhttps://github.com/hashicorp/terraform-cdk/blob/6ff70ce09be46f7354a8bbeb732e7b928a3b158d/packages/cdktf-cli/bin/cmds/ui/models/terraform-cli.ts#L83\r\nhttps://github.com/hashicorp/terraform-cdk/blob/6ff70ce09be46f7354a8bbeb732e7b928a3b158d/packages/cdktf-cli/bin/cmds/ui/models/terraform-cli.ts#L93\r\n",
    "comments": [],
    "createdAt": "2021-09-15T10:15:21Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzky",
        "name": "good first issue",
        "description": "Good for newcomers",
        "color": "7057ff"
      },
      {
        "id": "MDU6TGFiZWwyMjYwNjQ0NDQx",
        "name": "cdktf-cli",
        "description": "",
        "color": "82e5de"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMzE3NzI2NjM4",
        "name": "tech-debt",
        "description": "",
        "color": "191658"
      }
    ],
    "milestone": null,
    "number": 1020,
    "title": "Support `setup-terraform` action (with the default wrapper)",
    "updatedAt": "2023-06-02T14:20:05Z"
  },
  {
    "assignees": [
      {
        "id": "MDQ6VXNlcjExMTIwNTY=",
        "login": "ansgarm",
        "name": "Ansgar Mertens",
        "databaseId": 0
      }
    ],
    "author": {
      "id": "MDQ6VXNlcjEzNjc4OQ==",
      "is_bot": false,
      "login": "skorfmann",
      "name": "Sebastian Korfmann"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### cdktf & Language Versions\r\n\r\n- 0.6.x\r\n\r\n<!--- Please make note of the version you are using for the `hashicorp/terraform-cdk` and language bindings you are using.\r\nIf you are not running the latest version, please upgrade because your issue may have already been fixed. --->\r\n\r\n### Affected Resource(s)\r\n\r\n<!--- Please list the affected resources. --->\r\n- cli autocomplete\r\n\r\n### Debug Output\r\n\r\n```\r\n‚ûú  /tmp cdktf diffError: Usage Error: /private/tmp is not a cdktf project directory, no cdktf.json found or cdktf.json is missing language / app keys\r\n    at Object.Usage (/Users/sebastian/.nvm/versions/node/v14.17.6/lib/node_modules/cdktf-cli/lib/errors.js:20:21)\r\n    at Object.throwIfNotProjectDirectory (/Users/sebastian/.nvm/versions/node/v14.17.6/lib/node_modules/cdktf-cli/bin/cmds/helper/check-directory.js:38:31)\r\n    at Object.handler (/Users/sebastian/.nvm/versions/node/v14.17.6/lib/node_modules/cdktf-cli/bin/cmds/diff.js:39:27)\r\n    at /Users/sebastian/.nvm/versions/node/v14.17.6/lib/node_modules/cdktf-cli/node_modules/yargs/build/index.cjs:1:9052\r\n    at j (/Users/sebastian/.nvm/versions/node/v14.17.6/lib/node_modules/cdktf-cli/node_modules/yargs/build/index.cjs:1:4931)\r\n    at M.applyMiddlewareAndGetResult (/Users/sebastian/.nvm/versions/node/v14.17.6/lib/node_modules/cdktf-cli/node_modules/yargs/build/index.cjs:1:9021)\r\n    at M.runCommand (/Users/sebastian/.nvm/versions/node/v14.17.6/lib/node_modules/cdktf-cli/node_modules/yargs/build/index.cjs:1:7206)\r\n    at Bt.[runYargsParserAndExecuteCommands] (/Users/sebastian/.nvm/versions/node/v14.17.6/lib/node_modules/cdktf-cli/node_modules/yargs/build/index.cjs:1:54320)\r\n    at Bt.parse (/Users/sebastian/.nvm/versions/node/v14.17.6/lib/node_modules/cdktf-cli/node_modules/yargs/build/index.cjs:1:36968)\r\n    at Bt.get [as argv] (/Users/sebastian/.nvm/versions/node/v14.17.6/lib/node_modules/cdktf-cli/node_modules/yargs/build/index.cjs:1:57661)\r\n(node:8575) UnhandledPromiseRejectionWarning: TypeError: explanatoryComment.replaceAll is not a function\r\n```\r\n\r\n<!---\r\nPlease provide a link to a GitHub Gist containing the complete debug output. Please do NOT paste the debug output in the issue; just paste a link to the Gist.\r\n--->\r\n\r\n### Expected Behavior\r\n\r\nDoesn't throw an exception\r\n\r\n<!--- What should have happened? --->\r\n\r\n### Actual Behavior\r\n\r\nit blows up\r\n\r\n<!--- What actually happened? --->\r\n\r\n### Steps to Reproduce\r\n\r\nUse autocomplete for stack dependent commands like `diff`, `deploy` or `destroy` outside of a project or inside a project where no `cdktf.json` file is present.\r\n\r\n<!--- Please list the steps required to reproduce the issue. --->\r\n\r\n### Important Factoids\r\n\r\n<!--- Are there anything atypical about your accounts that we should know? --->\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor documentation? For example:\r\n--->\r\n\r\n- #0000\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc427tl2",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "Do you get the same error if you run a `diff` in that directory?\r\nBut you're right, we might want to not error there but rather show no completions or such.",
        "createdAt": "2021-09-17T08:48:34Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1038#issuecomment-921622902",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc427wHE",
        "author": {
          "login": "skorfmann"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "> Do you get the same error if you run a `diff` in that directory?\r\n\r\nHaven't checked, but I'm assuming this would be working then.\r\n\r\n\r\n",
        "createdAt": "2021-09-17T09:03:57Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1038#issuecomment-921633220",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc4273Xv",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "Just checked ‚Äì that also errors:\r\n```\r\ncdktf diff                                                                                                                                                      11:44:06\r\nError: Usage Error: /Users/ansgar is not a cdktf project directory, no cdktf.json found or cdktf.json is missing language / app keys\r\n    at Object.Usage (/Users/ansgar/.config/yarn/global/node_modules/cdktf-cli/lib/errors.js:20:21)\r\n    at Object.throwIfNotProjectDirectory (/Users/ansgar/.config/yarn/global/node_modules/cdktf-cli/bin/cmds/helper/check-directory.js:38:31)\r\n    at Object.handler (/Users/ansgar/.config/yarn/global/node_modules/cdktf-cli/bin/cmds/diff.js:39:27)\r\n    at /Users/ansgar/.config/yarn/global/node_modules/cdktf-cli/node_modules/yargs/build/index.cjs:1:9052\r\n    at j (/Users/ansgar/.config/yarn/global/node_modules/cdktf-cli/node_modules/yargs/build/index.cjs:1:4931)\r\n    at M.applyMiddlewareAndGetResult (/Users/ansgar/.config/yarn/global/node_modules/cdktf-cli/node_modules/yargs/build/index.cjs:1:9021)\r\n    at M.runCommand (/Users/ansgar/.config/yarn/global/node_modules/cdktf-cli/node_modules/yargs/build/index.cjs:1:7206)\r\n    at Bt.[runYargsParserAndExecuteCommands] (/Users/ansgar/.config/yarn/global/node_modules/cdktf-cli/node_modules/yargs/build/index.cjs:1:54320)\r\n    at Bt.parse (/Users/ansgar/.config/yarn/global/node_modules/cdktf-cli/node_modules/yargs/build/index.cjs:1:36968)\r\n    at Bt.get [as argv] (/Users/ansgar/.config/yarn/global/node_modules/cdktf-cli/node_modules/yargs/build/index.cjs:1:57661)\r\n```\r\nwhich is a feature (at least to me). I think it improves a formerly cryptic error message when attempting commands in the wrong directory.",
        "createdAt": "2021-09-17T09:47:39Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1038#issuecomment-921662959",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc42__iD",
        "author": {
          "login": "skorfmann"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "> which is a feature (at least to me). I think it improves a formerly cryptic error message when attempting commands in the wrong directory.\r\n\r\nI'd get rid of the stack trace there. ",
        "createdAt": "2021-09-20T08:59:33Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1038#issuecomment-922744963",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2021-09-17T08:44:58Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwyMjYwNjQ0NDQx",
        "name": "cdktf-cli",
        "description": "",
        "color": "82e5de"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjEz",
        "name": "size/medium",
        "description": "estimated < 1 week",
        "color": "291E63"
      }
    ],
    "milestone": null,
    "number": 1038,
    "title": "cli: autocomplete error handling",
    "updatedAt": "2022-01-25T16:23:00Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjI5NTA1NjEw",
      "is_bot": false,
      "login": "saikirangit",
      "name": "Sai Kiran Tagore"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\nWe have option to pass in a parameter to pass stack name for deploy but we do not have option for synth.\r\n\r\n**Our Use Case:**\r\nWe run all the terraform code using github actions and use typescript as a language. We have all our sensitive information for Terraform in Github Secrets. During a disaster recovery when we want to spin up new environment we create a keyvault via cdktf, write all the github secrets to keyvault and use those secrets from keyvault to create actual resources in azure.\r\n\r\nProblem we are running into is. When I do a synth, it is running Synth for both stacks and trying to retrieve secrets from non existing key vault. Is there a way we can synth only one stack?\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc43a6BS",
        "author": {
          "login": "jsteinich"
        },
        "authorAssociation": "COLLABORATOR",
        "body": "Thank you for the use case.\r\nThis does go against the principle that the synthesized output always matches the code; however, it doesn't seem to unreasonable to want this. I'm curious what others have to say.",
        "createdAt": "2021-09-29T03:33:49Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1090#issuecomment-929800274",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc45dU2t",
        "author": {
          "login": "skorfmann"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "> Problem we are running into is. When I do a synth, it is running Synth for both stacks and trying to retrieve secrets from non existing key vault. Is there a way we can synth only one stack?\r\n\r\n@saikirangit could these two stacks be two separate applications?",
        "createdAt": "2021-11-09T09:55:34Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1090#issuecomment-963988909",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc45f-Fu",
        "author": {
          "login": "saikirangit"
        },
        "authorAssociation": "NONE",
        "body": "@skorfmann That is what we ended up doing but it would be really useful if we can have that prerequisite kind of stack that we can use to setup.\r\n\r\nProbably in future.",
        "createdAt": "2021-11-10T00:56:35Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1090#issuecomment-964682094",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2021-09-28T18:46:29Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      }
    ],
    "milestone": null,
    "number": 1090,
    "title": "Synth single stack even when we have multiple stacks in the code.",
    "updatedAt": "2021-11-30T16:45:32Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjUwNzAyMDQ=",
      "is_bot": false,
      "login": "danieldreier",
      "name": "Daniel Dreier"
    },
    "body": "This is a research and design task.\r\n\r\nShowing idiomatic stack traces in all supported languages would significantly improve the CDK for Terraform user experience around debugging, but is a technically challenging project to implement. The purpose of this ticket is to set aside time for design and research into how to build cross-language stack traces. The ticket will be complete when a proposed UX and implementation has been described and ticketed out in a future release.",
    "comments": [],
    "createdAt": "2021-09-29T19:55:20Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwzMDEzNzM4ODIw",
        "name": "needs-research",
        "description": "",
        "color": "709F22"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMTM1OTU1Nzk1",
        "name": "ux/debugging",
        "description": "",
        "color": "2703FD"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjUx",
        "name": "size/large",
        "description": "estimated < 1 month",
        "color": "9559B0"
      }
    ],
    "milestone": null,
    "number": 1103,
    "title": "Design cross-language stack traces",
    "updatedAt": "2022-04-11T15:50:21Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjUwNzAyMDQ=",
      "is_bot": false,
      "login": "danieldreier",
      "name": "Daniel Dreier"
    },
    "body": "This is a design and planning task to plan the next revision of the `cdktf watch` command. There is a [backlog of potential watch-related improvements](https://github.com/hashicorp/terraform-cdk/issues?q=is%3Aopen+is%3Aissue+label%3Afeature%2Fwatch), and the purpose of this task is to prompt a design exercise to set direction and concretely plan follow-up work to improve that feature.",
    "comments": [],
    "createdAt": "2021-09-29T20:12:32Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwzMDEzNzM4ODIw",
        "name": "needs-research",
        "description": "",
        "color": "709F22"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMjEzNDkxMzEy",
        "name": "feature/watch",
        "description": "",
        "color": "3068EA"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjEz",
        "name": "size/medium",
        "description": "estimated < 1 week",
        "color": "291E63"
      }
    ],
    "milestone": null,
    "number": 1105,
    "title": "Plan next revision of `cdktf watch` command",
    "updatedAt": "2022-02-01T16:51:34Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjc5NTcxNTIz",
      "is_bot": false,
      "login": "thomashutcheson-msm",
      "name": "Thomas Hutcheson"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\nAdding additional python with google cloud platform resources into the repo. This includes GoogleDataCatalogTaxonomy, FirestoreDocument, GoogleDataCatalogPolicyTag and GoogleDataCatalogPolicyTagIamMember resources. \r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc44ydgH",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "Hi @thomashutcheson-msm!\r\nThank you for the suggestion. We're open for PRs that add such an example üëç",
        "createdAt": "2021-10-27T10:01:54Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1211#issuecomment-952752135",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2021-10-25T10:11:22Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzky",
        "name": "good first issue",
        "description": "Good for newcomers",
        "color": "7057ff"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzk3",
        "name": "help wanted",
        "description": "Community contributions welcome as the core team is unlikely to work on this soon",
        "color": "008672"
      },
      {
        "id": "MDU6TGFiZWwyNzQzNTkyMDA3",
        "name": "examples",
        "description": "",
        "color": "4AB3A0"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4Mjg1",
        "name": "size/small",
        "description": "estimated < 1 day",
        "color": "4671C0"
      }
    ],
    "milestone": null,
    "number": 1211,
    "title": "Additional-python-google-resources-examples",
    "updatedAt": "2023-06-02T09:06:14Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjExMTIwNTY=",
      "is_bot": false,
      "login": "ansgarm",
      "name": "Ansgar Mertens"
    },
    "body": "### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n---\r\nAdd a testcase to the Edge Provider tests (introduced in https://github.com/hashicorp/terraform-cdk/pull/1311) that tests mutations of Terraform resource arguments (aka inputs). For example test the `put*` methods (if they are available already), the `reset*` methods, and assigning values to properties.",
    "comments": [],
    "createdAt": "2021-11-26T16:51:40Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzk3",
        "name": "help wanted",
        "description": "Community contributions welcome as the core team is unlikely to work on this soon",
        "color": "008672"
      },
      {
        "id": "MDU6TGFiZWwyNTcwMTY0OTY5",
        "name": "testing",
        "description": "",
        "color": "456cc6"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjEz",
        "name": "size/medium",
        "description": "estimated < 1 week",
        "color": "291E63"
      },
      {
        "id": "MDU6TGFiZWwzMzE3NzI2NjM4",
        "name": "tech-debt",
        "description": "",
        "color": "191658"
      }
    ],
    "milestone": null,
    "number": 1357,
    "title": "Edge Provider Test: Test mutations of resource arguments",
    "updatedAt": "2023-06-01T16:46:02Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjU1MDM2NDE=",
      "is_bot": false,
      "login": "gbisaga",
      "name": "Gary Bisaga"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### cdktf & Language Versions\r\ncdktf 0.8.6\r\nterraform v1.1.3\r\non windows_amd64\r\nnodejs v16.13.1\r\nNote: I tested both directly under windows command prompt and under WSL, and I get the same results in both cases.\r\n\r\n<!--- Please make note of the version you are using for the `hashicorp/terraform-cdk` and language bindings you are using.\r\nIf you are not running the latest version, please upgrade because your issue may have already been fixed. --->\r\n\r\n### Affected Resource(s)\r\n\r\n<!--- Please list the affected resources. --->\r\nPublicIp is what I tested, but I expect all will be affected\r\n\r\n### Debug Output\r\nN/A (problem in unit testing, it didn't generate a debug log file)\r\n\r\n<!---\r\nPlease provide a link to a GitHub Gist containing the complete debug output. Please do NOT paste the debug output in the issue; just paste a link to the Gist.\r\n--->\r\n\r\n### Expected Behavior\r\n\r\n<!--- What should have happened? --->\r\nThere are actually two problems here. I'm including them in the same issue because we think there's a good chance they have the same cause. The actual cdktf code deploys just fine; the problem is only in unit testing.\r\n\r\nThere are two kinds of test cases failing. We think they may be related.\r\n\r\n```\r\n    import { PublicIp } from \"../.gen/providers/azurerm/public-ip\";\r\n    it (\"is TEST CASE #1\", () => {\r\n      expect(\r\n        Testing.synthScope((scope) => {\r\n          new AppGatewayStack(scope, QA_PARAMS);   // AppGatewayStack does create a PublicIp\r\n        })\r\n      ).toHaveResource(PublicIp);\r\n    })\r\n\r\n    it (\"is TEST CASE #2\", () => {\r\n      const app = new App();\r\n      const stack = new AppGatewayStack(app, QA_PARAMS);\r\n      expect(Testing.fullSynth(stack)).toMatchSnapshot();\r\n    })\r\n````\r\n\r\nExpected behavior: Both tests should have passed.\r\n\r\n### Actual Behavior\r\n\r\n<!--- What actually happened? --->\r\nTEST CASE #1 actual behavior: It fails with the error\r\n```\r\n FAIL  __tests__/main-test.ts (12.786 s)\r\n  My CDKTF Application\r\n    Test the public IP\r\n      √ó should have a public IP (59 ms)\r\n\r\n  ‚óè My CDKTF Application ‚Ä∫ Test the public IP ‚Ä∫ should have a public IP\r\n\r\n    Type resource not found in stack\r\n\r\n      58 |           // }\r\n      59 |         })\r\n    > 60 |       ).toHaveResource(PublicIp);\r\n         |         ^\r\n      61 |     })\r\n      62 |   });\r\n      63 |   // // All Unit testst test the synthesised terraform code, it does not create real-world resources\r\n\r\n      at getAssertElementWithProperties (node_modules/cdktf/lib/testing/matchers.ts:108:13)\r\n      at toHaveResourceWithProperties (node_modules/cdktf/lib/testing/matchers.ts:186:64)\r\n      at Object.toHaveResource (node_modules/cdktf/lib/testing/adapters/jest.ts:72:65)\r\n      at __EXTERNAL_MATCHER_TRAP__ (node_modules/expect/build/index.js:386:30)\r\n      at Object.throwingMatcher [as toHaveResource] (node_modules/expect/build/index.js:387:15)\r\n      at Object.<anonymous> (__tests__/main-test.ts:60:9)\r\n```\r\n\r\nTEST CASE #2 actual behavior: The first time you run it, it passes and generates a snapshot file (though, see below). The second time and after, it fails with the error below.\r\n```\r\n      ‚úï should not change the snapshot (24 ms)\r\n\r\n  ‚óè AppGateway CDKTF Application ‚Ä∫ Test the public IP ‚Ä∫ should not change the snapshot\r\n\r\n    expect(received).toMatchSnapshot()\r\n\r\n    Snapshot name: `AppGateway CDKTF Application Test the public IP should not change the snapshot 1`\r\n\r\n    Snapshot: \"/tmp/cdktf.outdir.sMGHRL\"\r\n    Received: \"/tmp/cdktf.outdir.fElhCW\"\r\n```\r\n\r\nThis second error actually makes sense in a way, because the snapshot file generated seems to be wrong. Rather than a representation of the stack resources, the `__snapshots__/main-test.ts.snap` file looks like this:\r\n\r\n```\r\n   // Jest Snapshot v1, https://goo.gl/fbAQLP\r\n\r\n   exports[`AppGateway CDKTF Application Test the public IP should not change the snapshot 1`] = `\"/tmp/cdktf.outdir.sMGHRL\"`;\r\n```\r\n\r\nThe JSON with actual stack resources IS being generated under that location.\r\n\r\n### Steps to Reproduce\r\n\r\n<!--- Please list the steps required to reproduce the issue. --->\r\nInstall dependencies and run `npm run test`\r\n\r\n### Important Factoids\r\n\r\n<!--- Are there anything atypical about your accounts that we should know? --->\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor documentation? For example:\r\n--->\r\n\r\n- #0000\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc49EdFI",
        "author": {
          "login": "DanielMSchmidt"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "I tried to reproduce this, on OSX it seems to work, can you check if this production case fails as well for you? \r\nhttps://github.com/DanielMSchmidt/cdktf-issue-1506",
        "createdAt": "2022-01-28T19:42:23Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1506#issuecomment-1024577864",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc49EksE",
        "author": {
          "login": "gbisaga"
        },
        "authorAssociation": "NONE",
        "body": "Huh, it does work - I can run `npm run test` on that repo, and it works under windows. There's something weird going on here. One thing I did in your test is I changed the snapshot test to be a \"normal\" one:\r\n\r\n```\r\n    expect(\r\n      Testing.synthScope((scope) => {\r\n        new MyConstruct(scope, \"myConstruct\");\r\n      })\r\n    ).toMatchSnapshot();\r\n```\r\n\r\nNot only did this work, but the snapshot it generated looks correct. There's something weird going on with mine. I note that I include a number of other resources, as well as an Azure provider and S3 backend construct. I'll try to get it down to the minimum difference.",
        "createdAt": "2022-01-28T20:23:15Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1506#issuecomment-1024609028",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc49E8-o",
        "author": {
          "login": "gbisaga"
        },
        "authorAssociation": "NONE",
        "body": "So I figured out what was wrong - sort of. At least, I figured out how to make it work, by comparing against your example. Problem was, when I was calling\r\n\r\n```\r\n        Testing.synthScope((scope) => {\r\n          new AppGatewayStack(scope, QA_PARAMS);   // AppGatewayStack does create a PublicIp\r\n        })\r\n```\r\n\r\n`AppGatewayStack` is defined as: \r\n\r\n```\r\nexport class AppGatewayStack extends TerraformStack {\r\n  constructor(scope: Construct, params: Parameters) { // , options: AppGatewayStackOptions\r\n    super(scope, params.stackName);\r\n    // etc.\r\n  }\r\n}\r\n```\r\n\r\nBut you had it synthing a subclass of Construct, not TerraformStack. Now, given that TerraformStack extends Construct, I would expect that to work, also. But it doesn't. I instead modified it to:\r\n\r\n```\r\n        Testing.synthScope((scope) => {\r\n          new AppGatewayConstruct(scope, QA_PARAMS);\r\n        })\r\n...\r\nexport class AppGatewayConstruct extends Construct {\r\n  constructor(scope: Construct, params: Parameters) { // , options: AppGatewayStackOptions\r\n    super(scope, `${params.stackName}-construct`);\r\n    // etc.\r\n   }\r\n}\r\n```\r\n\r\nand now everything works!",
        "createdAt": "2022-01-28T22:35:25Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1506#issuecomment-1024708520",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc49I_hC",
        "author": {
          "login": "jsteinich"
        },
        "authorAssociation": "COLLABORATOR",
        "body": "`Testing.synthScope` internally creates a new stack. I don't believe there's been any testing done on nested stacks, so I'm not surprised that they don't work correctly. We could either make sure nested stacks work properly (probably best in the long term) or make `Testing.synthScope` more obvious that a stack can't be passed (probably fails with an `App` as well).\r\n\r\nYour second test case comes down to `Testing.fullSynth` just always returns a temporary directory. Looks like the intent was to chain it with other functions (such as `toBeValidTerraform`. At a minimum there is some more documentation needed there. Should probably consider renaming the function as well.",
        "createdAt": "2022-01-31T14:00:37Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1506#issuecomment-1025767490",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5Hmg73",
        "author": {
          "login": "getflex-stephen"
        },
        "authorAssociation": "NONE",
        "body": "> `Testing.synthScope` internally creates a new stack. I don't believe there's been any testing done on nested stacks, so I'm not surprised that they don't work correctly. We could either make sure nested stacks work properly (probably best in the long term) or make `Testing.synthScope` more obvious that a stack can't be passed (probably fails with an `App` as well).\r\n\r\nI don't think the immediate issue is best solved by making nested stacks work. Because the thing that's in the way here is the fact that `Testing.synthScore` creates a new stack regardless. I'm pretty sure the common case is going to be testing whether a Stack has specific resources, rather than a Construct.",
        "createdAt": "2022-08-01T14:26:30Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1506#issuecomment-1201278711",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2022-01-24T23:37:30Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzk3",
        "name": "help wanted",
        "description": "Community contributions welcome as the core team is unlikely to work on this soon",
        "color": "008672"
      },
      {
        "id": "MDU6TGFiZWwyMjE4NTU2NzE0",
        "name": "windows",
        "description": "",
        "color": "839ad1"
      },
      {
        "id": "MDU6TGFiZWwyNTcwMTY0OTY5",
        "name": "testing",
        "description": "",
        "color": "456cc6"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjEz",
        "name": "size/medium",
        "description": "estimated < 1 week",
        "color": "291E63"
      },
      {
        "id": "MDU6TGFiZWwzMzYxMTMzNzQ3",
        "name": "feature/snapshot-test",
        "description": "Snapshot testing + assertion related issues",
        "color": "006b75"
      },
      {
        "id": "LA_kwDODd1Amc8AAAABH924aQ",
        "name": "bug/has-workaround",
        "description": "A bug with a workaround (may not be elegant)",
        "color": "9e202d"
      }
    ],
    "milestone": null,
    "number": 1506,
    "title": "Unit testing failing to find resources for azurerm provider",
    "updatedAt": "2023-06-01T14:33:04Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjMzODYzNTU0",
      "is_bot": false,
      "login": "ex-nihil",
      "name": "Daniel"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### cdktf & Language Versions\r\n\r\ncom.hashicorp:cdktf:0.9.0\r\n\"aws@~> 3.0\"\r\nOpenJDK Runtime Environment (build 1.8.0_312-b10)\r\n\r\n### Affected Resource(s)\r\n\r\nhttps://www.terraform.io/docs/providers/aws/r/memorydb_cluster\r\nhttps://www.terraform.io/docs/providers/aws/r/db_instance\r\n\r\n### Debug Output\r\n\r\n<!---\r\nPlease provide a link to a GitHub Gist containing the complete debug output. Please do NOT paste the debug output in the issue; just paste a link to the Gist.\r\n--->\r\n\r\n### Expected Behavior\r\n\r\n`db.port` should synthesize to Terraform reference instead of number:\r\n```\r\n\"value\": \"${aws_memorydb_cluster.cluster_9AC9C0F1.cluster_endpoint.0.port}\"\r\n```\r\n\r\nThis workaround can achieve the above:\r\n```\r\ndb.getStringAttribute(\"port\")\r\n```\r\n\r\n### Actual Behavior\r\n\r\n`db.port` synthesizes to:\r\n```\r\n\"value\": \"-8.109562212591454E298\"\r\n```\r\n\r\n### Steps to Reproduce\r\n\r\nI assume this happens for any provider when trying to synth number types.\r\n\r\n### Important Factoids\r\n\r\nThis seems to be a regression as I found #679 that was supposedly fixed in 0.6.0.\r\n\r\n### References\r\n\r\n- #0000\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc49PuRE",
        "author": {
          "login": "jsteinich"
        },
        "authorAssociation": "COLLABORATOR",
        "body": "I just did a simple test in typescript and everything was working correctly. I wouldn't expect any issues in Java, but perhaps some more details on the code involved would shed some light.\r\n\r\nIt looks like you are using the 0.9.0 version of the cdktf library; are you also using version 0.9.0 of the cli?\r\nAre you just passing the port directly from the cluster to the db instance, or is there something else happening?",
        "createdAt": "2022-02-02T03:06:43Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1528#issuecomment-1027531844",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc49kNq7",
        "author": {
          "login": "DanielMSchmidt"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "Could you provide a snippet of your code as an example so that we can reproduce it?",
        "createdAt": "2022-02-08T17:59:44Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1528#issuecomment-1032903355",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5KOCLV",
        "author": {
          "login": "teodoradra"
        },
        "authorAssociation": "NONE",
        "body": "Not really sure if this is relevant or even related to this issue but when searching this was the closest we could find.\r\n\r\ncom.hashicorp:cdktf:0.12.0\r\n\"akamai/akamai@~> 2.1.1\"\r\nOpenJDK 64-Bit Server VM Corretto-17.0.3.6.1 (build 17.0.3+6-LTS)\r\n\r\nWe actually had this issue with the Java version. We are trying to create a Akamai cpCode and use its generated id in a later stage.\r\nThe cpCodeId is a string of pattern `\"cpc_123456\"` and we need to extract the number part as an actual numeric value.\r\n\r\nWe can use the `Fn.trimprefix` function to get the string representation of the cpCodeId (so `\"cpc_123456\"` becomes `\"123456\"`) but when trying to parse it to a number we always get the same value `-8.109562212591454E298`. That actually happens with *any* number we try to parse.\r\n\r\n```java\r\nvar shouldBeNumber1 = Fn.parseint(\"123456\", 10); // becomes -8.109562212591454E298\r\n \r\nvar shouldBeNumber2 = Fn.tonumber(\"123456\");     // becomes -8.109562212591454E298\r\n\r\nvar shouldBeNumber3 = Fn.parseint(Fn.trimprefix(relevant-TfToken, \"cpc_\"), 10); // becomes -8.109562212591454E298\r\n\r\nvar shouldBeNumber4 = Fn.tonumber(Fn.trimprefix(relevant-TfToken, \"cpc_\"));     // becomes -8.109562212591454E298\r\n```",
        "createdAt": "2022-09-13T10:09:36Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1528#issuecomment-1245192917",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5KOMK5",
        "author": {
          "login": "DanielMSchmidt"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "@teodoradra This is expected. Terraform functions return a token value (this extremely bug negative number). They are translated to `${parseint(\"123456\", 10)}` in the terraform JSON and then run at execution time.\r\n\r\nYou can read more about [Tokens here](https://www.terraform.io/cdktf/concepts/tokens).",
        "createdAt": "2022-09-13T10:47:59Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1528#issuecomment-1245233849",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5KOeOd",
        "author": {
          "login": "teodoradra"
        },
        "authorAssociation": "NONE",
        "body": "@DanielMSchmidt thank you for your quick response! \r\n\r\nBut the thing that we keep seeing it that, after planning and running the changes we still have the exact same value if we try to convert the string to a number. If we leave it as a string (which we anyway trim using `trimprefix` and that works just fine) we can see the actual value in Terraform Cloud as it should be (meaning, the actual value not the negative float), so we are encountering a problem only when trying convert the string to number (using `Fn.tonumber` or `Fn.parseint`). And on our provider side we see the exact same thing (negative number) after running and applying the plan.  This is what we get on the Terraform Cloud side when we try to convert the string that we trimmed (using functions as well) to a number:\r\n```\r\nid : -8.109562212591383e+298\r\n```\r\nand this is what we get when we just trim it and don't convert to a number: \r\n```\r\nid : \"1376863\"\r\n```\r\nSo what is unclear to me is why when I use `Fn.trimprefix(code.getId(), \"cpc_\")` I get the right value, and if I use `Fn.parseInt(\"1376863\",10)` I get that negative number on the Terraform Cloud side. If I got it wrong, please let me know, I will revisit this problem that we have. Thank you!",
        "createdAt": "2022-09-13T11:56:35Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1528#issuecomment-1245307805",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5KUVlt",
        "author": {
          "login": "marceloaguiarr"
        },
        "authorAssociation": "NONE",
        "body": "Hello, I am a teammate of Teodora and there are some things that are still a bit unclear to me.\r\n\r\nIt seems to me that the problem is that we have to provide a String representation of the `rules` but that is a complex object that we are creating as POJOs and then serialising (with either jackson or gson, I tried both).\r\n\r\nI created this simplified code snippet to illustrate the situation\r\n\r\n```java\r\n  public record TestingThing(Number id, String someOtherProperty) {}\r\n  \r\n  final var testingThing = new TestingThing(\r\n        Fn.tonumber(Fn.trimprefix(\"cpc_123456\", \"cpc_\")),\r\n        Fn.trimprefix(\"cpc_123456\", \"cpc_\"));\r\n\r\n  PropertyBuilder()\r\n  \t...\r\n        .count(Fn.tonumber(Fn.trimprefix(\"cpc_123456\", \"cpc_\"))) // expects a Number\r\n        .rules(new Gson().toJson(testingThing)) // expects a String\r\n        ...\r\n        .build();\r\n```\r\n\r\nAfter runnig synth on that this is the output.\r\n\r\n```json\r\n\t{\r\n\t  ...\r\n          \"count\": \"${tonumber(trimprefix(\\\"cpc_123456\\\", \\\"cpc_\\\"))}\",\r\n\t  \"rules\": \"{\\\"id\\\":-8.109562212591386E298,\\\"someOtherProperty\\\":\\\"${trimprefix(\\\"cpc_123456\\\", \\\"cpc_\\\")}\\\"}\"\r\n\t  ...\r\n\t}\r\n```\r\n\r\nAnd that value of `id` is never converted to the proper terraform token. The most weird thing to me is that the `trimprefix` worked as expected, even after serialising the object and running the synth, but the `tonumber` show two different behaviours.",
        "createdAt": "2022-09-14T14:24:52Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1528#issuecomment-1246845293",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5KVH_0",
        "author": {
          "login": "DanielMSchmidt"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "It would be great if you could build a small example so we can debug this further. I am not sure what exactly happens here on the not-cdktf side that could influence the result, but it could also be a cdktf problem directly. I see you put the tokens into a class and serialize it out of that. If e.g. a number to string conversion appears outside of the cdktf context it can be that the token value itself is destroyed, e.g.  by an accidental rounding",
        "createdAt": "2022-09-14T16:57:04Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1528#issuecomment-1247051764",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5KZFRx",
        "author": {
          "login": "marceloaguiarr"
        },
        "authorAssociation": "NONE",
        "body": "Hello. I have created [this repo](https://github.com/marceloaguiarr/cdktf-java-serialization) to show the error happening. Hope that makes things more clear.\r\n\r\nAll you have to do is clone, then run the test class. It should print the synthesized string with the error.\r\nAs you said, this really looks like a rounding error when the serialisation of the java class into json happens.",
        "createdAt": "2022-09-15T13:17:14Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1528#issuecomment-1248089201",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5KdaK9",
        "author": {
          "login": "DanielMSchmidt"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "Hey folks, sorry for taking so long, but I have found the problem.\r\n\r\nDuring synth your program transforms the number to a sting with Gson. After that CDKTF runs through all the numbers it knows of and translates them to terraform expressions if applicable. But your number is not a number anymore, it's a string now so we dont catch it. To solve this issue right now you can use `Fn.jsonencode(testingResource)` and it works.\r\n\r\nThe bigger question here is, can we make your current example work. I think we possibly can try to find things that look like numbers in all strings and see if they are known to us. For that we would need to check if a tokenized number can collide with another tokenized number if serialized to string. If we are sure this can not happen we can then search through every string for something that looks like a serialized number and replace this with the TF expression needed. The serialization format could vary between languages though, JS uses `e+` instead of `E` like Java for example. It could also be a custom serialization engine being used. So I guess it's hard to get right all the time, but getting it right most of the time and never getting it wrong would be sufficient I think ",
        "createdAt": "2022-09-16T10:56:18Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1528#issuecomment-1249223357",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2022-01-31T21:02:06Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzk3",
        "name": "help wanted",
        "description": "Community contributions welcome as the core team is unlikely to work on this soon",
        "color": "008672"
      },
      {
        "id": "MDU6TGFiZWwyMjI4Mzg3NjY3",
        "name": "cdktf",
        "description": "",
        "color": "fccac4"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjEz",
        "name": "size/medium",
        "description": "estimated < 1 week",
        "color": "291E63"
      },
      {
        "id": "MDU6TGFiZWwzMjM2NDcwNTQ1",
        "name": "feature/tokens",
        "description": "",
        "color": "58CF13"
      },
      {
        "id": "LA_kwDODd1Amc8AAAABH924aQ",
        "name": "bug/has-workaround",
        "description": "A bug with a workaround (may not be elegant)",
        "color": "9e202d"
      }
    ],
    "milestone": null,
    "number": 1528,
    "title": "Number attributes not synthed as references",
    "updatedAt": "2023-06-01T17:31:22Z"
  },
  {
    "assignees": [],
    "author": {
      "is_bot": true,
      "login": "app/"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### cdktf & Language Versions\r\n```\r\n‚ùØ cdktf --version    \r\n0.9.4\r\n\r\n‚ùØ java -version\r\njava version \"17.0.2\" 2022-01-18 LTS\r\nJava(TM) SE Runtime Environment (build 17.0.2+8-LTS-86)\r\nJava HotSpot(TM) 64-Bit Server VM (build 17.0.2+8-LTS-86, mixed mode, sharing\r\n```\r\n<!--- Please make note of the version you are using for the `hashicorp/terraform-cdk` and language bindings you are using.\r\nIf you are not running the latest version, please upgrade because your issue may have already been fixed. --->\r\n\r\n### Affected Resource(s)\r\n\r\nOn cdktf get with a cdktf.json using a terraformModule terraform-google-modules/iam/google jsii compilation failed \r\n\r\n<!--- Please list the affected resources. --->\r\n\r\n### Debug Output\r\nhttps://gist.github.com/alex-unikorny/be465d015447301fa3421d93d2370f85\r\n<!---\r\nPlease provide a link to a GitHub Gist containing the complete debug output. Please do NOT paste the debug output in the issue; just paste a link to the Gist.\r\n--->\r\n\r\n### Expected Behavior\r\n\r\nmodule available to import on Java code\r\n<!--- What should have happened? --->\r\n\r\n### Actual Behavior\r\n\r\ncdkft get download failed\r\n<!--- What actually happened? --->\r\n\r\n### Proposal Behavior\r\n\r\nWould be more easy for users if modules could manage as Maven dependency instead to do cdktf get\r\n\r\n### Steps to Reproduce\r\n\r\nUse this cdktf.json\r\nhttps://gist.github.com/alex-unikorny/a5f6a2f59c434ae8d11327d3942964d0\r\nAnd execute `cdktf get` from root dir.\r\n\r\n<!--- Please list the steps required to reproduce the issue. --->\r\n\r\n### Important Factoids\r\n\r\n<!--- Are there anything atypical about your accounts that we should know? --->\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor documentation? For example:\r\n--->\r\n\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc4_lXSD",
        "author": {
          "login": "jsteinich"
        },
        "authorAssociation": "COLLABORATOR",
        "body": "`terraform-google-modules/iam/google` is module with no root configuration. As such, nothing is generated. You can specify the submodules within it and those will generate. For example: `terraform-google-modules/iam/google//modules/projects_iam`.\r\n\r\nSeveral providers are available as Maven dependencies, but at this point no modules are. Feel free to upvote #195.\r\nYou can also publish to your own private Maven repo.",
        "createdAt": "2022-03-14T13:03:52Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1620#issuecomment-1066759299",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc4_lqMh",
        "author": {
          "login": ""
        },
        "authorAssociation": "NONE",
        "body": "Thanks for your time!, I`ve change the configuration with your suggestion, and now is working, maybe the registry documentation could be show how configure a specific module within the CDKTF tool, like Provision Instructions example.",
        "createdAt": "2022-03-14T14:06:56Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1620#issuecomment-1066836769",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2022-03-13T12:01:17Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzgw",
        "name": "documentation",
        "description": "Improvements or additions to documentation",
        "color": "0075ca"
      },
      {
        "id": "MDU6TGFiZWwyMjE3NjIyNTkw",
        "name": "modules",
        "description": "",
        "color": "2ffc8f"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4Mjg1",
        "name": "size/small",
        "description": "estimated < 1 day",
        "color": "4671C0"
      }
    ],
    "milestone": null,
    "number": 1620,
    "title": "cdktf get - jsii compilation failed - using terraform-google-modules/iam/google",
    "updatedAt": "2023-02-16T13:50:57Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjQ0MjM1OQ==",
      "is_bot": false,
      "login": "iridian-ks",
      "name": "iridian"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\nThe Kubernetes backend in Terraform: https://www.terraform.io/language/settings/backends/kubernetes\r\nSeems to be missing from Terraform CDK: https://www.terraform.io/cdktf/concepts/remote-backends#supported-backends \r\n\r\nIt looks like CDK is generating a JSON file for backends, which I tried creating manually like so:\r\n\r\n_remote.tf.json_\r\n```\r\n{\r\n    \"terraform\": {\r\n        \"backend\": {\r\n            \"kubernetes\": {\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nThen in the Pod setting `KUBE_IN_CLUSTER_CONFIG` and `KUBE_NAMESPACE` env vars and running `cdktf deploy` does not initialize the backend and uses local state.",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5ABa62",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "Hi @iridian-ks üëã\r\nIf no backend construct is used, the CDKTF will default to using local state (and thereby render a local backend in the generated `cdk.tf.json`). That one probably overrides the one you are manually setting separately.\r\n\r\nYou can instead try to use an override on your Stack instance: https://www.terraform.io/cdktf/concepts/providers-and-resources#escape-hatch\r\n\r\nHowever, we should add the kubernetes backend to the ones we support.",
        "createdAt": "2022-03-21T16:22:14Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1628#issuecomment-1074114230",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5ACQlq",
        "author": {
          "login": "iridian-ks"
        },
        "authorAssociation": "NONE",
        "body": "Tentatively, it looks like I'm getting this:\r\n\r\n```\r\n  \"terraform\": {\r\n    \"backend\": {\r\n      \"kubernetes\": {\r\n      },\r\n      \"local\": {\r\n        \"path\": \".../cdk/terraform.gloo.tfstate\"\r\n      }\r\n    }\r\n  }\r\n```\r\n\r\nNot sure if that's the intended behavior.\r\n\r\nBut it's resulting in:\r\n\r\n```\r\n[2022-03-21T19:34:03.007] [ERROR] default - ‚ï∑\r\n‚îÇ Error: Duplicate backend configuration\r\n‚îÇ\r\n‚îÇ   on cdk.tf.json line 38, in terraform.backend:\r\n‚îÇ   38:       \"local\": {\r\n‚îÇ\r\n‚îÇ A module may have only one backend configuration. The backend was\r\n‚îÇ previously configured at cdk.tf.json:36,21-22.\r\n‚ïµ\r\n\r\n\r\n‚ï∑\r\n‚îÇ Error: Duplicate backend configuration\r\n‚îÇ\r\n‚îÇ   on cdk.tf.json line 38, in terraform.backend:\r\n‚îÇ   38:       \"local\": {\r\n‚îÇ\r\n‚îÇ A module may have only one backend configuration. The backend was\r\n‚îÇ previously configured at cdk.tf.json:36,21-22.\r\n```",
        "createdAt": "2022-03-21T19:32:44Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1628#issuecomment-1074334058",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5ACRz5",
        "author": {
          "login": "iridian-ks"
        },
        "authorAssociation": "NONE",
        "body": "Sorry for the spam, but looks like this is better:\r\n\r\n```\r\n        self.add_override(\"terraform.backend.kubernetes\", {})\r\n        self.add_override(\"terraform.backend.local\", None)\r\n```",
        "createdAt": "2022-03-21T19:38:27Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1628#issuecomment-1074339065",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2022-03-19T00:58:32Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzky",
        "name": "good first issue",
        "description": "Good for newcomers",
        "color": "7057ff"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzk3",
        "name": "help wanted",
        "description": "Community contributions welcome as the core team is unlikely to work on this soon",
        "color": "008672"
      },
      {
        "id": "MDU6TGFiZWwyMjI4Mzg3NjY3",
        "name": "cdktf",
        "description": "",
        "color": "fccac4"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMTM2MjkzOTA4",
        "name": "core-parity",
        "description": "Better experience in Terraform Core than CDKTF",
        "color": "1A80B6"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4Mjg1",
        "name": "size/small",
        "description": "estimated < 1 day",
        "color": "4671C0"
      }
    ],
    "milestone": null,
    "number": 1628,
    "title": "Support kubernetes backend",
    "updatedAt": "2023-06-01T16:18:27Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "U_kgDOBhbVIg",
      "is_bot": false,
      "login": "Joe-Kollin",
      "name": ""
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Affected Resource(s)\r\n\r\nTagging with RouteTables, Routes, and NAT Gateways\r\n\r\n### Debug Output\r\n\r\n### Expected Behavior\r\n\r\n```\r\n// Create NAT gateways\r\n    this.natGateways = this.publicSubnets.map((subnet, index) => {\r\n      return new vpc.NatGateway(\r\n        this,\r\n        `${this.config.environment}-${this.config.name}-public-subnet-nat-test-${index}`,\r\n        {\r\n          dependsOn: this.publicSubnets,\r\n          allocationId: this.natGatewayEips[index].allocationId,\r\n          subnetId: subnet.id,\r\n          tags: {\r\n            az: subnet.availabilityZone,\r\n          },\r\n        }\r\n      );\r\n    });\r\n\r\n// Create subnets tables\r\n    this.privateRouteTables = this.privateSubnets.map((subnet, index) => {\r\n      return new vpc.RouteTable(\r\n        this,\r\n        `${this.config.environment}-${this.config.name}-private-subnet-route-table-${index}`,\r\n        {\r\n          vpcId: this.vpc.id,\r\n          tags: {\r\n            'name': `${this.config.environment}-${this.config.name}-private-subnet-route-table-${subnet.id}`,\r\n            'network': 'private',\r\n            'subnetId': subnet.id,\r\n            'az': subnet.availabilityZone,\r\n          },\r\n        }\r\n      );\r\n    });\r\n\r\n// Create route table routes for each subnet\r\n    this.privateRouteTableRoutes = this.privateRouteTables.map((routeTable, index) => {\r\n      const natGatewayId = this.natGateways?.find((gateway) => {\r\n        return routeTable.tags.az === gateway.tags.az;\r\n      })?.id;\r\n\r\n      if (natGatewayId) return [];\r\n\r\n      return new vpc.Route(\r\n        this,\r\n        `${this.config.environment}-${this.config.name}-private-subnet-route-${index}`,\r\n        {\r\n          routeTableId: routeTable.id,\r\n          destinationCidrBlock: '0.0.0.0/0',\r\n          natGatewayId: natGatewayId,\r\n        }\r\n      );\r\n    }).flat();\r\n```\r\n\r\n### Actual Behavior\r\n\r\nI want to reference tags of a created object and the deref does not work\r\n\r\n### Steps to Reproduce\r\n\r\nCreate a resource with tags and try to reference tag values in the creation of another resource by dereferencing the tags of the former.\r\n\r\n- #0000\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5AUm_P",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "Hi @Joe-Kollin üëã\r\nIt is currently [not possible to iterate](https://github.com/hashicorp/terraform-cdk/issues/1089) on resources that are only known at runtime. References are resolved to Terraform references, so the actual values behind those will never be available in TypeScript while the code is synthesized.\r\n\r\nHowever, as you seem to be iterating over an array of subnets (`this.publicSubnets`), that probably also are created while the stack is synthesized, you could change your code to contain a single loop (over the AZs) and in there create the resources that are supposed to belong to that AZ.\r\n\r\nAnother option would be to use e.g. `subnet.availabilityZoneInput` which returns the value that was passed to the Subnet when it was created in your code. This is also available for `.tagsInput` and all other attributes that you set. Those are available at synth time. If you post a full example (e.g. in a separate Github repo) I could create a PR with that change if you want.",
        "createdAt": "2022-03-25T15:31:42Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1659#issuecomment-1079144399",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5AUuHK",
        "author": {
          "login": "Joe-Kollin"
        },
        "authorAssociation": "NONE",
        "body": "Thanks! No need to fix the changes, I can make them, but that helps",
        "createdAt": "2022-03-25T16:05:01Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1659#issuecomment-1079173578",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5Aj0Vi",
        "author": {
          "login": "skorfmann"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "Perhaps it would make sense to enrich the documentation around this behaviour a bit. Had a quick look at https://www.terraform.io/cdktf/concepts/tokens which could have a section (or even a completely new page) around dynamic behaviour like iterations. What do you think?",
        "createdAt": "2022-03-30T13:19:04Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1659#issuecomment-1083131234",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5Aj1TR",
        "author": {
          "login": "Joe-Kollin"
        },
        "authorAssociation": "NONE",
        "body": "Yeah I think that would help a lot. Using the `.tagsInput` or those input attributes in general has helped me a ton, and a quick spot to find recommendations or best practices for that sort of thing as well as cross stack references would be awesome.",
        "createdAt": "2022-03-30T13:22:41Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1659#issuecomment-1083135185",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5ApMGi",
        "author": {
          "login": "jsteinich"
        },
        "authorAssociation": "COLLABORATOR",
        "body": "When we initially added the `xInput` properties it was assumed that we'd eventually remove them. Given the direction that we've gone with tokens / references it seems like they are probably here to stay. Do you agree @skorfmann? If so, we can definitely improve the inline and external documentation around using them.",
        "createdAt": "2022-03-31T12:52:45Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1659#issuecomment-1084539298",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2022-03-25T14:58:10Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzgw",
        "name": "documentation",
        "description": "Improvements or additions to documentation",
        "color": "0075ca"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwyMjI4Mzg3NjY3",
        "name": "cdktf",
        "description": "",
        "color": "fccac4"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMTM2Mjc5MjMx",
        "name": "ux/configuration",
        "description": "",
        "color": "58FCA0"
      },
      {
        "id": "LA_kwDODd1Amc7KjeH8",
        "name": "feature/dynamic-terraform",
        "description": "",
        "color": "8D7D9C"
      }
    ],
    "milestone": null,
    "number": 1659,
    "title": "Can Not Deref Tags from another Object during creation",
    "updatedAt": "2022-04-19T15:22:33Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjE3NDg5MDk=",
      "is_bot": false,
      "login": "beanaroo",
      "name": "Michael Heyns"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### cdktf & Language Versions\r\n\r\ncdktfL 0.9.4\r\nTypescript: 4.6.2\r\n\r\n### Affected Resource(s)\r\n\r\nAll resources\r\n\r\n### Expected Behavior\r\n\r\nExamples should not emit issues for conventional code quality rules.\r\n\r\n### Actual Behavior\r\n\r\nESLint emits `no-new` errors: https://eslint.org/docs/rules/no-new\r\nSonarQube emits `Major Bug S1848`: https://rules.sonarsource.com/typescript/RSPEC-1848\r\n\r\n\r\n### Steps to Reproduce\r\n\r\n```typescript\r\nexport class HelloTerra extends TerraformStack {\r\n  constructor(scope: Construct, id: string) {\r\n    super(scope, id);\r\n\r\n    new AwsProvider(this, \"aws\", {   // Emits Issue\r\n      region: \"eu-central-1\",\r\n    });\r\n\r\n    const region = new DataAwsRegion(this, \"region\");\r\n\r\n    new aws.DynamoDB.DynamodbTable(this, \"Hello\", {   // Emits Issue\r\n      name: `my-first-table-${region.name}`,\r\n      hashKey: \"temp\",\r\n      attribute: [{ name: \"id\", type: \"S\" }],\r\n      billingMode: \"PAY_PER_REQUEST\",\r\n    });\r\n  }\r\n}\r\n\r\n```\r\n\r\n### Important Factoids\r\n\r\nSearching the internet for information on these errors leads to advice that this is bad practice and should be avoided. This can be confusing for newcomers to the library.\r\n\r\nWorking in an organization that has shared/common linting rules makes it hard to justify adding exceptions.\r\n\r\nIt would be great if the documentation could address this, either through better examples or by clear explanation on why this approach is necessary.\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor documentation? For example:\r\n--->\r\n\r\n- [Should constructors ever be used only for side-effects?](https://softwareengineering.stackexchange.com/questions/343447/should-constructors-ever-be-used-only-for-side-effects)\r\n- [Why is using side effects bad practice in JavaScript constructors?](https://stackoverflow.com/questions/14694982/why-is-using-side-effects-bad-practice-in-javascript-constructors)\r\n- [Constructors should not cause side effects](https://blog.millermedeiros.com/constructors-should-not-cause-side-effects/)\r\n- [EsLint - Suppress \"Do not use 'new' for side effects\"](https://stackoverflow.com/questions/33287045/eslint-suppress-do-not-use-new-for-side-effects#comment103169690_33287410)\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5AwgUQ",
        "author": {
          "login": "jsteinich"
        },
        "authorAssociation": "COLLABORATOR",
        "body": "You are declaring what resources you want in your infrastructure. In a way, each new statement is like creating the infrastructure resource. Sometimes other pieces reference that (and you assign to a variable), but other times nothing needs to reference them.",
        "createdAt": "2022-04-02T01:25:19Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1682#issuecomment-1086457104",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5BRJ_L",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "Hi @beanaroo üëã\r\nI can see your reasoning here. While this pattern does not match conventional code quality rules, it is a core pattern of the underlying [constructs](https://github.com/aws/constructs) library which powers all CDKs. Hence the [AWS CDK](https://github.com/aws-samples/aws-cdk-examples/blob/master/typescript/lambda-manage-s3-event-notification/lib/sample-service-stack.ts#L35) and the [cdk8s](https://github.com/cdk8s-team/cdk8s/blob/master/examples/typescript/hello/index.ts#L12) also have examples sharing this pattern.\r\n\r\nWhile I couldn't find any material on this design decision (e.g. in the [AWS CDK RFC repo](https://github.com/aws/aws-cdk-rfcs/)), I suspect that this pattern has been chosen for simplicity and for the sentiment of `new Something()` which already suggests the \"creation\" of certain pieces of infrastructure.\r\n\r\nI like your idea on adding docs for this which is certainly something we could cover and where we could advise to disable said linting rules in CDKTF projects.",
        "createdAt": "2022-04-11T12:56:17Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1682#issuecomment-1095016395",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2022-04-01T21:21:06Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzgw",
        "name": "documentation",
        "description": "Improvements or additions to documentation",
        "color": "0075ca"
      },
      {
        "id": "MDU6TGFiZWwyNzQzNTkyMDA3",
        "name": "examples",
        "description": "",
        "color": "4AB3A0"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      }
    ],
    "milestone": null,
    "number": 1682,
    "title": "Typescript examples fail standard code analysis regarding constructor side-effects",
    "updatedAt": "2022-08-12T09:22:20Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjIxOTUyNjQ1",
      "is_bot": false,
      "login": "Thomas-X",
      "name": "Thomas Zwarts"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\nCurrently there's only 1:1 mappings for most TF providers, and this is an awesome thing to have. But the big selling point for CDK(in my eyes) is that there's higher level constructs which reduce all the bits and pieces you have to think about when using terraform or cloudformation, let's call the 1:1 mappings L1 constructs and anything above that L2. \r\n\r\nThis would involve having a higher level construct for highly used resources. Think of adding a L2 construct for AWS Lambda, a loadbalanced AWS ECS cluster etc. \r\n\r\nBasically supercharged terraform modules üòÉ \r\n\r\n#### *Cool, how would this look like?*\r\nConsider the following Lambda function setup:\r\n```typescript\r\n// rest of the stuff is \r\nconst lambdaRolePolicy = { // this could be typed!\r\n  \"Version\": \"2012-10-17\",\r\n  \"Statement\": [\r\n    {\r\n      \"Action\": \"sts:AssumeRole\",\r\n      \"Principal\": {\r\n        \"Service\": \"lambda.amazonaws.com\"\r\n      },\r\n      \"Effect\": \"Allow\",\r\n      \"Sid\": \"\"\r\n    }\r\n  ]\r\n};\r\nconst role = new aws.iam.IamRole(this, \"lambda-exec\", {\r\n  name: `learn-cdktf-${name}-${pet.id}`,\r\n  assumeRolePolicy: JSON.stringify(lambdaRolePolicy)\r\n});\r\n\r\nconst lambdaFunc = new aws.lambdafunction.LambdaFunction(this, \"learn-cdktf-lambda\", {\r\n  functionName: `learn-cdktf-${name}-${pet.id}`,\r\n  s3Bucket: bucket.bucket,\r\n  s3Key: lambdaArchive.key,\r\n  handler: config.handler,\r\n  runtime: config.runtime, // this could be a nice enum\r\n  role: role.arn\r\n});\r\n\r\n```\r\nThis requires a bunch of stuff I don't want to worry about when developing a simple lambda function (CDKTF could lighten this!)\r\n```typescript\r\nconst lambdaFunc = new LambdaFunction(this, \"l2-lambda-func\", {\r\n  functionName: 'foobar',\r\n  // role can be entirely omitted, just generate one behind the scenes that's assumed by lambda principal\r\n  runtime: aws.Lambda.Runtimes.DOTNETCORE3.1,\r\n  code: new AssetCode(\"./code.zip\"),\r\n  // for the rest provide sensible defaults, use nullable features where possible to indicate a required property etc\r\n});\r\n```\r\n\r\nI'm more than happy to spend some time on this if this is something we actually want\r\n\r\n### References\r\nThere's many, but the start would be removing all these hardcoded strings which could be in enums across most resources and eliminating the size of code needed for highly used resources by adding sensible defaults and 1st class 'modules'. \r\nhttps://docs.aws.amazon.com/cdk/api/v2/docs/aws-cdk-lib.aws_s3.BucketAccessControl.html\r\nhttps://docs.aws.amazon.com/cdk/api/v2/docs/aws-cdk-lib.aws_lambda.RuntimeFamily.html\r\nhttps://docs.aws.amazon.com/cdk/api/v2/docs/aws-cdk-lib.aws_s3.RedirectProtocol.html\r\n\r\nprops like `autoDeleteObjects` on S3 bucketswould be a big boon https://docs.aws.amazon.com/cdk/api/v2/docs/aws-cdk-lib.aws_s3.Bucket.html#construct-props. There's countless ways we could make the library nicer to work with, which results in cleaner code for everyone.\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5A_fv4",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "Hi @Thomas-X üëã\r\nI really like your ideas! They sound a bit like #474. Would you say this is a duplicate of that issue?\r\n\r\nAs you're mostly proposing L2 constructs for AWS: Have you seen the [AWS adapter](https://www.terraform.io/cdktf/create-and-deploy/aws-adapter)?",
        "createdAt": "2022-04-06T15:12:18Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1686#issuecomment-1090386936",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5A_v6X",
        "author": {
          "login": "Thomas-X"
        },
        "authorAssociation": "NONE",
        "body": "Hi @ansgarm, thanks for the quick reply üëã . \r\nLooking at it this is a duplicate of that issue, you can close this if that's preferred. \r\n\r\nI checked out the AWS adapter (pretty neat!) but I think we should strive for 1st class citizen L2/L3 abstractions that use cdktf. This would enable us to make L2/L3 abstractions for other cloud providers as well.\r\n\r\nI'd like to have a crack at a basic implementation, anything I should know that's not in CONTRIBUTING.MD? \r\nI'll just setup a quick repo for one of the AWS services to begin with, basing it off the L2 implementation of the AWS CDK. \r\n\r\nI can update the other ticket or this one when I've done that, let me know\r\n ",
        "createdAt": "2022-04-06T16:14:18Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1686#issuecomment-1090453143",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5BDj2q",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "Ah, I see! Sounds like you have some slightly different thing in mind.\r\nPlease let me know if I understood you correctly, but instead of only having L2/L3 abstractions for each single cloud provider, you'd rather build a shared L3 first (e.g. an L3 construct for a \"hosted static website\") and then have different implementations based on the cloud provider (i.e. implementations for that abstraction). Is that right? If yes, we could rephrase this issue's title instead of closing it üëç\r\n\r\nWe also had some discussions about this in the team in the past. I personally am quite torn about it, as I fear that different cloud providers have too different ways of approaching granting access to resources. So an abstraction like `bucket.grantRead()` might work with AWS IAM but could become leaky for other cloud providers that have e.g. some group based access model (I _think_ Google does, but I'm not sure). But there might of course still be solutions to this problem and it could be possible to find a model that is not too leaky while supporting multiple patterns of \"granting access\". I also remember that @DanielMSchmidt also had some ideas around this and is less skeptic about such shared layers than I am üòÅ\r\n\r\nThe `CONTRIBUTING.md` mostly covers PRs to this repo, so feel free to just go ahead with a quick repo üëç Such a first draft would be much appreciated as it would serve as a good base for further discussions. However, of course we can't promise you that we'll adopt it.\r\n\r\nHave you seen the [cdktf-plus package](https://github.com/cdktf-plus/cdktf-plus)? @skorfmann started this some time ago to help with common boilerplate when deploying e.g. AWS lambda functions using CDKTF. It might serve as a good starting point about how to build a construct library.",
        "createdAt": "2022-04-07T09:54:28Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 3
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1686#issuecomment-1091452330",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5BEpzu",
        "author": {
          "login": "DanielMSchmidt"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "Yeah, I'd love to build this one day, if you happen to start with it let me know and I'll take a look üëç ",
        "createdAt": "2022-04-07T13:28:40Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1686#issuecomment-1091738862",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5PjcYs",
        "author": {
          "login": "github-actions"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "Hi there! üëã We haven't heard from you in 30 days and would like to know if the problem has been resolved or if you still need help. If we don't hear from you before then, I'll auto-close this issue in 30 days.",
        "createdAt": "2022-12-02T02:39:27Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1686#issuecomment-1334691372",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5WucSG",
        "author": {
          "login": "strongishllama"
        },
        "authorAssociation": "NONE",
        "body": "At the risk of putting words in @Thomas-X's mouth, I think he is talking about the same thing in issue #474. However, if one of these two issues is going to be closed, I would vote for it to be #474 as the description in this issue is a lot more comprehensive.\r\n\r\nI'd also love for something like this to exist, and might have some free time to dedicate to it. @ansgarm & @DanielMSchmidt it's been a while since there was any activity on these two open issues. Any updates on your end you'd like to share? Or a place you've made a start?\r\n\r\nPersonally, L2 & L3 constructs for GCP would be the most useful for me, so that's likely where I'd put my effort. Likely starting exclusively L2 and leaving L3 once the L2 API feels good and stable.\r\n\r\nWould love to hear your thoughts, thanks!",
        "createdAt": "2023-03-05T07:40:54Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1686#issuecomment-1455015046",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5WvOPI",
        "author": {
          "login": "RichiCoder1"
        },
        "authorAssociation": "NONE",
        "body": "I was just thinking about this myself!\r\n\r\nThe description of this issue alludes to it, but I think an important place to start (and good limited scope) would be asking what are the provider primitives that are missing for L2s that don't just provide higher level opinions.\r\n\r\nSo, for the AWS NodeJS Lambda example, the missing glue pieces for that are:\r\n\r\n* Asset management, aka automatically packaging and uploading assets to S3 (ideally in a more forward maintainable way that the CDK today). Ala S3 Assets/ECR Assets in the AWS CDK.\r\n* IAM Abstraction ala CDK AWS `aws_iam` to allow for sharing and creating intelligent iam policies\r\n\r\nIn addition, other abstractions are for example `IConnectable` and all the VPC/SG related abstractions.\r\n\r\nBuilding those would enable building L2s (as well as potentially unblocking the AWS adapter for asset cases).\r\n\r\nDitto for GCP and Azure, as I imagine they have the same IAM and Asset management concerns.",
        "createdAt": "2023-03-05T21:59:27Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1686#issuecomment-1455219656",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5XPHRw",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "Hi @strongishllama @RichiCoder1\r\n\r\nthank you for bringing up this topic! While there are no concrete plans or prototypes, we're very interested in exploring this!\r\n\r\nIf I were to start writing some L2 constructs for GCP, I'd probably start with a small NPM package that has a peer dependency on the pre-built provider for GCP and then create a few constructs to get a feel for it. At a later stage this could use the same setup as e.g. the [cdktf-tf-module-stack](https://github.com/cdktf/cdktf-tf-module-stack) repository (which uses JSII to support all CDK languages). If you have any questions, I'm happy to help and if you start something, let us know!\r\n\r\nIn regards to shared abstractions (like e.g. `IConnectable`), I personally think that this might be pretty hard to get right as it may be easy to accidentally create leaky abstractions if the underlying permission models are subtly different. For example some providers ‚Äì I think it was Azure, but I may be wrong ‚Äì commonly use groups of resources to define access, while others like AWS use more granular controls.\r\nSo an abstraction like `serverA.allowAccess(serverB); serverB.allowAccess(serverC)` might work for AWS but e.g. could put all servers into the same resource group for Azure, which might accidentally also allow access for `serverA` to `serverC` if implemented naively by putting all in the same group. But there might still be a way to find a good abstraction that doesn't require the user to know about such pitfalls.\r\nThat said, this might get even more interesting when access is given between resources from two different providers which might ultimately not be possible without additional supporting infrastructure and would require us to implement a matrix of connections to actually support such cross provider access controls üòÑ\r\n\r\nSo in the end, a layer 2 construct library for GCS might have its own abstractions for managing access that is not based on the same primitives that e.g. an AWS L2 construct library might be based on.\r\n\r\nHowever, there will probably be a common ground that is compatible across cloud providers, with e.g. asset management (as mentioned) being one thing that we're already looking at because we want to support that in the AWS Adapter. A Docker container that is built and uploaded to some registry for example would be very similar for lots of providers.\r\nBesides assets, there are probably other things that could rely on shared abstractions, and I'd say in general we'd be open to add such general abstractions to the `cdktf` core package (like e.g. an `DockerImageAsset`).",
        "createdAt": "2023-03-10T10:14:52Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1686#issuecomment-1463579760",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5XRgBz",
        "author": {
          "login": "RichiCoder1"
        },
        "authorAssociation": "NONE",
        "body": "Yup. To clarify, my intent was to not share anything between providers because of that exact issue. It's more work and possibly more redundancy, but I believe it would only do harm in the end to try and do any sort of multi-provider abstractions from the get-go for L2/L3s.\r\n\r\nI'd endorse building the basics specific to the major cloud platform providers, and only then possibly try and build multi-cloud abstractions after that. Even Asset I fear will have platform-specific quirks that won't necessarily translate well when you get into actually giving those assets to cloud services (uploaded from S3, must be in ECR for AWS examples).",
        "createdAt": "2023-03-10T18:23:54Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1686#issuecomment-1464205427",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5XUG16",
        "author": {
          "login": "strongishllama"
        },
        "authorAssociation": "NONE",
        "body": "Great, sounds like we're all on the same page to me. I'm going to start tinkering around [here](https://github.com/strongishllama/terraform-cdk-constructs). Feel free to reach out with any thoughts, feeling or feedback, it's all very welcome. It might be a little while before I have something I'm happy with/worth showing, so I'll post back here when there's a bit more there üòÅ ",
        "createdAt": "2023-03-11T11:15:21Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1686#issuecomment-1464888698",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5XZbZn",
        "author": {
          "login": "xiehan"
        },
        "authorAssociation": "MEMBER",
        "body": "I'll add that we here at HashiCorp have nothing against L2/L3 constructs and would _love_ it if there were more native constructs for CDKTF as well, we just don't have the staffing to make that a reality ourselves; there's so much to do on the constructs side that we'd likely need a separate team to _just_ focus on that, and that's not where we are today. This is why the only work we're committing to in the near-term is more work on the [AWS adapter](https://developer.hashicorp.com/terraform/cdktf/create-and-deploy/aws-adapter); I recognize that won't meet everyone's needs, but giving CDKTF users access to all AWS constructs is a super powerful thing in a world where we don't have enough constructs of our own yet. In the meantime, we're fully supportive of community contributions and recently added a [construct authoring guide](https://developer.hashicorp.com/terraform/cdktf/develop-custom-constructs/construct-design) to our documentation to encourage these. If there are any other meta-level things like that that we can do to make that easier, please let us know! üôÇ ",
        "createdAt": "2023-03-13T14:47:14Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 3
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1686#issuecomment-1466283623",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5Xc3qJ",
        "author": {
          "login": "RichiCoder1"
        },
        "authorAssociation": "NONE",
        "body": "> This is why the only work we're committing to in the near-term is more work on the [AWS adapter](https://developer.hashicorp.com/terraform/cdktf/create-and-deploy/aws-adapter);\r\n\r\nIronically one of the things missing from that called out here is the lack of asset support üòÖ. I def could see that bridge being great for AWS consumers otherwise though!\r\n\r\n>  If there are any other meta-level things like that that we can do to make that easier, please let us know! üôÇ\r\n\r\nOne thing that isn't absolutely necessary but might make @strongishllama and I's life easier is maybe expanding the scope of the `TerraformAsset` and maybe adding a `TerraformImage` resource. Being able to have the framework handle \"building\" assets, and then us taking over staging those assets in the appropriate cloud provider would probably help.",
        "createdAt": "2023-03-14T01:00:37Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1686#issuecomment-1467185801",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc65nPkr",
        "author": {
          "login": "so0k"
        },
        "authorAssociation": "NONE",
        "body": "@xiehan , @RichiCoder1 , @Thomas-X - I totally missed this issue but I started working on L2 constructs about a year ago and ended up adding more and more AWSCDK polyfills (including asset manager, Aspect to transfer construct node dependencies to `depends_on` property and so on.\n\nI've also built an LLM workflow to automate porting AWSCDK to CDKTF provider-aws\n\nthe result of that is https://terraconstructs.dev  and full support for running the cdkworkshop (at https://aws-workshop.terraconstructs.dev )\n\nI'm curious to explore using the LLM workflow and the provider for gcp to see if LLMs can help design the L2 constructs for other clouds.\n\nin the mean time I keep porting the awscdk modules I need at my place of work and anyone is welcome to use and or contribute (this is Apache 2.0 licensed)",
        "createdAt": "2025-07-24T16:17:26Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1686#issuecomment-3114072363",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2022-04-05T10:12:29Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzk3",
        "name": "help wanted",
        "description": "Community contributions welcome as the core team is unlikely to work on this soon",
        "color": "008672"
      },
      {
        "id": "MDU6TGFiZWwyMjk5ODU0MzY0",
        "name": "abstractions (level 2 / level 3)",
        "description": "",
        "color": "279ebc"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      }
    ],
    "milestone": null,
    "number": 1686,
    "title": "Higher level Constructs",
    "updatedAt": "2025-07-24T16:17:26Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjEzNDA4NDU2",
      "is_bot": false,
      "login": "schersh",
      "name": "Sarah MacDonald"
    },
    "body": "Placeholder for engineering work to make improvements to `cdktf init` workflow, as identified in https://github.com/hashicorp/terraform-cdk/issues/1704",
    "comments": [],
    "createdAt": "2022-04-08T20:44:29Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwyMjYwNjQ0NDQx",
        "name": "cdktf-cli",
        "description": "",
        "color": "82e5de"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "LA_kwDODd1Amc7KmqHq",
        "name": "planning/placeholder",
        "description": "capacity-planning placeholder issue",
        "color": "1D435A"
      },
      {
        "id": "LA_kwDODd1Amc7x0kYM",
        "name": "feature/init",
        "description": "cdktf init related features",
        "color": "C1E24A"
      }
    ],
    "milestone": null,
    "number": 1705,
    "title": "[Placeholder] Improve `init` workflow",
    "updatedAt": "2023-06-02T10:12:58Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjIyNzkwOQ==",
      "is_bot": false,
      "login": "amcdnl",
      "name": "Austin"
    },
    "body": "## Description\r\nCurrently the CDKTF supports `TerraformAsset` which work nicely for resources like Lambda files, however, for static web application deploys to S3 its not ideal.\r\n\r\nI've been attempting to do it something like this ( based on a few articles ):\r\n\r\n```\r\n    const files = glob.sync('../build/**/*', { absolute: false, nodir: true });\r\n    for (const file of files) {\r\n      new S3Object(this, `aws_s3_bucket_object_${path.basename(file)}`, {\r\n        dependsOn: [bucket],\r\n        key: file.replace(`../build/`, ''),\r\n        bucket: bucket.bucket,\r\n        source: path.resolve(file),\r\n        etag: `${Date.now()}`,\r\n        contentType: mime.contentType(path.extname(file)) || undefined\r\n      });\r\n    }\r\n```\r\n\r\nHowever, this approach is VERY slow since it has to catalog all the assets/etc and then manually upload one by one. When you have a fair amount of static assets like SVG icons or something, it can take 5+ minutes for a simple upload. I ended up moving this out of the process for the time being due to that but found the AWS CDK has  a nice approach to handle this using a `BucketDeployment` construct:\r\n\r\n```\r\n        new deploy.BucketDeployment(this, \"Deployment\", {\r\n            sources: [deploy.Source.asset(\"./build\")],\r\n            destinationBucket: siteBucket,\r\n            distribution: siteDistribution,\r\n            distributionPaths: [\"/*\"]\r\n        });\r\n```\r\n\r\nReference: https://dev.to/paulallies/deploy-your-static-react-app-to-aws-cloudfront-using-cdk-44hm\r\n\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5B3TGD",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "Hi @amcdnl üëã\r\nThat's a great idea. When building the serverless end to end example a while ago, I used the [aws-cli directly to sync files](https://github.com/hashicorp/cdktf-integration-serverless-example/blob/691ef0e646965fd1ccecb896c4707d397848e4ef/frontend/code/scripts/deploy.js#L11) to S3. But I agree, that we could support this via the CDKTF itself ‚Äì maybe some kind of \"deployment\" construct might cover this in the future while allowing for different cloud provider specific implementations to work underneath.\r\n\r\n@skorfmann did we have some kind of design issue for this broad topic already? I tried to find some, but didn't find anything besides the `TerraformAsset` feature, but that only copies / bundles files for use within the Terraform stage.",
        "createdAt": "2022-04-21T10:16:43Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "HOORAY",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1730#issuecomment-1105015171",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5B3wdg",
        "author": {
          "login": "amcdnl"
        },
        "authorAssociation": "NONE",
        "body": "@ansgarm - Thanks for the quick response. \r\n\r\nThats literally one of the resources I found when trying to figure this out. I ended up using a Github Actions command to do this over a script:\r\n\r\n```\r\n    - uses: jakejarvis/s3-sync-action@master\r\n      with:\r\n        args: --acl public-read --follow-symlinks --delete\r\n```\r\n\r\nOne other suggestion I wanted to make here is that TypeScript users are typically web devs and while I'm not new to this type of stuff by any means, it still took me several hours to get something going end-to-end. I feel like your really missing a huge community that would love this but it needs to be radically more simple to do simple things like deploy a create-react-app application and this could help. React even has a guide for different deployment models that I would encourage you to check out ( https://create-react-app.dev/docs/deployment ).",
        "createdAt": "2022-04-21T12:16:29Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1730#issuecomment-1105135456",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5B4LcP",
        "author": {
          "login": "skorfmann"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "> @skorfmann did we have some kind of design issue for this broad topic already? I tried to find some, but didn't find anything besides the `TerraformAsset` feature, but that only copies / bundles files for use within the Terraform stage.\r\n\r\nNot that I'm aware of. \r\n\r\nFYI: The mentioned [BucketDeployment](https://github.com/aws/aws-cdk/blob/10f5ede7ed4b835df6406f1b457e2b1230bef4df/packages/%40aws-cdk/aws-s3-deployment/lib/bucket-deployment.ts) construct does some heavy lifting behind the scenes which would likely work quite differently on our end.\r\n\r\nWould agree with @ansgarm here that some third party tooling is the best option for these kind of tasks at the moment.",
        "createdAt": "2022-04-21T13:57:15Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1730#issuecomment-1105245967",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5B4dRR",
        "author": {
          "login": "amcdnl"
        },
        "authorAssociation": "NONE",
        "body": "@skorfmann - \r\n\r\n> Would agree with @ansgarm here that some third party tooling is the best option for these kind of tasks at the moment.\r\n\r\nI found this article https://medium.com/scaffold/deploying-a-react-app-on-aws-s3-using-terraform-and-the-cdktf-eb7c91038879 which uses this product called Scaffold ( https://scaffold.sh/ ) but I don't really want 'yet another' thing in the mix to do a simple task. I was hoping CDKTF could help me eliminate these types of mundane scripting like this with abstractions for providers.\r\n",
        "createdAt": "2022-04-21T14:45:58Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1730#issuecomment-1105318993",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5gvIEM",
        "author": {
          "login": "ap0nia"
        },
        "authorAssociation": "NONE",
        "body": "I did some poking around and I cobbled together something that seems to work with the current version of the CDK (TypeScript). The implementation is based on the official [template-dir module](https://github.com/hashicorp/terraform-template-dir/tree/master).\r\n\r\n```ts\r\nimport cdktf from 'cdktf'\r\n\r\n// everything below inside of a stack\r\n\r\nconst bucket = new aws.s3Bucket.S3Bucket(this, 'bucket')\r\n\r\nconst fileTypes = new cdktf.TerraformLocal(this, \"file-types\", {\r\n  \".css\": \"text/css; charset=utf-8\",\r\n  \".js\": \"application/javascript\",\r\n  \".json\": \"application/json\",\r\n  // ... and rest of types from the module, or any you can find\r\n} )\r\n\r\nconst assets = new cdktf.TerraformAsset(this, 'assets', {\r\n  path: 'path/to/static/assets',\r\n  type: cdktf.AssetType.DIRECTORY,\r\n})\r\n\r\nconst forEach = cdktf.TerraformIterator.fromList(cdktf.Fn.fileset(assets.path, '**'))\r\n\r\nnew aws.s3Object.S3Object(this, 'dynamic-assets-upload', {\r\n    forEach,\r\n    bucket: assets.bucket,\r\n    forceDestroy: true,\r\n    key: forEach.value,\r\n    source: `${assets.path}/${forEach.value}`,\r\n    etag: cdktf.Fn.filemd5(`${assets.path}/${forEach.value}`),\r\n\r\n   // like the referenced module, every file is regex matched and the extension extracted;\r\n   // the extension is used to lookup from the local variable, \"fileTypes\",\r\n   // and defaults to \"application/octet-stream\" if not found\r\n    contentType: cdktf.Fn.lookup(\r\n      fileTypes.fqn,\r\n      cdktf.Fn.element(cdktf.Fn.regexall(\"\\.[^\\.]+$\", forEach.value), 0),\r\n      \"application/octet-stream\"\r\n    )\r\n  }\r\n)\r\n```\r\n\r\nIt would be great to know if this was helpful in any way!",
        "createdAt": "2023-07-06T04:41:04Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 1
            }
          },
          {
            "content": "HEART",
            "users": {
              "totalCount": 2
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1730#issuecomment-1622966540",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2022-04-19T17:05:48Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzk3",
        "name": "help wanted",
        "description": "Community contributions welcome as the core team is unlikely to work on this soon",
        "color": "008672"
      },
      {
        "id": "MDU6TGFiZWwyMjI4Mzg3NjY3",
        "name": "cdktf",
        "description": "",
        "color": "fccac4"
      },
      {
        "id": "MDU6TGFiZWwzMDEzNzM4ODIw",
        "name": "needs-research",
        "description": "",
        "color": "709F22"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMjA1MTIxODAz",
        "name": "enhancement/new-workflow",
        "description": "Proposed new workflow",
        "color": "4A1023"
      }
    ],
    "milestone": null,
    "number": 1730,
    "title": "Improve S3 Bucket Deployments for Web Apps",
    "updatedAt": "2023-07-06T04:41:53Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjExMTIwNTY=",
      "is_bot": false,
      "login": "ansgarm",
      "name": "Ansgar Mertens"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\nThis was initially part of #877 but got scoped out of that work:\r\n\r\nAdd a command that allows searching for Terraform providers in the Terraform Registry:\r\n```\r\n$> cdktf provider search kubernetes\r\n\r\nSearching registry.terraform.io for \"kubernetes\" providers...\r\nFound\r\nhashicorp/kubernetes (official) https://registry.terraform.io/providers/hashicorp/kubernetes\r\nhashicorp/kubernetes-alpha (official) https://registry.terraform.io/providers/hashicorp/kubernetes-alpha\r\nredux/kubernetes (community) https://registry.terraform.io/providers/redeux/kubernetes\r\n...\r\n```\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\n### References\r\nThe terraform registry currently lacks a suitable search API. The Terraform VSCode extensions wants similar functionality to support provider install/upgrade workflows, so collaboration with that team to add this to the Terraform registry would be needed to build the search portion of this functionality.\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [],
    "createdAt": "2022-04-25T13:43:08Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwyMjQ2NzM1NDk1",
        "name": "providers",
        "description": "",
        "color": "2bd8cd"
      },
      {
        "id": "MDU6TGFiZWwyMjYwNjQ0NDQx",
        "name": "cdktf-cli",
        "description": "",
        "color": "82e5de"
      },
      {
        "id": "MDU6TGFiZWwzMDEzNzM4ODIw",
        "name": "needs-research",
        "description": "",
        "color": "709F22"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMTM2MjgxMDY3",
        "name": "ux/cli",
        "description": "",
        "color": "40FE53"
      }
    ],
    "milestone": null,
    "number": 1744,
    "title": "Add `cdktf provider search` command",
    "updatedAt": "2023-03-09T11:56:44Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjExMTIwNTY=",
      "is_bot": false,
      "login": "ansgarm",
      "name": "Ansgar Mertens"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### cdktf & Language Versions\r\n\r\n0.10.4\r\n\r\n<!--- Please make note of the version you are using for the `hashicorp/terraform-cdk` and language bindings you are using.\r\nIf you are not running the latest version, please upgrade because your issue may have already been fixed. --->\r\n\r\n### Affected Resource(s)\r\n\r\n<!--- Please list the affected resources. --->\r\n\r\n### Debug Output\r\n\r\n<!---\r\nPlease provide a link to a GitHub Gist containing the complete debug output. Please do NOT paste the debug output in the issue; just paste a link to the Gist.\r\n--->\r\n\r\n### Expected Behavior\r\n\r\nShould work if possible or print a more useful warning (e.g. recommend `Fn.jsonencode()`).\r\n\r\n<!--- What should have happened? --->\r\n\r\n### Actual Behavior\r\n\r\nFails with\r\n\r\n`Error: Found an encoded list token string in a scalar string context. Use 'Fn.element(list, 0)' (not 'list[0]') to extract elements from token lists`\r\n<!--- What actually happened? --->\r\n\r\n### Steps to Reproduce\r\n\r\n```ts\r\nconst arr = [\"a\", \"b\", \"c\"];\r\nconst jsonString = JSON.stringify({\r\n  \"test:key\": Fn.concat([arr, arr]),\r\n});\r\nnew TerraformLocal(this, \"fails\", jsonString);\r\n```\r\n<!--- Please list the steps required to reproduce the issue. --->\r\n\r\n### Important Factoids\r\n\r\nUsing `Fn.jsonencode()` works as a workaround.\r\n\r\n<!--- Are there anything atypical about your accounts that we should know? --->\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor documentation? For example:\r\n--->\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5DDfXJ",
        "author": {
          "login": "DanielMSchmidt"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "I think it should print a better error message, but it should not work. The token could have any value and the serialization to JSON happens with the token as a string, so there could potentially be extra things rendered at execution time that don't match what a user would expect. But yeah we should try to make the error message clearer",
        "createdAt": "2022-05-12T13:21:53Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1796#issuecomment-1124988361",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2022-05-12T12:57:45Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzk3",
        "name": "help wanted",
        "description": "Community contributions welcome as the core team is unlikely to work on this soon",
        "color": "008672"
      },
      {
        "id": "MDU6TGFiZWwyMjI4Mzg3NjY3",
        "name": "cdktf",
        "description": "",
        "color": "fccac4"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMTM1OTU1Nzk1",
        "name": "ux/debugging",
        "description": "",
        "color": "2703FD"
      },
      {
        "id": "MDU6TGFiZWwzMTM2Mjc5MjMx",
        "name": "ux/configuration",
        "description": "",
        "color": "58FCA0"
      },
      {
        "id": "LA_kwDODd1Amc8AAAABH924aQ",
        "name": "bug/has-workaround",
        "description": "A bug with a workaround (may not be elegant)",
        "color": "9e202d"
      }
    ],
    "milestone": null,
    "number": 1796,
    "title": "Using `JSON.stringify()` falsely triggers `scalar list token string in a scalar string context` error",
    "updatedAt": "2023-06-01T14:33:05Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjEzMzcwNDY=",
      "is_bot": false,
      "login": "DanielMSchmidt",
      "name": "Daniel Schmidt"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\nThis flag would instruct convert to maintain the logical IDs throughout the converted code & it would throw errors if the TF overall does not seem to be sound or if provider versions are missing. Sort of a strict mode that has the goal to produce CDKTF code that could theoretically be used with the same backend and a plan would show no diff. Although this might be a bit of a north star goal since the conversion is hard to make perfect in every detail.\r\n\r\nOnce this flag is implemented we can strip the extra soundness checks and logical id overrides from our normally produced cdktf code and get a more permissive version of convert to convert shorter incomplete snippets\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5DDpZa",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "Sounds like `--strict` could also be a good name, what do you think?",
        "createdAt": "2022-05-12T13:57:19Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1800#issuecomment-1125029466",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5DDqq0",
        "author": {
          "login": "DanielMSchmidt"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "I don't like strict because it does not cover the logical id part, at least in my understanding of the word ü§î ",
        "createdAt": "2022-05-12T14:02:05Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1800#issuecomment-1125034676",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5DQINB",
        "author": {
          "login": "jsteinich"
        },
        "authorAssociation": "COLLABORATOR",
        "body": "`production-ready` seems like a strange flag name. `strict` does seem closer to me.\r\n\r\nWhat do you mean by `does not seem to be sound`?\r\n\r\nI would expect the init from tf project flow to continue functioning as is. The `convert` command does seem like it should emit the logical id override though. Would be good to have user feedback to confirm the use cases though.",
        "createdAt": "2022-05-17T01:26:23Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1800#issuecomment-1128301377",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2022-05-12T13:45:12Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMTg1Mzg1NTQ2",
        "name": "feature/convert",
        "description": "",
        "color": "d93f0b"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjEz",
        "name": "size/medium",
        "description": "estimated < 1 week",
        "color": "291E63"
      }
    ],
    "milestone": null,
    "number": 1800,
    "title": "Convert: Introduce \"production-ready\" flag",
    "updatedAt": "2023-06-01T16:38:50Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjEzMzcwNDY=",
      "is_bot": false,
      "login": "DanielMSchmidt",
      "name": "Daniel Schmidt"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\nWe can use the functionality provided in #877 to ask the user if they want to install missing providers in their project, to detect if a provider is already (natively) installed and use the correct import statement for that provider accordingly\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [],
    "createdAt": "2022-06-07T13:58:31Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwyMjQ2NzM1NDk1",
        "name": "providers",
        "description": "",
        "color": "2bd8cd"
      },
      {
        "id": "MDU6TGFiZWwyMjYwNjQ0NDQx",
        "name": "cdktf-cli",
        "description": "",
        "color": "82e5de"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMTM2MjgxMDY3",
        "name": "ux/cli",
        "description": "",
        "color": "40FE53"
      },
      {
        "id": "MDU6TGFiZWwzMTg1Mzg1NTQ2",
        "name": "feature/convert",
        "description": "",
        "color": "d93f0b"
      }
    ],
    "milestone": null,
    "number": 1853,
    "title": "Convert should use pre-built providers if possible",
    "updatedAt": "2023-03-09T11:45:31Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjExMTIwNTY=",
      "is_bot": false,
      "login": "ansgarm",
      "name": "Ansgar Mertens"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\nThe [dynamic blocks docs](https://www.terraform.io/language/expressions/dynamic-blocks) state:\r\n> The labels argument (optional) is a list of strings that specifies the block labels, in order, to use for each generated block. You can use the temporary iterator variable in this value.\r\n\r\nWe currently don't support passing labels although they seem to be [quite rare](https://discuss.hashicorp.com/t/labels-in-dynamic-block/21461/5).\r\n\r\nI'm not sure whether we support blocks that require labels at all at the current moment.\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\n### References\r\n\r\nRelated todo in our code base\r\nhttps://github.com/hashicorp/terraform-cdk/blob/85c5a0912c608acd088c600f24f1cdb12a2ee27d/packages/cdktf/lib/terraform-dynamic-block.ts#L13\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [],
    "createdAt": "2022-07-20T10:28:08Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzk3",
        "name": "help wanted",
        "description": "Community contributions welcome as the core team is unlikely to work on this soon",
        "color": "008672"
      },
      {
        "id": "MDU6TGFiZWwyMjI4Mzg3NjY3",
        "name": "cdktf",
        "description": "",
        "color": "fccac4"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMTM2MjkzOTA4",
        "name": "core-parity",
        "description": "Better experience in Terraform Core than CDKTF",
        "color": "1A80B6"
      },
      {
        "id": "LA_kwDODd1Amc8AAAABBv4DFg",
        "name": "feature/iterators",
        "description": "",
        "color": "2911A8"
      }
    ],
    "milestone": null,
    "number": 1939,
    "title": "Support `labels` in `TerraformDynamicBlock`",
    "updatedAt": "2023-06-02T14:15:54Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjQ2MjAx",
      "is_bot": false,
      "login": "hans-d",
      "name": "Hans Donner"
    },
    "body": "('override' must be specified using a Class, and cannot have a dict (python)\r\n\r\n```\r\n        asg = autoscaling.AutoscalingGroup(self, \"auto\",\r\n                                           mixed_instances_policy={\r\n                                               \"launch_template\": {\r\n                                                   \"launch_template_specification\": {\r\n                                                       \"launch_template_id\": tmpl.id\r\n                                                   },\r\n                                                   \"override\": [\r\n                                                       {\"instance_type\": \"t3.micro\"},\r\n                                                       autoscaling.AutoscalingGroupMixedInstancesPolicyLaunchTemplateOverride(\r\n                                                           instance_type = \"t3.micro\"\r\n                                                       )\r\n                                                   ]\r\n                                               }\r\n\r\n                                           },\r\n                                           availability_zones=[\"us-east-1a\", \"us-east-1b\"],\r\n                                           min_size=1,\r\n                                           max_size=10,\r\n                                           )\r\n\r\n```\r\ntranslates to:\r\n```\r\n    \"aws_autoscaling_group\": {\r\n      \"ec2_auto_16C147B8\": {\r\n        \"//\": {\r\n          \"metadata\": {\r\n            \"path\": \"proj1/ec2/auto\",\r\n            \"uniqueId\": \"ec2_auto_16C147B8\"\r\n          }\r\n        },\r\n        \"availability_zones\": [\r\n          \"us-east-1a\",\r\n          \"us-east-1b\"\r\n        ],\r\n        \"max_size\": 10,\r\n        \"min_size\": 1,\r\n        \"mixed_instances_policy\": {\r\n          \"launch_template\": {\r\n            \"launch_template_specification\": {\r\n              \"launch_template_id\": \"${aws_launch_template.ec2_tmpl_7F4E28E6.id}\"\r\n            },\r\n            \"override\": [\r\n              {\r\n              },\r\n              {\r\n                \"instance_type\": \"t3.micro\"\r\n              }\r\n            ]\r\n          }\r\n        }\r\n      }\r\n    },\r\n```",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5HpNRy",
        "author": {
          "login": "jsteinich"
        },
        "authorAssociation": "COLLABORATOR",
        "body": "Seems related to https://github.com/aws/jsii/issues/1919 (Passing dict in lieu of jsii structs does not consistently work).",
        "createdAt": "2022-08-02T03:52:19Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1975#issuecomment-1201984626",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5d-kPF",
        "author": {
          "login": "DanielMSchmidt"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "This is still an issue",
        "createdAt": "2023-06-05T12:19:17Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1975#issuecomment-1576682437",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2022-07-24T15:09:30Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwyMTEzNjU3MzA2",
        "name": "language/python",
        "description": "",
        "color": "5c2596"
      },
      {
        "id": "MDU6TGFiZWwyMjI4Mzg3NjY3",
        "name": "cdktf",
        "description": "",
        "color": "fccac4"
      },
      {
        "id": "MDU6TGFiZWwyMjQ2NzM3OTc1",
        "name": "upstream/jsii",
        "description": "Pending upstream work on JSII",
        "color": "f9a2cf"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMTM1OTcwMTgw",
        "name": "provider/aws",
        "description": "Issue shows up using AWS provider",
        "color": "396F8B"
      },
      {
        "id": "LA_kwDODd1Amc8AAAABH924aQ",
        "name": "bug/has-workaround",
        "description": "A bug with a workaround (may not be elegant)",
        "color": "9e202d"
      }
    ],
    "milestone": null,
    "number": 1975,
    "title": "AutoscalingGroup mixed_instances_policy override cannot take a dict as value (python)",
    "updatedAt": "2023-06-23T08:55:51Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjcyNTI3MDQ0",
      "is_bot": false,
      "login": "Maed223",
      "name": "Mark DeCrane"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### cdktf & Language Versions\r\nLanguage: Python\r\nCDKTF Version: 0.12\r\n\r\n<!--- Please make note of the version you are using for the `hashicorp/terraform-cdk` and language bindings you are using.\r\nIf you are not running the latest version, please upgrade because your issue may have already been fixed. --->\r\n\r\n### Affected Resource(s)\r\n\r\nTesting assertions\r\n\r\n<!--- Please list the affected resources. --->\r\n\r\n### Debug Output\r\n\r\n[View here](https://gist.github.com/Maed223/d3e662a94c12b90a50e7a5f53a7f3980)\r\n\r\n<!---\r\nPlease provide a link to a GitHub Gist containing the complete debug output. Please do NOT paste the debug output in the issue; just paste a link to the Gist.\r\n--->\r\n\r\n### Expected Behavior\r\n\r\nNo warning \r\n\r\n<!--- What should have happened? --->\r\n\r\n### Actual Behavior\r\n\r\nPytestCollectionWarning raised\r\n\r\n<!--- What actually happened? --->\r\n\r\n### Steps to Reproduce\r\n\r\n<!--- Please list the steps required to reproduce the issue. --->\r\nUsing any static method from cdktf.Testing within a pytest test suite\r\n\r\n### Important Factoids\r\n\r\nTo my understanding the issue causes no issues in terms of functionality, only an annoying warning. \r\n\r\nThe issue stems from the the naming of `Testing` as pytest attempts to collect the class as a test class since it's name is prefixed with `Test`. \r\n\r\n<!--- Are there anything atypical about your accounts that we should know? --->\r\n\r\n### References\r\n\r\n[Stack Overflow post describing the issue](https://stackoverflow.com/questions/58624641/how-to-prevent-pytestcollectionwarning-when-testing-class-testament-via-pytest) and a [post in the thread with a potential simple fix](https://stackoverflow.com/questions/58624641/how-to-prevent-pytestcollectionwarning-when-testing-class-testament-via-pytest#:~:text=You%20can%20set%20a%20__test__%20%3D%20False%20attribute%20in%20classes%20that%20pytest%20should%20ignore%3A)\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor documentation? For example:\r\n--->\r\n\r\n- #0000\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5IFJpZ",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "Just gave the the accepted answer at StackOverflow (`__test__ = False`) a quick test and unfortunately JSII does not allow properties starting with an underscore to be exposed to the other languages. So there's no simple way to get `__test__ = False` included in the generated Testing class in Python.\r\nMaybe there is another way to get `__test__` into the [`__dict__` property](https://stackoverflow.com/a/18445824/3420189) of the [Testing](https://stackoverflow.com/a/18445824/3420189) class, but I couldn't quickly find it.",
        "createdAt": "2022-08-09T12:20:19Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1999#issuecomment-1209309785",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5Il5Vq",
        "author": {
          "login": "nlucansk"
        },
        "authorAssociation": "NONE",
        "body": "Meanwhile to suppress warning you can create `pytest.ini` and add\r\n\r\n```\r\n[pytest]\r\nfilterwarnings =\r\n    ignore:::.*.cdktf:11850\r\n```\r\n\r\n![image](https://user-images.githubusercontent.com/51444462/185109067-7a0b1672-1652-4d62-8f12-cd3b57fa2adf.png)\r\n\r\n",
        "createdAt": "2022-08-17T11:37:07Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "HEART",
            "users": {
              "totalCount": 3
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1999#issuecomment-1217893738",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5fVLaY",
        "author": {
          "login": "gtback"
        },
        "authorAssociation": "NONE",
        "body": "Thanks, @nlucansk \r\n\r\nWith `cdktf 0.16.3`, I had to update the above to be: `ignore:::.*.cdktf:13637`",
        "createdAt": "2023-06-20T19:31:08Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "HEART",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1999#issuecomment-1599387288",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5leCBI",
        "author": {
          "login": "martimors"
        },
        "authorAssociation": "NONE",
        "body": "Is the `Testing` class static? If yes, can it not just be converted into a module, say `cdktf.testing`?",
        "createdAt": "2023-09-01T08:29:25Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/1999#issuecomment-1702371400",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2022-08-04T19:02:52Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzk3",
        "name": "help wanted",
        "description": "Community contributions welcome as the core team is unlikely to work on this soon",
        "color": "008672"
      },
      {
        "id": "MDU6TGFiZWwyNTcwMTY0OTY5",
        "name": "testing",
        "description": "",
        "color": "456cc6"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjEz",
        "name": "size/medium",
        "description": "estimated < 1 week",
        "color": "291E63"
      },
      {
        "id": "LA_kwDODd1Amc8AAAABH924aQ",
        "name": "bug/has-workaround",
        "description": "A bug with a workaround (may not be elegant)",
        "color": "9e202d"
      }
    ],
    "milestone": null,
    "number": 1999,
    "title": "PytestCollectionWarning raised in using cdktf.Testing static methods with Pytest",
    "updatedAt": "2023-09-01T08:29:26Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjQxODg2OA==",
      "is_bot": false,
      "login": "a0s",
      "name": "Anton Osenenko"
    },
    "body": "Not sure is it bug or feature\r\n\r\nThis is not working\r\n\r\n```typescript\r\nconst resolverEndpoint = new Route53ResolverEndpoint(this, \"resolver_endpoint\", <Route53ResolverEndpointConfig>{\r\n      provider: config.provider,\r\n      direction: \"INBOUND\",\r\n      securityGroupIds: [this.resolverSecurityGroup.id],\r\n      ipAddress: subnetIdsIterator.dynamic(<Route53ResolverEndpointIpAddress>{\r\n        subnetId: subnetIdsIterator.key\r\n      }),\r\n      tags: {\r\n        Name: \"vpn-resolver\"\r\n      }\r\n    })\r\n```\r\n\r\n```\r\n‚îÇ Error: Extraneous JSON object property\r\n‚îÇ \r\n‚îÇ   on cdk.tf.json line 1859, in resource.aws_route53_resolver_endpoint.vpn_endpoint_resolver_endpoint_61EF1F6A.dynamic.ip_address.content:\r\n‚îÇ 1859:               \"subnetId\": \"${each.key}\"\r\n‚îÇ \r\n‚îÇ No argument or block type is named \"subnetId\". Did you mean \"subnet_id\"?\r\n‚ïµ\r\n‚ï∑\r\n‚îÇ Error: Missing required argument\r\n‚îÇ \r\n‚îÇ   on cdk.tf.json line 1860, in resource.aws_route53_resolver_endpoint.vpn_endpoint_resolver_endpoint_61EF1F6A.dynamic.ip_address.content:\r\n‚îÇ 1860:             },\r\n‚îÇ \r\n‚îÇ The argument \"subnet_id\" is required, but no definition was found.\r\n\r\n```\r\n\r\nBut this works ok (but my perfectionism suffers at this point due to the use of an untyped struct)\r\n```typescript\r\nconst resolverEndpoint = new Route53ResolverEndpoint(this, \"resolver_endpoint\", <Route53ResolverEndpointConfig>{\r\n      provider: config.provider,\r\n      direction: \"INBOUND\",\r\n      securityGroupIds: [this.resolverSecurityGroup.id],\r\n      ipAddress: subnetIdsIterator.dynamic({\r\n        subnet_id: subnetIdsIterator.key\r\n      }),\r\n      tags: {\r\n        Name: \"vpn-resolver\"\r\n      }\r\n    })\r\n```\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5IJDwy",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "Hi @a0s üëã\r\nYeah, that is intentional at the moment, as we have no type information for the target attribute and we can't guess whether a key should be snake-case as it is part of Terraform config or whether it should stay as is because it may be part of unstructured data passed to e.g. a kubernetes spec.\r\nWe want to tackle this in the future (possibly in #1869 but that is currently more about the types of the \"input\").\r\n\r\nIf your example is safe enough to be snake cased everywhere, you could do something like this (untested, experimental, uses internal apis that could change):\r\n```ts\r\nimport { keysToSnakeCase } from 'cdktf/lib/util';\r\n\r\nconst resolverEndpoint = new Route53ResolverEndpoint(this, \"resolver_endpoint\", <Route53ResolverEndpointConfig>{\r\n      provider: config.provider,\r\n      direction: \"INBOUND\",\r\n      securityGroupIds: [this.resolverSecurityGroup.id],\r\n      ipAddress: subnetIdsIterator.dynamic(keysToSnakeCase(<Route53ResolverEndpointIpAddress>{\r\n        subnetId: subnetIdsIterator.key\r\n      })),\r\n      tags: {\r\n        Name: \"vpn-resolver\"\r\n      }\r\n});\r\n```\r\nThis only works in TypeScript and uses an utility function that CDKTF uses internally.",
        "createdAt": "2022-08-10T08:26:04Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2013#issuecomment-1210334258",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5IJzis",
        "author": {
          "login": "a0s"
        },
        "authorAssociation": "NONE",
        "body": "Thank you for response! This is an interesting trick.",
        "createdAt": "2022-08-10T11:16:03Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2013#issuecomment-1210529964",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2022-08-10T08:10:19Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzk3",
        "name": "help wanted",
        "description": "Community contributions welcome as the core team is unlikely to work on this soon",
        "color": "008672"
      },
      {
        "id": "MDU6TGFiZWwyMjI4Mzg3NjY3",
        "name": "cdktf",
        "description": "",
        "color": "fccac4"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMTM2Mjc5MjMx",
        "name": "ux/configuration",
        "description": "",
        "color": "58FCA0"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4Mjg1",
        "name": "size/small",
        "description": "estimated < 1 day",
        "color": "4671C0"
      },
      {
        "id": "LA_kwDODd1Amc8AAAABBv4DFg",
        "name": "feature/iterators",
        "description": "",
        "color": "2911A8"
      },
      {
        "id": "LA_kwDODd1Amc8AAAABH924aQ",
        "name": "bug/has-workaround",
        "description": "A bug with a workaround (may not be elegant)",
        "color": "9e202d"
      }
    ],
    "milestone": null,
    "number": 2013,
    "title": "Support typed structs inside dynamic iterators",
    "updatedAt": "2023-06-01T14:32:38Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjEyNzIzNTk0",
      "is_bot": false,
      "login": "lucasvieirasilva",
      "name": "Lucas Vieira"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\nThis feature is about adding the CLI option `--context` or `-c` to pass runtime context values to your CDK app, like in the AWS CDK.\r\n\r\nThis feature can be helpful in providing runtime values to the CDK app using a CLI format, currently, the only way is using environment variables.\r\n\r\n### References\r\n\r\n- [AWS CDK CLI](https://docs.aws.amazon.com/cdk/v2/guide/cli.html)\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5IR6Gq",
        "author": {
          "login": "jsteinich"
        },
        "authorAssociation": "COLLABORATOR",
        "body": "#347 has some additional thoughts on this topic.",
        "createdAt": "2022-08-12T01:50:56Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2019#issuecomment-1212653994",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5ITWU7",
        "author": {
          "login": "DanielMSchmidt"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "One can use a workaround by passing your context values in as environment variables and read them from your CDKTF program. I think one can also put them in the cdktf.json's context section, right @jsteinich ?",
        "createdAt": "2022-08-12T11:52:50Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2019#issuecomment-1213031739",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5ITYiB",
        "author": {
          "login": "lucasvieirasilva"
        },
        "authorAssociation": "NONE",
        "body": "> One can use a workaround by passing your context values in as environment variables and read them from your CDKTF program. I think one can also put them in the cdktf.json's context section, right @jsteinich ?\r\n\r\nYes, if you add in the `cdktf.json` you cannot change at runtime like you can in the AWS CDK by passing the `--context var1=value1`.\r\n\r\nRegarding the values as environment variables, I'm already doing that.",
        "createdAt": "2022-08-12T12:04:43Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2019#issuecomment-1213040769",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5vQmRu",
        "author": {
          "login": "jamrod"
        },
        "authorAssociation": "NONE",
        "body": "This is essential for maintaining multi-environment stacks, please integrate this functionality",
        "createdAt": "2023-12-21T16:40:04Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 2
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2019#issuecomment-1866622062",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc6YI19O",
        "author": {
          "login": "billyjbryant"
        },
        "authorAssociation": "NONE",
        "body": "Any word on context support in CDKTF? ",
        "createdAt": "2024-12-18T23:24:54Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2019#issuecomment-2552454990",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2022-08-11T20:26:39Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwyMjYwNjQ0NDQx",
        "name": "cdktf-cli",
        "description": "",
        "color": "82e5de"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMTM2Mjc5MjMx",
        "name": "ux/configuration",
        "description": "",
        "color": "58FCA0"
      },
      {
        "id": "MDU6TGFiZWwzMTM2MjgxMDY3",
        "name": "ux/cli",
        "description": "",
        "color": "40FE53"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjEz",
        "name": "size/medium",
        "description": "estimated < 1 week",
        "color": "291E63"
      }
    ],
    "milestone": null,
    "number": 2019,
    "title": "Specifying context values in the CDKTF CLI",
    "updatedAt": "2024-12-18T23:24:56Z"
  },
  {
    "assignees": [
      {
        "id": "MDQ6VXNlcjExMTIwNTY=",
        "login": "ansgarm",
        "name": "Ansgar Mertens",
        "databaseId": 0
      },
      {
        "id": "MDQ6VXNlcjEzMzcwNDY=",
        "login": "DanielMSchmidt",
        "name": "Daniel Schmidt",
        "databaseId": 0
      }
    ],
    "author": {
      "id": "MDQ6VXNlcjEzMzcwNDY=",
      "is_bot": false,
      "login": "DanielMSchmidt",
      "name": "Daniel Schmidt"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\n\r\nWe could use the [benchmark-action](https://github.com/benchmark-action/github-action-benchmark) to benchmark both the cdktf synth and get performance across languages to keep in mind to not worsen the current situation performance wise. This is the workflow the [jsii team uses](https://github.com/aws/jsii/blob/main/.github/workflows/main.yml#L361).\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [],
    "createdAt": "2022-08-17T20:53:09Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMTU1MzExNDc0",
        "name": "dev-process",
        "description": "Improvements to how CDK for Terraform is developed and built",
        "color": "F6A4ED"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjEz",
        "name": "size/medium",
        "description": "estimated < 1 week",
        "color": "291E63"
      },
      {
        "id": "MDU6TGFiZWwzMzE3NzI2NjM4",
        "name": "tech-debt",
        "description": "",
        "color": "191658"
      },
      {
        "id": "LA_kwDODd1Amc8AAAABEqTcrA",
        "name": "performance",
        "description": "Gotta go fast",
        "color": "890D75"
      }
    ],
    "milestone": null,
    "number": 2029,
    "title": "Performance: Create a benchmark for incoming changes",
    "updatedAt": "2023-06-01T16:09:00Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjExMTIwNTY=",
      "is_bot": false,
      "login": "ansgarm",
      "name": "Ansgar Mertens"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\nAs [mentioned](https://github.com/hashicorp/terraform-cdk/pull/2035#discussion_r951586064) by @a-h in #2035, we should not have the `replace` directive in the `go.mod` of our Go examples all the time but rather only add it when testing those examples in CI. Without the `replace` directive users could copy an individual Go example and use it as is.\r\n\r\nSo let's only add it in CI (e.g. in the existing `reinstall` script or in a separate CI-setup step).\r\nWe need to check, though, whether we also need to change the version for CDKTF from e.g. `0.12.0` to `0.0.0`.\r\nFurthermore it might make sense to add a script that can update the versions in the examples whenever we release a new major (aka minor while still below 1.0) version.\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [],
    "createdAt": "2022-08-23T07:04:53Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzk3",
        "name": "help wanted",
        "description": "Community contributions welcome as the core team is unlikely to work on this soon",
        "color": "008672"
      },
      {
        "id": "MDU6TGFiZWwyNzQzNTkyMDA3",
        "name": "examples",
        "description": "",
        "color": "4AB3A0"
      },
      {
        "id": "MDU6TGFiZWwzMDMwODE1NTQy",
        "name": "language/golang",
        "description": "",
        "color": "22ED90"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      }
    ],
    "milestone": null,
    "number": 2041,
    "title": "Remove `replace` directive from Go examples (add on-demand when running in CI instead)",
    "updatedAt": "2023-06-01T17:52:20Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjE2MjA0NDUy",
      "is_bot": false,
      "login": "benkeil",
      "name": "Ben Keil"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### cdktf & Language Versions\r\n\r\n```\r\ncom.hashicorp:cdktf:0.12.1\r\nsoftware.constructs:constructs:10.1.79\r\ncom.hashicorp:cdktf-provider-aws:9.0.15\r\ncom.hashicorp:cdktf-provider-vault:2.0.34\r\n\r\nterraform version\r\nTerraform v1.2.8\r\non darwin_arm64\r\n\r\ncdktf --version\r\n0.12.1\r\n```\r\n\r\n### Affected Resource(s)\r\n\r\nCan't load more then 1 module with cdktf java \r\n\r\n### Debug Output\r\n\r\n\r\n```\r\njava.lang.reflect.InvocationTargetException\r\n\tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n\tat java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499)\r\n\tat java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480)\r\n\tat kotlin.reflect.jvm.internal.calls.CallerImpl$Constructor.call(CallerImpl.kt:41)\r\n\tat kotlin.reflect.jvm.internal.KCallableImpl.call(KCallableImpl.kt:108)\r\n\tat io.kotest.engine.spec.InstantiateSpecKt.javaReflectNewInstance(instantiateSpec.kt:51)\r\n\tat io.kotest.engine.spec.InstantiateSpecKt.createAndInitializeSpec(instantiateSpec.kt:30)\r\n\tat io.kotest.engine.spec.InstantiateSpecKt.instantiate(instantiateSpec.kt:11)\r\n\tat io.kotest.engine.spec.SpecRefKt.instance(SpecRef.kt:14)\r\n\tat io.kotest.engine.spec.SpecExecutor.createInstance-gIAlu-s(SpecExecutor.kt:127)\r\n\tat io.kotest.engine.spec.SpecExecutor.access$createInstance-gIAlu-s(SpecExecutor.kt:48)\r\n\tat io.kotest.engine.spec.SpecExecutor$referenceInterceptors$innerExecute$1.invokeSuspend(SpecExecutor.kt:85)\r\n\tat io.kotest.engine.spec.SpecExecutor$referenceInterceptors$innerExecute$1.invoke(SpecExecutor.kt)\r\n\tat io.kotest.engine.spec.SpecExecutor$referenceInterceptors$innerExecute$1.invoke(SpecExecutor.kt)\r\n\tat io.kotest.engine.spec.interceptor.FinalizeSpecInterceptor.intercept-0E7RQCE(FinalizeSpecInterceptor.kt:19)\r\n\tat io.kotest.engine.spec.SpecExecutor$referenceInterceptors$3$1.invokeSuspend(SpecExecutor.kt:90)\r\n\tat io.kotest.engine.spec.SpecExecutor$referenceInterceptors$3$1.invoke(SpecExecutor.kt)\r\n\tat io.kotest.engine.spec.SpecExecutor$referenceInterceptors$3$1.invoke(SpecExecutor.kt)\r\n\tat io.kotest.engine.spec.interceptor.PrepareSpecInterceptor.intercept-0E7RQCE(PrepareSpecInterceptor.kt:20)\r\n\tat io.kotest.engine.spec.SpecExecutor$referenceInterceptors$3$1.invokeSuspend(SpecExecutor.kt:90)\r\n\tat io.kotest.engine.spec.SpecExecutor$referenceInterceptors$3$1.invoke(SpecExecutor.kt)\r\n\tat io.kotest.engine.spec.SpecExecutor$referenceInterceptors$3$1.invoke(SpecExecutor.kt)\r\n\tat io.kotest.engine.spec.interceptor.ApplyExtensionsInterceptor.intercept-0E7RQCE(ApplyExtensionsInterceptor.kt:35)\r\n\tat io.kotest.engine.spec.SpecExecutor$referenceInterceptors$3$1.invokeSuspend(SpecExecutor.kt:90)\r\n\tat io.kotest.engine.spec.SpecExecutor$referenceInterceptors$3$1.invoke(SpecExecutor.kt)\r\n\tat io.kotest.engine.spec.SpecExecutor$referenceInterceptors$3$1.invoke(SpecExecutor.kt)\r\n\tat io.kotest.engine.spec.interceptor.SpecFinishedInterceptor.intercept-0E7RQCE(SpecFinishedInterceptor.kt:21)\r\n\tat io.kotest.engine.spec.SpecExecutor$referenceInterceptors$3$1.invokeSuspend(SpecExecutor.kt:90)\r\n\tat io.kotest.engine.spec.SpecExecutor$referenceInterceptors$3$1.invoke(SpecExecutor.kt)\r\n\tat io.kotest.engine.spec.SpecExecutor$referenceInterceptors$3$1.invoke(SpecExecutor.kt)\r\n\tat io.kotest.engine.spec.interceptor.SpecStartedInterceptor.intercept-0E7RQCE(SpecStartedInterceptor.kt:19)\r\n\tat io.kotest.engine.spec.SpecExecutor$referenceInterceptors$3$1.invokeSuspend(SpecExecutor.kt:90)\r\n\tat io.kotest.engine.spec.SpecExecutor$referenceInterceptors$3$1.invoke(SpecExecutor.kt)\r\n\tat io.kotest.engine.spec.SpecExecutor$referenceInterceptors$3$1.invoke(SpecExecutor.kt)\r\n\tat io.kotest.engine.spec.interceptor.SpecRefExtensionInterceptor$intercept$inner$1.invokeSuspend(SpecRefExtensionInterceptor.kt:27)\r\n\tat io.kotest.engine.spec.interceptor.SpecRefExtensionInterceptor$intercept$inner$1.invoke(SpecRefExtensionInterceptor.kt)\r\n\tat io.kotest.engine.spec.interceptor.SpecRefExtensionInterceptor$intercept$inner$1.invoke(SpecRefExtensionInterceptor.kt)\r\n\tat io.kotest.engine.spec.interceptor.SpecRefExtensionInterceptor.intercept-0E7RQCE(SpecRefExtensionInterceptor.kt:30)\r\n\tat io.kotest.engine.spec.SpecExecutor$referenceInterceptors$3$1.invokeSuspend(SpecExecutor.kt:90)\r\n\tat io.kotest.engine.spec.SpecExecutor$referenceInterceptors$3$1.invoke(SpecExecutor.kt)\r\n\tat io.kotest.engine.spec.SpecExecutor$referenceInterceptors$3$1.invoke(SpecExecutor.kt)\r\n\tat io.kotest.engine.spec.interceptor.RequiresTagSpecInterceptor.intercept-0E7RQCE(RequiresTagSpecInterceptor.kt:35)\r\n\tat io.kotest.engine.spec.SpecExecutor$referenceInterceptors$3$1.invokeSuspend(SpecExecutor.kt:90)\r\n\tat io.kotest.engine.spec.SpecExecutor$referenceInterceptors$3$1.invoke(SpecExecutor.kt)\r\n\tat io.kotest.engine.spec.SpecExecutor$referenceInterceptors$3$1.invoke(SpecExecutor.kt)\r\n\tat io.kotest.engine.spec.interceptor.TagsExcludedSpecInterceptor.intercept-0E7RQCE(TagsExcludedDiscoveryExtension.kt:32)\r\n\tat io.kotest.engine.spec.SpecExecutor$referenceInterceptors$3$1.invokeSuspend(SpecExecutor.kt:90)\r\n\tat io.kotest.engine.spec.SpecExecutor$referenceInterceptors$3$1.invoke(SpecExecutor.kt)\r\n\tat io.kotest.engine.spec.SpecExecutor$referenceInterceptors$3$1.invoke(SpecExecutor.kt)\r\n\tat io.kotest.engine.spec.interceptor.SystemPropertySpecFilterInterceptor.intercept-0E7RQCE(SystemPropertySpecFilterInterceptor.kt:49)\r\n\tat io.kotest.engine.spec.SpecExecutor$referenceInterceptors$3$1.invokeSuspend(SpecExecutor.kt:90)\r\n\tat io.kotest.engine.spec.SpecExecutor$referenceInterceptors$3$1.invoke(SpecExecutor.kt)\r\n\tat io.kotest.engine.spec.SpecExecutor$referenceInterceptors$3$1.invoke(SpecExecutor.kt)\r\n\tat io.kotest.engine.spec.interceptor.SpecFilterInterceptor.intercept-0E7RQCE(SpecFilterInterceptor.kt:37)\r\n\tat io.kotest.engine.spec.SpecExecutor$referenceInterceptors$3$1.invokeSuspend(SpecExecutor.kt:90)\r\n\tat io.kotest.engine.spec.SpecExecutor$referenceInterceptors$3$1.invoke(SpecExecutor.kt)\r\n\tat io.kotest.engine.spec.SpecExecutor$referenceInterceptors$3$1.invoke(SpecExecutor.kt)\r\n\tat io.kotest.engine.spec.interceptor.IgnoredSpecInterceptor.intercept-0E7RQCE(IgnoredSpecInterceptor.kt:52)\r\n\tat io.kotest.engine.spec.SpecExecutor$referenceInterceptors$3$1.invokeSuspend(SpecExecutor.kt:90)\r\n\tat io.kotest.engine.spec.SpecExecutor$referenceInterceptors$3$1.invoke(SpecExecutor.kt)\r\n\tat io.kotest.engine.spec.SpecExecutor$referenceInterceptors$3$1.invoke(SpecExecutor.kt)\r\n\tat io.kotest.engine.spec.interceptor.EnabledIfSpecInterceptor.intercept-0E7RQCE(EnabledIfSpecInterceptor.kt:40)\r\n\tat io.kotest.engine.spec.SpecExecutor$referenceInterceptors$3$1.invokeSuspend(SpecExecutor.kt:90)\r\n\tat io.kotest.engine.spec.SpecExecutor$referenceInterceptors$3$1.invoke(SpecExecutor.kt)\r\n\tat io.kotest.engine.spec.SpecExecutor$referenceInterceptors$3$1.invoke(SpecExecutor.kt)\r\n\tat io.kotest.engine.spec.SpecExecutor.referenceInterceptors(SpecExecutor.kt:91)\r\n\tat io.kotest.engine.spec.SpecExecutor.execute(SpecExecutor.kt:60)\r\n\tat io.kotest.engine.ConcurrentTestSuiteScheduler$schedule$8$1$2.invokeSuspend(ConcurrentTestSuiteScheduler.kt:71)\r\n\tat kotlin.coroutines.jvm.internal.BaseContinuationImpl.resumeWith(ContinuationImpl.kt:33)\r\n\tat kotlinx.coroutines.DispatchedTask.run(DispatchedTask.kt:106)\r\n\tat kotlinx.coroutines.EventLoopImplBase.processNextEvent(EventLoop.common.kt:284)\r\n\tat kotlinx.coroutines.BlockingCoroutine.joinBlocking(Builders.kt:85)\r\n\tat kotlinx.coroutines.BuildersKt__BuildersKt.runBlocking(Builders.kt:59)\r\n\tat kotlinx.coroutines.BuildersKt.runBlocking(Unknown Source)\r\n\tat kotlinx.coroutines.BuildersKt__BuildersKt.runBlocking$default(Builders.kt:38)\r\n\tat kotlinx.coroutines.BuildersKt.runBlocking$default(Unknown Source)\r\n\tat io.kotest.common.RunBlockingKt.runBlocking(runBlocking.kt:3)\r\n\tat io.kotest.engine.TestEngineLauncher.launch(TestEngineLauncher.kt:194)\r\n\tat io.kotest.runner.junit.platform.KotestJunitPlatformTestEngine.execute(KotestJunitPlatformTestEngine.kt:82)\r\n\tat io.kotest.runner.junit.platform.KotestJunitPlatformTestEngine.execute(KotestJunitPlatformTestEngine.kt:46)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:96)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:75)\r\n\tat org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:99)\r\n\tat org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:79)\r\n\tat org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:75)\r\n\tat org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:61)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)\r\n\tat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\r\n\tat org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)\r\n\tat org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)\r\n\tat jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source)\r\n\tat org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193)\r\n\tat org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129)\r\n\tat org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100)\r\n\tat org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60)\r\n\tat org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)\r\n\tat org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:133)\r\n\tat org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)\r\n\tat worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)\r\n\tat worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)\r\nCaused by: software.amazon.jsii.JsiiException: Module 'terraform-aws-modules_s3-bucket_aws' not found\r\nError: Module 'terraform-aws-modules_s3-bucket_aws' not found\r\n    at exports.Kernel._typeInfoForFqn (/private/var/folders/c9/_w7dcm_1539b_fwzc6zs7gf40000gq/T/jsii-java-runtime7564311983626734599/lib/program.js:5359:38)\r\n    at exports.Kernel._findCtor (/private/var/folders/c9/_w7dcm_1539b_fwzc6zs7gf40000gq/T/jsii-java-runtime7564311983626734599/lib/program.js:5156:39)\r\n    at exports.Kernel._create (/private/var/folders/c9/_w7dcm_1539b_fwzc6zs7gf40000gq/T/jsii-java-runtime7564311983626734599/lib/program.js:5181:144)\r\n    at exports.Kernel.create (/private/var/folders/c9/_w7dcm_1539b_fwzc6zs7gf40000gq/T/jsii-java-runtime7564311983626734599/lib/program.js:4989:29)\r\n    at exports.KernelHost.processRequest (/private/var/folders/c9/_w7dcm_1539b_fwzc6zs7gf40000gq/T/jsii-java-runtime7564311983626734599/lib/program.js:6083:36)\r\n    at exports.KernelHost.run (/private/var/folders/c9/_w7dcm_1539b_fwzc6zs7gf40000gq/T/jsii-java-runtime7564311983626734599/lib/program.js:6057:48)\r\n    at Immediate._onImmediate (/private/var/folders/c9/_w7dcm_1539b_fwzc6zs7gf40000gq/T/jsii-java-runtime7564311983626734599/lib/program.js:6058:46)\r\n    at processImmediate (node:internal/timers:466:21)\r\n\tat software.amazon.jsii.JsiiRuntime.processErrorResponse(JsiiRuntime.java:124)\r\n\tat software.amazon.jsii.JsiiRuntime.requestResponse(JsiiRuntime.java:95)\r\n\tat software.amazon.jsii.JsiiClient.createObject(JsiiClient.java:89)\r\n\tat software.amazon.jsii.JsiiEngine.createNewObject(JsiiEngine.java:603)\r\n\tat imports.terraform_aws_modules.aws.S3Bucket.<init>(S3Bucket.java:17)\r\n\tat imports.terraform_aws_modules.aws.S3Bucket$Builder.build(S3Bucket.java:849)\r\n\tat de.otto.di.KotlinLambdaBuilderTest$1$stack$1.invoke(KotlinLambdaBuilderTest.kt:26)\r\n\tat de.otto.di.KotlinLambdaBuilderTest$1$stack$1.invoke(KotlinLambdaBuilderTest.kt:22)\r\n\tat de.otto.di.core.TerraformStackKt.<init>(TerraformStackKt.kt:8)\r\n\tat de.otto.di.KotlinLambdaBuilderTest$1.invoke(KotlinLambdaBuilderTest.kt:23)\r\n\tat de.otto.di.KotlinLambdaBuilderTest$1.invoke(KotlinLambdaBuilderTest.kt:20)\r\n\tat io.kotest.core.spec.style.FunSpec.<init>(funSpec.kt:25)\r\n\tat de.otto.di.KotlinLambdaBuilderTest.<init>(KotlinLambdaBuilderTest.kt:20)\r\n\t... 111 more\r\n```\r\n\r\n`cdktf.json`\r\n\r\n```\r\n{\r\n  \"language\": \"java\",\r\n  \"app\": \"./gradlew run\",\r\n  \"projectId\": \"cde4307b-d5d5-453d-a811-e51775ecc7d0\",\r\n  \"sendCrashReports\": \"false\",\r\n  \"codeMakerOutput\": \"src/main/java/imports\",\r\n  \"terraformProviders\": [],\r\n  \"terraformModules\": [\r\n    \"terraform-aws-modules/lambda/aws\",\r\n    \"terraform-aws-modules/s3-bucket/aws\"\r\n  ],\r\n  \"context\": {\r\n    \"excludeStackIdFromLogicalIds\": \"false\",\r\n    \"allowSepCharsInLogicalIds\": \"true\"\r\n  }\r\n}\r\n```\r\n\r\nEverything gets downloaded, but the $Modul.java seems to be wrong.\r\n\r\ncontent of `src/main/java/imports/terraform_aws_modules/aws/`\r\n\r\n```\r\n$Module.java\r\nLambda.java\r\nLambdaOptions.java\r\nS3Bucket.java\r\nS3BucketOptions.java\r\n```\r\n\r\ncontent of `src/main/java/imports/terraform_aws_modules/aws/$Module.java`\r\n\r\n```java\r\npackage imports.terraform_aws_modules.aws;\r\n\r\nimport static java.util.Arrays.asList;\r\n\r\nimport java.io.BufferedReader;\r\nimport java.io.InputStream;\r\nimport java.io.InputStreamReader;\r\nimport java.io.IOException;\r\nimport java.io.Reader;\r\nimport java.io.UncheckedIOException;\r\n\r\nimport java.nio.charset.StandardCharsets;\r\n\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Map;\r\n\r\nimport software.amazon.jsii.JsiiModule;\r\n\r\n@software.amazon.jsii.Internal\r\npublic final class $Module extends JsiiModule {\r\n    private static final Map<String, String> MODULE_TYPES = load();\r\n\r\n    private static Map<String, String> load() {\r\n        final Map<String, String> result = new HashMap<>();\r\n        final ClassLoader cl = $Module.class.getClassLoader();\r\n        try (final InputStream is = cl.getResourceAsStream(\"imports/terraform_aws_modules/aws/$Module.txt\");\r\n             final Reader rd = new InputStreamReader(is, StandardCharsets.UTF_8);\r\n             final BufferedReader br = new BufferedReader(rd)) {\r\n            br.lines()\r\n              .filter(line -> !line.trim().isEmpty())\r\n              .forEach(line ->  {\r\n                final String[] parts = line.split(\"=\", 2);\r\n                final String fqn = parts[0];\r\n                final String className = parts[1];\r\n                result.put(fqn, className);\r\n            });\r\n        }\r\n        catch (final IOException exception) {\r\n            throw new UncheckedIOException(exception);\r\n        }\r\n        return result;\r\n    }\r\n\r\n    private final Map<String, Class<?>> cache = new HashMap<>();\r\n\r\n    public $Module() {\r\n        super(\"terraform-aws-modules_lambda_aws\", \"0.0.0\", $Module.class, \"terraform-aws-modules_lambda_aws@0.0.0.jsii.tgz\");\r\n    }\r\n\r\n    @Override\r\n    public List<Class<? extends JsiiModule>> getDependencies() {\r\n        return asList(com.hashicorp.cdktf.$Module.class, software.constructs.$Module.class);\r\n    }\r\n\r\n    @Override\r\n    protected Class<?> resolveClass(final String fqn) throws ClassNotFoundException {\r\n        if (!MODULE_TYPES.containsKey(fqn)) {\r\n            throw new ClassNotFoundException(\"Unknown JSII type: \" + fqn);\r\n        }\r\n        String className = MODULE_TYPES.get(fqn);\r\n        if (!this.cache.containsKey(className)) {\r\n            this.cache.put(className, this.findClass(className));\r\n        }\r\n        return this.cache.get(className);\r\n    }\r\n\r\n    private Class<?> findClass(final String binaryName) {\r\n        try {\r\n            return Class.forName(binaryName);\r\n        }\r\n        catch (final ClassNotFoundException exception) {\r\n            throw new RuntimeException(exception);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\ncontent of `src/main/resources/imports/terraform_aws_modules/aws/`\r\n\r\n```\r\n$Module.txt\r\nterraform-aws-modules_lambda_aws@0.0.0.jsii.tgz\r\nterraform-aws-modules_s3-bucket_aws@0.0.0.jsii.tgz\r\n```\r\n\r\ncontent of `src/main/resources/imports/terraform_aws_modules/aws/$Module.txt`\r\n\r\n```\r\nterraform-aws-modules_lambda_aws.Lambda=imports.terraform_aws_modules.aws.Lambda\r\nterraform-aws-modules_lambda_aws.LambdaOptions=imports.terraform_aws_modules.aws.LambdaOptions\r\n```\r\n\r\n### Expected Behavior\r\n\r\nShould synthesize the stack\r\n\r\n### Actual Behavior\r\n\r\nException\r\n\r\n### Steps to Reproduce\r\n\r\n1. `cdktf init --template=java`\r\n1. Add 2 modules, e.g. `terraform-aws-modules/lambda/aws` and `terraform-aws-modules/s3-bucket/aws`\r\n1. Add one resource of each type2. \r\n1. synthesise the app\r\n\r\n### Important Factoids\r\n\r\nI let it run with Kolin, but I also tried a plain java project and java the same error.\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5JwDW-",
        "author": {
          "login": "jsteinich"
        },
        "authorAssociation": "COLLABORATOR",
        "body": "The auto naming is treating them both as having the name `aws`. This results in the output being partially overridden.\r\nYou can manually specify the names so that don't collide:\r\n```json\r\n\"terraformModules\": [\r\n          {\r\n                  \"source\": \"terraform-aws-modules/lambda/aws\",\r\n                  \"name\": \"lambda\"\r\n          },\r\n          {\r\n                \"source\": \"terraform-aws-modules/s3-bucket/aws\",\r\n                \"name\": \"s3\"\r\n          }\r\n  ]\r\n```",
        "createdAt": "2022-09-05T17:31:56Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2073#issuecomment-1237333438",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2022-08-28T16:07:43Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzk3",
        "name": "help wanted",
        "description": "Community contributions welcome as the core team is unlikely to work on this soon",
        "color": "008672"
      },
      {
        "id": "MDU6TGFiZWwyMjE3NjIyNTkw",
        "name": "modules",
        "description": "",
        "color": "2ffc8f"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMTM2MjAxMTE5",
        "name": "provider get / generation",
        "description": "",
        "color": "CC3938"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4Mjg1",
        "name": "size/small",
        "description": "estimated < 1 day",
        "color": "4671C0"
      },
      {
        "id": "LA_kwDODd1Amc8AAAABH924aQ",
        "name": "bug/has-workaround",
        "description": "A bug with a workaround (may not be elegant)",
        "color": "9e202d"
      }
    ],
    "milestone": null,
    "number": 2073,
    "title": "Cant't load more then 1 module in Java",
    "updatedAt": "2023-06-01T14:31:00Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjExMTIwNTY=",
      "is_bot": false,
      "login": "ansgarm",
      "name": "Ansgar Mertens"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\nCurrently there are docstrings for properties that can be set in config objects, for example:\r\n```ts\r\n/**\r\n  * Docs at Terraform Registry: {@link https://www.terraform.io/docs/providers/aws/r/s3_bucket#bucket S3Bucket#bucket}\r\n  */\r\nreadonly bucket?: string;\r\n```\r\n([source](https://github.com/hashicorp/cdktf-provider-aws/blob/ea5a2a5a45b6d5ed0a02b2f821ab6b5fd67a2aac/src/s3/s3-bucket.ts#L22-L25))\r\n\r\nbut not on setters or getters:\r\n```ts\r\npublic get bucket() {\r\n  return this.getStringAttribute('bucket');\r\n}\r\npublic set bucket(value: string) {\r\n  this._bucket = value;\r\n}\r\n```\r\n([source](https://github.com/hashicorp/cdktf-provider-aws/blob/ea5a2a5a45b6d5ed0a02b2f821ab6b5fd67a2aac/src/s3/s3-bucket.ts#L2022-L2027))\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [],
    "createdAt": "2022-09-16T11:08:13Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzgw",
        "name": "documentation",
        "description": "Improvements or additions to documentation",
        "color": "0075ca"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMTM2MjAxMTE5",
        "name": "provider get / generation",
        "description": "",
        "color": "CC3938"
      },
      {
        "id": "MDU6TGFiZWwzMTM2Mjc5MjMx",
        "name": "ux/configuration",
        "description": "",
        "color": "58FCA0"
      }
    ],
    "milestone": null,
    "number": 2121,
    "title": "Add docstrings for setters and getters in generated bindings as well",
    "updatedAt": "2023-09-29T12:53:22Z"
  },
  {
    "assignees": [
      {
        "id": "MDQ6VXNlcjU3MzUzMQ==",
        "login": "mutahhir",
        "name": "Mutahhir Hayat",
        "databaseId": 0
      }
    ],
    "author": {
      "id": "MDQ6VXNlcjExMTIwNTY=",
      "is_bot": false,
      "login": "ansgarm",
      "name": "Ansgar Mertens"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\nCurrently we do have a precommit hook that runs `yarn generate-docs:api` (if changes were made to the `cdktf` package). This runs between 3 to 6 minutes and interrupts the workflow.\r\n\r\nWe should change this to be a Github Workflow that runs on PRs and makes a commit if the docs were outdated (i.e. if running that command produced changes).\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [],
    "createdAt": "2022-09-16T14:48:29Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzgw",
        "name": "documentation",
        "description": "Improvements or additions to documentation",
        "color": "0075ca"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMTU1MzExNDc0",
        "name": "dev-process",
        "description": "Improvements to how CDK for Terraform is developed and built",
        "color": "F6A4ED"
      },
      {
        "id": "MDU6TGFiZWwzMzE3NzI2NjM4",
        "name": "tech-debt",
        "description": "",
        "color": "191658"
      }
    ],
    "milestone": null,
    "number": 2129,
    "title": "Add Github Action for PRs that updates API docs (instead of precommit hook)",
    "updatedAt": "2023-08-21T09:23:19Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjExMTIwNTY=",
      "is_bot": false,
      "login": "ansgarm",
      "name": "Ansgar Mertens"
    },
    "body": "Let's remember this bit when refactoring the provider get generation at some point.\r\n\r\n        Wouldn't it be valuable to keep this field on a resource model? Where is the namespace living now?\r\nI'd refrain from having it implicit in multiple places instead of explicitly queried from here ü§î\r\n\r\n_Originally posted by @ansgarm in https://github.com/hashicorp/terraform-cdk/pull/2087#discussion_r978714103_\r\n      ",
    "comments": [],
    "createdAt": "2022-09-29T15:49:35Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMTM2MjAxMTE5",
        "name": "provider get / generation",
        "description": "",
        "color": "CC3938"
      },
      {
        "id": "MDU6TGFiZWwzMzE3NzI2NjM4",
        "name": "tech-debt",
        "description": "",
        "color": "191658"
      }
    ],
    "milestone": null,
    "number": 2150,
    "title": "Generation: Refactor namespace field for code-generation",
    "updatedAt": "2023-06-01T17:13:34Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "U_kgDOBa6SIg",
      "is_bot": false,
      "login": "chun-ko",
      "name": "Chun Ko"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### cdktf & Language Versions\r\n\r\n<!--- Please make note of the version you are using for the `hashicorp/terraform-cdk` and pre-built provider you are using.\r\nIf you are not running the latest version, please upgrade because your issue may have already been fixed. --->\r\n\r\n### Affected Provider / Resource(s)\r\n\r\n<!--- Please list the affected resources. --->\r\n\r\n\r\n### Debug Output\r\n\r\nThis `priority` should be required field instead of optional\r\n\r\nhttps://github.com/cdktf/cdktf-provider-azurerm/blob/970b1a9f6a6c2b9fd9e44c575836675e4bd9c3fc/src/network-security-group/index.ts#L84\r\n\r\nBase on the documentation https://www.terraform.io/docs/providers/azurerm/r/network_security_group#priority\r\n\r\n\r\n<!---\r\nPlease provide a link to a GitHub Gist containing the complete debug output. Please do NOT paste the debug output in the issue; just paste a link to the Gist.\r\n--->\r\n\r\n### Expected Behavior\r\n\r\n<!--- What should have happened? --->\r\n\r\n### Actual Behavior\r\n\r\n<!--- What actually happened? --->\r\n\r\n### Steps to Reproduce\r\n\r\n<!--- Please list the steps required to reproduce the issue. --->\r\n\r\n### Important Factoids\r\n\r\n<!--- Are there anything atypical about your accounts that we should know? --->\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor documentation? For example:\r\n--->\r\n\r\n- #0000\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5ek6Qi",
        "author": {
          "login": "mutahhir"
        },
        "authorAssociation": "MEMBER",
        "body": "The `security_rule` block has the following schema: \r\n\r\n```json\r\n              \"security_rule\": {\r\n                \"type\": [\r\n                  \"set\",\r\n                  [\r\n                    \"object\",\r\n                    {\r\n                      \"access\": \"string\",\r\n                      \"description\": \"string\",\r\n                      \"destination_address_prefix\": \"string\",\r\n                      \"destination_address_prefixes\": [\r\n                        \"set\",\r\n                        \"string\"\r\n                      ],\r\n                      \"destination_application_security_group_ids\": [\r\n                        \"set\",\r\n                        \"string\"\r\n                      ],\r\n                      \"destination_port_range\": \"string\",\r\n                      \"destination_port_ranges\": [\r\n                        \"set\",\r\n                        \"string\"\r\n                      ],\r\n                      \"direction\": \"string\",\r\n                      \"name\": \"string\",\r\n                      \"priority\": \"number\",\r\n                      \"protocol\": \"string\",\r\n                      \"source_address_prefix\": \"string\",\r\n                      \"source_address_prefixes\": [\r\n                        \"set\",\r\n                        \"string\"\r\n                      ],\r\n                      \"source_application_security_group_ids\": [\r\n                        \"set\",\r\n                        \"string\"\r\n                      ],\r\n                      \"source_port_range\": \"string\",\r\n                      \"source_port_ranges\": [\r\n                        \"set\",\r\n                        \"string\"\r\n                      ]\r\n                    }\r\n                  ]\r\n                ],\r\n                \"description_kind\": \"plain\",\r\n                \"optional\": true,\r\n                \"computed\": true\r\n              },\r\n```\r\n\r\n@DanielMSchmidt will probably know more about this, but I think we're making all these optional because the schema does not define any object members as required or optional. I feel like this is a problem that would require some work from the azurerm provider to change the type of the `security_rule` to be an attribute block, or Terraform introducing required / optional within object attributes.\r\n\r\nLeaving this open for further discussion, but I'm unsure if we can resolve this on the CDKTF end.",
        "createdAt": "2023-06-12T07:20:45Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2228#issuecomment-1586734114",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2022-10-28T05:40:06Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwzMDEzNzM4ODIw",
        "name": "needs-research",
        "description": "",
        "color": "709F22"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMTM2MjAxMTE5",
        "name": "provider get / generation",
        "description": "",
        "color": "CC3938"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjEz",
        "name": "size/medium",
        "description": "estimated < 1 week",
        "color": "291E63"
      },
      {
        "id": "LA_kwDODd1Amc78pgm0",
        "name": "pre-built providers",
        "description": "Issues around pre-built providers managed at https://github.com/hashicorp/cdktf-repository-manager",
        "color": "E06AA9"
      }
    ],
    "milestone": null,
    "number": 2228,
    "title": "`azurerm` provider: priority field should be required field in Network Security Group",
    "updatedAt": "2023-06-12T07:21:39Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjgwMDUxOTQ=",
      "is_bot": false,
      "login": "lossanarch",
      "name": "Stephen Hallett"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### cdktf & Language Versions\r\n\r\ngithub.com/hashicorp/terraform-cdk-go/cdktf v0.13.3\r\ngithub.com/aws/jsii-runtime-go v1.71.0\r\ncdktf-cli v0.12.3 & v0.13.3\r\n\r\n### Affected Resource(s)\r\n\r\nElement function:\r\ngithub.com/hashicorp/terraform-cdk-go/cdktf.Fn_Element(list interface{}, index *float64) interface{}\r\n\r\n### Debug Output\r\n\r\nhttps://gist.github.com/lossanarch/ba5bcd5c404bd6a895f229d289b7e66c\r\n\r\n### Expected Behavior\r\n\r\nthe list argument of `Fn_Element` should receive a `*[]*string` without panic, as this is the most common return type from various list returning methods such as `cdktf.TerraformLocal.AsList()` or `cdktf.Token.AsList()` (and of course the example below)\r\n\r\n### Actual Behavior\r\n\r\nSynth panics with `panic: parameter list must be one of the allowed types: *[]interface{}, IResolvable; received &[]*string{(*string)(0x1400036b670)} (a *[]*string)`\r\n\r\n### Steps to Reproduce\r\n\r\n1. Create a data resource that returns a list of objects, eg:\r\n```\r\ninstance := dataawsssoadmininstances.NewDataAwsSsoadminInstances(stack, jsii.String(\"SsoInstances\"),\r\n\t\t&dataawsssoadmininstances.DataAwsSsoadminInstancesConfig{})\r\n```\r\n2. Use Fn_Element() to select an element from that list\r\n```\r\nidentityStoreId := cdktf.Fn_Element(instance.IdentityStoreIds(), jsii.Number(0)).(string)\r\n```\r\n\r\n### Important Factoids\r\n\r\nThis worked in 0.12 and only broke after upgrading to the above package versions. Tested with both 0.12 and 0.13 cdktf-cli versions.\r\nThe issue can be worked around by putting the list-returning method into a `TerraformLocal` and then passing Fn_Element the returned `interface{}` from the `Expression()` method (but _will not_ accept TerraformLocal's `AsList()` method as it returns `*[]*string`):\r\n```\r\nisid := cdktf.NewTerraformLocal(stack, jsii.String(\"LocalInstanceStoreIds\"), instance.IdentityStoreIds())\r\nidentityStoreId := cdktf.Fn_Element(isid.Expression(), jsii.Number(0)).(string)\r\n```\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor documentation? For example:\r\n--->\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5PJxlC",
        "author": {
          "login": "jsteinich"
        },
        "authorAssociation": "COLLABORATOR",
        "body": "Created https://github.com/aws/jsii/issues/3856 since I suspect this to be a result of an upstream JSII change.",
        "createdAt": "2022-11-26T02:22:34Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2281#issuecomment-1327962434",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5fmNpA",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "waiting on this upstream JSII issue: https://github.com/aws/jsii/issues/3948",
        "createdAt": "2023-06-23T07:28:50Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2281#issuecomment-1603852864",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5fmOeB",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "The workaround for this is using a TerraformLocal (as posted by @lossanarch) or using `cdktf.Token_AsList()`. Unfortunately we won't have capacity to work on a permanent fix soon, but we welcome any community contributions.",
        "createdAt": "2023-06-23T07:32:08Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2281#issuecomment-1603856257",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2022-11-13T21:01:34Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzk3",
        "name": "help wanted",
        "description": "Community contributions welcome as the core team is unlikely to work on this soon",
        "color": "008672"
      },
      {
        "id": "MDU6TGFiZWwyMjI4Mzg3NjY3",
        "name": "cdktf",
        "description": "",
        "color": "fccac4"
      },
      {
        "id": "MDU6TGFiZWwyMjQ2NzM3OTc1",
        "name": "upstream/jsii",
        "description": "Pending upstream work on JSII",
        "color": "f9a2cf"
      },
      {
        "id": "MDU6TGFiZWwzMDMwODE1NTQy",
        "name": "language/golang",
        "description": "",
        "color": "22ED90"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "LA_kwDODd1Amc8AAAABH924aQ",
        "name": "bug/has-workaround",
        "description": "A bug with a workaround (may not be elegant)",
        "color": "9e202d"
      }
    ],
    "milestone": null,
    "number": 2281,
    "title": "cdktf.Fn_Element method no longer accepts *[]*string",
    "updatedAt": "2023-06-23T08:41:01Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjExMTIwNTY=",
      "is_bot": false,
      "login": "ansgarm",
      "name": "Ansgar Mertens"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\nSimilar to other code blocks in our docs, we should retrieve these snippets from an example to also confirm them in CI:\r\nhttps://github.com/hashicorp/terraform-cdk/blob/5f60e02891b5af40ff4557b507192ad014184f22/website/docs/cdktf/concepts/tokens.mdx?plain=1#L68-L94\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\n### References\r\n\r\n* Follow-up issue for https://github.com/hashicorp/terraform-cdk/pull/2297\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [],
    "createdAt": "2022-11-16T10:54:38Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzgw",
        "name": "documentation",
        "description": "Improvements or additions to documentation",
        "color": "0075ca"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4Mjg1",
        "name": "size/small",
        "description": "estimated < 1 day",
        "color": "4671C0"
      }
    ],
    "milestone": null,
    "number": 2298,
    "title": "Read `Token.nullValue()` snippet from documentation example",
    "updatedAt": "2023-06-01T13:29:57Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjE3NDcxMjA=",
      "is_bot": false,
      "login": "trondhindenes",
      "name": "Trond Hindenes"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### cdktf & Language Versions\r\n\r\n```\r\n‚ùØ cdktf --version\r\n0.14.1\r\n\r\n```\r\n\r\n### Affected Resource(s)\r\n\r\n\r\n\r\n### Debug Output\r\n\r\n\r\n### Expected Behavior\r\ncdktf should have executed `poetry run python main.py`, and never called `pipenv`\r\n\r\n### Actual Behavior\r\n\r\nsomething inside cdktf calls \"pipenv\" even tho I've adjusted cdktf.json. Seems to me like it totally disregards the \"app\" attribute in the cdktf.json file\r\n```\r\n‚†è  Synthesizing\r\n[2022-11-18T18:54:22.986] [ERROR] default - Courtesy Notice: Pipenv found itself running within a virtual environment, so it will automatically use that environment, instead of creating its own for any project. You can set PIPENV_IGNORE_VIRTUALENVS=1 to force pipenv to ignore that environment and create its own instead. You can set PIPENV_VERBOSITY=-1 to suppress this warning.\r\n\r\n```\r\n\r\n### Steps to Reproduce\r\n\r\nCreated a cdk tf app using the template. \r\nSwitched from pipenv to poetry. \r\nDeleted Pipfile* Replaced `app` attr in cdktf.json with `poetry run python main.py`. \r\nVerified that simply running `poetry run python main.py` works.\r\nTried running `cdktf synth`\r\n\r\nThis is the first time I'm looking at cdktf in about two years, and I'm _quite_ certain I've used it with poetry before\r\n\r\n### Important Factoids\r\n\r\n\r\n\r\n### References\r\n\r\n\r\n- #0000\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5Osxnh",
        "author": {
          "login": "trondhindenes"
        },
        "authorAssociation": "NONE",
        "body": "I just tested a bunch of different cdktf versions. Looks like this broke in `[0.11.0](https://www.npmjs.com/package/cdktf-cli/v/0.11.0)` 0.10.4 behaves as expected.",
        "createdAt": "2022-11-18T18:06:32Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2321#issuecomment-1320360417",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5Os7OS",
        "author": {
          "login": "trondhindenes"
        },
        "authorAssociation": "NONE",
        "body": "Some more info on this: Only happens when cdktf.json has  `\"sendCrashReports\": \"true\"`",
        "createdAt": "2022-11-18T18:43:38Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2321#issuecomment-1320399762",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5OyL2i",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "Hi üëã\r\nThat is probably happening because the CDKTF CLI tries to [determine the underlying version](https://github.com/hashicorp/terraform-cdk/blob/4677ffdba0636e5211bbb89cc1a58932d226582e/packages/cdktf-cli/src/lib/debug.ts#LL110C20-L110C20) of the installed cdktf core Python package.\r\n\r\nIs there a good way to spot that a Python project is using Python Poetry?",
        "createdAt": "2022-11-21T09:45:44Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2321#issuecomment-1321778594",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5OzH0k",
        "author": {
          "login": "trondhindenes"
        },
        "authorAssociation": "NONE",
        "body": "> Is there a good way to spot that a Python project is using Python Poetry?\r\n\r\nyes:\r\nif folder constains `Pipfile` --> assume its managed by pipenv\r\nif folder contains `poetry.lock` --> assume it's managed by poetry\r\n\r\ni would also add:\r\nif command in `cdktf.json` `app` starts with `poetry` or `pipenv` that's also a strong indicator as to what command to run in order to grab package versions",
        "createdAt": "2022-11-21T12:53:54Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2321#issuecomment-1322024228",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5OzILo",
        "author": {
          "login": "trondhindenes"
        },
        "authorAssociation": "NONE",
        "body": "My cdktf.json looks like this, for instance:\r\n```\r\n{\r\n  \"language\": \"python\",\r\n  \"app\": \"poetry run python main.py\",\r\n  \"projectId\": \"490ecd27-404c-44cb-b2bc-1066ff1f28b3\",\r\n  \"sendCrashReports\": \"false\",\r\n  \"terraformProviders\": [],\r\n  \"terraformModules\": [],\r\n  \"codeMakerOutput\": \"imports\",\r\n  \"context\": {\r\n    \"excludeStackIdFromLogicalIds\": \"true\",\r\n    \"allowSepCharsInLogicalIds\": \"true\"\r\n  }\r\n}\r\n\r\n```\r\nwhen running \"cdktf synth\" cdktf will actually start the python process for me. So here the debug call should be `poetry run pip freeze` to list packages in the managed env. And `pipenv run pip freeze` if it were a pipenv-managed app.",
        "createdAt": "2022-11-21T12:55:17Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2321#issuecomment-1322025704",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5Q-5OA",
        "author": {
          "login": "trondhindenes"
        },
        "authorAssociation": "NONE",
        "body": "Just thinking more about this: \r\nIt might be neater to list packages programmatically instead of kicking off another process to do it:\r\n```\r\ntry: from pip._internal.operations import freeze\r\nexcept ImportError: # pip < 10.0\r\n    from pip.operations import freeze\r\n\r\npkgs = freeze.freeze()\r\nfor pkg in pkgs: print(pkg)\r\n```\r\nThat way cdktf doesn't have to care about which package manager is used\r\n\r\n(provided of course that there are hooks in the python layer to add this kind of functionality - I wouldn't know anything about that)",
        "createdAt": "2022-12-20T00:14:50Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2321#issuecomment-1358664576",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5Q-6Kk",
        "author": {
          "login": "trondhindenes"
        },
        "authorAssociation": "NONE",
        "body": "some more info while I'm at it:\r\nA process wrapped in pipenv will always get the environment variable `PIPENV_ACTIVE=1` set, so that's probably another safe \r\nway to determine if pipenv is involved. But I guess you have to support both situations where users run `pipenv run cdktf...` and `cdktf` but the cdktf.json contains `pipenv run python main.py` so there are different ways to have cdktf and pipenv interact, and that's why I think this \"assuming the world is perfect\" that cdktf is doing now is so dangerous.",
        "createdAt": "2022-12-20T00:19:49Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2321#issuecomment-1358668452",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5W4kqb",
        "author": {
          "login": "giner"
        },
        "authorAssociation": "NONE",
        "body": "Another more generic approach could be adding an option languageRuntimeCmd defaulting to `pipenv run` for python which could be redefined as `poetry run` or anything else user prefers.",
        "createdAt": "2023-03-07T07:16:01Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2321#issuecomment-1457670811",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5W4yyH",
        "author": {
          "login": "giner"
        },
        "authorAssociation": "NONE",
        "body": "This would also solve a problem with inconsistency between `cdktf debug` (which always runs pipenv for python) and other commands which execute `app` where app could run, for example, poetry",
        "createdAt": "2023-03-07T08:08:35Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2321#issuecomment-1457728647",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5dta3U",
        "author": {
          "login": "xiehan"
        },
        "authorAssociation": "MEMBER",
        "body": "Thanks for reporting this! We agree this should be addressed. Unfortunately it's not something we'll have capacity to work on soon, but in the meantime, we welcome any community contributions.",
        "createdAt": "2023-06-01T14:42:46Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2321#issuecomment-1572187604",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5khfIa",
        "author": {
          "login": "martimors"
        },
        "authorAssociation": "NONE",
        "body": "The `cdktf get` command generates a rogue `Pipfile`, so do many other commands (luckily not `cdktf synth`). I've added it to the `.gitignore` and it looks like it isn't used (it basically just copies my poetry environment), but it sure would be nice if it didn't happen. This is not an issue over at cdk8s so maybe we can get inspiration from them.",
        "createdAt": "2023-08-21T15:01:40Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 2
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2321#issuecomment-1686499866",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5khuUH",
        "author": {
          "login": "trondhindenes"
        },
        "authorAssociation": "NONE",
        "body": "@dingobar when I checked this last, you could disable the behavior by setting `\"sendCrashReports\": \"false\"` in the cdktf.json file. Doesn't fix the issue, but at least it hides it",
        "createdAt": "2023-08-21T15:36:00Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "CONFUSED",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2321#issuecomment-1686562055",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5kh441",
        "author": {
          "login": "martimors"
        },
        "authorAssociation": "NONE",
        "body": "Thanks! Its something üôÇüëç",
        "createdAt": "2023-08-21T16:02:39Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2321#issuecomment-1686605365",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc6_27Zp",
        "author": {
          "login": "bendog"
        },
        "authorAssociation": "NONE",
        "body": "I built a [uv template](https://github.com/bendog/cdktf-remote-template-python-uv) for this hoping this would resolve the issue, however it seems the Pipenv on get is a bug. \nmaybe I'll look into this, anybody have any advice? ",
        "createdAt": "2025-08-25T05:06:56Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "ROCKET",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2321#issuecomment-3218847337",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc7WlimI",
        "author": {
          "login": "bendog"
        },
        "authorAssociation": "NONE",
        "body": "I've created a PR for this over three months ago, but I have have heard nothing from Hashicorp about it üò¢ ",
        "createdAt": "2025-12-02T04:43:27Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2321#issuecomment-3600165256",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2022-11-18T18:01:22Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzk3",
        "name": "help wanted",
        "description": "Community contributions welcome as the core team is unlikely to work on this soon",
        "color": "008672"
      },
      {
        "id": "MDU6TGFiZWwyMTEzNjU3MzA2",
        "name": "language/python",
        "description": "",
        "color": "5c2596"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjEz",
        "name": "size/medium",
        "description": "estimated < 1 week",
        "color": "291E63"
      },
      {
        "id": "LA_kwDODd1Amc78phHg",
        "name": "cli/provider-subcommands",
        "description": "cdktf provider <verb> commands",
        "color": "4CBCB0"
      }
    ],
    "milestone": null,
    "number": 2321,
    "title": "cdktf tries to use pipenv even tho I have removed it from cdktf.json",
    "updatedAt": "2025-12-02T04:47:05Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjI0ODA5ODQz",
      "is_bot": false,
      "login": "RyanSiu1995",
      "name": "Ryan, Siu Long Wa"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### cdktf & Language Versions\r\n\r\n<!--- Please make note of the version you are using for the `hashicorp/terraform-cdk` and language bindings you are using.\r\nIf you are not running the latest version, please upgrade because your issue may have already been fixed. --->\r\n`cdktf==0.13.3` in python\r\n\r\n### Affected Resource(s)\r\n<!--- Please list the affected resources. --->\r\n`Testing.to_have_resource_with_properties` is the function not working as expected.\r\n\r\n### Debug Output\r\n\r\n<!---\r\nPlease provide a link to a GitHub Gist containing the complete debug output. Please do NOT paste the debug output in the issue; just paste a link to the Gist.\r\n--->\r\n```\r\n(Pdb) Testing.to_have_resource_with_properties(synthesized, CDKRepository.TF_RESOURCE_TYPE, { \"name\": \"test333\" })\r\nTrue\r\n(Pdb) Testing.to_have_resource_with_properties(synthesized, CDKRepository.TF_RESOURCE_TYPE, { \"name\": \"test333\" , \"default_branch\": \"x\"})\r\nFalse\r\n(Pdb) Testing.to_have_resource_with_properties(synthesized, CDKRepository.TF_RESOURCE_TYPE, { \"name\": \"test333\" , \"default_branch\": \"master\"})\r\nTrue\r\n(Pdb) Testing.to_have_resource_with_properties(synthesized, CDKRepository.TF_RESOURCE_TYPE, { \"name\": \"test333\" , \"default_branch\": None})\r\nTrue\r\n(Pdb) Testing.to_have_resource_with_properties(synthesized, CDKRepository.TF_RESOURCE_TYPE, { \"name\": \"test333\" , \"default_branch\": None})\r\nTrue\r\n(Pdb) synthesized\r\n'{\\n  \"resource\": {\\n    \"github_repository\": {\\n      \"test333\": {\\n        \"default_branch\": \"master\",\\n        \"name\": \"test333\"\\n      }\\n    }\\n  }\\n}'\r\n```\r\n\r\n### Expected Behavior\r\n<!--- What should have happened? --->\r\nIf I expect the property to be None and the synthesized object has something,`to_have_resource_with_properties` should return `False here.\r\n\r\n### Actual Behavior\r\n<!--- What actually happened? --->\r\nIt returns `True` here.\r\n\r\n### Steps to Reproduce\r\n<!--- Please list the steps required to reproduce the issue. --->\r\n1. Create a resource with an optional attribute\r\n2. Assert the property as None with that function.\r\n\r\n### Important Factoids\r\n\r\n<!--- Are there anything atypical about your accounts that we should know? --->\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor documentation? For example:\r\n--->\r\n\r\n- #0000\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5dtZUl",
        "author": {
          "login": "xiehan"
        },
        "authorAssociation": "MEMBER",
        "body": "Thanks for reporting this! We agree this should be addressed. Unfortunately it's not something we'll have capacity to work on soon, but we welcome any community contributions.",
        "createdAt": "2023-06-01T14:38:56Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2326#issuecomment-1572181285",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2022-11-21T17:27:36Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzk3",
        "name": "help wanted",
        "description": "Community contributions welcome as the core team is unlikely to work on this soon",
        "color": "008672"
      },
      {
        "id": "MDU6TGFiZWwyMTEzNjU3MzA2",
        "name": "language/python",
        "description": "",
        "color": "5c2596"
      },
      {
        "id": "MDU6TGFiZWwyNTcwMTY0OTY5",
        "name": "testing",
        "description": "",
        "color": "456cc6"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      }
    ],
    "milestone": null,
    "number": 2326,
    "title": "pytest to_have_resource_with_properties not able to detect None",
    "updatedAt": "2023-06-01T14:38:56Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjEyNDA2NQ==",
      "is_bot": false,
      "login": "shishkin",
      "name": "Sergey Shishkin"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### cdktf & Language Versions\r\n\r\ncdktf 0.14.1 with TypeScript\r\n\r\nUPDATE: Same behavior in 0.14.3.\r\n\r\n<!--- Please make note of the version you are using for the `hashicorp/terraform-cdk` and pre-built provider you are using.\r\nIf you are not running the latest version, please upgrade because your issue may have already been fixed. --->\r\n\r\n### Affected Provider / Resource(s)\r\n\r\n@cdktf/provider-kubernetes\r\n\r\nTried on ConfigMapV1 and SecretV1\r\n\r\n<!--- Please list the affected resources. --->\r\n\r\n### Debug Output\r\n\r\nhttps://gist.github.com/shishkin/1c6b19a7e1c6fb92f2734a694c7b3013#file-output\r\n\r\n### Expected Behavior\r\n\r\nExpected the `clusterPortHttps` variable replaced with its value in the resulting config map resource.\r\n\r\n### Actual Behavior\r\n\r\n`var.CLUSTER_PORT_HTTPS` is output inside resulting config map resource.\r\n\r\n### Steps to Reproduce\r\n\r\nhttps://gist.github.com/shishkin/1c6b19a7e1c6fb92f2734a694c7b3013#file-stack-ts\r\n\r\n### Important Factoids\r\n\r\nNumeric variable value is output correctly when put inside `TerraformOutput` construct. String variable `clusterDomain` is output correctly inside both config map resource and `TerraformOutput`.\r\n\r\nUPDATE: Also the port number is output in the config map resource correctly when its value is referred to via `.stringValue` or `.value` instead of typed `.numberValue`.\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor documentation? For example:\r\n--->\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5QVwo-",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "Hi @shishkin üëã\r\n\r\nThis seems weird. Would you mind sharing the `cdk.tf.json` file that is generated in the `cdktf.out/<your stack>` directory? I'm curious what the interpolated string looks like in there.",
        "createdAt": "2022-12-13T07:51:25Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2420#issuecomment-1347881534",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5QV_H-",
        "author": {
          "login": "shishkin"
        },
        "authorAssociation": "NONE",
        "body": "@ansgarm I've put it in the gist: https://gist.github.com/shishkin/1c6b19a7e1c6fb92f2734a694c7b3013#file-cdk-tf-json-L36\r\n\r\nIndeed, the string interpolation syntax seems missing for the numeric variable:\r\n\r\n```json\r\n\"data\": {\r\n  \"config\": \"${yamlencode({url = \\\"https://${var.CLUSTER_DOMAIN}:var.CLUSTER_PORT_HTTPS/\\\"})}\"\r\n},\r\n```",
        "createdAt": "2022-12-13T08:45:36Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2420#issuecomment-1347940862",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5QW2d1",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "Yup, seems like a bug on our end üëç Thanks for reporting!\r\n\r\nAs using `variable.stringValue` works as a workaround, it is luckily not that pressing but still something we need to tackle üêõ",
        "createdAt": "2022-12-13T10:43:46Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2420#issuecomment-1348167541",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2022-12-12T17:00:29Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzk3",
        "name": "help wanted",
        "description": "Community contributions welcome as the core team is unlikely to work on this soon",
        "color": "008672"
      },
      {
        "id": "MDU6TGFiZWwyMjI4Mzg3NjY3",
        "name": "cdktf",
        "description": "",
        "color": "fccac4"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMTM2Mjc5MjMx",
        "name": "ux/configuration",
        "description": "",
        "color": "58FCA0"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4Mjg1",
        "name": "size/small",
        "description": "estimated < 1 day",
        "color": "4671C0"
      },
      {
        "id": "MDU6TGFiZWwzMjM2NDcwNTQ1",
        "name": "feature/tokens",
        "description": "",
        "color": "58CF13"
      },
      {
        "id": "LA_kwDODd1Amc8AAAABH924aQ",
        "name": "bug/has-workaround",
        "description": "A bug with a workaround (may not be elegant)",
        "color": "9e202d"
      }
    ],
    "milestone": null,
    "number": 2420,
    "title": "TerraformVariable of number type doesn't get replaced",
    "updatedAt": "2023-06-01T14:32:38Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjEyNDA2NQ==",
      "is_bot": false,
      "login": "shishkin",
      "name": "Sergey Shishkin"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### cdktf & Language Versions\r\n\r\nCDKTF 0.14.3, TypeScript\r\n\r\n<!--- Please make note of the version you are using for the `hashicorp/terraform-cdk` and language bindings you are using.\r\nIf you are not running the latest version, please upgrade because your issue may have already been fixed. --->\r\n\r\n### Affected Resource(s)\r\n\r\n`Fn.yamlencode` used to output static YAML with some custom annotations:\r\n\r\n```typescript\r\nnew TerraformOutput(this, \"test\", {\r\n  value: Fn.yamlencode({\r\n    ingress: {\r\n      enabled: true,\r\n      annotations: {\r\n        \"ingress.pomerium.io/allow_public_unauthenticated_access\": \"true\",\r\n      },\r\n    },\r\n  }),\r\n});\r\n```\r\n\r\n### Debug Output\r\n\r\n<details>\r\n<summary>Output</summary>\r\n\r\n```\r\n1 Stack deploying     0 Stacks done     0 Stacks waiting\r\n[2022-12-18T19:56:56.285] [ERROR] default - ‚ï∑\r\n‚îÇ Error: Reference to undeclared resource\r\n‚îÇ\r\n‚îÇ   on cdk.tf.json line 16, in output.test:\r\n‚îÇ   16:       \"value\": \"${yamlencode({ingress = {enabled = true, annotations = {ingress.pomerium.io/allow_public_unauthenticated_access = \\\"true\\\"}}})}\"\r\n‚îÇ\r\n‚îÇ A managed resource \"ingress\" \"pomerium\" has not been declared in the root\r\ntest  ‚ï∑\r\n      ‚îÇ Error: Reference to undeclared resource\r\n      ‚îÇ\r\n      ‚îÇ   on cdk.tf.json line 16, in output.test:\r\n      ‚îÇ   16:       \"value\": \"${yamlencode({ingress = {enabled = true, annotations = {ingress.pomerium.io/allow_public_unauthenticated_access = \\\"true\\\"}}})}\"\r\n      ‚îÇ\r\n      ‚îÇ A managed resource \"ingress\" \"pomerium\" has not been declared in the root\r\n      ‚îÇ module.\r\n      ‚ïµ\r\n```\r\n</details>\r\n\r\n<details>\r\n<summary>cdk.tf.json</summary>\r\n\r\n```json\r\n{\r\n  \"//\": {\r\n    \"metadata\": {\r\n      \"backend\": \"local\",\r\n      \"stackName\": \"test\",\r\n      \"version\": \"0.14.3\"\r\n    },\r\n    \"outputs\": {\r\n      \"test\": {\r\n        \"test\": \"test\"\r\n      }\r\n    }\r\n  },\r\n  \"output\": {\r\n    \"test\": {\r\n      \"value\": \"${yamlencode({ingress = {enabled = true, annotations = {ingress.pomerium.io/allow_public_unauthenticated_access = \\\"true\\\"}}})}\"\r\n    }\r\n  },\r\n  \"provider\": {\r\n    \"kubernetes\": [\r\n      {\r\n      }\r\n    ]\r\n  },\r\n  \"terraform\": {\r\n    \"backend\": {\r\n      \"local\": {\r\n        \"path\": \"/path/to/project/terraform.test.tfstate\"\r\n      }\r\n    },\r\n    \"required_providers\": {\r\n      \"kubernetes\": {\r\n        \"source\": \"kubernetes\",\r\n        \"version\": \"2.16.1\"\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n</details>\r\n\r\n### Expected Behavior\r\n\r\nAnnotations should be treated as static YAML dictionary keys.\r\n\r\n### Actual Behavior\r\n\r\nCDKTF tries to interpret annotations as resources.\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5RPH3h",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "Hi @shishkin üëã\r\n\r\nThank you for reporting this! This seems to be a bug when passing objects with keys that need escaping into `Fn` functions.\r\n\r\nI confirmed this locally and found a workaround using `TerraformLocal` that you can use until this is fixed.\r\n\r\n```typescript\r\n    const local = new TerraformLocal(this, \"local\", {\r\n      ingress: {\r\n        enabled: true,\r\n        annotations: {\r\n          \"ingress.pomerium.io/allow_public_unauthenticated_access\": \"true\",\r\n        },\r\n      },\r\n    });\r\n\r\n    new TerraformOutput(this, \"test\", {\r\n      value: Fn.yamlencode(local.asAnyMap),\r\n    });\r\n```",
        "createdAt": "2022-12-22T14:40:30Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2434#issuecomment-1362918881",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5RPU7H",
        "author": {
          "login": "shishkin"
        },
        "authorAssociation": "NONE",
        "body": "Thanks a lot for this workaround @ansgarm! Look forward to this being fixed too.",
        "createdAt": "2022-12-22T15:27:20Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2434#issuecomment-1362972359",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2022-12-18T19:09:13Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzk3",
        "name": "help wanted",
        "description": "Community contributions welcome as the core team is unlikely to work on this soon",
        "color": "008672"
      },
      {
        "id": "MDU6TGFiZWwyMjI4Mzg3NjY3",
        "name": "cdktf",
        "description": "",
        "color": "fccac4"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzMxMzA4",
        "name": "confirmed",
        "description": "independently reproduced by an engineer on the team",
        "color": "4B830E"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMjM2NDcwNTQ1",
        "name": "feature/tokens",
        "description": "",
        "color": "58CF13"
      },
      {
        "id": "LA_kwDODd1Amc8AAAABH924aQ",
        "name": "bug/has-workaround",
        "description": "A bug with a workaround (may not be elegant)",
        "color": "9e202d"
      }
    ],
    "milestone": null,
    "number": 2434,
    "title": "Reference to undeclared resource",
    "updatedAt": "2023-06-01T14:31:01Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjE0MzQ4MzM5",
      "is_bot": false,
      "login": "Jiafi",
      "name": "Jordan Wolinsky"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### cdktf & Language Versions\r\ncdktf version `0.14.3` Typescript\r\n<!--- Please make note of the version you are using for the `hashicorp/terraform-cdk` and language bindings you are using.\r\nIf you are not running the latest version, please upgrade because your issue may have already been fixed. --->\r\n\r\n### Affected Resource(s)\r\nnullResource using the `LocalExecProvisioner`.  \r\n<!--- Please list the affected resources. --->\r\n\r\n### Debug Output\r\n```typescript\r\n    new nullResource.Resource(this, 'postgresScript', {\r\n      provisioners: [\r\n        {\r\n          // Pipe system password into script as input\r\n          type: 'local-exec',\r\n          command: `psql`,\r\n          environment: {\r\n            PGPASSWORD: \"password\",\r\n          },\r\n        },\r\n      ],\r\n    });\r\n```\r\nGenerates \r\n```json\r\n            {\r\n            \"local-exec\": {\r\n              \"command\": \"psql\",\r\n              \"environment\": {\r\n                \"pgpassword\": \"passwordHere\"\r\n              }\r\n            }\r\n````\r\n### Expected Behavior\r\n```json\r\n            {\r\n            \"local-exec\": {\r\n              \"command\": \"psql\",\r\n              \"environment\": {\r\n                \"PGPASSWORD\": \"passwordHere\"\r\n              }\r\n            }\r\n```\r\n<!--- What should have happened? --->\r\n\r\n### Actual Behavior\r\n```json\r\n            {\r\n            \"local-exec\": {\r\n              \"command\": \"psql\",\r\n              \"environment\": {\r\n                \"pgpassword\": \"passwordHere\"\r\n              }\r\n            }\r\n````\r\n<!--- What actually happened? --->\r\n\r\n### Steps to Reproduce\r\nCreate a null provider and resource.\r\n```typescript\r\n    new nullProvider.NullProvider(this, 'null', {});\r\n    new nullResource.Resource(this, 'postgisAdminScript', {\r\n      provisioners: [\r\n        {\r\n          // Pipe system password into script as input\r\n          type: 'local-exec',\r\n          // If this command fails, the password is printed out locally.  Need to figure out a better way of configuring the password\r\n          command: `echo $PGPASSWORD`,\r\n          environment: {\r\n            PGPASSWORD: \"password\",\r\n          },\r\n        },\r\n      ],\r\n    });\r\n```\r\n<!--- Please list the steps required to reproduce the issue. --->\r\n\r\n### Important Factoids\r\nenvironment should respect the casing that is originally used in the `environment` `Record`.\r\n\r\nIt looks like[ all keys are being lower cased here](https://github.com/hashicorp/terraform-cdk/blob/c837a9de1306a6f3cfbd751f56a1a346386d68c5/packages/cdktf/lib/util.ts#L79-L110)\r\n<!--- Are there anything atypical about your accounts that we should know? --->\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor documentation? For example:\r\n--->\r\n\r\n- #0000\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5RPL4z",
        "author": {
          "login": "Jiafi"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "https://github.com/hashicorp/terraform-cdk/pull/2446 Potential fix.",
        "createdAt": "2022-12-22T14:55:22Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2443#issuecomment-1362935347",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5RPM_4",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "Hi @Jiafi üëã\r\n\r\nGood catch, it seems like these lines are a bit too overambitious:\r\nhttps://github.com/hashicorp/terraform-cdk/blob/1908d763a5a676651579983100f92cb08c74777c/packages/cdktf/lib/terraform-resource.ts#L185-L189\r\n\r\nWe should confirm what exactly we need to convert there. Probably just the first layer but not deeper.\r\n\r\nThat said, you can workaround this problem using an escape hatch:\r\n```ts\r\n    new nullProvider.NullProvider(this, \"null\", {});\r\n    const adminScript = new nullResource.Resource(\r\n      this,\r\n      \"postgisAdminScript\",\r\n      {}\r\n    );\r\n    // using overrides to preserve casing of environment variables (open issue: https://github.com/hashicorp/terraform-cdk/issues/2443)\r\n    adminScript.addOverride(\"provisioner\", [\r\n      {\r\n        // Pipe system password into script as input\r\n        type: \"local-exec\",\r\n        // If this command fails, the password is printed out locally.  Need to figure out a better way of configuring the password\r\n        command: `echo $PGPASSWORD`,\r\n        environment: {\r\n          PGPASSWORD: \"password\",\r\n        },\r\n      },\r\n    ]);\r\n```",
        "createdAt": "2022-12-22T14:59:27Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2443#issuecomment-1362939896",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5RPSEd",
        "author": {
          "login": "Jiafi"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "@ansgarm Thanks for the workaround! It mostly worked but needed to be changed slightly.  Needed `local-exec` as the key.\r\n```typescript\r\n    new nullProvider.NullProvider(this, \"null\", {});\r\n    const adminScript = new nullResource.Resource(\r\n      this,\r\n      \"postgisAdminScript\",\r\n      {}\r\n    );\r\n    // using overrides to preserve casing of environment variables (open issue: https://github.com/hashicorp/terraform-cdk/issues/2443)\r\n    adminScript.addOverride('provisioner', [\r\n      {\r\n        ['local-exec']: {\r\n          command: `${postgisUserSetupScript.path} ${rds.rdsHostOutput} ${this.postgresDB} ${rds.rdsSystemUsernameOutput} ${this.postgresUser}`,\r\n          environment: {\r\n            PGPASSWORD: rds.rdsSystemPasswordOutput,\r\n          },\r\n        },\r\n      },\r\n    ]);\r\n    ",
        "createdAt": "2022-12-22T15:16:18Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2443#issuecomment-1362960669",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5RPUZX",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "Ah, whoops üòÖ Glad you figured it out!",
        "createdAt": "2022-12-22T15:25:18Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2443#issuecomment-1362970199",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2022-12-22T01:22:09Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzk3",
        "name": "help wanted",
        "description": "Community contributions welcome as the core team is unlikely to work on this soon",
        "color": "008672"
      },
      {
        "id": "MDU6TGFiZWwyMjI4Mzg3NjY3",
        "name": "cdktf",
        "description": "",
        "color": "fccac4"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzMxMzA4",
        "name": "confirmed",
        "description": "independently reproduced by an engineer on the team",
        "color": "4B830E"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "LA_kwDODd1Amc8AAAABH924aQ",
        "name": "bug/has-workaround",
        "description": "A bug with a workaround (may not be elegant)",
        "color": "9e202d"
      }
    ],
    "milestone": null,
    "number": 2443,
    "title": "local-exec environment populated by cdktf synth gets lowercased",
    "updatedAt": "2023-06-01T14:31:01Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjg1NTExNQ==",
      "is_bot": false,
      "login": "xiehan",
      "name": "Nara Kasbergen Kwon"
    },
    "body": "### Context\r\n\r\nHashiCorp has been rolling out a policy requiring us to add a copyright notice above the license in all of our open-source repositories. See, for example, [LICENSE](https://github.com/hashicorp/terraform-cdk/blob/main/LICENSE) in this repo. The format of the copyright notice is:\r\n\r\n```\r\nCopyright (c) <-- year of repo creation --> HashiCorp, Inc.\r\n\r\n<-- rest of license text -->\r\n```\r\n\r\nHashiCorp's Engineering Services team has created `hashicorp-copywrite[bot]` to automate creating Dependabot-style PRs injecting the copyright notice at the top of each OSS license file. This practice has worked great for other teams, but not so much for us, since the majority of our projects use [Projen](https://projen.io), which manages the license file and will overwrite the changes introduced by `hashicorp-copywrite[bot]`.\r\n\r\n### What has already been done\r\n\r\nIn https://github.com/hashicorp/cdktf-aws-cdk/commit/add779b5c8257f4ad1f8d5d973538574184cd945 @ansgarm figured out how to customize the license file generated by Projen to include the copyright header. In recent weeks, I've been going through our other repositories to apply this technique to make sure we're compliant with the license policy while continuing to have the license file generation managed by Projen.\r\n\r\nIn https://github.com/cdktf/cdktf-provider-project/commit/84325ff773f3e99c857933c7b2d736cccd7bc5f2 I applied this technique with one additional modification, that allows the copyright year to be specified, because the individual pre-built provider repos technically all have different creation years. For example, [cdktf-provider-aws](https://github.com/cdktf/cdktf-provider-aws) was created in 2020, [cdktf-provider-newrelic](https://github.com/cdktf/cdktf-provider-newrelic) was created in 2021, and [cdktf-provider-salesforce](https://github.com/cdktf/cdktf-provider-salesforce) was created in 2022. However, right now, all of their LICENSE files have 2022 as the copyright year, which is the default if no override year is specified. ([example](https://github.com/cdktf/cdktf-provider-aws/blob/main/LICENSE))\r\n\r\n### What still needs to happen\r\n\r\nWe need to figure out how & where to inject the true creation/copyright year so that the licenses for each of these repos are correct.\r\n\r\nTwo options for where:\r\n- in [cdktf-provider-project](https://github.com/cdktf/cdktf-provider-project)\r\n- in [cdktf-repository-manager](https://github.com/cdktf/cdktf-repository-manager) - pass it to the individual provider repos using [the new `creationYear` option](https://github.com/cdktf/cdktf-provider-project/blob/main/API.md#creationyearoptional-)\r\n\r\nTwo options for how:\r\n- by making a call to the GitHub API to look up the creation date of the repo: https://docs.github.com/en/rest/repos/repos?apiVersion=2022-11-28#get-a-repository\r\n- by using some kind of hard-coded mapping, kind of like https://github.com/cdktf/cdktf-repository-manager/blob/main/provider.json\r\n\r\nBut maybe there are other options I haven't thought of yet!\r\n\r\n### Note\r\n\r\nI'm assigning this issue to Mark for now to have him take a stab at designing/proposing a solution, but not necessarily implementing it just yet.",
    "comments": [],
    "createdAt": "2022-12-23T17:00:43Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzk3",
        "name": "help wanted",
        "description": "Community contributions welcome as the core team is unlikely to work on this soon",
        "color": "008672"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjEz",
        "name": "size/medium",
        "description": "estimated < 1 week",
        "color": "291E63"
      },
      {
        "id": "MDU6TGFiZWwzMzE3NzI2NjM4",
        "name": "tech-debt",
        "description": "",
        "color": "191658"
      },
      {
        "id": "LA_kwDODd1Amc78pgm0",
        "name": "pre-built providers",
        "description": "Issues around pre-built providers managed at https://github.com/hashicorp/cdktf-repository-manager",
        "color": "E06AA9"
      },
      {
        "id": "LA_kwDODd1Amc8AAAABJnHAvQ",
        "name": "legal",
        "description": "An issue or PR related to compliance with company policies",
        "color": "F09F90"
      }
    ],
    "milestone": null,
    "number": 2449,
    "title": "Properly inject the copyright year in the license in pre-built provider repos",
    "updatedAt": "2023-06-01T17:05:02Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "U_kgDOBhgAOg",
      "is_bot": false,
      "login": "Abhishek-singhcoupa",
      "name": ""
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### cdktf & Language Versions\r\n\r\n<!--- Please make note of the version you are using for the `hashicorp/terraform-cdk` and language bindings you are using.\r\nIf you are not running the latest version, please upgrade because your issue may have already been fixed. --->\r\n\r\nlanguage: python\r\ncdktf-cli: 0.13.3\r\nnode: v18.12.1\r\ncdktf: 0.13.3\r\nconstructs: 10.1.188\r\njsii: 1.72.0\r\nterraform: 1.1.9\r\narch: x64\r\nos: darwin 22.2.0\r\npython: Python 3.10.8\r\npip: pip 22.3.1 from /usr/local/lib/python3.10/site-packages/pip (python 3.10)\r\npipenv: pipenv, version 2022.9.24\r\n\r\n\r\n### Affected Resource(s)\r\n\r\n<!--- Please list the affected resources. --->\r\nwafv2 RuleGroup , Rules\r\n\r\n### Debug Output\r\n\r\ndeploy fails with error - \r\n\r\n********************\r\n\r\n[ERROR] default - ‚ï∑\r\n‚îÇ Error: creating WAFv2 RuleGroup (test-cdk): WAFInvalidParameterException: Error reason: EXACTLY_ONE_CONDITION_REQUIRED, field: STATEMENT, parameter: Statement\r\n‚îÇ {\r\n‚îÇ   RespMetadata: {\r\n‚îÇ     StatusCode: 400,\r\n‚îÇ     RequestID: \"7beaebeb-dc61-460d-9c47-10a9188b56eb\"\r\n‚îÇ   },\r\n‚îÇ   Field: \"STATEMENT\",\r\n‚îÇ   Message_: \"Error reason: EXACTLY_ONE_CONDITION_REQUIRED, field: STATEMENT, parameter: Statement\",\r\n‚îÇ   Parameter: \"Statement\",\r\n‚îÇ   Reason: \"You have used none or multiple values for a field that requires exactly one value.\"\r\n‚îÇ }\r\n‚îÇ\r\n‚îÇ   with aws_wafv2_rule_group.test-rg-cdk,\r\n‚îÇ   on cdk.tf .json line 69, in resource.aws _wafv2_rule_group.test-rg-cdk:\r\n‚îÇ   69:       }\r\n\r\n**************\r\n\r\n<!---\r\nPlease provide a link to a GitHub Gist containing the complete debug output. Please do NOT paste the debug output in the issue; just paste a link to the Gist.\r\n--->\r\n\r\n### Expected Behavior\r\n\r\nThe rule statement should be present.\r\n\r\n### Actual Behavior\r\n\r\nstatement is blank, making the deploy fail.\r\n\r\n### Steps to Reproduce\r\n\r\n<!--- Please list the steps required to reproduce the issue. --->\r\nUse cdktf python , main.py definition - \r\n\r\n*****\r\n```\r\n#!/usr/bin/env python\r\nfrom pickle import NONE\r\nimport profile\r\nfrom typing import Sequence\r\nfrom constructs import Construct\r\nfrom cdktf import App, TerraformStack, TerraformOutput, Token, Fn\r\nfrom imports.aws.provider import AwsProvider\r\nfrom imports.aws import fms_policy, wafv2_rule_group\r\nimport json\r\n\r\n\r\nclass MyStack(TerraformStack):\r\n    def __init__(self, scope: Construct, id: str):\r\n        super().__init__(scope, id)\r\n        \r\n        # Creating wafv2_rule_group\r\n        AwsProvider(self, \"AWS\", region=\"xxx\", profile='xxx')\r\n\r\n        wrg=wafv2_rule_group.Wafv2RuleGroup(self, \r\n        id_='test-rg-cdk',\r\n        visibility_config={\r\n            \"sampled_requests_enabled\": True,\r\n            \"cloudwatch_metrics_enabled\": True,\r\n            \"metric_name\": \"test-metric\"\r\n        },\r\n        description=\"Test rg from cdk\",\r\n        capacity=80,\r\n        name='test-cdk',\r\n        scope='REGIONAL',\r\n        rule=[\r\n            {\r\n                \"name\": \"body_size_constraint\",\r\n                \"priority\": 0,\r\n                \"statement\": {\r\n                    \"size_constraint_statement\": {\r\n                        \"field_to_match\": {\r\n                            \"body\": {}\r\n                        },\r\n                        \"comparison_operator\": \"GT\",\r\n                        \"size\": 8192,\r\n                        \"text_transformation\": [\r\n                            {\r\n                            \"priority\": 0,\r\n                            \"type\": \"NONE\"\r\n                            }\r\n                        ]\r\n                    }\r\n                },\r\n                \"action\": {\r\n                    \"count\": {}\r\n                },\r\n                \"visibilityConfig\": {\r\n                    \"sampledRequestsEnabled\": True,\r\n                    \"cloudwatchMetricsEnabled\": True,\r\n                    \"metricName\": \"body_size_constraint\"\r\n                }\r\n            }\r\n        ],\r\n        tags={\r\n            \"name\":\"waf-fms-policy-cdk\",\r\n            \"Managedby\":\"CDK Terraform\"\r\n        })\r\n\r\n\r\n\r\n\r\napp = App()\r\nMyStack(app, \"coupa-waf-cdk\")\r\n\r\napp.synth()\r\n```\r\n\r\n\r\n******\r\n\r\nRun cdktf deploy\r\n\r\n\r\n###  Refer the below cdk.tf.json output file -- showing blank statement line-39-\r\n\r\n```\r\n{\r\n  \"//\": {\r\n    \"metadata\": {\r\n      \"backend\": \"local\",\r\n      \"stackName\": \"waf-cdk\",\r\n      \"version\": \"0.13.3\"\r\n    },\r\n    \"outputs\": {\r\n    }\r\n  },\r\n  \"provider\": {\r\n    \"aws\": [\r\n      {\r\n        \"profile\": \"xx\",\r\n        \"region\": \"xxx\"\r\n      }\r\n    ]\r\n  },\r\n  \"resource\": {\r\n    \"aws_wafv2_rule_group\": {\r\n      \"test-rg-cdk\": {\r\n        \"//\": {\r\n          \"metadata\": {\r\n            \"path\": \"waf-cdk/test-rg-cdk\",\r\n            \"uniqueId\": \"test-rg-cdk\"\r\n          }\r\n        },\r\n        \"capacity\": 80,\r\n        \"description\": \"Test rg from cdk\",\r\n        \"name\": \"test-cdk\",\r\n        \"rule\": [\r\n          {\r\n            \"action\": {\r\n              \"count\": {\r\n              }\r\n            },\r\n            \"name\": \"body_size_constraint\",\r\n            \"priority\": 0,\r\n            \"statement\": {\r\n            },\r\n            \"visibility_config\": {\r\n              \"cloudwatch_metrics_enabled\": true,\r\n              \"metric_name\": \"body_size_constraint\",\r\n              \"sampled_requests_enabled\": true\r\n            }\r\n          }\r\n        ],\r\n        \"scope\": \"REGIONAL\",\r\n        \"tags\": {\r\n          \"Managedby\": \"CDK Terraform\",\r\n          \"name\": \"waf-fms-policy-cdk\"\r\n        },\r\n        \"visibility_config\": {\r\n          \"cloudwatch_metrics_enabled\": true,\r\n          \"metric_name\": \"test-metric\",\r\n          \"sampled_requests_enabled\": true\r\n        }\r\n      }\r\n    }\r\n  },\r\n  \"terraform\": {\r\n    \"backend\": {\r\n      \"local\": {\r\n        \"path\": \"/xxxx/terraform.coupa-waf-cdk.tfstate\"\r\n      }\r\n    },\r\n    \"required_providers\": {\r\n      \"aws\": {\r\n        \"source\": \"aws\",\r\n        \"version\": \"4.46.0\"\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5Srtcx",
        "author": {
          "login": "DanielMSchmidt"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "Thanks for reporting this bug! I could reproduce it in `0.15`. I could get around it by using an [escape hatch](https://developer.hashicorp.com/terraform/cdktf/concepts/resources#escape-hatch):\r\n\r\n```py\r\nwrg.add_override('rule.0.statement', {\r\n            \"size_constraint_statement\": {\r\n                \"field_to_match\": {\r\n                    \"body\": {}\r\n                },\r\n                \"comparison_operator\": \"GT\",\r\n                \"size\": 8192,\r\n                \"text_transformation\": [\r\n                    {\r\n                        \"priority\": 0,\r\n                        \"type\": \"NONE\"\r\n                    }\r\n                ]\r\n            }\r\n        })\r\n```",
        "createdAt": "2023-01-18T14:46:25Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2469#issuecomment-1387190065",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc6POQWD",
        "author": {
          "login": "sabinayakc"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "Same problem here. Cannot add multiple statements since typescript won't allow multiple properties of same key. \r\n\r\n```\r\n  statement: {\r\n              or_statement: {\r\n                statement: {\r\n                  not_statement: {\r\n                    statement: {\r\n                      geo_match_statement: {\r\n                        country_codes: [\"US\"],\r\n                      },\r\n                    },\r\n                  },\r\n                },\r\n\r\n                statement: {\r\n                 }\r\n              },\r\n            },\r\n```",
        "createdAt": "2024-10-09T17:17:12Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2469#issuecomment-2402878851",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc6YsEvn",
        "author": {
          "login": "tianweiliu"
        },
        "authorAssociation": "NONE",
        "body": "> Same problem here. Cannot add multiple statements since typescript won't allow multiple properties of same key.\r\n> \r\n> ```\r\n>   statement: {\r\n>               or_statement: {\r\n>                 statement: {\r\n>                   not_statement: {\r\n>                     statement: {\r\n>                       geo_match_statement: {\r\n>                         country_codes: [\"US\"],\r\n>                       },\r\n>                     },\r\n>                   },\r\n>                 },\r\n> \r\n>                 statement: {\r\n>                  }\r\n>               },\r\n>             },\r\n> ```\r\nJust found out the use should be:\r\n```\r\n  statement: {\r\n              or_statement: {\r\n                statement: [\r\n                  {\r\n                    not_statement: {\r\n                      statement: {\r\n                        geo_match_statement: {\r\n                          country_codes: [\"US\"],\r\n                        },\r\n                      },\r\n                    },\r\n                  },\r\n                  {\r\n                     and_statement: {\r\n                       statement: [\r\n                         ...\r\n                       ]\r\n                   }\r\n                ]\r\n              },\r\n            },\r\n```\r\nThis is NOT documented anywhere.\r\nSeriously, the entire WAFv2 rule documentation for typescript is a just a copy from native terraform without any needed modifications (with even the wrong modifications of statements still in camel case!).",
        "createdAt": "2024-12-25T07:46:42Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2469#issuecomment-2561690599",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2023-01-10T11:43:05Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzk3",
        "name": "help wanted",
        "description": "Community contributions welcome as the core team is unlikely to work on this soon",
        "color": "008672"
      },
      {
        "id": "MDU6TGFiZWwyMjI4Mzg3NjY3",
        "name": "cdktf",
        "description": "",
        "color": "fccac4"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzMxMzA4",
        "name": "confirmed",
        "description": "independently reproduced by an engineer on the team",
        "color": "4B830E"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMTM1OTcwMTgw",
        "name": "provider/aws",
        "description": "Issue shows up using AWS provider",
        "color": "396F8B"
      },
      {
        "id": "MDU6TGFiZWwzMTM2MjAxMTE5",
        "name": "provider get / generation",
        "description": "",
        "color": "CC3938"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjEz",
        "name": "size/medium",
        "description": "estimated < 1 week",
        "color": "291E63"
      },
      {
        "id": "LA_kwDODd1Amc8AAAABH924aQ",
        "name": "bug/has-workaround",
        "description": "A bug with a workaround (may not be elegant)",
        "color": "9e202d"
      }
    ],
    "milestone": null,
    "number": 2469,
    "title": "wafv2 rule-group - rule \"statement\" is not getting reflected in the cdk.tf.json",
    "updatedAt": "2024-12-25T07:47:14Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjEzMzcwNDY=",
      "is_bot": false,
      "login": "DanielMSchmidt",
      "name": "Daniel Schmidt"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\n`cdktf convert` needs the provider information to make accurate translations. This means users either need to run the command in their cdktf project or with command line flags to pass down the providers they are using and it also means the command takes more time since the schema needs to be fetched.\r\n\r\nThis is both a bit annoying, we could improve `cdktf convert` by bundling the most common providers in their latest version (some things might be wrong if you don't specify an explicit version, but most things should be okay) and / or caching the schemas (to make re-runs of convert faster).\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5UqteI",
        "author": {
          "login": "DanielMSchmidt"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "To add to this, we don't need all of the provider schema so we might be able to compress it to only the information we need to not additionally blow up our bundle size.",
        "createdAt": "2023-02-07T09:47:07Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2509#issuecomment-1420482440",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2023-01-18T11:56:43Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMTM2MjgxMDY3",
        "name": "ux/cli",
        "description": "",
        "color": "40FE53"
      },
      {
        "id": "MDU6TGFiZWwzMTg1Mzg1NTQ2",
        "name": "feature/convert",
        "description": "",
        "color": "d93f0b"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjEz",
        "name": "size/medium",
        "description": "estimated < 1 week",
        "color": "291E63"
      }
    ],
    "milestone": null,
    "number": 2509,
    "title": "Convert: Bundle the most used providers",
    "updatedAt": "2023-03-09T11:44:13Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjEwMTYyMw==",
      "is_bot": false,
      "login": "edeustace",
      "name": "ed eustace"
    },
    "body": "Running `cdktf provider list` within a cdktf package that is part of an [workspace][ws] throws an error.\r\n\r\n[ws]: https://docs.npmjs.com/cli/v7/using-npm/workspaces\r\n\r\n\r\n<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### cdktf & Language Versions\r\n\r\ncdktf: 15.0.0\r\n\r\n<!--- Please make note of the version you are using for the `hashicorp/terraform-cdk` and language bindings you are using.\r\nIf you are not running the latest version, please upgrade because your issue may have already been fixed. --->\r\n\r\n### Affected Resource(s)\r\n\r\n\r\n<!--- Please list the affected resources. --->\r\n\r\n### Debug Output\r\n\r\n<!---\r\nPlease provide a link to a GitHub Gist containing the complete debug output. Please do NOT paste the debug output in the issue; just paste a link to the Gist.\r\n--->\r\nhttps://gist.github.com/edeustace/1806ada8fa6026fba4caefb85364fbbd#file-error-log\r\n\r\n### Expected Behavior\r\n\r\n<!--- What should have happened? --->\r\n\r\nCommand should have run. \r\n\r\n### Actual Behavior\r\n\r\n<!--- What actually happened? --->\r\n\r\nCommand failed and logged the error: \r\n` Could not determine cdktf version. Please make sure you are in a directory containing a cdktf project and have all dependencies installed.`\r\n\r\n### Steps to Reproduce\r\n\r\n<!--- Please list the steps required to reproduce the issue. --->\r\n\r\nCreate a monorepo: \r\n\r\n```shell\r\napp/\r\n  infrastructure/ # cdktf stuff in here\r\n  packages/ # packages here\r\n```\r\n\r\nin your monorepo package.json set up workspaces: \r\n\r\n```javascript\r\n  // snip\r\n  \"workspaces\": [ \"infrastructure\", \"packages/*\"]\r\n  // snip\r\n```\r\n\r\n`cd infrastructure`\r\n`cdktf provider list`\r\n\r\n### Important Factoids\r\n\r\n<!--- Are there anything atypical about your accounts that we should know? --->\r\n\r\nI think this is the source that relates to the error: \r\n\r\nhttps://github.com/hashicorp/terraform-cdk/blob/44cf75daab5e89bdfe89887d24bcb283287e5564/packages/%40cdktf/commons/src/debug.ts#L96\r\n\r\nWhen parsing the output of `npm list cdktf --json`, and you are in a package within the workspace, the `dependencies` map that you want to check will be defined within the workspace package map in `dependencies`. \r\n\r\nSo for the above - w/ a workspace package called `infrastructure` the json will look like this: \r\n```javascript\r\n  {\r\n    dependencies: {\r\n       infrastructure: {\r\n         dependencies: {\r\n           // snip\r\n          cdktf: { /*..info here */ }\r\n          // snip\r\n         }\r\n       }\r\n   }\r\n}\r\n```\r\n \r\nSo the logic should be updated to check if cwd is within a workspace package: \r\n\r\n```javascript\r\nconst workspacePkgName = loadWorkspacePkgName( process.cwd() ) // <-- check if we are in a workspace package.\r\n\r\nif(workspacePkgName) {\r\n  const workspacePkg = json.dependencies[workspacePkgName]; \r\n  // then - here look to find `packageName`\r\n} else {\r\n  // do the regular check...\r\n}\r\n```\r\n\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor documentation? For example:\r\n--->\r\n\r\n- #0000\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5dtMGw",
        "author": {
          "login": "xiehan"
        },
        "authorAssociation": "MEMBER",
        "body": "Thanks for raising this issue! We agree this should be addressed. Unfortunately it's not something we'll have capacity to work on soon, but we welcome any community contributions.",
        "createdAt": "2023-06-01T14:07:55Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2519#issuecomment-1572127152",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2023-01-20T13:55:29Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzk3",
        "name": "help wanted",
        "description": "Community contributions welcome as the core team is unlikely to work on this soon",
        "color": "008672"
      },
      {
        "id": "MDU6TGFiZWwyMjYwNjQ0NDQx",
        "name": "cdktf-cli",
        "description": "",
        "color": "82e5de"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjEz",
        "name": "size/medium",
        "description": "estimated < 1 week",
        "color": "291E63"
      },
      {
        "id": "LA_kwDODd1Amc78phHg",
        "name": "cli/provider-subcommands",
        "description": "cdktf provider <verb> commands",
        "color": "4CBCB0"
      }
    ],
    "milestone": null,
    "number": 2519,
    "title": "cdktf provider list does not work when run from a package within a workspace ",
    "updatedAt": "2023-06-01T14:07:56Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjIwNzIwNDk4",
      "is_bot": false,
      "login": "oleksiilopasov",
      "name": "Oleksii Lopasov"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\nIn documentation we have this information about CDKTF basics:\r\n```\r\nApp Class\r\nEach CDKTF project has one or more App instances that act as a container for the infrastructure configurations you create and deploy.\r\nAn App can have one or more stacks that represent a collection of related infrastructure.\r\n```\r\n\r\nI thought that means I can define multiple different apps one by one in `main.py` in the following manner:\r\n```\r\napp1 = App()\r\napp2 = App()\r\n...\r\n<calling stacks to deploy within the specific app>\r\n...\r\napp1.synth()\r\napp2.synth()\r\n```\r\nAfter that I expect `cdktf deploy stack-*` (All stack names start with `stack-`) to deploy all stacks. Though I have a deployment for those several combined within the latest app defined in code (app2 in my case). So I have all stacks synthesized, but only app2 stacks deployed. Is it possible to define several apps and deploy them within a single `cdktf deploy`? If not, it would be nice to have along with ability to provide app as a parameter to `cdktf deploy` CLI and define app dependencies within each other. \r\nIMO if App() is a higher-level abstraction compared to Stack() then it could make sense to provide engineers a mechanism to deploy them in similar manner as stacks.\r\nThanks in advance \r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5UKWxj",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "Hi @oleksiilopasov üëã\r\n\r\nThank you for raising this! I agree with you, if we support multiple apps, than our CLI should support them, too.\r\nUnfortunately, the docs are a bit misleading as we currently only support one app with the default config.\r\n\r\nWhile in theory you could already specify two different `outDir` options for each of your two apps, the CDKTF CLI currently won't handle those two distinct directories while synthesizing (as it only supports a single `outDir` option).\r\n\r\nOut of curiosity: What is the reason you'd like to use two apps?",
        "createdAt": "2023-02-01T12:46:21Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2568#issuecomment-1412000867",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5UK7x_",
        "author": {
          "login": "oleksiilopasov"
        },
        "authorAssociation": "NONE",
        "body": "Hi @ansgarm \r\nLet me try to explain.\r\nSo, I have my Google Cloud organization defined with folder structure and YAML configs mapped to GCP folders and projects respectively. The deployment is similar to layer-cake where I deploy org-level stuff first, then folder-structure and projects skeletons, then relations between projects and project security, etc... This allows me to avoid the situations when one project (or it's resource) relates/depends to another, that doesn't exist yet. For example if one project needs access to another, I have to be sure both of them already exist and ready for further configuration. The layer-like deployment saves me from getting lost in dependency-hell and managing them explicitly in most cases. These layers are my stacks and each stack saves terraform state per environment (dev, stage, prod)\r\nBUT\r\nTo fill the projects with resources within the same CDKTF project, I have to change the approach and save each project state per project, not by env. Because we expect to have tons of projects, I don't want to define a stack for each of them. That's why I introduced an auxiliary class for iterating the projects and creating `TerraformStack()`-type class per each. This auxiliary class has different type so `add_dependency()` method can't be applied. While I want these project-resource-stacks to be deployed AFTER the org-level stacks finish, I can't define a dependency between them. So I made a decision to split them between different apps. Didn't work out as I mentioned above. So my current solution is use different name patterns for different stacks: for example `infra-*` for infrastructure-level and `resource-*` for resource-level. And deploy them with different CLI `deploy` commands. As there might be a CI/CD wrapper around CDKTF, it's not a problem, though I'm looking forward to my feature request to be implemented.",
        "createdAt": "2023-02-01T14:28:45Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2568#issuecomment-1412152447",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5UYe1f",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "> That's why I introduced an auxiliary class for iterating the projects and creating TerraformStack()-type class per each. This auxiliary class has different type so add_dependency() method can't be applied.\r\n\r\nCould you elaborate a bit more on how that auxiliary class works? And about how you tried to define the dependency?\r\n\r\nWhile it probably is not possible to add a dependency to that auxiliary class, it probably would be possible to have it expose an `add_dependency()` method that would delegate this to all the Terraform stacks it manages? But maybe I'm missing something here.\r\n\r\nBut supporting multiple apps or a different abstraction to handle the layercake use-case you described, is definitely something that would be very valuable. So we should keep this issue open regardless üëç",
        "createdAt": "2023-02-03T10:57:55Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2568#issuecomment-1415703903",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5UYt_g",
        "author": {
          "login": "oleksiilopasov"
        },
        "authorAssociation": "NONE",
        "body": "@ansgarm Hey\r\nHere is how my class works:\r\nmain.py:\r\n```python\r\napp = App()\r\norg_infra = OrgInfra(app, \"goog-cdktf-infra\")\r\nresource_stack_dev = ResourceStack(app, \"development\")\r\nresource_stack_nonprod = ResourceStack(app, \"non-production\")\r\n```\r\n`OrgInfra()` inherits `TerraformStack()` and should be executed before resource-related stacks start. `ResourceStack()` is a custom class (`non-TerraformStack()`)\r\n\r\nHere is what's inside this custom class:\r\n```python\r\nclass ResourceStack():\r\n    def __init__(self, scope: Construct, environment: str):\r\n        _, projects = helper.org_walk(environment)\r\n\r\n        for project in projects:\r\n            project_name = os.path.basename(project).split('.')[0]\r\n            ProjectStack(\r\n                scope, f\"stack-{environment}-{project_name}\",\r\n                ProjectStackConfig(\r\n                    environment=environment,\r\n                    path=project,\r\n                    project=project_name\r\n                )\r\n            )\r\n```\r\nI delegate the app instance to pass it into each child `ProjectStack()` class\r\nProjectStack is the standard TerraformStack() class with it's custom logic inside:\r\n```python\r\nclass ProjectStack(TerraformStack):\r\n    def __init__(self, scope: Construct, id: str, config: ProjectStackConfig):\r\n        super().__init__(scope, id)\r\n        ...<custom_logic>...\r\n```\r\nSo `ResourceStack()` iterates the projects YAML configs within the particular environment (env is mapped to related folder with projects inside) and executes `ProjectStack()` per each project. That's how my project-stacks are configured dynamically. I still can delegate an upstream stack to add it as a dependency, for example:\r\n```python\r\napp = App()\r\norg_infra = OrgInfra(app, \"goog-cdktf-infra\")\r\nresource_stack_dev = ResourceStack(app, \"development\", org_infra)\r\n```\r\nand then:\r\n```python\r\nclass ResourceStack():\r\n    def __init__(self, scope: Construct, environment: str, upstream: Construct):\r\n        _, projects = helper.org_walk(environment)\r\n\r\n        for project in projects:\r\n            project_name = os.path.basename(project).split('.')[0]\r\n            ProjectStack(\r\n                scope, f\"stack-{environment}-{project_name}\",\r\n                ProjectStackConfig(\r\n                    environment=environment,\r\n                    path=project,\r\n                    project=project_name\r\n                )\r\n            ).add_dependency(upstream)\r\n```\r\nBUT\r\nIn the beginning I also had `resource_stack_nonprod = ResourceStack(app, \"non-production\")` that I want to run AFTER `dev` is finished. In this case I can't pass an upstream stack because I don't have them defined explicitly - they are dynamic/ephemeral and exist only when `cdktf` is compiling the code. Additionally there can be tons of `dev` project-stacks. How will I add all of them as dependencies to `nonprod`?)\r\nThats why my current solution assumes stacks to have different name patters: `goog-*` for infrastructure and `stack-dev-*` and `stack-nonprod-*` for `dev` and `nonprod` dynamic stacks respectively. In this case I'll have to call `cdktf` three times deploying required stacks in required order.\r\nThat's how I see it, if we had multiple apps within a single cdktf project:\r\n```python\r\napp_infra = App(<infra-app config parameters>)\r\napp_stacks = App(<stack-app config parameters>)\r\napp_stacks.add_dependency(app_infra)\r\n\r\norg_infra = OrgInfra(app_infra, \"goog-org-infrastructure\")\r\norg_secure = OrgInfra(app_infra, \"goog-org-security\")\r\norg_secure.add_dependency(org_infra)\r\n\r\n# Iteration class, calling TerraformStack() per each project\r\nresource_stack_dev = ResourceStack(app_stacks, \"development\")\r\nresource_stack_nonprod = ResourceStack(app_stacks, \"non-production\")\r\n```\r\nThough even in this case we won't be able to set dependencies between `resource_stack_dev` and its child stacks and `resource_stack_nonprod` ones. The only way is to split these dynamic stacks between different apps and set dependencies on app-level.\r\n\r\nWhat do you think?",
        "createdAt": "2023-02-03T11:54:56Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2568#issuecomment-1415765984",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5WoWs8",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "Hi @oleksiilopasov üëã\r\n\r\nThank you for the extensive write-up and sorry for the late reply. I think your case is a good example where allowing multiple apps or nested stacks (which e.g. the AWS CDK supports) could simplify your architecture.\r\n\r\nWith todays tools, you could have `ProjectStack` keep a list of the stacks it creates and expose a `add_dependency(stack)` method on `ProjectStack` that would iterate over that list and call `add_dependency(stack)` on each \"child\"-stack it has in its list.\r\n\r\nAn (somewhat hacky) alternative / addition could be to introduce helper stacks that have no resources and only exist to bundle the dependencies:\r\n```python\r\ninfra_done = AllInfraDoneStack()\r\ninfra_done.add_dependency(org_infra)\r\ninfra_done.add_dependency(org_secure)\r\n```\r\nYour `ResourceStack` could then add a dependency to that stack to each `ProjectStack` it creates.",
        "createdAt": "2023-03-03T11:53:26Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2568#issuecomment-1453419324",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2023-02-01T12:25:06Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzgw",
        "name": "documentation",
        "description": "Improvements or additions to documentation",
        "color": "0075ca"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMTM2Mjc5MjMx",
        "name": "ux/configuration",
        "description": "",
        "color": "58FCA0"
      }
    ],
    "milestone": null,
    "number": 2568,
    "title": "CDKTF support for multiple applications",
    "updatedAt": "2023-03-03T11:54:32Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjExMTIwNTY=",
      "is_bot": false,
      "login": "ansgarm",
      "name": "Ansgar Mertens"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\nThe following snippet is not translated to other languages and not sourced from code for TypeScript:\r\nhttps://github.com/hashicorp/terraform-cdk/blob/8d33d56a84301ef357bae4218a020a8d93b80ce4/website/docs/cdktf/concepts/variables-and-outputs.mdx?plain=1#L101-L117\r\n\r\n\r\n\r\n### References\r\n\r\n* Not merged yet, but I translated it to Go in this [commit](https://github.com/hashicorp/terraform-cdk/commit/29538f8a875769f6ba9de5e00e7a1cd10ef18d7a#diff-caac5ea344848751b09d287425aadc269a611612eb0523b0647945a0feadd7f6R98-R109) on this [PR](https://github.com/hashicorp/terraform-cdk/pull/2560).\r\n* Someone was asking for this translation on [Discuss](https://discuss.hashicorp.com/t/how-to-model-complex-variable-in-python/52161)\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [],
    "createdAt": "2023-02-02T09:04:05Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzgw",
        "name": "documentation",
        "description": "Improvements or additions to documentation",
        "color": "0075ca"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwyMTEzNjU3MzA2",
        "name": "language/python",
        "description": "",
        "color": "5c2596"
      },
      {
        "id": "MDU6TGFiZWwyNjMzNjk4NzAy",
        "name": "language/java",
        "description": "",
        "color": "E38858"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMTM1OTYzMTU0",
        "name": "language/c#",
        "description": "C# language issues",
        "color": "c5def5"
      }
    ],
    "milestone": null,
    "number": 2578,
    "title": "Documentation: Complex variables snippet not translated in `variables-and-outputs.mdx`",
    "updatedAt": "2023-04-14T11:29:13Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjExMTIwNTY=",
      "is_bot": false,
      "login": "ansgarm",
      "name": "Ansgar Mertens"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\nThis one came in after the first pass of converting examples to other languages, which is probably why it was missed. No language is sourced from an example yet.\r\n\r\nhttps://github.com/hashicorp/terraform-cdk/blob/79b1d35e03d290b23a21cd9c9a53be0ba04360ff/website/docs/cdktf/concepts/tokens.mdx?plain=1#L155-L182\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5UQFCX",
        "author": {
          "login": "mutahhir"
        },
        "authorAssociation": "MEMBER",
        "body": "I saw this, and thought it of little value to place within the examples code, so I'd vote to skip it.",
        "createdAt": "2023-02-02T10:23:48Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2582#issuecomment-1413501079",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5VapP3",
        "author": {
          "login": "xiehan"
        },
        "authorAssociation": "MEMBER",
        "body": "It's also a duplicate of #2298.",
        "createdAt": "2023-02-16T12:56:36Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2582#issuecomment-1433048055",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2023-02-02T09:34:32Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzgw",
        "name": "documentation",
        "description": "Improvements or additions to documentation",
        "color": "0075ca"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      }
    ],
    "milestone": null,
    "number": 2582,
    "title": "Documentation: `cdktf.NullValue` example in `tokens.mdx` not sourced from examples",
    "updatedAt": "2023-02-16T12:56:37Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjExMTIwNTY=",
      "is_bot": false,
      "login": "ansgarm",
      "name": "Ansgar Mertens"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\nThe [unit test page](https://github.com/hashicorp/terraform-cdk/blob/main/website/docs/cdktf/test/unit-tests.mdx) has examples for all languages, but none are yet sourced from documentation examples that are checked for correctness.\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [],
    "createdAt": "2023-02-02T09:38:28Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzgw",
        "name": "documentation",
        "description": "Improvements or additions to documentation",
        "color": "0075ca"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      }
    ],
    "milestone": null,
    "number": 2583,
    "title": "Documentation: Examples in `unit-tests.mdx` not sourced from documentation",
    "updatedAt": "2023-02-15T16:37:18Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjExMTIwNTY=",
      "is_bot": false,
      "login": "ansgarm",
      "name": "Ansgar Mertens"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Affected Resource(s)\r\n\r\nFor example this snippet in `iterators.mdx`: https://github.com/hashicorp/terraform-cdk/commit/546d4227e259dfce07db768dfb952188ec2d862d#diff-1e6a8dd989f640f76851c942afe89936e68f289c0b5c52b8079a8645c7d047c8R396-R418\r\n\r\n<!--- Please list the affected resources. --->\r\n\r\n### Expected Behavior\r\n\r\nIf all lines start with at least the same number of tabs, that amount should be removed, similar to how shared leading whitespace is removed already. If tabs and spaces are mixed, nothing should be removed.\r\n\r\n<!--- What should have happened? --->\r\n\r\n### Actual Behavior\r\n\r\nLeading tabs are never removed\r\n\r\n<!--- What actually happened? --->\r\n\r\n### Important Factoids\r\n\r\nThis code would need to be adjusted:\r\nhttps://github.com/hashicorp/terraform-cdk/blob/b3c34a80e75a167b758807bcebfebd06d360c168/tools/documentation-code-snippets/update-documentation-code-snippets.ts#L220-L224\r\n\r\n<!--- Are there anything atypical about your accounts that we should know? --->\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor documentation? For example:\r\n--->\r\n",
    "comments": [],
    "createdAt": "2023-02-02T09:47:33Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzgw",
        "name": "documentation",
        "description": "Improvements or additions to documentation",
        "color": "0075ca"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMTU1MzExNDc0",
        "name": "dev-process",
        "description": "Improvements to how CDK for Terraform is developed and built",
        "color": "F6A4ED"
      },
      {
        "id": "MDU6TGFiZWwzMzE3NzI2NjM4",
        "name": "tech-debt",
        "description": "",
        "color": "191658"
      }
    ],
    "milestone": null,
    "number": 2585,
    "title": "Docs Snippet Tool only removes leading whitespace but not leading tabs",
    "updatedAt": "2023-06-01T17:35:42Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjExMTIwNTY=",
      "is_bot": false,
      "login": "ansgarm",
      "name": "Ansgar Mertens"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\nWe use [this tool](https://github.com/hashicorp/terraform-cdk/tree/main/tools/documentation-code-snippets) to be able to ensure the snippets in our docs are valid.\r\n\r\nBy running this tool in CI and checking whether a diff is produced, we can ensure that, after changing an example, the snippet generation was run. We might even opt to create an automated commit (like Projen does) to persist the result of the tool and save some time (spent running the same thing locally).\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [],
    "createdAt": "2023-02-06T10:56:48Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzgw",
        "name": "documentation",
        "description": "Improvements or additions to documentation",
        "color": "0075ca"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMTU1MzExNDc0",
        "name": "dev-process",
        "description": "Improvements to how CDK for Terraform is developed and built",
        "color": "F6A4ED"
      },
      {
        "id": "MDU6TGFiZWwzMzE3NzI2NjM4",
        "name": "tech-debt",
        "description": "",
        "color": "191658"
      }
    ],
    "milestone": null,
    "number": 2600,
    "title": "CI: Validate that docs snippets sourced from examples are up-to-date",
    "updatedAt": "2023-06-01T17:36:40Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjExMTIwNTY=",
      "is_bot": false,
      "login": "ansgarm",
      "name": "Ansgar Mertens"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\nThere are a few snippets left in our documentation that are written inline (in TypeScript; no CodeBlocks) and therefore neither sourced from a documentation example nor translated to other languages.\r\n\r\nThe following files contain such snippets:\r\n- `best-practices.mdx` (3 snippets)\r\n- `project-setup.mdx` (2 snippets)\r\n- `terraform-cloud.mdx` (2 snippets)\r\n- `construct-design.mdx` (3 snippets)\r\n- `refactoring.mdx` (2 snippets)\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [],
    "createdAt": "2023-02-07T15:38:47Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzgw",
        "name": "documentation",
        "description": "Improvements or additions to documentation",
        "color": "0075ca"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      }
    ],
    "milestone": null,
    "number": 2607,
    "title": "Documentation: Remaining code snippets that are TypeScript only and not in CodeBlocks",
    "updatedAt": "2023-02-15T16:36:47Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjEzMzcwNDY=",
      "is_bot": false,
      "login": "DanielMSchmidt",
      "name": "Daniel Schmidt"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\nAn update of @types/node broke cdktf for all of our JSII users. To guard against this in the future we could try to remove `@types/node` (like we tried in https://github.com/hashicorp/terraform-cdk/pull/2622) and write a .d.ts file in cdktf to add definitions for the node APIs we use. This way no future update can break this anymore.\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n\r\n- Original issue: #2610",
    "comments": [],
    "createdAt": "2023-02-09T11:05:10Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzk3",
        "name": "help wanted",
        "description": "Community contributions welcome as the core team is unlikely to work on this soon",
        "color": "008672"
      },
      {
        "id": "MDU6TGFiZWwyMjI4Mzg3NjY3",
        "name": "cdktf",
        "description": "",
        "color": "fccac4"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMzE3NzI2NjM4",
        "name": "tech-debt",
        "description": "",
        "color": "191658"
      }
    ],
    "milestone": null,
    "number": 2624,
    "title": "Remove dependency on @types/node",
    "updatedAt": "2023-06-01T18:03:51Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjU3MzUzMQ==",
      "is_bot": false,
      "login": "mutahhir",
      "name": "Mutahhir Hayat"
    },
    "body": "The following is valid HCL (barring requried arguments etc), but invalid Typescript when synthesized. We should be able to read the `required_providers` section and generate any missing providers.\n\n### Source\n\n```hcl\n# Summary: A simple Azure Active Directory Group\n\n# Documentation: https://www.terraform.io/docs/language/settings/index.html\nterraform {\n  required_version = \">= 1.0.0\"\n  required_providers {\n    azuread = {\n      source  = \"hashicorp/azuread\"\n      version = \"=2.33.0\"\n    }\n  }\n}\n\n# Azure AD Group\n# Documentation: https://registry.terraform.io/providers/hashicorp/azuread/latest/docs/resources/service_principal\nresource \"azuread_group\" \"changeme_simple_group\" {\n  display_name = \"changeme-simple-group-name\"\n}\n```\n\n### Generated\n\n```ts\nimport { Construct } from \"constructs\";\nimport { TerraformStack } from \"cdktf\";\n/*Provider bindings are generated by running cdktf get.\nSee https://cdk.tf/provider-generation for more details.*/\nimport * as azuread from \"../../.gen/providers/azuread\";\n\nexport class MyStack extends TerraformStack {\n  constructor(scope: Construct, id: string) {\n    super(scope, id);\n\n    // NOT GENERATED, BUT REQUIRED\n    new azuread.provider.AzureadProvider(this, \"changeme\", {});\n\n    new azuread.group.Group(this, \"changeme_simple_group\", {\n      displayName: \"changeme-simple-group-name\",\n    });\n  }\n}\n```\n\n",
    "comments": [],
    "createdAt": "2023-02-14T08:57:18Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMTg1Mzg1NTQ2",
        "name": "feature/convert",
        "description": "",
        "color": "d93f0b"
      }
    ],
    "milestone": null,
    "number": 2638,
    "title": "Converting from Terraform, we need the provider to be explicitly stated, we should read from required_providers instead",
    "updatedAt": "2023-03-09T11:42:35Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjU3MzUzMQ==",
      "is_bot": false,
      "login": "mutahhir",
      "name": "Mutahhir Hayat"
    },
    "body": "Currently if we install a pre-built provider to a C# project, we get the following line inserted into the project file:\n\n```xml\n<PackageReference Include=\"HashiCorp.Cdktf.Providers.Random\" Version=\"3.0.11\" />\n```\n\nHowever, the same does not happen when installing a locally built provider. It is left for the developer to update. The update would look something like:\n\n```xml\n  <ItemGroup>\n    <ProjectReference Include=\".gen/aws/aws.csproj\" />\n  </ItemGroup>\n```\n\n",
    "comments": [],
    "createdAt": "2023-02-14T10:38:33Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwyMjQ2NzM1NDk1",
        "name": "providers",
        "description": "",
        "color": "2bd8cd"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMTM2MjgxMDY3",
        "name": "ux/cli",
        "description": "",
        "color": "40FE53"
      }
    ],
    "milestone": null,
    "number": 2648,
    "title": "Installing local providers should update `.csproj` file as pre-built providers do",
    "updatedAt": "2023-03-09T11:46:13Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjMzNTQxNTA3",
      "is_bot": false,
      "login": "AtomAsking",
      "name": ""
    },
    "body": "> Don't worry, it's a small problem\r\n\r\n## 1. The key name of the dict type cannot be consistent with the property name of the class\r\n\r\n### My Environment:\r\n- Python: 3.9\r\n- cdktf-cdktf-provider-azurerm: 5.0.5\r\n- cdktf: 0.15.5\r\n\r\n### anti-human design:\r\nThe NetworkInterfaceIpConfiguration source code shows that there is a property named private_ip_address_allocation, which is the same as the name queried in the official Terraform manual, which is fine.\r\n\r\nFrom the source code, we can see that:\r\nprivate_ip_address_allocation  type hints:  `typing.Sequence[typing.Union[\"NetworkInterfaceIpConfiguration\", typing.Dict[builtins.str, typing.Any]]]`\r\n\r\n```python\r\nip_configuration=[{\r\n                'name': 'test01-ip-configuration',\r\n                \"privateIpAddressAllocation\": \"Dynamic\", \r\n                'subnet_id': subnet.id,\r\n                'public_ip_address_id': public_ip_address.id\r\n            }]\r\n```\r\n\r\n```python\r\nip_configuration=[NetworkInterfaceIpConfiguration(\r\n                name='test01-ip-configuration',\r\n                private_ip_address_allocation=\"Dynamic\",\r\n                subnet_id=subnet.id,\r\n                public_ip_address_id=public_ip_address.id\r\n            )],\r\n```\r\nThe above two pieces of Python code both pass the test. You will find that in the code snippet with the structure `List(Dict)`, the property is named `privateIpAddressAllocation`, while in the code snippet with the structure `List(NetworkInterfaceIpConfiguration)`, the property is named `private_ip_address_allocation`. By reading the official Terraform manual, we know that this naming rule is the most reasonable and is consistent with the official one.\r\n\r\nI think this is an oversight because I tried declaring the `security_rule` attribute of the `NetworkSecurityGroup` class again and found that it did not have the above problem and passed the test successfully.\r\n\r\nFinally hopefully a fix can be made in a new version as this will bother some developers and I believe it's a good habit to stay consistent with the official Terraform documentation.\r\n\r\nFinally, let's take a look at how this is declared in the official Terraform documentation:\r\nhttps://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/network_interface#private_ip_address_allocation\r\n\r\n\r\n\r\n\r\n## 2. Report an anti-human design\r\nThe `ip_configuration` property of the `NetworkInterface` class is a Sequence for all to see, and the declaration of type hints shows that it supports two ways of writing, i.e. using the `Dict` type and the declaration of the `NetworkInterfaceIpConfiguration` class.\r\n\r\nSee some of the core code examples below:\r\n```python\r\n\"\"\"\r\nThis is the code I tested and it works fine.\r\n\"\"\"\r\nvirtual_network = VirtualNetwork(\r\n            self,\r\n            'my-virtual-network',\r\n            name='test01-virtual-network',\r\n            location=resource_group.location,\r\n            resource_group_name=resource_group.name,\r\n            address_space=['10.0.0.0/16'],\r\n            subnet=[\r\n                VirtualNetworkSubnet(\r\n                    name='test01-subnet',\r\n                    address_prefix='10.0.0.0/24',\r\n                    security_group=network_security_group.id\r\n                )\r\n            ]\r\n        )\r\n\r\nnetwork_interface = NetworkInterface(\r\n            self,\r\n            'my-network-interface',\r\n            name='test01-network-interface',\r\n            ip_configuration=[\r\n                # Note the following line, which uses the `NetworkInterfaceIpConfiguration` class to initialize\r\n                NetworkInterfaceIpConfiguration(\r\n                    name='test01-ip-configuration',\r\n                    private_ip_address_allocation=\"Dynamic\", \r\n                    subnet_id=virtual_network.subnet.get(0).id,\r\n                    public_ip_address_id=public_ip_address.id\r\n                )\r\n            ],\r\n            location=resource_group.location,\r\n            resource_group_name=resource_group.name\r\n        )\r\n```\r\n\r\n```python\r\n\"\"\"\r\nAccording to the type hints restriction of the source code is possible to use Dict type for initialization, but the code here will report an error, which is also tested by me.\r\n\"\"\"\r\nvirtual_network = VirtualNetwork(\r\n            self,\r\n            'my-virtual-network',\r\n            name='test01-virtual-network',\r\n            location=resource_group.location,\r\n            resource_group_name=resource_group.name,\r\n            address_space=['10.0.0.0/16'],\r\n            subnet=[\r\n                VirtualNetworkSubnet(\r\n                    name='test01-subnet',\r\n                    address_prefix='10.0.0.0/24',\r\n                    security_group=network_security_group.id\r\n                )\r\n            ]\r\n        )\r\n\r\nnetwork_interface = NetworkInterface(\r\n            self,\r\n            'my-network-interface',\r\n            name='test01-network-interface',\r\n            ip_configuration=[\r\n                # Note that the following Dict structure will throw an error.\r\n                {\r\n                    'name': 'test01-ip-configuration',\r\n                    'privateIpAddressAllocation': \"Dynamic\",\r\n                    'subnet_id': virtual_network.subnet.get(0).id,\r\n                    'public_ip_address_id': public_ip_address.id\r\n                }\r\n            ],\r\n            location=resource_group.location,\r\n            resource_group_name=resource_group.name\r\n        )\r\n```\r\n\r\n### The error message is as follows.\r\n```bash\r\nmy-stack  ‚ï∑\r\n          ‚îÇ Error: expanding `ip_configuration`: A Subnet ID must be specified for an IPv4 Network Interface.\r\n          ‚îÇ \r\n          ‚îÇ   with azurerm_network_interface.my-network-interface (my-network-interface),\r\n          ‚îÇ   on cdk.tf.json line 58, in resource.azurerm_network_interface.my-network-interface (my-network-interface):\r\n          ‚îÇ   58:       }\r\n\r\n```\r\n\r\nI think both issues are caused by the same unknown problem (i.e., there is an unknown problem with the support for `Dict` types), so they are put together and hopefully solved.",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5hrxCN",
        "author": {
          "login": "Jreamz"
        },
        "authorAssociation": "NONE",
        "body": "Ran into this issue today as well, friendly bump\r\n\r\n```\r\ncdktf --version\r\n0.17.0\r\n```",
        "createdAt": "2023-07-17T20:50:49Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2669#issuecomment-1638862989",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2023-02-22T08:58:58Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzk3",
        "name": "help wanted",
        "description": "Community contributions welcome as the core team is unlikely to work on this soon",
        "color": "008672"
      },
      {
        "id": "MDU6TGFiZWwyMTEzNjU3MzA2",
        "name": "language/python",
        "description": "",
        "color": "5c2596"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMTM1OTY5MTg4",
        "name": "provider/azure",
        "description": "Issue shows up using Azure provider",
        "color": "bfd4f2"
      },
      {
        "id": "MDU6TGFiZWwzMTM2MjAxMTE5",
        "name": "provider get / generation",
        "description": "",
        "color": "CC3938"
      }
    ],
    "milestone": null,
    "number": 2669,
    "title": "`azurerm` provider: Naming inconsistency with the `private_ip_address_allocation` property of the `NetworkInterfaceIpConfiguration` Class",
    "updatedAt": "2023-07-17T20:51:35Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjI3MzQ1NA==",
      "is_bot": false,
      "login": "jantman",
      "name": "Jason Antman"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### cdktf & Language Versions\r\n\r\ncdktf-cli 0.15.5\r\nPython 3.10.9 / cdktf 0.15.5 \r\n\r\n### Affected Resource(s)\r\n\r\nGrafana provider\r\n\r\n### Expected Behavior\r\n\r\nDictionary key arguments would be passed to provider configuration as specified.\r\n\r\n### Actual Behavior\r\n\r\nDictionary key arguments are lower-cased and have dashes converted to underscores, breaking them.\r\n\r\n### Steps to Reproduce\r\n\r\n1. Install cdktf latest version (0.15.5), generate bindings for `grafana/grafana@~> 1.35` provider.\r\n2. Configure the provider with the `http_headers` argument, such as:\r\n\r\n```\r\nGrafanaProvider(\r\n    self, 'grafana', org_id=1, http_headers={'X-Disable-Provenance': 'disabled'}\r\n)\r\n```\r\n\r\n3. The resulting synth'ed JSON has a header of `x_disable_provenance` instead of `X-Disable-Provenance`, which doesn't work with the underlying application.\r\n\r\n```\r\n  \"provider\": {\r\n    \"grafana\": [\r\n      {\r\n        \"http_headers\": {\r\n          \"x_disable_provenance\": \"disabled\"\r\n        },\r\n        \"insecure_skip_verify\": true,\r\n        \"org_id\": 1,\r\n        \"url\": \"http://nuc1:3000/\"\r\n      }\r\n    ]\r\n  },\r\n```\r\n\r\n### Important Factoids\r\n\r\nThis can currently be worked around with the `add_override` escape hatch.\r\n\r\n### References\r\n\r\nIt looks to me like this is related to #235 and #646 but I don't understand enough about the internals to really understand what's going on or why it works this way.",
    "comments": [
      {
        "id": "IC_kwDODd1Amc6FTIIE",
        "author": {
          "login": "farnoy"
        },
        "authorAssociation": "NONE",
        "body": "Just hit this using Typescript\r\n```\r\ncdktf debug\r\nlanguage: typescript\r\ncdktf-cli: 0.20.7\r\nnode: v22.3.0\r\ncdktf: 0.20.8\r\nconstructs: 10.3.0\r\njsii: null\r\nterraform: 1.9.2\r\narch: x64\r\nos: linux 6.9.3\r\n```",
        "createdAt": "2024-07-18T12:34:20Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2681#issuecomment-2236383748",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2023-02-24T22:32:50Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzk3",
        "name": "help wanted",
        "description": "Community contributions welcome as the core team is unlikely to work on this soon",
        "color": "008672"
      },
      {
        "id": "MDU6TGFiZWwyMTEzNjU3MzA2",
        "name": "language/python",
        "description": "",
        "color": "5c2596"
      },
      {
        "id": "MDU6TGFiZWwyMjI4Mzg3NjY3",
        "name": "cdktf",
        "description": "",
        "color": "fccac4"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "LA_kwDODd1Amc8AAAABH924aQ",
        "name": "bug/has-workaround",
        "description": "A bug with a workaround (may not be elegant)",
        "color": "9e202d"
      }
    ],
    "milestone": null,
    "number": 2681,
    "title": "Python - provider argument dict keys changed to lower-case with underscores",
    "updatedAt": "2024-07-18T12:34:21Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjExMTIwNTY=",
      "is_bot": false,
      "login": "ansgarm",
      "name": "Ansgar Mertens"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\nTerraform 1.4 added a new property that can be set on `exec-local`, we should add that one to the properties in our interface for `local-exec`.\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\n### References\r\n\r\n* https://github.com/hashicorp/terraform/pull/32116\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5XHfTH",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "In the meantime this property can be set using an [override](https://developer.hashicorp.com/terraform/cdktf/concepts/resources#escape-hatch).",
        "createdAt": "2023-03-09T08:46:37Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2702#issuecomment-1461580999",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2023-03-09T08:36:32Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzky",
        "name": "good first issue",
        "description": "Good for newcomers",
        "color": "7057ff"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzk3",
        "name": "help wanted",
        "description": "Community contributions welcome as the core team is unlikely to work on this soon",
        "color": "008672"
      },
      {
        "id": "MDU6TGFiZWwyMjI4Mzg3NjY3",
        "name": "cdktf",
        "description": "",
        "color": "fccac4"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMTM2MjkzOTA4",
        "name": "core-parity",
        "description": "Better experience in Terraform Core than CDKTF",
        "color": "1A80B6"
      }
    ],
    "milestone": null,
    "number": 2702,
    "title": "Support `local-exec` `quiet` attribute",
    "updatedAt": "2023-06-01T17:48:48Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjMyNTUzMzQ=",
      "is_bot": false,
      "login": "rirze",
      "name": "Sourabh Cheedella"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Affected Resource(s)\r\n\r\nOn line 135 in `cdktf/lib/private/tokens/encoding.ts`:\r\n```ts\r\nif (startMatch && endMatch) {\r\n      if (startMatch.index > startIndex && startMatch.index > startIndex) {  // this conditional is repeated?\r\n        const lede = this.str.substring(\r\n          startIndex,\r\n          Math.min(startMatch.index, endMatch.index)\r\n        );\r\n        fragments.addLiteral(lede);\r\n      }\r\n```\r\nIn the second line, the `if` statement has the same conditional repeated. Is this intentional-- am I missing some crucial TS knowledge?\r\n\r\nIf I had to guess what the second conditional would be, then I would guess `endMatch.index > startIndex`. But I'm not so confident in the logic here to definitively open that PR. \r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5XKrwq",
        "author": {
          "login": "DanielMSchmidt"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "Yeah, that really looks like a typo. Maybe we can do some archeology to see if there was something correct before ü§î ",
        "createdAt": "2023-03-09T16:58:21Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2709#issuecomment-1462418474",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5XKt0-",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "Or someone wanted to be _really_ sure üòÇ",
        "createdAt": "2023-03-09T17:03:30Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "LAUGH",
            "users": {
              "totalCount": 2
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2709#issuecomment-1462426942",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2023-03-09T16:44:20Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzky",
        "name": "good first issue",
        "description": "Good for newcomers",
        "color": "7057ff"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzk3",
        "name": "help wanted",
        "description": "Community contributions welcome as the core team is unlikely to work on this soon",
        "color": "008672"
      },
      {
        "id": "MDU6TGFiZWwyMjI4Mzg3NjY3",
        "name": "cdktf",
        "description": "",
        "color": "fccac4"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4Mjg1",
        "name": "size/small",
        "description": "estimated < 1 day",
        "color": "4671C0"
      },
      {
        "id": "MDU6TGFiZWwzMjM2NDcwNTQ1",
        "name": "feature/tokens",
        "description": "",
        "color": "58CF13"
      }
    ],
    "milestone": null,
    "number": 2709,
    "title": "Typo in Tokenizer code?",
    "updatedAt": "2023-06-02T14:18:33Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjU1NzE5OTA4",
      "is_bot": false,
      "login": "rivatove",
      "name": ""
    },
    "body": "### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n### Description\r\n\r\nAt this moment, it's not possible to use forEach with certain arguments, despite their availability in HCL, e.g.\r\n\r\n- Set of numbers (result of `Fn.range`)\r\n- Nested sets (result of `Fn.chunk`)\r\n\r\nThey are standard library functions and it makes little sense that they can't be used for iteration.\r\n\r\nWorkaround (`Fn.chunk`):\r\n\r\n```\r\nconst chunkList = Fn.chunklist(value, chunkSize)\r\nconst iterator = new ListTerraformIterator(Fn.slice([...Array(100).keys()].map(v => v.toString()), 0, Fn.lengthOf(chunkList)))\r\n...\r\nFn.element(chunkList, iterator.value)\r\n```\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5X0Wi3",
        "author": {
          "login": "DanielMSchmidt"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "Good point! I think the limitation lies mostly in the type system, a workaround you can use here is `cdktf.Token.asList`:\r\n\r\n```ts\r\nimport { Fn, TerraformIterator, Token } from \"cdktf\";\r\n\r\nconst chunkList = Fn.chunklist(value, chunkSize)\r\nconst iterator = TerraformIterator.fromList(Token.asList(chunkList));\r\n```",
        "createdAt": "2023-03-17T08:05:31Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2731#issuecomment-1473341623",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2023-03-16T20:36:46Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzk3",
        "name": "help wanted",
        "description": "Community contributions welcome as the core team is unlikely to work on this soon",
        "color": "008672"
      },
      {
        "id": "MDU6TGFiZWwyMjI4Mzg3NjY3",
        "name": "cdktf",
        "description": "",
        "color": "fccac4"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4Mjg1",
        "name": "size/small",
        "description": "estimated < 1 day",
        "color": "4671C0"
      },
      {
        "id": "LA_kwDODd1Amc8AAAABBv4DFg",
        "name": "feature/iterators",
        "description": "",
        "color": "2911A8"
      },
      {
        "id": "LA_kwDODd1Amc8AAAABH924aQ",
        "name": "bug/has-workaround",
        "description": "A bug with a workaround (may not be elegant)",
        "color": "9e202d"
      }
    ],
    "milestone": null,
    "number": 2731,
    "title": "Allow iterators to handle sets of anything",
    "updatedAt": "2023-06-01T14:31:41Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjExMTIwNTY=",
      "is_bot": false,
      "login": "ansgarm",
      "name": "Ansgar Mertens"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\nWe disabled running the [java/gradle-shared-module](https://github.com/hashicorp/terraform-cdk/tree/main/examples/java/gradle-shared-module) example as it somehow started to fail in CI while working locally.\r\n\r\nhttps://github.com/hashicorp/terraform-cdk/pull/2757 attempted to fix this, but with no immediate success. Given that we don't use Gradle in our default template, we might as well sunset this example (if no one with Gradle knowledge happens to chime in).\r\n\r\nTo fix the example, we might need to remove the `mvn install` script and replace it with the Gradle way of specifying a local jar for a dependency that is usually fetched from a repository.\r\n\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [],
    "createdAt": "2023-04-03T09:05:04Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzk3",
        "name": "help wanted",
        "description": "Community contributions welcome as the core team is unlikely to work on this soon",
        "color": "008672"
      },
      {
        "id": "MDU6TGFiZWwyNjMzNjk4NzAy",
        "name": "language/java",
        "description": "",
        "color": "E38858"
      },
      {
        "id": "MDU6TGFiZWwyNzQzNTkyMDA3",
        "name": "examples",
        "description": "",
        "color": "4AB3A0"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMzE3NzI2NjM4",
        "name": "tech-debt",
        "description": "",
        "color": "191658"
      }
    ],
    "milestone": null,
    "number": 2759,
    "title": "Re-enable CI for Java Gradle example",
    "updatedAt": "2023-06-02T10:07:48Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjExMTIwNTY=",
      "is_bot": false,
      "login": "ansgarm",
      "name": "Ansgar Mertens"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### Description\r\n\r\nCurrently running `cdktf synth` on an app with no stack will output the following:\r\n```\r\n> cdktf synth\r\n\r\nGenerated Terraform code for the stacks:\r\n```\r\n\r\nWe sould show a different text (including some help for example) if no stacks were found\r\n<!--- Please leave a helpful description of the feature request here. --->\r\n\r\n<!--- Information about code formatting: https://help.github.com/articles/basic-writing-and-formatting-syntax/#quoting-code --->\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation?\r\n--->\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5dVRqb",
        "author": {
          "login": "kination"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "@ansgarm is just `no stack exists` will be fine?",
        "createdAt": "2023-05-28T04:10:12Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2793#issuecomment-1565858459",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2023-04-12T13:11:07Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzky",
        "name": "good first issue",
        "description": "Good for newcomers",
        "color": "7057ff"
      },
      {
        "id": "MDU6TGFiZWwyMjYwNjQ0NDQx",
        "name": "cdktf-cli",
        "description": "",
        "color": "82e5de"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMTM2MjgxMDY3",
        "name": "ux/cli",
        "description": "",
        "color": "40FE53"
      }
    ],
    "milestone": null,
    "number": 2793,
    "title": "CLI UX: Nicer output for `cdktf synth` if there are no stacks in an app",
    "updatedAt": "2023-05-28T04:10:12Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "U_kgDOBbto5Q",
      "is_bot": false,
      "login": "toha-nordic",
      "name": "Tomi Hautakoski"
    },
    "body": "<!--- Please keep this note for the community --->\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n\r\n<!--- Thank you for keeping this note for the community --->\r\n\r\n### cdktf & Language Versions\r\n\r\n0.15.5 and 0.16.0 with Typescript. NodeJS v18.16.0.\r\n\r\n### Affected Resource(s)\r\n\r\ncdktf init prints out errors and cdktf deploy fails to execute.\r\n\r\n### Debug Output\r\n\r\nhttps://gist.github.com/toha-nordic/194ec10412d6250f2d1265660387f785\r\n\r\n### Expected Behavior\r\n\r\ncdktf runs without errors.\r\n\r\n### Actual Behavior\r\n```\r\ncdktf deploy\r\nSystemError [ERR_SYSTEM_ERROR]: A system error occurred: uv_os_get_passwd returned ENOENT (no such file or directory)\r\n    at new SystemError (node:internal/errors:250:5)\r\n    at new NodeError (node:internal/errors:361:7)\r\n    at Object.userInfo (node:os:366:11)\r\n    at sbt (/home/linuxbrew/.linuxbrew/Cellar/cdktf/0.16.0/libexec/lib/node_modules/cdktf-cli/bundle/bin/cmds/handlers.js:90:18445)\r\n    at z9e (/home/linuxbrew/.linuxbrew/Cellar/cdktf/0.16.0/libexec/lib/node_modules/cdktf-cli/bundle/bin/cmds/handlers.js:90:19575)\r\n    at /home/linuxbrew/.linuxbrew/Cellar/cdktf/0.16.0/libexec/lib/node_modules/cdktf-cli/bundle/bin/cmds/handlers.js:208:13079\r\n    at e.configureScope (/home/linuxbrew/.linuxbrew/Cellar/cdktf/0.16.0/libexec/lib/node_modules/cdktf-cli/bundle/bin/cdktf.js:13:13455)\r\n    at td (/home/linuxbrew/.linuxbrew/Cellar/cdktf/0.16.0/libexec/lib/node_modules/cdktf-cli/bundle/bin/cmds/handlers.js:78:19214)\r\n    at Object.w8t (/home/linuxbrew/.linuxbrew/Cellar/cdktf/0.16.0/libexec/lib/node_modules/cdktf-cli/bundle/bin/cmds/handlers.js:78:19818)\r\n    at pmr (/home/linuxbrew/.linuxbrew/Cellar/cdktf/0.16.0/libexec/lib/node_modules/cdktf-cli/bundle/bin/cmds/handlers.js:208:13022)\r\nCollecting Debug Information...\r\nThis error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). The promise rejected with the reason:\r\nSystemError [ERR_SYSTEM_ERROR]: A system error occurred: uv_os_get_passwd returned ENOENT (no such file or directory)\r\n    at new SystemError (node:internal/errors:250:5)\r\n    at new NodeError (node:internal/errors:361:7)\r\n    at Object.userInfo (node:os:366:11)\r\n    at sbt (/home/linuxbrew/.linuxbrew/Cellar/cdktf/0.16.0/libexec/lib/node_modules/cdktf-cli/bundle/bin/cmds/handlers.js:90:18445)\r\n    at z9e (/home/linuxbrew/.linuxbrew/Cellar/cdktf/0.16.0/libexec/lib/node_modules/cdktf-cli/bundle/bin/cmds/handlers.js:90:19575)\r\n    at /home/linuxbrew/.linuxbrew/Cellar/cdktf/0.16.0/libexec/lib/node_modules/cdktf-cli/bundle/bin/cmds/handlers.js:208:13079\r\n    at e.configureScope (/home/linuxbrew/.linuxbrew/Cellar/cdktf/0.16.0/libexec/lib/node_modules/cdktf-cli/bundle/bin/cdktf.js:13:13455)\r\n    at td (/home/linuxbrew/.linuxbrew/Cellar/cdktf/0.16.0/libexec/lib/node_modules/cdktf-cli/bundle/bin/cmds/handlers.js:78:19214)\r\n    at Object.w8t (/home/linuxbrew/.linuxbrew/Cellar/cdktf/0.16.0/libexec/lib/node_modules/cdktf-cli/bundle/bin/cmds/handlers.js:78:19818)\r\n    at pmr (/home/linuxbrew/.linuxbrew/Cellar/cdktf/0.16.0/libexec/lib/node_modules/cdktf-cli/bundle/bin/cmds/handlers.js:208:13022)\r\n(node:2968685) PromiseRejectionHandledWarning: Promise rejection was handled asynchronously (rejection id: 3)\r\n(Use `node --trace-warnings ...` to show where the warning was created)\r\nDebug Information:\r\nlanguage: typescript\r\ncdktf-cli: 0.16.0\r\nnode: v18.16.0\r\ncdktf: 0.15.5\r\nconstructs: 10.2.0\r\njsii: null\r\nterraform: 1.4.5\r\narch: x64\r\nos: linux 5.15.0-67-generic\r\n```\r\nAnd init:\r\n```\r\ncdktf init --template=typescript --providers=kreuzwerker/docker --local\r\nCould not run version check - A system error occurred: uv_os_get_passwd returned ENOENT (no such file or directory)\r\nNote: By supplying '--local' option you have chosen local storage mode for storing the state of your stack.\r\nThis means that your Terraform state file will be stored locally on disk in a file 'terraform.<STACK NAME>.tfstate' in the root of your project.\r\n? Project Name tmp\r\n? Project Description A simple getting started project for cdktf.\r\n? Do you want to start from an existing Terraform project? No\r\n? Do you want to send crash reports to the CDKTF team? Refer to \r\nhttps://developer.hashicorp.com/terraform/cdktf/create-and-deploy/configuration-file#enable-crash-reporting-for-the-cli for more information Yes\r\n\r\nadded 2 packages, and audited 57 packages in 2s\r\n\r\n7 packages are looking for funding\r\n  run `npm fund` for details\r\n\r\nfound 0 vulnerabilities\r\n\r\nadded 301 packages, and audited 358 packages in 11s\r\n\r\n37 packages are looking for funding\r\n  run `npm fund` for details\r\n\r\nfound 0 vulnerabilities\r\n========================================================================================================\r\n\r\n  Your cdktf typescript project is ready!\r\n\r\n  cat help                Print this message\r\n\r\n  Compile:\r\n    npm run get           Import/update Terraform providers and modules (you should check-in this directory)\r\n    npm run compile       Compile typescript code to javascript (or \"npm run watch\")\r\n    npm run watch         Watch for changes and compile typescript in the background\r\n    npm run build         Compile typescript\r\n\r\n  Synthesize:\r\n    cdktf synth [stack]   Synthesize Terraform resources from stacks to cdktf.out/ (ready for 'terraform apply')\r\n\r\n  Diff:\r\n    cdktf diff [stack]    Perform a diff (terraform plan) for the given stack\r\n\r\n  Deploy:\r\n    cdktf deploy [stack]  Deploy the given stack\r\n\r\n  Destroy:\r\n    cdktf destroy [stack] Destroy the stack\r\n\r\n  Test:\r\n    npm run test        Runs unit tests (edit __tests__/main-test.ts to add your own tests)\r\n    npm run test:watch  Watches the tests and reruns them on change\r\n\r\n  Upgrades:\r\n    npm run upgrade        Upgrade cdktf modules to latest version\r\n    npm run upgrade:next   Upgrade cdktf modules to latest \"@next\" version (last commit)\r\n\r\n Use Providers:\r\n\r\n  You can add prebuilt providers (if available) or locally generated ones using the add command:\r\n  \r\n  cdktf provider add \"aws@~>3.0\" null kreuzwerker/docker\r\n\r\n  You can find all prebuilt providers on npm: https://www.npmjs.com/search?q=keywords:cdktf\r\n  You can also install these providers directly through npm:\r\n\r\n  npm install @cdktf/provider-aws\r\n  npm install @cdktf/provider-google\r\n  npm install @cdktf/provider-azurerm\r\n  npm install @cdktf/provider-docker\r\n  npm install @cdktf/provider-github\r\n  npm install @cdktf/provider-null\r\n\r\n  You can also build any module or provider locally. Learn more https://cdk.tf/modules-and-providers\r\n\r\n========================================================================================================\r\n\r\nChecking whether pre-built provider exists for the following constraints:\r\n  provider: kreuzwerker/docker\r\n  version : latest\r\n  language: typescript\r\n  cdktf   : 0.16.0\r\n\r\nFound pre-built provider.\r\nAdding package @cdktf/provider-docker @ 7.0.0\r\nInstalling package @cdktf/provider-docker @ 7.0.0 using npm.\r\nPackage installed.\r\n[2023-04-20T09:35:17.444] [ERROR] default - Could not send telemetry data: SystemError [ERR_SYSTEM_ERROR]: A system error occurred: uv_os_get_passwd returned ENOENT (no such file or directory)\r\n```\r\n\r\n### Steps to Reproduce\r\n\r\nIm running on Ubuntu 20.04.06 LTS with 5.15.0-67-generic kernel. NodeJS v18.16.0, Terraform 1.4.5.\r\n\r\n### Important Factoids\r\n\r\nMy guess is that the error is due to this local laptop user not having an entry in /etc/passwd file. The user is provisioned from corporate MS Active Directory service via local realmd+sssd services. I believe this is common configuration in corporate environments.\r\n\r\n### References\r\n\r\n<!---\r\nInformation about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests\r\n\r\nAre there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor documentation? For example:\r\n--->\r\n\r\n- #0000\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5adFY-",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "Hi @toha-nordic üëã\r\n\r\nThank you for the bug report! It seems like the environment you're running in doesn't make it possible for the CDKTF CLI to determine a user home directory using `os.userInfo()` from Node.js.\r\n\r\nHowever, you should be able to work around this by setting the `CDKTF_HOME` environment variable.\r\n\r\nWe should at least print a better error message if this call fails (e.g. hinting at `CDKTF_HOME`) ü§î",
        "createdAt": "2023-04-21T09:50:57Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2825#issuecomment-1517573694",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2023-04-20T06:57:18Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzk3",
        "name": "help wanted",
        "description": "Community contributions welcome as the core team is unlikely to work on this soon",
        "color": "008672"
      },
      {
        "id": "MDU6TGFiZWwyMjYwNjQ0NDQx",
        "name": "cdktf-cli",
        "description": "",
        "color": "82e5de"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "LA_kwDODd1Amc8AAAABH924aQ",
        "name": "bug/has-workaround",
        "description": "A bug with a workaround (may not be elegant)",
        "color": "9e202d"
      }
    ],
    "milestone": null,
    "number": 2825,
    "title": "Getting \"A system error occurred: uv_os_get_passwd returned ENOENT\" errors with MS AD provisioned user",
    "updatedAt": "2023-06-01T14:31:32Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjg1NTExNQ==",
      "is_bot": false,
      "login": "xiehan",
      "name": "Nara Kasbergen Kwon"
    },
    "body": "### Description\n\nSplit from #2818 - we don't have anything in our docs about the `conditional()` feature so it's not easy for users to know that this exists. Note that we'd probably want to prioritize implementing it for all other languages besides TypeScript first before adding the docs page/section, however.\n\n### Links\n\n- https://developer.hashicorp.com/terraform/cdktf/concepts/functions\r\n- #2818\n\n### Help Wanted\n\n- [ ] I'm interested in contributing a fix myself\n\n### Community Note\n\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n",
    "comments": [],
    "createdAt": "2023-06-02T09:17:24Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzgw",
        "name": "documentation",
        "description": "Improvements or additions to documentation",
        "color": "0075ca"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      }
    ],
    "milestone": null,
    "number": 2915,
    "title": "Conditionals: Add documentation page or section",
    "updatedAt": "2023-06-02T09:17:24Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjEyNDg4NTg1",
      "is_bot": false,
      "login": "IhnatKlimchuk",
      "name": "Ihnat Klimchuk"
    },
    "body": "### Description\n\nI use `cdktf` with `@cdktf/provider-azurerm` provider. I use Typescript for managing stacks and constructs. I created a stack with `StorageAccount` from `@cdktf/provider-azurerm/lib/storage-account` like this:\r\n\r\n```\r\n...\r\n    const account = new StorageAccount(this, \"storage-account\", {\r\n      location: this.region,\r\n      accountTier: \"Standard\",\r\n      accountReplicationType: \"LRS\",\r\n      resourceGroupName: this.resourceGroup.name,\r\n      name: `${env.name}${\"servicename\"}`,\r\n    });\r\n...\r\n``` \r\n\r\nin case I open `accountTier` definition I see next:\r\n```\r\n...\r\n/**\r\n* Docs at Terraform Registry: {@link https://registry.terraform.io/providers/hashicorp/azurerm/3.58.0/docs/resources/storage_account#account_tier StorageAccount#account_tier}\r\n*/\r\nreadonly accountTier: string;\r\n...\r\n```\r\nwhile according to docs\r\n```\r\naccount_tier - (Required) Defines the Tier to use for this storage account. Valid options are Standard and Premium. For BlockBlobStorage and FileStorage accounts only Premium is valid. Changing this forces a new resource to be created.\r\n```\r\n\r\nThis approach is looks like very time consuming and requires a lot of hops between code and docs. \r\nSo I would expect to have:\r\n1. Docs copied in place for simpler navigation and code writing. \r\n2. Typed possible options, so I don't need to navigate to landing page each new property\r\n\r\nLike this:\r\n```\r\n...\r\n/** account_tier - (Required) Defines the Tier to use for this storage account. Valid options are \"Standard\" and \"Premium\". For \"BlockBlobStorage\" and \"FileStorage\" accounts only \"Premium\" is valid. Changing this forces a new resource to be created.\r\n* Link - https://registry.terraform.io/providers/hashicorp/azurerm/3.58.0/docs/resources/storage_account#account_tier \r\n*/\r\nreadonly accountTier: \"Standard\" | \"Premium\"; \r\n\r\n// or 'readonly accountTier: \"Standard\" | \"Premium\" | string' for backward compatibility\r\n// or 'readonly accountTier: StorageAccountTiers' with proper docs for each option\r\n...\r\n```\n\n### References\n\n_No response_\n\n### Help Wanted\n\n- [X] I'm interested in contributing a fix myself\n\n### Community Note\n\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5fmprQ",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "Hi @IhnatKlimchuk üëã\n\nWe agree with you! Unfortunately those docs in the Terraform Registry are not available in a structured format so we can't easily include them in the inline docs and there's no enum type information that we can use.\n\nHowever, in the long term we are working with the respective teams that manage these other bits and are aligned on making such information easy to access programmatically which would then allow us to implement what you requested.",
        "createdAt": "2023-06-23T09:03:32Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2945#issuecomment-1603967696",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc7D87Zv",
        "author": {
          "login": "shellscape"
        },
        "authorAssociation": "NONE",
        "body": "checking in two years later to say that this is still sorely needed",
        "createdAt": "2025-09-13T04:16:14Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2945#issuecomment-3287529071",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2023-06-14T16:44:46Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzgw",
        "name": "documentation",
        "description": "Improvements or additions to documentation",
        "color": "0075ca"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "LA_kwDODd1Amc8AAAABUQzWlQ",
        "name": "upstream/registry",
        "description": "Pending upstream work on the Terraform Registry",
        "color": "755CD9"
      }
    ],
    "milestone": null,
    "number": 2945,
    "title": "Add typed enums and inlined docs in CDKTF and related providers",
    "updatedAt": "2025-09-13T04:16:14Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjEzMzcwNDY=",
      "is_bot": false,
      "login": "DanielMSchmidt",
      "name": "Daniel Schmidt"
    },
    "body": "### Description\n\nAs of https://github.com/hashicorp/terraform-cdk/pull/2920 we can handle missing attributes / blocks in HCL. The missing properties are typed as `any` in TS, this cold be more precise.\n\n### References\n\n_No response_\n\n### Help Wanted\n\n- [ ] I'm interested in contributing a fix myself\n\n### Community Note\n\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n",
    "comments": [],
    "createdAt": "2023-07-05T07:39:18Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMTg1Mzg1NTQ2",
        "name": "feature/convert",
        "description": "",
        "color": "d93f0b"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjEz",
        "name": "size/medium",
        "description": "estimated < 1 week",
        "color": "291E63"
      }
    ],
    "milestone": null,
    "number": 2984,
    "title": "Convert: Use precise TS type for partial configuration",
    "updatedAt": "2023-07-14T13:30:03Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "U_kgDOBjqmvA",
      "is_bot": false,
      "login": "josh-thisisbud",
      "name": ""
    },
    "body": "### Description\n\nWhenever I'm attempting to load the Python API reference pages for Terraform CDK, I experience long periods of the page struggling to load and very poor performance in Chrome. \r\n\r\nI believe that this is partly due to the length of the generated content and would like to suggest that the individual sections were split into sub pages with cross-referencing links.\n\n### Links\n\nhttps://developer.hashicorp.com/terraform/cdktf/api-reference/python\n\n### Help Wanted\n\n- [ ] I'm interested in contributing a fix myself\n\n### Community Note\n\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5hgW9F",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "Hi @josh-thisisbud üëã\n\nWe agree this should be addressed! Unfortunately it's not something we'll have capacity to work on soon, but we welcome any community contributions.",
        "createdAt": "2023-07-14T13:32:32Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2995#issuecomment-1635872581",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5hl7o2",
        "author": {
          "login": "kination"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "Agree with this. Maybe it could be better to separate pages for each subtitles (Constructs/Structs/Classes...) into subpages üëÄ ",
        "createdAt": "2023-07-17T03:44:15Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/2995#issuecomment-1637333558",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2023-07-07T15:20:10Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzgw",
        "name": "documentation",
        "description": "Improvements or additions to documentation",
        "color": "0075ca"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      }
    ],
    "milestone": null,
    "number": 2995,
    "title": "API Reference Docs: Python API docs cause my browser to hang on less powerful machines",
    "updatedAt": "2023-07-17T03:44:16Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjExMTIwNTY=",
      "is_bot": false,
      "login": "ansgarm",
      "name": "Ansgar Mertens"
    },
    "body": "### Description\n\nTerraform template strings and heredocs support `%{}` directives ([docs](https://developer.hashicorp.com/terraform/language/expressions/strings#directives)).\r\n\r\nFor example:\r\n```tf\r\n\"Hello, %{ if var.name != \"\" }${var.name}%{ else }unnamed%{ endif }!\"\r\n```\r\n\r\nWe should ensure we handle them properly in convert as well. Furthermore we also need to support their escape sequences (`%%{`)\n\n### References\n\nThis came up when diving into the handling of escape sequences for string interpolation sequences (`$${`) when working on #2911\n\n### Help Wanted\n\n- [ ] I'm interested in contributing a fix myself\n\n### Community Note\n\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n",
    "comments": [],
    "createdAt": "2023-07-21T14:46:23Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMTg1Mzg1NTQ2",
        "name": "feature/convert",
        "description": "",
        "color": "d93f0b"
      }
    ],
    "milestone": null,
    "number": 3022,
    "title": "convert: Support handling template directives (`%{}`)",
    "updatedAt": "2023-07-21T14:47:40Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjU5OTc4MjYx",
      "is_bot": false,
      "login": "fathom-parth",
      "name": "Parth Doshi"
    },
    "body": "### Expected Behavior\r\n\r\nI expect to be able to pass a terraform resource from one stack to another to be used within a resource's `depends_on` argument.\r\n\r\n### Actual Behavior\r\n\r\nInstead, the cross-stack reference errors when running a command like `cdktf diff` or `cdktf deploy` (though succeeds with `synth`) complaining that the resource in `depends_on` is invalid and must be a reference to a \"whole object\".\r\n\r\n### Steps to Reproduce\r\n\r\n1. Create 2 stacks, `stack1` and `stack2`\r\n2. Set an instance variable of `stack1` to a terraform resource. In our case, this is a [`service_networking_connection`](https://registry.terraform.io/providers/hashicorp/google/4.70.0/docs/resources/service_networking_connection).\r\n3. Pass `stack1.service_networking_connection` to `stack2` and have `stack2` pass it to a construct. In that construct define a terraform resource (in our case a [`notebooks_runtime`](https://registry.terraform.io/providers/hashicorp/google/4.70.0/docs/resources/notebooks_runtime)) that adds the `service_networking_connection` to its `depends_on`.\r\n4. Run `cdktf diff 'stack1'`\r\n5. Run `cdktf deploy 'stack2'`\r\n6. Verify this errors with an invalid `depends_on` error.\r\n\r\n### Versions\r\n\r\nlanguage: python\r\ncdktf-cli: 0.17.1\r\nnode: v18.16.1\r\ncdktf: 0.17.1\r\nconstructs: 10.2.69\r\njsii: 1.85.0\r\nterraform: 1.4.6\r\narch: x64\r\nos: linux 5.15.49-linuxkit\r\npython: Python 3.7.16\r\npip: pip 21.3.1 from /usr/local/lib/python3.7/site-packages/pip (python 3.7)\r\npipenv: null\r\n\r\n### Providers\r\n\r\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\r\n‚îÇ Provider Name ‚îÇ Provider Version ‚îÇ CDKTF   ‚îÇ Constraint ‚îÇ Package Name                     ‚îÇ Package Version ‚îÇ\r\n‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\r\n‚îÇ google        ‚îÇ 4.72.1           ‚îÇ ^0.17.0 ‚îÇ            ‚îÇ cdktf-cdktf-provider-google      ‚îÇ 8.0.4           ‚îÇ\r\n‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\r\n‚îÇ google-beta   ‚îÇ 4.72.1           ‚îÇ ^0.17.0 ‚îÇ            ‚îÇ cdktf-cdktf-provider-google-beta ‚îÇ 8.0.4           ‚îÇ\r\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\r\n\r\n### Gist\r\n\r\nhttps://gist.github.com/fathom-parth/b98e9e5c451e1da0e6a5d4494275554b\r\n\r\n### Possible Solutions\r\n\r\n_No response_\r\n\r\n### Workarounds\r\n\r\nCurrently, rather than granularly passing the `TerraformResource` to the relevant resource's `depends_on` argument, I instead set the 2nd stack to be on dependent on the 1st by running\r\n\r\n```python\r\nstack2.add_dependency(stack1)\r\n```\r\n\r\n### Anything Else?\r\n\r\nIt's possible that passing complete `TerraformResource` objects isn't supported since cross-stack references look at remote state? However, I don't see anything in the [documentation](https://developer.hashicorp.com/terraform/cdktf/concepts/stacks#cross-stack-references) that states this.\r\n\r\nPlease let me know if I missed something very obvious.\r\n\r\n### References\r\n\r\n- https://developer.hashicorp.com/terraform/cdktf/concepts/stacks#cross-stack-references\r\n\r\n### Help Wanted\r\n\r\n- [ ] I'm interested in contributing a fix myself\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5irFZb",
        "author": {
          "login": "DanielMSchmidt"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "Hey there, there problem seems to be the usage of cross stack references within custom constructs, the workaround you mentioned is the correct thing to do, although it should ideally not be necessary.",
        "createdAt": "2023-07-28T10:34:23Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/3023#issuecomment-1655461467",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5irGz5",
        "author": {
          "login": "DanielMSchmidt"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "We might not have the capacity for a permanent fix soon, but we are open for community PRs on this topic üëç ",
        "createdAt": "2023-07-28T10:39:08Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/3023#issuecomment-1655467257",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2023-07-21T15:19:01Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzk3",
        "name": "help wanted",
        "description": "Community contributions welcome as the core team is unlikely to work on this soon",
        "color": "008672"
      },
      {
        "id": "MDU6TGFiZWwyMjI4Mzg3NjY3",
        "name": "cdktf",
        "description": "",
        "color": "fccac4"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzMxMzA4",
        "name": "confirmed",
        "description": "independently reproduced by an engineer on the team",
        "color": "4B830E"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMTM2Mjc5MjMx",
        "name": "ux/configuration",
        "description": "",
        "color": "58FCA0"
      },
      {
        "id": "MDU6TGFiZWwzMTQ2NjcxNDUz",
        "name": "feature/multi-stack",
        "description": "",
        "color": "6589C9"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjEz",
        "name": "size/medium",
        "description": "estimated < 1 week",
        "color": "291E63"
      },
      {
        "id": "LA_kwDODd1Amc8AAAABH924aQ",
        "name": "bug/has-workaround",
        "description": "A bug with a workaround (may not be elegant)",
        "color": "9e202d"
      }
    ],
    "milestone": null,
    "number": 3023,
    "title": "Cross-stack dependencies: When referring to a terraform resource across stacks, I receive an invalid reference error",
    "updatedAt": "2023-09-21T21:46:13Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjIwNTg3NTYy",
      "is_bot": false,
      "login": "OliverWessels",
      "name": ""
    },
    "body": "### Expected Behavior\n\nIf a module references a git repository for its source (https://developer.hashicorp.com/terraform/language/modules/sources#generic-git-repository), you may be be prompted during CDKTF commands to enter a passphrase for your SSH key or add to the list of known hosts if you have not cloned from that repo before.\r\n\r\nRunning a command such as `yarn run cdktf get` (with CDKTF set up for an npm package) should pause and show the input prompts to the user.\n\n### Actual Behavior\n\nThe input prompts do very briefly appear (for maybe a single frame) but then get written over by the line `downloading and generating modules and providers...`. Trying to type in values does not work either. The CLI hangs as a result.\r\n\r\nThis appears similar to https://github.com/hashicorp/terraform-cdk/issues/398 where the CLI hangs because it never displays a prompt and receives input from the user.\n\n### Steps to Reproduce\n\n1. Set up the CDKTF CLI with TypeScript\r\n2. Create a Terraform module in a `.tf` file e.g. something like `module \"my_module\" { ... }` with `source` set to a git repository that contains a source module (https://developer.hashicorp.com/terraform/language/modules/sources#generic-git-repository)\r\n3. Remove the repository from `~/.ssh/known_hosts` so that you will be prompted to confirm that you trust the repo.\r\n4. Run `yarn run cdktf get`\n\n### Versions\n\nlanguage: typescript\r\ncdktf-cli: 0.16.3\r\nnode: v19.9.0\r\ncdktf: 0.16.3\r\nconstructs: 10.2.43\r\njsii: null\r\nterraform: 1.4.6\r\narch: arm64\r\nos: linux 5.15.49-linuxkit\n\n### Providers\n\nWe are using SignalFX provider `6.24` and a provider for our own in-house tool. However this is not provider-specific because the CLI is hanging before reaching anything provider-specific.\n\n### Gist\n\n_No response_\n\n### Possible Solutions\n\nI suspect that the CDKTF CLI is not properly passing along stdin / allowing the process to pause and receive input from the user.\n\n### Workarounds\n\nI had to manually run SSH commands before CDKTF, e.g. to try and prevent the case where CDKTF needs input mid-way through. There are still cases where this is not possible though.\n\n### Anything Else?\n\n_No response_\n\n### References\n\n- https://github.com/hashicorp/terraform-cdk/issues/398\r\n- https://developer.hashicorp.com/terraform/language/modules/sources#generic-git-repository\n\n### Help Wanted\n\n- [ ] I'm interested in contributing a fix myself\n\n### Community Note\n\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5jQMnT",
        "author": {
          "login": "DanielMSchmidt"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "That's an unfortunate bug, I think as a workaround you could use e.g. [git submodule](https://git-scm.com/book/en/v2/Git-Tools-Submodules) to download the module and reference it as a local module in your `cdktf.json` file.",
        "createdAt": "2023-08-04T08:06:35Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/3041#issuecomment-1665190355",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5jXR3M",
        "author": {
          "login": "OliverWessels"
        },
        "authorAssociation": "NONE",
        "body": "Thanks for the suggestion @DanielMSchmidt! One other thing I forgot to mention is that we reference different tags of the git repo e.g. using `?ref=7.1.1` and `?ref=7.2.0`, so I think we'd have to to something like checking out each different tag, or cloning the target repo, including tags, and then reference it with git locally somehow (I haven't tried this, would need to dig into feasibility).\r\n\r\nI think it would still be good to address the root cause, in case anything else needs an interactive input during CDKTF commands (e.g. the linked issue about hanging on terraform input).",
        "createdAt": "2023-08-07T01:18:37Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/3041#issuecomment-1667046860",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5yBvzF",
        "author": {
          "login": "razine-bensari"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "@OliverWessels  I stumbled upon a similar issue with `cdktf login` or `cdktf init` and we need standard input (say terraform cloud api token).\r\n\r\nWhat worked for me is the following:\r\n\r\n`cat \"your-standard-input\" | cdktf login`\r\n\r\n\r\nI created an issue here: https://github.com/hashicorp/terraform-cdk/issues/3470\r\nPlanning on raising a fix, hopefully soon",
        "createdAt": "2024-01-27T07:51:51Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/3041#issuecomment-1913060549",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2023-07-31T23:57:46Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMTM2MjgxMDY3",
        "name": "ux/cli",
        "description": "",
        "color": "40FE53"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjEz",
        "name": "size/medium",
        "description": "estimated < 1 week",
        "color": "291E63"
      },
      {
        "id": "LA_kwDODd1Amc8AAAABH924aQ",
        "name": "bug/has-workaround",
        "description": "A bug with a workaround (may not be elegant)",
        "color": "9e202d"
      }
    ],
    "milestone": null,
    "number": 3041,
    "title": "CDKTF CLI: CLI hangs if in interactive input is required during CDKTF commands",
    "updatedAt": "2024-01-27T07:53:33Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjU3NTA0NjIz",
      "is_bot": false,
      "login": "gkaskonas",
      "name": "Giedrius Kaskonas"
    },
    "body": "### Expected Behavior\r\n\r\nShould install using pnp and work\r\n\r\n### Actual Behavior\r\n\r\n```\r\nError: @cdktf/provider-generator tried to access glob, but it isn't declared in its dependencies; this makes the require call ambiguous and unsound.\r\n```\r\n\r\n### Steps to Reproduce\r\n\r\n1. Create a new cdktf project\r\n2. install dependencies\r\n3. run cdktf diff\r\n\r\n### Versions\r\n\r\nlanguage: typescript\r\ncdktf-cli: 0.18.0\r\nnode: v20.5.0\r\ncdktf: null\r\nconstructs: null\r\njsii: null\r\nterraform: 1.3.7\r\narch: arm64\r\nos: darwin 22.6.0\r\n\r\n### Providers\r\n\r\n_No response_\r\n\r\n### Gist\r\n\r\n_No response_\r\n\r\n### Possible Solutions\r\n\r\nFix package.json dependencies\r\n\r\n### Workarounds\r\n\r\n```\r\npackageExtensions:\r\n  \"@cdktf/hcl2cdk@*\":\r\n    dependencies:\r\n      cdktf: 0.18.0\r\n      codemaker: 1.89.0\r\n  \"@cdktf/provider-generator@*\":\r\n    dependencies:\r\n      glob: 10.3.10\r\n  cdktf-cli@*:\r\n    dependencies:\r\n      \"@cdktf/node-pty-prebuilt-multiarch\": \"0.10.1-pre.10\"\r\n```\r\n\r\n### Anything Else?\r\n\r\n_No response_\r\n\r\n### References\r\n\r\n_No response_\r\n\r\n### Help Wanted\r\n\r\n- [ ] I'm interested in contributing a fix myself\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n",
    "comments": [],
    "createdAt": "2023-09-28T11:12:34Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4Mjg1",
        "name": "size/small",
        "description": "estimated < 1 day",
        "color": "4671C0"
      }
    ],
    "milestone": null,
    "number": 3149,
    "title": "Yarn  pnp support",
    "updatedAt": "2023-10-12T15:25:58Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjEwNDAxNzk4",
      "is_bot": false,
      "login": "zmully",
      "name": "Zack Mully"
    },
    "body": "### Description\n\nTesting for the presence of a resource in a construct either requires using a snapshot, or onerously matching the object with `.toHaveResourceWithProperties`. While the CDKTF testing matchers have `.toHaveResource` available, this isn‚Äôt helpful when you have many of a single type resource, it only tests that a resource of type X is present. Additionally, using native Jest matchers doesn‚Äôt help because CDKTF resources are suffixed with a unique id, so instead of `pool_userPoolRecord` it‚Äôs `pool_userPoolRecord_FFA0D2E2`, and this unique id can change if the tests are changed.\r\n\r\nTo simplify testing, especially when a construct calls another construct, and you just want to make sure that the child construct resources are present, it‚Äôd be nice to be able to write a test like `.toHaveResourceWithName('pool_userPoolRecord')` and have it match the `pool_userPoolRecord_FFA0D2E2` resource.\n\n### References\n\n_No response_\n\n### Help Wanted\n\n- [ ] I'm interested in contributing a fix myself\n\n### Community Note\n\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n",
    "comments": [],
    "createdAt": "2023-09-29T16:20:03Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzk3",
        "name": "help wanted",
        "description": "Community contributions welcome as the core team is unlikely to work on this soon",
        "color": "008672"
      },
      {
        "id": "MDU6TGFiZWwyNTcwMTY0OTY5",
        "name": "testing",
        "description": "",
        "color": "456cc6"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      }
    ],
    "milestone": null,
    "number": 3158,
    "title": ".toHaveResourceWithName matcher",
    "updatedAt": "2023-10-12T15:30:07Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjExMTIwNTY=",
      "is_bot": false,
      "login": "ansgarm",
      "name": "Ansgar Mertens"
    },
    "body": "### Description\n\nThere are a some things we sometimes stumble upon in PR reviews, which we could automate for PRs that are ready for review. They all probably can go into lint rules.\r\n\r\n* Using `.only` in tests. We've had instances where these snuck past PR reviews and tests weren't run for some time\r\n* `TODO:`s in new code. Most of us use them for taking notes that only rarely intend to stay in the code that is to be merged\r\n* `console.log` statements. They make sometimes sense but if we're e.g. debugging CI with them, it would be helpful if our linter would help us to remove them again\n\n### References\n\n_No response_\n\n### Help Wanted\n\n- [X] I'm interested in contributing a fix myself\n\n### Community Note\n\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n",
    "comments": [],
    "createdAt": "2023-10-02T13:58:10Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMTU1MzExNDc0",
        "name": "dev-process",
        "description": "Improvements to how CDK for Terraform is developed and built",
        "color": "F6A4ED"
      }
    ],
    "milestone": null,
    "number": 3165,
    "title": "PRs: Add more linting / automatic review",
    "updatedAt": "2023-10-12T15:30:53Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjg4Njc0NTY=",
      "is_bot": false,
      "login": "ScionOfDesign",
      "name": "Scion"
    },
    "body": "### Expected Behavior\n\nI expect that my [custom provider](https://github.com/StudioWhyNot/terraform-provider-installer) I have specified a developer override for via a `.terraformrc` file will be generated properly.\n\n### Actual Behavior\n\nThe `cdktf get` command fails, either from typescript errors in WSL or and invalid character error on windows. It is trying to put the `:` character into type names and file paths. `:` is an invalid file path character on windows.\n\n### Steps to Reproduce\n\n1. Make and install the custom provider [here](https://github.com/StudioWhyNot/terraform-provider-installer) the `make install` command will work on WSL or use the .exe from `make build` on Windows.\r\n2. Create a new `.terraformrc` file such as the following to override the \"installer\" provider with a local dev one:\r\n```\r\nprovider_installation {\r\n  dev_overrides {\r\n    \"registry.terraform.io/shihanng/installer\" = \"/tmp/tfproviders/\"\r\n  }\r\n  direct {}\r\n}\r\n```\r\n3. Set the environment variable: `TF_CLI_CONFIG_FILE=%cd%\\.terraformrc` or for WSL `TF_CLI_CONFIG_FILE=$(pwd)/.terraformrc`\r\n4. Generate a new cdktf project using the `shihanng/installer` provider. (I used C# as the language)\r\n5. Observe a bunch of typescript errors in WSL or the following error on Windows:\r\n```\r\nError: Path contains invalid characters: C:\\Users\\Scion\\AppData\\Local\\Temp\\cdktf.fHeGbu\\providers\\installer\\data-apt:installer\r\n    at Xue.exports.checkPath (C:\\Users\\Scion\\AppData\\Roaming\\npm\\node_modules\\cdktf-cli\\bundle\\bin\\cmds\\handlers.js:39:8584)\r\n    at Vj.exports.makeDir (C:\\Users\\Scion\\AppData\\Roaming\\npm\\node_modules\\cdktf-cli\\bundle\\bin\\cmds\\handlers.js:39:8836)\r\n    at Object.<anonymous> (C:\\Users\\Scion\\AppData\\Roaming\\npm\\node_modules\\cdktf-cli\\bundle\\bin\\cmds\\handlers.js:39:6954)\r\n    at tU.save (C:\\Users\\Scion\\AppData\\Roaming\\npm\\node_modules\\cdktf-cli\\bundle\\bin\\cmds\\handlers.js:44:4597)\r\n    at C:\\Users\\Scion\\AppData\\Roaming\\npm\\node_modules\\cdktf-cli\\bundle\\bin\\cmds\\handlers.js:44:5210\r\n    at Array.map (<anonymous>)\r\n    at iU.save (C:\\Users\\Scion\\AppData\\Roaming\\npm\\node_modules\\cdktf-cli\\bundle\\bin\\cmds\\handlers.js:44:5201)\r\n    at C:\\Users\\Scion\\AppData\\Roaming\\npm\\node_modules\\cdktf-cli\\bundle\\bin\\cmds\\handlers.js:116:14610\r\n    at Xvt (C:\\Users\\Scion\\AppData\\Roaming\\npm\\node_modules\\cdktf-cli\\bundle\\bin\\cmds\\handlers.js:88:71624)\r\n    at async i9e (C:\\Users\\Scion\\AppData\\Roaming\\npm\\node_modules\\cdktf-cli\\bundle\\bin\\cmds\\handlers.js:116:14571) {\r\n  code: 'EINVAL'\r\n}\r\n‚†¶ downloading and generating modules and providers...\r\nError: Path contains invalid characters: C:\\Users\\Scion\\AppData\\Local\\Temp\\cdktf.fHeGbu\\providers\\installer\\data-apt:installer\r\n```\n\n### Versions\n\nlanguage: C#\r\ncdktf: 0.19.0\r\nnode: 20.8.1\r\nterraform: 1.6.1\r\narch: x64\r\nos: Ubuntu 22.04.3 WSL and Windows 11\n\n### Providers\n\nshihanng/installer (developer override)\n\n### Gist\n\n_No response_\n\n### Possible Solutions\n\n_No response_\n\n### Workarounds\n\n_No response_\n\n### Anything Else?\n\n_No response_\n\n### References\n\n_No response_\n\n### Help Wanted\n\n- [ ] I'm interested in contributing a fix myself\n\n### Community Note\n\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n",
    "comments": [],
    "createdAt": "2023-10-18T20:06:18Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwyMjE4NTU2NzE0",
        "name": "windows",
        "description": "",
        "color": "839ad1"
      },
      {
        "id": "MDU6TGFiZWwyMjQ2NzM1NDk1",
        "name": "providers",
        "description": "",
        "color": "2bd8cd"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4MjEz",
        "name": "size/medium",
        "description": "estimated < 1 week",
        "color": "291E63"
      },
      {
        "id": "LA_kwDODd1Amc7WpEvS",
        "name": "ux/integration",
        "description": "",
        "color": "D670CB"
      }
    ],
    "milestone": null,
    "number": 3197,
    "title": "`cdktf get` with a custom provider attempts to generate paths with the invalid character `:`",
    "updatedAt": "2023-11-17T13:00:19Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjQ5OTg3NDI1",
      "is_bot": false,
      "login": "felixmagnus",
      "name": "Felix Magnus"
    },
    "body": "### Expected Behavior\n\nAll dependencies used by a package should be declared in that packages `package.json` file.\r\nThis ensures a safe package resolution & install process independent from the used package manager.\n\n### Actual Behavior\n\nCertain dependencies in different packages are missing an explicit declaration in their respective `package.json`.\r\n\r\nComplete List of missing dependencies by package:\r\n\r\n### `packages/@cdktf/cli-core`\r\n\r\n- `ci-info` is missing (usage is in ` ./src/lib/error-reporting.ts`)\r\n\r\n### `packages/@cdktf/commons`\r\n\r\n- `strip-ansi` is missing (usage is in `./src/util.ts`)\r\n\r\n### `packages/@cdktf/hcl2cdk`\r\n\r\n- `fs-extra` is missing (usage is in `./test/helpers/convert.ts` --> so should be a `devDependency` probably?)\r\n- `execa` is missing (usage is in `./test/helpers/convert.ts` --> so should be a `devDependency` probably?)\r\n- `codemaker` is missing (usage is in `./lib/coerceType.ts`)\r\n\r\n### `packages/@cdktf/provider-generator`\r\n\r\n- `glob` is missing (usage is in `./lib/get/constructs-maker.ts`)\r\n\r\n### `packages/@cdktf/provider-schema`\r\n\r\n- `deepmerge` is missing (usage is in `./src/read.ts`)\r\n\r\n---\r\n\r\nI stumbled across this issue due to our pipeline sometimes failing during a `cdktf deploy` with error messages like:\r\n\r\n```\r\nCannot find module 'strip-ansi'\r\n...\r\nCannot find module 'glob'\r\n...\r\netc.\r\n```\r\n\r\nAs we use turborepo + pnpm (which I know is not officially supported by cdktf) and you have not stumbled over those missing dependency declarations so far my guess is that yarn / lerna workspaces are in some way more forgiving wrt. these declarations (compared to pnpm).\r\n\r\nBesides fixing the issue for our (to be fair unsupported pnpm) usecase I nevertheless think it would be sensible to declare the dependencies explicitly as mentioned above.\n\n### Steps to Reproduce\n\n- Clone the repository.\r\n- Go into any of the mentioned packages:\r\n    - `packages/@cdktf/cli-core`\r\n    - `packages/@cdktf/commons`\r\n    - `packages/@cdktf/hcl2cdk`\r\n    - `packages/@cdktf/provider-generator`\r\n    - `packages/@cdktf/provider-schema`\r\n - Run `npx depcheck` (See [depcheck](https://github.com/depcheck/depcheck)) and look at the \"Missing dependencies\" section\n\n### Versions\n\nI cloned the repository on commit: `e207a50aae198ac7cc78dc40356b35946c9d1ad8` (`origin/main` at that time)\r\nTags: `v0.19.0-pre.34`,  `v0.19.0`\n\n### Providers\n\n_No response_\n\n### Gist\n\n_No response_\n\n### Possible Solutions\n\nAdd the missing dependencies as explicit declarations in the respective `package.json` files.\n\n### Workarounds\n\n-\n\n### Anything Else?\n\nPlease let me know if you need anything else from me, I'll be glad to support further to get the issue resolved.\n\n### References\n\n_No response_\n\n### Help Wanted\n\n- [X] I'm interested in contributing a fix myself\n\n### Community Note\n\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5pqf6K",
        "author": {
          "login": "DanielMSchmidt"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "Thank you for pointing this out, I opened a PR to fix this and added one that runs `depcheck` on PRs so we don't run into this issue again :) yarn is very convenient, but it makes it easy to forget adding the dependencies when everything runs as expected",
        "createdAt": "2023-10-20T13:32:15Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "HEART",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/3199#issuecomment-1772748426",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5pqiIx",
        "author": {
          "login": "felixmagnus"
        },
        "authorAssociation": "NONE",
        "body": "No worries! Great to hear, thanks for reacting so quickly üôÇ ",
        "createdAt": "2023-10-20T13:38:09Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/3199#issuecomment-1772757553",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5qUp25",
        "author": {
          "login": "koshic"
        },
        "authorAssociation": "NONE",
        "body": "> yarn is very convenient, but it makes it easy to forget adding the dependencies when everything runs as expected\r\n\r\nJust enable Yarn PnP and you will see all possible dependency issues, including require / dynamic imports )\r\n\r\nBTW, there is additional missed dependency `@cdktf/node-pty-prebuilt-multiarch` in `cdktf-cli`. It's not a direct dependency, so you can't find any import / require in code. But, it present in the compiled `bundle/bin/cmds/handlers.js`:\r\n<img width=\"458\" alt=\"image\" src=\"https://github.com/hashicorp/terraform-cdk/assets/20106607/eeb57b33-d53b-41e8-8610-0c7cbde26d26\">\r\n\r\nThe root cause is:\r\nhttps://github.com/hashicorp/terraform-cdk/blob/e207a50aae198ac7cc78dc40356b35946c9d1ad8/packages/cdktf-cli/build.ts#L72-L82\r\npackage.json doesn't contains that dependency.\r\n",
        "createdAt": "2023-10-28T12:43:36Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/3199#issuecomment-1783799225",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2023-10-19T12:09:39Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMzE3NzI2NjM4",
        "name": "tech-debt",
        "description": "",
        "color": "191658"
      }
    ],
    "milestone": null,
    "number": 3199,
    "title": "workspace: missing dependencies",
    "updatedAt": "2023-10-28T12:43:36Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjEzNTM0MDE=",
      "is_bot": false,
      "login": "MJohnson459",
      "name": "Michael Johnson"
    },
    "body": "### Expected Behavior\n\nI am running `cdktf destroy` via a python using `subprocess.run`. The exact command is \r\n```python\r\nimport subprocess\r\nsubprocess.run([\"cdktf\", \"destroy\", \"--auto-approve\"], check=True)\r\n```\r\n\r\nWhen this is destroying instances, pressing `ctrl +c` should stop the destroy and leave the `terraform.<stack>.tfstate` file with an accurate list of state.\r\n\n\n### Actual Behavior\n\nThe `terraform.<stack>.tfstate` file is empty.\n\n### Steps to Reproduce\n\nI did a fair bit of testing to try and narrow down what exactly is happening here and get it to the smallest repeatable unit. It seems like the `python` subprocess call is required for the state to be emptied permanently, however using a raw `cdktf destroy` I noticed that the state file is briefly emptied and then recreated. This seems dependent on the size of the state.\r\n\r\nI suspect what is happening is when the subprocess is cancelled, there isn't enough time given for the `cdktf` process to recreate the state file. Normally the `cdktf` process would be given about 10 seconds before the kill is escalated. \r\n\r\n1. Start an instance with a lot of resources. For example many files.\r\n2. Run `cdktf destroy` via python\r\n```python\r\nimport subprocess\r\nsubprocess.run([\"cdktf\", \"destroy\", \"--auto-approve\"], check=True)\r\n```\r\n4. When the resources are being destroyed, press `ctrl +c`.\r\n\r\nI can reliably reproduce this with a ~5MB state file.\n\n### Versions\n\n```\r\n$ cdktf debug\r\nlanguage: python\r\ncdktf-cli: 0.18.0\r\nnode: v18.12.0\r\ncdktf: 0.18.0\r\nconstructs: 10.2.70\r\njsii: 1.89.0\r\nterraform: 1.6.4\r\narch: x64\r\nos: linux 5.15.0-88-generic\r\npython: Python 3.9.6\r\npip: pip 21.1.3 from /home/michael/.pyenv/versions/3.9.6/envs/locus3.9/lib/python3.9/site-packages/pip (python 3.9)\r\npipenv: null\r\n```\n\n### Providers\n\n```\r\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\r\n‚îÇ Provider Name ‚îÇ Provider Version ‚îÇ CDKTF   ‚îÇ Constraint ‚îÇ Package Name                ‚îÇ Package Version ‚îÇ\r\n‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\r\n‚îÇ aws           ‚îÇ 5.19.0           ‚îÇ ^0.18.0 ‚îÇ            ‚îÇ cdktf-cdktf-provider-aws    ‚îÇ 17.0.8          ‚îÇ\r\n‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\r\n‚îÇ random        ‚îÇ 3.5.1            ‚îÇ ^0.18.0 ‚îÇ            ‚îÇ cdktf-cdktf-provider-random ‚îÇ 9.0.0           ‚îÇ\r\n‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\r\n‚îÇ tls           ‚îÇ 4.0.4            ‚îÇ ^0.18.0 ‚îÇ            ‚îÇ cdktf-cdktf-provider-tls    ‚îÇ 8.0.0           ‚îÇ\r\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\r\n```\n\n### Gist\n\n_No response_\n\n### Possible Solutions\n\nIt might be possible to write the state to a temporary file and then swap instead of emptying the existing state and rewriting it.\n\n### Workarounds\n\n_No response_\n\n### Anything Else?\n\n_No response_\n\n### References\n\n_No response_\n\n### Help Wanted\n\n- [ ] I'm interested in contributing a fix myself\n\n### Community Note\n\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5sQ6K4",
        "author": {
          "login": "DanielMSchmidt"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "Hey, could you try to run this outside of python through CDKTF CLI and see if the problem persists? We are using the [AbortController](https://developer.mozilla.org/en-US/docs/Web/API/AbortController) API under the hood and are forwarding the abort signal to the Terraform CLI. If you abort on CDKTF CLI directly I would assume it takes a few seconds for the abort inside Terraform CLI to be processed. If the python package aborts hard directly or after a certain grace period I think a possibly corrupted state file might be a possibility.",
        "createdAt": "2023-11-17T12:54:24Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/3269#issuecomment-1816371896",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5sRKMm",
        "author": {
          "login": "MJohnson459"
        },
        "authorAssociation": "NONE",
        "body": "Hey. Running the `cdktf` directly doesn't _permanently_ remove the state however it is still temporarily in a corrupted state. Do you know why the state file is cleaned at all during the process? I had a look through the code but couldn't find where that happens. Is the state file managed by terraform directly or by the CDK?\r\n\r\nGiven that the updating the state is not being done atomically, it seems likely that other workflows outside the specific python case could also corrupt the state. I'm happy to look into a fix if you can point me in the right direction.\r\n\r\n",
        "createdAt": "2023-11-17T13:31:03Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/3269#issuecomment-1816437542",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5sRK68",
        "author": {
          "login": "DanielMSchmidt"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "The state file is managed by terraform directly, I think it's most likely somewhere in terraform. ",
        "createdAt": "2023-11-17T13:33:16Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/3269#issuecomment-1816440508",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5sRU2K",
        "author": {
          "login": "MJohnson459"
        },
        "authorAssociation": "NONE",
        "body": "It looks like there is already a TODO comment in terraform for this issue\r\nhttps://github.com/hashicorp/terraform/blob/1f9734619f953ecc7252d7b98a6d40d751b4ea1e/internal/states/statemgr/filesystem.go#L124C1-L129C18",
        "createdAt": "2023-11-17T13:59:38Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/3269#issuecomment-1816481162",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2023-11-16T17:39:30Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMTM2MjgxMDY3",
        "name": "ux/cli",
        "description": "",
        "color": "40FE53"
      },
      {
        "id": "MDU6TGFiZWwzMjA1MTIxODAz",
        "name": "enhancement/new-workflow",
        "description": "Proposed new workflow",
        "color": "4A1023"
      }
    ],
    "milestone": null,
    "number": 3269,
    "title": "cdktf: Large `terraform.<stack>.tfstate` file is cleaned when `destroy` is cancelled",
    "updatedAt": "2023-11-17T13:59:39Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjMwOTE1NTg=",
      "is_bot": false,
      "login": "shinebayar-g",
      "name": "Shinebayar G."
    },
    "body": "### Description\r\n\r\nCurrently Construct naming experience is not consistent with Terraform. Consider the following example:\r\n\r\n```ts\r\nclass DevStack extends TerraformStack {\r\n    constructor(scope: Construct, id: string) {\r\n        super(scope, id);\r\n\r\n        new GoogleProvider(this, \"dev\", {\r\n            project: \"foo\",\r\n        });\r\n\r\n        const vpc = new ComputeNetwork(this, \"main\", {\r\n            name: \"main\",\r\n            routingMode: \"REGIONAL\",\r\n            autoCreateSubnetworks: false,\r\n        });\r\n\r\n        new ComputeRoute(this, \"main\", {\r\n            name: \"egress-internet\",\r\n            description: \"route through IGW to access internet\",\r\n            destRange: \"0.0.0.0/0\",\r\n            network: vpc.id,\r\n            nextHopGateway: \"default-internet-gateway\",\r\n        });\r\n    }\r\n}\r\n```\r\n\r\nAbove code will give an error:\r\n\r\n```node\r\nthrow new Error(`There is already a Construct with name '${childName}' in ${typeName}${name.length > 0 ? ' [' + name + ']' : ''}`);\r\nError: There is already a Construct with name 'main' in DevStack [dev]\r\n```\r\n\r\nIdeally resource names shouldn't include resource types. In Terraform, we just name it as  `google_compute_network.main` and `google_compute_route.main` as described in https://developer.hashicorp.com/terraform/language/resources/syntax#resource-syntax\r\n\r\nBecause of this we're forced to duplicate the resource type in the name to get around the error.\r\n```ts\r\nclass DevStack extends TerraformStack {\r\n    constructor(scope: Construct, id: string) {\r\n        super(scope, id);\r\n\r\n        new GoogleProvider(this, \"dev\", {\r\n            project: \"foo\",\r\n        });\r\n\r\n        const vpc = new ComputeNetwork(this, \"main-vpc\", {\r\n            name: \"main\",\r\n            routingMode: \"REGIONAL\",\r\n            autoCreateSubnetworks: false,\r\n        });\r\n\r\n        new ComputeRoute(this, \"main-route\", {\r\n            name: \"egress-internet\",\r\n            description: \"route through IGW to access internet\",\r\n            destRange: \"0.0.0.0/0\",\r\n            network: vpc.id,\r\n            nextHopGateway: \"default-internet-gateway\",\r\n        });\r\n    }\r\n}\r\n```\r\n\r\nwhich ultimately leaks to the terraform resource names:\r\n\r\n```tf\r\n     Terraform will perform the following actions:\r\ndev    # google_compute_network.main-vpc (main-vpc) will be created\r\n       + resource \"google_compute_network\" \"main-vpc\" {\r\n           + auto_create_subnetworks                   = false\r\n           + delete_default_routes_on_create           = false\r\n           + gateway_ipv4                              = (known after apply)\r\n           + id                                        = (known after apply)\r\n           ...\r\n\r\n       # google_compute_route.main-route (main-route) will be created\r\n       + resource \"google_compute_route\" \"main-route\" {\r\n           + description            = \"route through IGW to access internet\"\r\n           + dest_range             = \"0.0.0.0/0\"\r\n           + id                     = (known after apply)\r\n           + name                   = \"egress-internet\"\r\n           + network                = (known after apply)\r\n           ...\r\n```\r\n\r\nResources declared inside `Construct`s even have random suffix attached to them which makes this constraint even more meaningless.\r\n\r\n### References\r\n\r\nhttps://developer.hashicorp.com/terraform/language/resources/syntax#resource-syntax\r\n\r\n### Help Wanted\r\n\r\n- [ ] I'm interested in contributing a fix myself\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5szXjV",
        "author": {
          "login": "ansgarm"
        },
        "authorAssociation": "MEMBER",
        "body": "Hi @shinebayar-g üëã\r\n\r\nThank you for raising this. I agree from a Terraform point of view ‚Äì unfortunately, we can't control this, as the underlying [construct](https://github.com/aws/constructs) package (which is used by all CDKs), makes no distinction between types of constructs and requires a unique name within each scope.\r\n\r\nHowever, you can work around this by using `.overrideLocalId()`:\r\n\r\n```ts\r\nnew RandomProvider(this, \"random\");\r\n\r\nnew Password(this, \"password\", { length: 16 });\r\nconst pet = new Pet(this, \"pet-password\", {});\r\npet.overrideLogicalId(\"password\");\r\n```\r\n\r\nproduces:\r\n```json\r\n\"resource\": {\r\n    \"random_password\": {\r\n      \"password\": {\r\n        \"//\": {\r\n          \"metadata\": {\r\n            \"path\": \"test-override/password\",\r\n            \"uniqueId\": \"password\"\r\n          }\r\n        },\r\n        \"length\": 16\r\n      }\r\n    },\r\n    \"random_pet\": {\r\n      \"password\": {\r\n        \"//\": {\r\n          \"metadata\": {\r\n            \"path\": \"test-override/pet-password\",\r\n            \"uniqueId\": \"password\"\r\n          }\r\n        }\r\n      }\r\n    }\r\n  },\r\n```",
        "createdAt": "2023-11-24T09:48:26Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 2
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/3290#issuecomment-1825405141",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5szZK_",
        "author": {
          "login": "DanielMSchmidt"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "If you feel strongly about keeping the terraform naming conventions in place in your CDKTF application you can extend the existing resources:\r\n\r\n```ts\r\nimport { S3Bucket, S3BucketConfig } from \"./.gen/providers/aws/s3-bucket\"\r\n\r\nclass BetterS3Bucket extends S3Bucket {\r\n  constructor(scope: Construct, name: string, config: S3BucketConfig) {\r\n    super(scope, `${S3Bucket.tfResourceType}-${name}`, config);\r\n    this.overrideLogicalId(name)\r\n  }\r\n}\r\n```\r\n\r\nFor this class the same constraints as in Terraform would apply.",
        "createdAt": "2023-11-24T09:52:24Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 2
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/3290#issuecomment-1825411775",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5s1hrw",
        "author": {
          "login": "shinebayar-g"
        },
        "authorAssociation": "NONE",
        "body": "Thanks for the explanation and workarounds.\r\n\r\n> as the underlying [construct](https://github.com/aws/constructs) package (which is used by all CDKs), makes no distinction between types of constructs and requires a unique name within each scope.\r\n\r\nIt looks like every resource is extended from `cdktf.TerraformResource` class and has `tfResourceType` property. Maybe using this information it might be doable.\r\nI hope this limitation will be improved in the future.",
        "createdAt": "2023-11-24T18:09:40Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/3290#issuecomment-1825970928",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc573dsz",
        "author": {
          "login": "StefanTheWiz"
        },
        "authorAssociation": "NONE",
        "body": "> If you feel strongly about keeping the terraform naming conventions in place in your CDKTF application \r\n\r\nErr... we do feel strongly about this. CDKTF will be a tough sell in any organisation unless it saves us time writing code.\r\n\r\n> Thank you for raising this. I agree from a Terraform point of view ‚Äì unfortunately, we can't control this, as the underlying [construct](https://github.com/aws/constructs) package (which is used by all CDKs), makes no distinction between types of constructs and requires a unique name within each scope.\r\n\r\nI don't fully agree with the \"we can't control this\" part.\r\n\r\nChild classes of `Construct` that are defined in the `cdktf` package have access to the element type so one of these classes that's closest to the `Construct` class in terms of hierarchy could prefix the id with the element/resource type before passing it to the parent class, no?\r\n\r\n\r\nIn terms of practical solutions for people who might have wasted time looking into a nice hack for this, I just gave up and used `uuid` for now üòÑ \r\n```js\r\nimport { S3BucketServerSideEncryptionConfigurationA } from \"@cdktf/provider-aws/lib/s3-bucket-server-side-encryption-configuration\";\r\nimport { v4 as uuid } from \"uuid\";\r\n\r\nnew S3BucketServerSideEncryptionConfigurationA(this, uuid(), {\r\n      bucket: \"my-bucket\",\r\n      rule: [{ applyServerSideEncryptionByDefault: { sseAlgorithm: \"aws:kms\" } }],\r\n    }).overrideLogicalId(id);\r\n```\r\n\r\nCode brevity is really appreciated, especially for long resource names like `S3BucketServerSideEncryptionConfiguration`...\r\n",
        "createdAt": "2024-04-25T20:40:49Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 2
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/3290#issuecomment-2078137139",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc6KzVev",
        "author": {
          "login": "MiguelAraCo"
        },
        "authorAssociation": "NONE",
        "body": "The following patches seem to be working on my side (haven't done extensive testing):\r\n\r\n`constructs`\r\n\r\n```patch\r\ndiff --git a/lib/construct.js b/lib/construct.js\r\nindex 4bb61d6c0c27e4fcd5a3abcd4fbd762827804890..cbe28b328b94660a8c58be1cbc8a0d339d1dd2aa 100644\r\n--- a/lib/construct.js\r\n+++ b/lib/construct.js\r\n@@ -20,7 +20,9 @@ class Node {\r\n     static of(construct) {\r\n         return construct.node;\r\n     }\r\n-    constructor(host, scope, id) {\r\n+    // Store originalId to allow constructs with different types to have the same id\r\n+    // See: https://github.com/hashicorp/terraform-cdk/issues/3290\r\n+    constructor(host, scope, id, originalId) {\r\n         this.host = host;\r\n         this._locked = false; // if this is \"true\", addChild will fail\r\n         this._children = {};\r\n@@ -30,6 +32,7 @@ class Node {\r\n         this._validations = new Array();\r\n         id = id ?? ''; // if undefined, convert to empty string\r\n         this.id = sanitizeId(id);\r\n+        this.originalId = originalId !== undefined ? sanitizeId(originalId) : undefined;\r\n         this.scope = scope;\r\n         if (scope && !this.id) {\r\n             throw new Error('Only root constructs may have an empty ID');\r\n@@ -422,8 +425,8 @@ class Construct {\r\n      * the ID includes a path separator (`/`), then it will be replaced by double\r\n      * dash `--`.\r\n      */\r\n-    constructor(scope, id) {\r\n-        this.node = new Node(this, scope, id);\r\n+    constructor(scope, id, originalId) {\r\n+        this.node = new Node(this, scope, id, originalId);\r\n         // implement IDependable privately\r\n         dependency_1.Dependable.implement(this, {\r\n             dependencyRoots: [this],\r\n\r\n```\r\n\r\n`cdktf`\r\n\r\n```patch\r\ndiff --git a/lib/terraform-element.js b/lib/terraform-element.js\r\nindex 7c142f61c501b2072959219daaafa3b744c7d3fe..bf61f1b5f24e17e66f90938b0216613244117962 100644\r\n--- a/lib/terraform-element.js\r\n+++ b/lib/terraform-element.js\r\n@@ -12,10 +12,20 @@ const terraform_stack_1 = require(\"./terraform-stack\");\r\n const tfExpression_1 = require(\"./tfExpression\");\r\n const errors_1 = require(\"./errors\");\r\n const TERRAFORM_ELEMENT_SYMBOL = Symbol.for(\"cdktf/TerraformElement\");\r\n+\r\n+function sanitize(prefix) {\r\n+  return prefix.replaceAll(/[^a-z0-9-_]/ig, \"_\");\r\n+}\r\n+\r\n // eslint-disable-next-line jsdoc/require-jsdoc\r\n class TerraformElement extends constructs_1.Construct {\r\n     constructor(scope, id, elementType) {\r\n-        super(scope, id);\r\n+        // Store originalId to allow constructs with different types to have the same id\r\n+        // See: https://github.com/hashicorp/terraform-cdk/issues/3290\r\n+        const originalId = id;\r\n+        id = sanitize(`${elementType ?? new.target.name}_${id}`);\r\n+\r\n+        super(scope, id, originalId);\r\n         this.rawOverrides = {};\r\n         Object.defineProperty(this, TERRAFORM_ELEMENT_SYMBOL, { value: true });\r\n         this._elementType = elementType;\r\ndiff --git a/lib/terraform-stack.js b/lib/terraform-stack.js\r\nindex 4fa973fda6420cb134dc14650cd5e7cdc4bd4e7f..9eceee623995a5fd247a47b009adfe6e2958c49e 100644\r\n--- a/lib/terraform-stack.js\r\n+++ b/lib/terraform-stack.js\r\n@@ -136,7 +136,9 @@ class TerraformStack extends constructs_1.Construct {\r\n             ? tfElement.cdktfStack\r\n             : this;\r\n         const stackIndex = node.scopes.indexOf(stack);\r\n-        const components = node.scopes.slice(stackIndex + 1).map((c) => c.node.id);\r\n+        // Store originalId to allow constructs with different types to have the same id\r\n+        // See: https://github.com/hashicorp/terraform-cdk/issues/3290\r\n+        const components = node.scopes.slice(stackIndex + 1).map((c) => c.node.originalId ?? c.node.id);\r\n         return components.length > 0 ? (0, unique_1.makeUniqueId)(components) : \"\";\r\n     }\r\n     allProviders() {\r\n\r\n```\r\n\r\nAfter applying those patches, internally `cdktf` should use an id that has the element type baked into it, and use the defined id when generating the terraform state, so this should work as expected:\r\n\r\n```typescript\r\nclass DevStack extends TerraformStack {\r\n    constructor(scope: Construct, id: string) {\r\n        super(scope, id);\r\n\r\n        new GoogleProvider(this, \"dev\", {\r\n            project: \"foo\",\r\n        });\r\n\r\n        // cdktf id = ComputeNetwork_main\r\n        // state id = google_compute_network.main\r\n        const vpc = new ComputeNetwork(this, \"main\", {\r\n            name: \"main\",\r\n            routingMode: \"REGIONAL\",\r\n            autoCreateSubnetworks: false,\r\n        });\r\n\r\n        // cdktf id = ComputeRoute_main\r\n        // state id = google_compute_route.main\r\n        new ComputeRoute(this, \"main\", {\r\n            name: \"egress-internet\",\r\n            description: \"route through IGW to access internet\",\r\n            destRange: \"0.0.0.0/0\",\r\n            network: vpc.id,\r\n            nextHopGateway: \"default-internet-gateway\",\r\n        });\r\n    }\r\n}\r\n```",
        "createdAt": "2024-09-04T11:38:02Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "HEART",
            "users": {
              "totalCount": 3
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/3290#issuecomment-2328713135",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2023-11-23T03:01:01Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMTM2Mjc5MjMx",
        "name": "ux/configuration",
        "description": "",
        "color": "58FCA0"
      }
    ],
    "milestone": null,
    "number": 3290,
    "title": "cdktf: construct name should be unique per resource type [same as terraform]",
    "updatedAt": "2024-09-04T12:00:07Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjU5NzgxMg==",
      "is_bot": false,
      "login": "wandergeek",
      "name": "Nick Clark"
    },
    "body": "### Description\r\n\r\nThe example provided in the npm docs is broken: https://www.npmjs.com/package/@cdktf/hcl2cdk. \r\n\r\nI got the simple inline example working like so. I'm unsure if this can be further simplified.\r\n```typescript\r\nimport * as hcl2cdk from \"@cdktf/hcl2cdk\";\r\nimport {readSchema} from \"@cdktf/provider-schema\";\r\nimport { ConstructsMakerProviderTarget, LANGUAGES, TerraformProviderConstraint } from \"@cdktf/commons\";\r\n\r\nconst hcl = `\r\n  variable \"name\" {\r\n    description = \"Name to be used on all the resources as identifier\"\r\n    type        = string\r\n    default     = \"\"\r\n  }\r\n`;\r\n\r\n(async () => {\r\n    const providerRequirements = await hcl2cdk.parseProviderRequirements(hcl);\r\n    const targets = Object.entries(providerRequirements).map(([name, version]) =>\r\n    ConstructsMakerProviderTarget.from(\r\n      new TerraformProviderConstraint(`${name}@ ${version}`),\r\n      LANGUAGES[0]\r\n    )\r\n  );\r\n  const { providerSchema } = await readSchema(targets);\r\n  const ts = await hcl2cdk.convert(hcl, { \r\n    language: \"typescript\",\r\n    providerSchema: providerSchema\r\n   });\r\n  console.log(ts.imports); // just the necessary imports\r\n  console.log(ts.code); // just the constructs\r\n  console.log(ts.all); // code with imports\r\n})();\r\n```\r\n\r\n\r\nIt'd be excellent to update the docs indicating the split/rename of some of these fields and exports. I'm unsure how the project conversion works at this time, would appreciate some guidance here. \r\n\r\n### Links\r\n\r\nhttps://www.npmjs.com/package/@cdktf/hcl2cdk\r\n\r\n### Help Wanted\r\n\r\n- [x] I'm interested in contributing a fix myself\r\n\r\n### Community Note\r\n\r\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5uFT5_",
        "author": {
          "login": "DanielMSchmidt"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "Hey, good point, if you got the capacity we'd love to receive a PR on this topic. [This section](https://github.com/hashicorp/terraform-cdk/blob/main/packages/cdktf-cli/src/bin/cmds/helper/init.ts#L176C28-L202) is what is used for the project conversion :)",
        "createdAt": "2023-12-08T09:56:57Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/3292#issuecomment-1846886015",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2023-11-27T00:42:28Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzgw",
        "name": "documentation",
        "description": "Improvements or additions to documentation",
        "color": "0075ca"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMTg1Mzg1NTQ2",
        "name": "feature/convert",
        "description": "",
        "color": "d93f0b"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4Mjg1",
        "name": "size/small",
        "description": "estimated < 1 day",
        "color": "4671C0"
      }
    ],
    "milestone": null,
    "number": 3292,
    "title": "hcl2cdk: example is broken",
    "updatedAt": "2023-12-08T09:57:20Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjg3NDM3Nzc=",
      "is_bot": false,
      "login": "Zman94",
      "name": "Zach Gleason"
    },
    "body": "### Expected Behavior\n\n`cdktf init --template=` should allow more methods to use a remote template including a local path.\n\n### Actual Behavior\n\n`cdktf init --template` requires a zip file which, I presume, uses `curl` or `wget` under the hood to pull. This prevents users from using repositories that they have access to, but can't authenticate with using curl or wget\n\n### Steps to Reproduce\n\n* Fork [python poetry remote template](https://github.com/johnfraney/cdktf-remote-template-python-poetry/tree/main/python-poetry).\r\n* make the repo private\r\n* Create a release\r\n* `cdktf init --template='<path to release' --local`\r\n* Observe the following error\r\n```\r\nExtracting zip file\r\nError: end of central directory record signature not found\r\n    at /usr/local/lib/node_modules/cdktf-cli/bundle/bin/cmds/handlers.js:110:448419\r\n    at /usr/local/lib/node_modules/cdktf-cli/bundle/bin/cmds/handlers.js:110:456137\r\n    at /usr/local/lib/node_modules/cdktf-cli/bundle/bin/cmds/handlers.js:110:438097\r\n    at FSReqCallback.wrapper [as oncomplete] (node:fs:682:5)\r\n```\n\n### Versions\n\ncdktf debug\r\nlanguage: null\r\ncdktf-cli: 0.17.1\r\nnode: v18.16.0\r\nterraform: 1.4.6\r\narch: x64\r\nos: linux 6.2.0-1016-azure\n\n### Providers\n\n_No response_\n\n### Gist\n\n_No response_\n\n### Possible Solutions\n\n_No response_\n\n### Workarounds\n\n_No response_\n\n### Anything Else?\n\n_No response_\n\n### References\n\n_No response_\n\n### Help Wanted\n\n- [ ] I'm interested in contributing a fix myself\n\n### Community Note\n\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5tdLJE",
        "author": {
          "login": "Zman94"
        },
        "authorAssociation": "NONE",
        "body": "Additional info:\r\nThe line that would need to change to support a local ref is here\r\nhttps://github.com/hashicorp/terraform-cdk/blob/49558e5435c7858851eb102dddc788f8d4b6e640/packages/cdktf-cli/src/bin/cmds/helper/init.ts#L464.\r\n\r\nAlso, when I wget my file, I get an html page directing me to a single sign on.",
        "createdAt": "2023-12-01T16:05:02Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/3320#issuecomment-1836364356",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5uFWTx",
        "author": {
          "login": "DanielMSchmidt"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "I understand when you write `<path to release>` that it would refer to something like `../my-cloned-dir/` which is not the intended usage. Instead [you should be using an URL to the GitHub repo, e.g. `https://github.com/<user or organization>/<repo>/archive/refs/heads/main.zip`](https://developer.hashicorp.com/terraform/cdktf/create-and-deploy/remote-templates#distribute-remote-templates). If you would want local files to work that would change the interface. You could create a for that PR if you like :)",
        "createdAt": "2023-12-08T10:04:20Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/3320#issuecomment-1846895857",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc5uGql5",
        "author": {
          "login": "Zman94"
        },
        "authorAssociation": "NONE",
        "body": "Is there guidance to running this with a private repo or an enterprise repo? There's no authentication that I could find in the code, so I was only ever able to download an HTML file pointing to a single sign on page\r\n",
        "createdAt": "2023-12-08T14:16:53Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/3320#issuecomment-1847241081",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2023-12-01T15:46:03Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzc1",
        "name": "bug",
        "description": "Something isn't working",
        "color": "d73a4a"
      },
      {
        "id": "MDU6TGFiZWwyMjYwNjQ0NDQx",
        "name": "cdktf-cli",
        "description": "",
        "color": "82e5de"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "LA_kwDODd1Amc7x0kYM",
        "name": "feature/init",
        "description": "cdktf init related features",
        "color": "C1E24A"
      }
    ],
    "milestone": null,
    "number": 3320,
    "title": "Can't use remote template on private repo",
    "updatedAt": "2023-12-18T09:56:58Z"
  },
  {
    "assignees": [],
    "author": {
      "id": "MDQ6VXNlcjI0NzA2NDk=",
      "is_bot": false,
      "login": "lkleen",
      "name": "Lars Kleen"
    },
    "body": "### Description\n\nThe detection of the usage of pnpm is based on the assumption that there is a pnpm.lock.yaml file in the same directory as the cdktf configuration. In a monorepo project which has a separate folder for infrastructure code this is not the case. pnpm usage is not correctly detected as the pnpm lock file is located in the root directory of the project by default.\r\n\r\nI would suggest to avoid automatic detection based on assumptions and add a packageManager parameter to cdktf.json. This would ensure the correct package manager is utilized in every case and provides a clearly spcified and visible configuration. It would also simplify the implementation.\n\n### References\n\nhttps://github.com/hashicorp/terraform-cdk/pull/2959/commits/69b13becd5244bac348cd0e7b39ef02144ccf2e5#\n\n### Help Wanted\n\n- [X] I'm interested in contributing a fix myself\n\n### Community Note\n\n- Please vote on this issue by adding a üëç [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request\r\n- Please do not leave \"+1\" or other comments that do not add relevant new information or questions, they generate extra noise for issue followers and do not help prioritize the request\r\n- If you are interested in working on this issue or have submitted a pull request, please leave a comment\r\n",
    "comments": [
      {
        "id": "IC_kwDODd1Amc5xRkWC",
        "author": {
          "login": "DanielMSchmidt"
        },
        "authorAssociation": "CONTRIBUTOR",
        "body": "> I would suggest to avoid automatic detection based on assumptions and add a packageManager parameter to cdktf.json.\r\n\r\nI would fear this adding a point of confusion since it is one more thing people could misconfigure. I'd vote for fixing the bug at hand and see if similar issues arise in the future.",
        "createdAt": "2024-01-19T13:30:37Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/3441#issuecomment-1900430722",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc6PK9LB",
        "author": {
          "login": "lewisloofis"
        },
        "authorAssociation": "NONE",
        "body": "Hi, any update on this issue? I also experienced this problem",
        "createdAt": "2024-10-09T11:05:28Z",
        "includesCreatedEdit": false,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "totalCount": 1
            }
          }
        ],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/3441#issuecomment-2402013889",
        "viewerDidAuthor": false
      },
      {
        "id": "IC_kwDODd1Amc6VpBDy",
        "author": {
          "login": "vincenthsh"
        },
        "authorAssociation": "NONE",
        "body": "I added a dummy `pnpm-lock.yaml` file in the sub directory to work around these errors.. seems to trick cdktf-cli.\r\n\r\nA nice set of pkgs to handle tool detection is available in https://github.com/Thinkmill/manypkg/blob/main/packages/find-root\r\n",
        "createdAt": "2024-12-02T04:32:06Z",
        "includesCreatedEdit": true,
        "isMinimized": false,
        "minimizedReason": "",
        "reactionGroups": [],
        "url": "https://github.com/hashicorp/terraform-cdk/issues/3441#issuecomment-2510557426",
        "viewerDidAuthor": false
      }
    ],
    "createdAt": "2024-01-19T08:00:22Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwxNzc1NzEyNzg3",
        "name": "enhancement",
        "description": "New feature or request",
        "color": "a2eeef"
      },
      {
        "id": "MDU6TGFiZWwyMjYwNjQ0NDQx",
        "name": "cdktf-cli",
        "description": "",
        "color": "82e5de"
      },
      {
        "id": "MDU6TGFiZWwzMTMwNzgyNzYx",
        "name": "priority/backlog",
        "description": "Low priority (though possibly still important). Unlikely to be worked on within the next 6 months.",
        "color": "30649B"
      },
      {
        "id": "MDU6TGFiZWwzMjIzNzk4Mjg1",
        "name": "size/small",
        "description": "estimated < 1 day",
        "color": "4671C0"
      }
    ],
    "milestone": null,
    "number": 3441,
    "title": "CLI: pnpm detection in a subdirectory of a mopnorepo does not work",
    "updatedAt": "2024-12-04T01:42:23Z"
  }
]
